{"version":3,"sources":["Common/MovieAPI.js","Login/UserContext.js","Common/MovieSeen.js","MovieList/MovieCard.jsx","ApplicationContext.js","Common/MoviesContext.js","Common/MultiDownshift.jsx","shared.js","Common/MultiDownshiftWithReverse.jsx","Common/AsyncMultiDownshift.jsx","MovieList/MoviesFilter.js","Common/SingleDownshift.jsx","Common/Accordion.jsx","MovieList/MovieForm.jsx","MovieList/List.js","Common/EditableField.js","Movie/Season/Episode.js","Common/hooks.js","Movie/Season/Season.js","Movie/Movie.js","Common/Fetch.jsx","Header.js","Statistics/Statistics.js","Common/TagAPI.js","Admin/Tag.js","Admin/TagList.js","App.js","Login/Login.js","index.js"],"names":["controller","UserContext","React","createContext","withUser","Component","props","react_default","a","createElement","Consumer","user","Object","assign","LOGOUT","Symbol","LOGIN","LOGIN_FAILED","handleResponse","response","ok","json","Error","UserProvider","_React$Component","_getPrototypeOf2","_this","classCallCheck","this","_len","arguments","length","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","concat","state","token","status","login","bind","assertThisInitialized","inherits","createClass","key","value","_this2","localStorage","getItem","fetch","method","headers","Accept","Content-Type","Authorization","then","_ref","exp","Date","setState","password","_this3","body","JSON","stringify","_ref2","setItem","catch","Provider","children","MovieSeen","seen","onClick","_ref$partial","partial","className","style","color","cursor","getMovies","abortable","search","abort","AbortController","signal","updateMovie","movie","_id","updateSeason","season","MovieCard","onEdit","onChange","onDelete","update","field","objectSpread","defineProperty","title","subtitle","productionYear","genre","join","Link","to","position","top","right","type","finished","netflix","MovieSeen_MovieSeen","every","seasons","map","episodes","some","window","confirm","deleteMovie","src","fileUrl","alt","ApplicationContext","LOADING","LOADED","ApplicationProvider","genres","types","options","Promise","all","slicedToArray","MoviesContext","MoviesProvider","add","movies","toConsumableArray","id","index","findIndex","filter","Boolean","addAll","data","count","_ref3","invalidate","name","undefined","_ref4","filters","limit","MultiDownshift","selectedItems","stateReducer","changes","Downshift","stateChangeTypes","keyDownEnter","clickItem","highlightedIndex","isOpen","callOnChange","downshift","getStateAndHelpers","handleSelection","selectedItem","includes","removeItem","addSelectedItem","item","cb","i","getRemoveButtonProps","objectWithoutProperties","e","stopPropagation","prevProps","_this$props","render","_this$props$children","downshift_esm","css","emoCSS","Item","styled","display","border","height","textAlign","borderTop","lineHeight","fontSize","textTransform","fontWeight","boxShadow","padding","whiteSpace","wordWrap","isActive","isSelected","styles","push","background","BaseMenu","marginTop","backgroundColor","width","maxHeight","overflowY","overflowX","outline","transition","borderRadius","borderColor","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","zIndex","Menu","forwardRef","ref","innerRef","ControllerButton","flexDirection","justifyContent","alignItems","ArrowIcon","viewBox","preserveAspectRatio","fill","stroke","strokeWidth","transform","d","MultiDownshiftWithReverse","clickOnItem","newSelectedItems","displayItem","displayBackground","itemToFind","find","BaseMultiDownshift","BaseComponent","_Component","_class","handleChange","placeholder","items","getToggleButtonProps","getMenuProps","getItemProps","toggleMenu","_ref$clickOnItem","_ref$displayItem","identity","_ref$displayBackgroun","_ref$isSelected","margin","paddingRight","flexWrap","paddingLeft","event","preventDefault","gridGap","gridAutoFlow","AsyncMultiDownshift","AsyncMultiDownshiftwithReverse","fromEvent","target","forInput","from","MoviesFilter","_useContext","useContext","_useContext2","parseInt","max","minWidth","icon","renderSeen","renderNetflix","renderFinished","SingleDownshift","getInputProps","getLabelProps","inputValue","Accordion","open","toggle","react","defaultState","summary","allocine","tvshows","MovieFormWithContext","valid","isEmpty","onAdd","$","modal","onUpdate","synchronizeMovieAllocine","idAllocine","m","sort","release","releaseDate","getFullYear","synopsis","poster","href","synchronizeTvShowAllocine","tvseries","yearStart","onInput","onSelect","on","onClose","application","tabIndex","role","data-show","data-dismiss","aria-label","aria-hidden","htmlFor","aria-describedby","paddingTop","Accordion_Accordion","_ref5","code","_ref6","tvshow","SingleDownshift_SingleDownshift","disabled","MovieForm","MovieAPI","List","_useState","useState","_useState2","offset","setOffset","_useState3","_useState4","setMovie","_useState5","_useState6","setKey","_useState7","_useState8","loaded","setLoaded","loadMore","notGenres","keys","isArray","buildQuery","useEffect","debouncedLoadMore","debounce","leading","trailing","cancel","left","MoviesFilter_MoviesFilter","_","EditableField","setValue","edit","setEdit","lock","renderFormField","renderValue","EditableInput","EditableField_EditableField","fieldProps","valueProps","EditableTextarea","rows","split","Episode","episode","onEpisodeChanged","MovieContext","SeasonContext","seasonIndex","ellipsis","setEllipsis","updateEpisode","newMovie","produce","EditableField_EditableInput","EditableField_EditableTextarea","useToggle","initialValue","useInput","Season","onMovieChanged","_useToggle","_useToggle2","oneSeen","episodeIndex","Episode_Episode","Movie","withRouter","match","history","params","mergeContext","updatedMovie","goBack","flexGrow","Season_Season_Season","Fetch","FetchWithContext","debounceFetch","endpoint","onSuccess","Header","initialState","unseen","Statistics","stats","setStats","forEach","draft","t","g","fetchByTypes","orderBy","toFixed","Tag","hex","label","big","_ref$className","_ref$style","indexOf","slice","random","Math","floor","generateColor","toString","padStart","TagList","_useInput","_useInput2","setColor","_useInput3","_useInput4","setLabel","tags","setTags","getTags","tag","overflow","Tag_Tag","deleteTag","createTag","marginLeft","App","BrowserRouter","Header_Header","Route","exact","path","component","Login","onKeyDown","ReactDOM","UserContext_UserProvider","ApplicationContext_ApplicationProvider","MoviesContext_MoviesProvider","src_App_0","document","getElementById"],"mappings":"mNAiBIA,8ICfSC,EAAcC,IAAMC,gBACpBC,EAAW,SAAAC,GAAS,OAAI,SAAAC,GAAK,OACxCC,EAAAC,EAAAC,cAACR,EAAYS,SAAb,KACG,SAAAC,GAAI,OAAIJ,EAAAC,EAAAC,cAACJ,EAADO,OAAAC,OAAA,GAAeP,EAAf,CAAsBK,KAAMA,SAI5BG,EAASC,SACTC,EAAQD,SACRE,EAAeF,SAEtBG,EAAiB,SAAAC,GACrB,GAAIA,EAASC,GAAI,OAAOD,EAASE,OACjC,MAAM,IAAIC,MAAM,eAGLC,EAAb,SAAAC,GAAA,SAAAD,IAAA,IAAAE,EAAAC,EAAAd,OAAAe,EAAA,EAAAf,CAAAgB,KAAAL,GAAA,QAAAM,EAAAC,UAAAC,OAAAC,EAAA,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAAF,EAAAE,GAAAJ,UAAAI,GAAA,OAAAR,EAAAd,OAAAuB,EAAA,EAAAvB,CAAAgB,MAAAH,EAAAb,OAAAwB,EAAA,EAAAxB,CAAAW,IAAAc,KAAAC,MAAAb,EAAA,CAAAG,MAAAW,OAAAP,MACEQ,MAAQ,CACNC,MAAO,KACPC,OAAQ5B,EACR6B,MAAOjB,EAAKiB,MAAMC,KAAXhC,OAAAiC,EAAA,EAAAjC,QAAAiC,EAAA,EAAAjC,CAAAc,MAJXA,EAAA,OAAAd,OAAAkC,EAAA,EAAAlC,CAAAW,EAAAC,GAAAZ,OAAAmC,EAAA,EAAAnC,CAAAW,EAAA,EAAAyB,IAAA,oBAAAC,MAAA,WAOsB,IAAAC,EAAAtB,KACZa,EAAQU,aAAaC,QAAQ,SAC/BX,GACFY,MAAM,WAAY,CAChBC,OAAQ,OACRC,QAAS,CACPC,OAAQ,mBACRC,eAAgB,mBAChBC,cAAa,UAAAnB,OAAYE,MAG1BkB,KAAKzC,GACLyC,KAAK,SAAAC,GAAa,IAAVC,EAAUD,EAAVC,IACH,IAAIC,KAAS,IAAIA,KAAW,IAAND,IACxBX,EAAKa,SAAS,CAAEtB,QAAOC,OAAQ1B,QArB3C,CAAAgC,IAAA,QAAAC,MAAA,SA0BQe,GAAU,IAAAC,EAAArC,KACdyB,MAAM,SAAU,CACdC,OAAQ,OACRY,KAAMC,KAAKC,UAAU,CAAEJ,aACvBT,QAAS,CACPC,OAAQ,mBACRC,eAAgB,sBAGjBE,KAAKzC,GACLyC,KAAK,SAAAU,GAAe,IAAZ5B,EAAY4B,EAAZ5B,MACPwB,EAAKF,SAAS,CAAEtB,QAAOC,OAAQ1B,IAC/BmC,aAAamB,QAAQ,QAAS7B,KAE/B8B,MAAM,kBAAMN,EAAKF,SAAS,CAAErB,OAAQzB,QAxC3C,CAAA+B,IAAA,SAAAC,MAAA,WA4CI,OACE1C,EAAAC,EAAAC,cAACR,EAAYuE,SAAb,CAAsBvB,MAAOrB,KAAKY,OAC/BZ,KAAKtB,MAAMmE,cA9CpBlD,EAAA,CAAkCrB,IAAMG,oBChB3BqE,EAAY,SAAAd,GAAA,IAAGe,EAAHf,EAAGe,KAAMC,EAAThB,EAASgB,QAATC,EAAAjB,EAAkBkB,eAAlB,IAAAD,KAAA,OACvBtE,EAAAC,EAAAC,cAAA,KACEsE,UAAU,aACVC,MAAO,CACLC,MAAOH,IAAYH,EAAO,iBAAmBA,EAAO,iBAAmB,GACvEO,OAAQ,WAEVN,QAASA,KFTPrB,EAAU,SAAA5C,GAAI,MAAK,CACvB6C,OAAQ,mBACRC,eAAgB,mBAChBC,cAAa,UAAAnB,OAAY5B,EAAK8B,SAG1BvB,EAAiB,SAAAC,GACrB,GAAIA,EAASC,GAAI,OAAOD,EAASE,OACjC,MAAM,IAAIC,MAAM,eAUL6D,EAAY,SAAAC,GAAS,OAAI,SAACC,EAAQ1E,GAK7C,OAJIyE,GAAapF,GACfA,EAAWsF,QAEbtF,EAAa,IAAIuF,gBACVlC,MAAK,eAAAd,OAAgB8C,GAAU,CACpC9B,QAASA,EAAQ5C,GACjB6E,OAAQxF,EAAWwF,SAElB7B,KAAK,SAAAxC,GAEJ,OADAnB,EAAa,KACNmB,IAERwC,KAAKzC,KAGGuE,EAAc,SAACC,EAAO/E,GACjC,OAAO0C,MAAK,eAAAd,OAAgBmD,EAAMC,KAAO,CACvCrC,OAAQ,MACRY,KAAMC,KAAKC,UAAUsB,GACrBnC,QAASA,EAAQ5C,KAChBgD,KAAKzC,IAkBG0E,EAAe,SAACF,EAAOG,EAAQlF,GAC1C,OAAO0C,MAAK,eAAAd,OAAgBmD,EAAMC,IAAtB,aAAApD,OAAqCsD,EAAOF,KAAO,CAC7DrC,OAAQ,MACRY,KAAMC,KAAKC,UAAUyB,GACrBtC,QAASA,EAAQ5C,KAChBgD,KAAKzC,sCGrDG4E,EAAY1F,EACvB,SAAAwD,GAAiD,IAA9C8B,EAA8C9B,EAA9C8B,MAAOK,EAAuCnC,EAAvCmC,OAAQpF,EAA+BiD,EAA/BjD,KAAMqF,EAAyBpC,EAAzBoC,SAAUC,EAAerC,EAAfqC,SAC1BC,EAAS,SAACC,EAAOlD,GAAR,OAAkB,kBAC/BwC,EAAY7E,OAAAwF,EAAA,EAAAxF,CAAA,GAAK8E,EAAN9E,OAAAyF,EAAA,EAAAzF,CAAA,GAAcuF,EAAQlD,IAAStC,GAAMgD,KAAKqC,KAEjDM,EAAK,GAAA/D,OAAMmD,EAAMY,OACjBC,EAAQ,GAAAhE,OAAMmD,EAAMc,eAAZ,OAAAjE,OAAgCmD,EAAMe,MAAMC,KAAK,MAE/D,OACEnG,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,mBACbxE,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,aACbxE,EAAAC,EAAAC,cAAA,MAAIsE,UAAU,cACZxE,EAAAC,EAAAC,cAACkG,EAAA,EAAD,CAAMC,GAAE,SAAArE,OAAWmD,EAAMC,MACvBpF,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,WAAWuB,MAAOA,GAC9BA,KAIP/F,EAAAC,EAAAC,cAAA,MACEsE,UAAU,yCACVuB,MAAOC,GAENA,GAEHhG,EAAAC,EAAAC,cAAA,OACEsE,UAAU,qBACVC,MAAO,CAAE6B,SAAU,WAAYC,IAAK,EAAGC,MAAO,IAE9B,SAAfrB,EAAMsB,MACLzG,EAAAC,EAAAC,cAAA,KACEsE,UAAU,aACVC,MAAO,CACLE,OAAQ,UACRD,MAAOS,EAAMuB,SAAW,gBAAkB,SAE5CrC,QAASsB,EAAO,YAAaR,EAAMuB,YAGvC1G,EAAAC,EAAAC,cAAA,QACEsE,UAAU,gBACVC,MAAO,CACLC,MAAOS,EAAMwB,QAAU,gBAAkB,SAE3CtC,QAASsB,EAAO,WAAYR,EAAMwB,UALpC,KASgB,SAAfxB,EAAMsB,KACLzG,EAAAC,EAAAC,cAAC0G,EAAD,CACExC,KAAMe,EAAMf,KACZC,QAASsB,EAAO,QAASR,EAAMf,QAGjCpE,EAAAC,EAAAC,cAAC0G,EAAD,CACExC,KACEyC,IACE1B,EAAM2B,QAAQC,IACZ,SAAAzB,GAAM,OACJuB,IAAMvB,EAAO0B,SAAU,SACvB1B,EAAO0B,SAASxF,OAAS,MAE1B2D,EAAM2B,QAAQtF,OAAS,EAE9B+C,QACE0C,IACE9B,EAAM2B,QAAQC,IACZ,SAAAzB,GAAM,OACJ2B,IAAK3B,EAAO0B,SAAU,SACtB1B,EAAO0B,SAASxF,OAAS,MAE1B2D,EAAM2B,QAAQtF,OAAS,IAIlCxB,EAAAC,EAAAC,cAAA,KACEsE,UAAU,oBACVH,QAASmB,EACTf,MAAO,CAAEE,OAAQ,aAEnB3E,EAAAC,EAAAC,cAAA,KACEsE,UAAU,eACVH,QAAS,WACH6C,OAAOC,WHjDA,SAAChC,EAAO/E,GACjC,OAAO0C,MAAK,eAAAd,OAAgBmD,EAAMC,KAAO,CACvCrC,OAAQ,SACRC,QAASA,EAAQ5C,KAChBgD,KAAKzC,GG8CQyG,CAAYjC,EAAO/E,GAAMgD,KAAKsC,IAGlCjB,MAAO,CAAEE,OAAQ,cAGrB3E,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,sBACbxE,EAAAC,EAAAC,cAAA,OAAKmH,IAAKlC,EAAMmC,QAASC,IAAI,uCCjG5BC,EAAqB7H,IAAMC,gBAO3B6H,EAAUjH,SACVkH,EAASlH,SAETmH,EAAb,SAAA1G,GAAA,SAAA0G,IAAA,IAAAzG,EAAAC,EAAAd,OAAAe,EAAA,EAAAf,CAAAgB,KAAAsG,GAAA,QAAArG,EAAAC,UAAAC,OAAAC,EAAA,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAAF,EAAAE,GAAAJ,UAAAI,GAAA,OAAAR,EAAAd,OAAAuB,EAAA,EAAAvB,CAAAgB,MAAAH,EAAAb,OAAAwB,EAAA,EAAAxB,CAAAsH,IAAA7F,KAAAC,MAAAb,EAAA,CAAAG,MAAAW,OAAAP,MACEQ,MAAQ,CACN2F,OAAQ,GACRC,MAAO,GACP1F,OAAQsF,GAJZtG,EAAA,OAAAd,OAAAkC,EAAA,EAAAlC,CAAAsH,EAAA1G,GAAAZ,OAAAmC,EAAA,EAAAnC,CAAAsH,EAAA,EAAAlF,IAAA,oBAAAC,MAAA,WAOsB,IAAAC,EAAAtB,KACZyG,EAAU,CACd9E,QAAS,CACPG,cAAa,UAAAnB,OAAYX,KAAKtB,MAAMmC,SAIlCvB,EAAiB,SAAAC,GACrB,GAAIA,EAASC,GAAI,OAAOD,EAASE,OACjC,MAAM,IAAIC,MAAM,eAElBgH,QAAQC,IAAI,CACVlF,MAAM,oBAAqBgF,GAAS1E,KAAKzC,GACzCmC,MAAM,mBAAoBgF,GAAS1E,KAAKzC,KACvCyC,KAAK,SAAAC,GAAqB,IAAAS,EAAAzD,OAAA4H,EAAA,EAAA5H,CAAAgD,EAAA,GAAnBuE,EAAmB9D,EAAA,GAAX+D,EAAW/D,EAAA,GAC3BnB,EAAKa,SAAS,CACZoE,SACAC,QACA1F,OAAQuF,QAzBhB,CAAAjF,IAAA,SAAAC,MAAA,WA+BI,OACE1C,EAAAC,EAAAC,cAACsH,EAAmBvD,SAApB,CAA6BvB,MAAOrB,KAAKY,OACtCZ,KAAKtB,MAAMmE,cAjCpByD,EAAA,CAAyChI,IAAMG,oCCTlCoI,EAAgBvI,IAAMC,gBAEtBuI,EAAb,SAAAlH,GAAA,SAAAkH,IAAA,IAAAjH,EAAAC,EAAAd,OAAAe,EAAA,EAAAf,CAAAgB,KAAA8G,GAAA,QAAA7G,EAAAC,UAAAC,OAAAC,EAAA,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAAF,EAAAE,GAAAJ,UAAAI,GAAA,OAAAR,EAAAd,OAAAuB,EAAA,EAAAvB,CAAAgB,MAAAH,EAAAb,OAAAwB,EAAA,EAAAxB,CAAA8H,IAAArG,KAAAC,MAAAb,EAAA,CAAAG,MAAAW,OAAAP,MACE2G,IAAM,SAAAjD,GACJhE,EAAKqC,SAAS,SAAAH,GAAA,IAAGgF,EAAHhF,EAAGgF,OAAH,MAAiB,CAAEA,OAAM,CAAGlD,GAAHnD,OAAA3B,OAAAiI,EAAA,EAAAjI,CAAagI,QAFxDlH,EAKEwE,OAAS,SAAC4C,EAAIpD,GACZ,IAAMqD,EAAQC,IAAUtH,EAAKc,MAAMoG,OAAQ,CAAC,MAAOE,IAC7CF,EAAMhI,OAAAiI,EAAA,EAAAjI,CAAOc,EAAKc,MAAMoG,QAC9BA,EAAOG,GAASrD,EAChBhE,EAAKqC,SAAS,CACZ6E,OAAQA,EAAOK,OAAOC,YAV5BxH,EAcEyH,OAAS,SAAA9E,GAAqB,IAAlB+E,EAAkB/E,EAAlB+E,KAAMC,EAAYhF,EAAZgF,MAChB3H,EAAKqC,SAAS,SAAAuF,GAAA,IAAGV,EAAHU,EAAGV,OAAH,MAAiB,CAAEA,OAAOhI,OAAAiI,EAAA,EAAAjI,CAAKgI,GAANrG,OAAA3B,OAAAiI,EAAA,EAAAjI,CAAiBwI,IAAOC,YAfnE3H,EAkBE6H,WAAa,WACX7H,EAAKqC,SAAS,CAAE6E,OAAQ,GAAIS,MAAO,KAnBvC3H,EAsBEsE,SAAW,SAAAwD,GAAI,OAAI,WAAgB,IAAfvG,EAAenB,UAAAC,OAAA,QAAA0H,IAAA3H,UAAA,GAAAA,UAAA,GAAP,GAC1BJ,EAAKqC,SAAS,SAAA2F,GAAA,IAAGC,EAAHD,EAAGC,QAAH,MAAkB,CAC9Bf,OAAQ,GACRS,MAAO,EACPM,QAAQ/I,OAAAwF,EAAA,EAAAxF,CAAA,GAAM+I,EAAP/I,OAAAyF,EAAA,EAAAzF,CAAA,GAAiB4I,EAAOvG,SA1BrCvB,EA8BEc,MAAQ,CACNoG,OAAQ,GACRS,MAAO,EACPM,QAAS,CACPnD,eAAgB,GAChBF,MAAO,GACP6B,OAAQ,GACRC,MAAO,GACPzD,KAAM,KACNuC,QAAS,KACTD,SAAU,KACV2C,MAAO,IAET5D,SAAUtE,EAAKsE,SACfmD,OAAQzH,EAAKyH,OACbjD,OAAQxE,EAAKwE,OACbyC,IAAKjH,EAAKiH,IACVY,WAAY7H,EAAK6H,YA/CrB7H,EAAA,OAAAd,OAAAkC,EAAA,EAAAlC,CAAA8H,EAAAlH,GAAAZ,OAAAmC,EAAA,EAAAnC,CAAA8H,EAAA,EAAA1F,IAAA,SAAAC,MAAA,WAmDI,OACE1C,EAAAC,EAAAC,cAACgI,EAAcjE,SAAf,CAAwBvB,MAAOrB,KAAKY,OACjCZ,KAAKtB,MAAMmE,cArDpBiE,EAAA,CAAoCxI,IAAMG,4CCF7BwJ,GAAb,SAAArI,GAAA,SAAAqI,IAAA,IAAApI,EAAAC,EAAAd,OAAAe,EAAA,EAAAf,CAAAgB,KAAAiI,GAAA,QAAAhI,EAAAC,UAAAC,OAAAC,EAAA,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAAF,EAAAE,GAAAJ,UAAAI,GAAA,OAAAR,EAAAd,OAAAuB,EAAA,EAAAvB,CAAAgB,MAAAH,EAAAb,OAAAwB,EAAA,EAAAxB,CAAAiJ,IAAAxH,KAAAC,MAAAb,EAAA,CAAAG,MAAAW,OAAAP,MACEQ,MAAQ,CAAEsH,cAAepI,EAAKpB,MAAMwJ,eAAiB,IADvDpI,EAWEqI,aAAe,SAACvH,EAAOwH,GACrB,OAAQA,EAAQhD,MACd,KAAKiD,IAAUC,iBAAiBC,aAChC,KAAKF,IAAUC,iBAAiBE,UAC9B,OAAOxJ,OAAAwF,EAAA,EAAAxF,CAAA,GACFoJ,EADL,CAEEK,iBAAkB7H,EAAM6H,iBACxBC,QAAQ,IAEZ,QACE,OAAON,IArBftI,EAyBE6I,aAAe,SAAAC,GAAS,OAAI,WACtB9I,EAAKpB,MAAM0F,UACbtE,EAAKpB,MAAM0F,SACTtE,EAAKc,MAAMsH,cACXpI,EAAK+I,mBAAmBD,MA7BhC9I,EAkCEgJ,gBAAkB,SAACC,EAAcH,GAC3B9I,EAAKc,MAAMsH,cAAcc,SAASD,GACpCjJ,EAAKmJ,WAAWF,EAAcjJ,EAAK6I,aAAaC,IAEhD9I,EAAKoJ,gBAAgBH,EAAcjJ,EAAK6I,aAAaC,KAtC3D9I,EA0CEmJ,WAAa,SAACE,EAAMC,GAClBtJ,EAAKqC,SAAS,SAAAH,GACZ,MAAO,CACLkG,cAFiClG,EAApBkG,cAEgBb,OAAO,SAAAgC,GAAC,OAAIA,IAAMF,MAEhDC,IA/CPtJ,EA0DEwJ,qBAAuB,SAAAV,GAAS,OAAI,WAAsC,IAAAnG,EAAAvC,UAAAC,OAAA,QAAA0H,IAAA3H,UAAA,GAAAA,UAAA,GAAP,GAA5B8C,EAAmCP,EAAnCO,QAASmG,EAA0B1G,EAA1B0G,KAASzK,EAAiBM,OAAAuK,EAAA,EAAAvK,CAAAyD,EAAA,oBACxE,OAAOzD,OAAAwF,EAAA,EAAAxF,CAAA,CACLgE,QAAS,SAAAwG,GAEPxG,GAAWA,EAAQwG,GACnBA,EAAEC,kBACF3J,EAAKmJ,WAAWE,EAAMrJ,EAAK6I,aAAaC,MAEvClK,KAlEToB,EAAA,OAAAd,OAAAkC,EAAA,EAAAlC,CAAAiJ,EAAArI,GAAAZ,OAAAmC,EAAA,EAAAnC,CAAAiJ,EAAA,EAAA7G,IAAA,qBAAAC,MAAA,SAGqBqI,GAEfA,EAAUxB,gBAAkBlI,KAAKtB,MAAMwJ,eACvClI,KAAKtB,MAAMwJ,gBAAkBlI,KAAKY,MAAMsH,eAExClI,KAAKmC,SAAS,CAAE+F,cAAelI,KAAKtB,MAAMwJ,eAAiB,OARjE,CAAA9G,IAAA,kBAAAC,MAAA,SAiDkB8H,EAAMC,GACpBpJ,KAAKmC,SACH,SAAAuF,GAAA,IAAGQ,EAAHR,EAAGQ,cAAH,MAAwB,CACtBA,cAAclJ,OAAAiI,EAAA,EAAAjI,CAAKkJ,GAANvH,OAAA,CAAqBwI,MAEpCC,KAtDN,CAAAhI,IAAA,qBAAAC,MAAA,SAsEqBuH,GAAW,IACpBV,EAAkBlI,KAAKY,MAAvBsH,cACAoB,EAAqCtJ,KAArCsJ,qBAAsBL,EAAejJ,KAAfiJ,WAC9B,OAAOjK,OAAAwF,EAAA,EAAAxF,CAAA,CACLsK,qBAAsBA,EAAqBV,GAC3CK,aACAf,iBACGU,KA7ET,CAAAxH,IAAA,SAAAC,MAAA,WAgFW,IAAAC,EAAAtB,KAAA2J,EACyC3J,KAAKtB,MAA7CkL,EADDD,EACCC,OADDC,EAAAF,EACS9G,gBADT,IAAAgH,EACoBD,EADpBC,EAC+BnL,EAD/BM,OAAAuK,EAAA,EAAAvK,CAAA2K,EAAA,uBAGP,OACEhL,EAAAC,EAAAC,cAACiL,EAAA,EAAD9K,OAAAC,OAAA,GACMP,EADN,CAEEyJ,aAAcnI,KAAKmI,aACnB/D,SAAUpE,KAAK8I,gBACfC,aAAc,OAEb,SAAAH,GAAS,OAAI/F,EAASvB,EAAKuH,mBAAmBD,UA1FvDX,EAAA,CAAoC3J,IAAMG,6BCGpCsL,GAAM,iBAAc,CAAE5G,UAAW6G,OAAMtJ,WAAN,EAAAR,aAEjC+J,GAAOC,aAAO,KAAPA,CACX,CACEjF,SAAU,WACV3B,OAAQ,UACR6G,QAAS,QACTC,OAAQ,OACRC,OAAQ,OACRC,UAAW,OACXC,UAAW,OACXC,WAAY,MACZnH,MAAO,kBACPoH,SAAU,OACVC,cAAe,OACfC,WAAY,MACZC,UAAW,OACXC,QAAS,eACTC,WAAY,SACZC,SAAU,UAEZ,SAAA/I,GAA8B,IAA3BgJ,EAA2BhJ,EAA3BgJ,SAAUC,EAAiBjJ,EAAjBiJ,WACLC,EAAS,GAaf,OAZIF,GACFE,EAAOC,KAAK,CACV9H,MAAO,kBACP+H,WAAY,oBAGZH,GACFC,EAAOC,KAAK,CACV9H,MAAO,kBACPsH,WAAY,QAGTO,IAILG,GAAWnB,aAAO,KAAPA,CACf,CACEW,QAAS,EACTS,UAAW,EACXrG,SAAU,WACVsG,gBAAiB,QACjBC,MAAO,OACPC,UAAW,QACXC,UAAW,OACXC,UAAW,SACXC,QAAS,IACTC,WAAY,mBACZC,aAAc,gCACdlB,UAAW,iCACXmB,YAAa,UACbC,eAAgB,IAChBC,iBAAkB,EAClBC,kBAAmB,EACnBC,gBAAiB,EACjBC,YAAa,QACbC,OAAQ,IAEV,SAAA5J,GAAA,MAAiB,CACf2H,OADF3H,EAAGiG,OACgB,KAAO,UAItB4D,GAAOhO,IAAMiO,WAAW,SAAC7N,EAAO8N,GAAR,OAC5B7N,EAAAC,EAAAC,cAACwM,GAADrM,OAAAC,OAAA,CAAUwN,SAAUD,GAAS9N,MAGzBgO,GAAmBxC,aAAO,SAAPA,CAAiB,CACxCqB,gBAAiB,cACjBnB,OAAQ,OACRnF,SAAU,WACVE,MAAO,EACPD,IAAK,EACL5B,OAAQ,UACRkI,MAAO,GACPrB,QAAS,OACTwC,cAAe,SACftC,OAAQ,OACRuC,eAAgB,SAChBC,WAAY,WAGd,SAASC,GAATpF,GAA+B,IAAVgB,EAAUhB,EAAVgB,OACnB,OACE/J,EAAAC,EAAAC,cAAA,OACEkO,QAAQ,YACRC,oBAAoB,OACpBxB,MAAO,GACPyB,KAAK,cACLC,OAAO,UACPC,YAAY,QACZC,UAAW1E,EAAS,cAAgB,MAEpC/J,EAAAC,EAAAC,cAAA,QAAMwO,EAAE,uBCnGP,IJAwB5O,GIAlB6O,GAAb,SAAA1N,GAAA,SAAA0N,IAAA,IAAAzN,EAAAC,EAAAd,OAAAe,EAAA,EAAAf,CAAAgB,KAAAsN,GAAA,QAAArN,EAAAC,UAAAC,OAAAC,EAAA,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAAF,EAAAE,GAAAJ,UAAAI,GAAA,OAAAR,EAAAd,OAAAuB,EAAA,EAAAvB,CAAAgB,MAAAH,EAAAb,OAAAwB,EAAA,EAAAxB,CAAAsO,IAAA7M,KAAAC,MAAAb,EAAA,CAAAG,MAAAW,OAAAP,MACEQ,MAAQ,CAAEsH,cAAepI,EAAKpB,MAAMwJ,eAAiB,IADvDpI,EAEEqI,aAAe,SAACvH,EAAOwH,GACrB,OAAQA,EAAQhD,MACd,KAAKiD,IAAUC,iBAAiBC,aAChC,KAAKF,IAAUC,iBAAiBE,UAC9B,OAAOxJ,OAAAwF,EAAA,EAAAxF,CAAA,GACFoJ,EADL,CAEEK,iBAAkB7H,EAAM6H,iBACxBC,QAAQ,IAEZ,QACE,OAAON,IAZftI,EAgBE6I,aAAe,SAAAC,GAAS,OAAI,WACtB9I,EAAKpB,MAAM0F,UACbtE,EAAKpB,MAAM0F,SACTtE,EAAKc,MAAMsH,cACXpI,EAAK+I,mBAAmBD,MApBhC9I,EAyBEgJ,gBAAkB,SAACC,EAAcH,GAE7B9I,EAAKc,MAAMsH,cAAcb,OAAO,SAAA8B,GAAI,OAAIJ,IAAiBI,EAAK,KAAIhJ,OAClE,EAEAL,EAAKmJ,WAAW,CAACF,GAAejJ,EAAK6I,aAAaC,IAElD9I,EAAKoJ,gBAAgBH,EAAcjJ,EAAK6I,aAAaC,KAhC3D9I,EAoCEmJ,WAAa,SAACE,EAAMC,GAClBtJ,EAAKqC,SAAS,SAAAH,GACZ,MAAO,CACLkG,cAFiClG,EAApBkG,cAEgBb,OAAO,SAAAgC,GAAC,OAAIA,EAAE,KAAOF,EAAK,OAExDC,IAzCPtJ,EAoDEwJ,qBAAuB,SAAAV,GAAS,OAAI,WAAsC,IAAAnG,EAAAvC,UAAAC,OAAA,QAAA0H,IAAA3H,UAAA,GAAAA,UAAA,GAAP,GAA5B8C,EAAmCP,EAAnCO,QAASmG,EAA0B1G,EAA1B0G,KAASzK,EAAiBM,OAAAuK,EAAA,EAAAvK,CAAAyD,EAAA,oBACxE,OAAOzD,OAAAwF,EAAA,EAAAxF,CAAA,CACLgE,QAAS,SAAAwG,GAEPxG,GAAWA,EAAQwG,GACnBA,EAAEC,kBACF3J,EAAKmJ,WAAWE,EAAMrJ,EAAK6I,aAAaC,MAEvClK,KA5DToB,EAgEEyN,YAAc,SAAA3E,GAAS,OAAI,SAACO,EAAMhC,GAChCrH,EAAKqC,SAAS,SAAAuF,GAAuB,IAC7B8F,EAD6B9F,EAApBQ,cAGf,OADAsF,EAAiBrG,GAAS,CAACgC,EAAK,IAAKA,EAAK,IACnC,CACLjB,cAAesF,EAAiBnG,OAAO,SAAAgC,GAAC,OAAIA,IAAMF,EAAK,OAExDrJ,EAAK6I,aAAaC,MAvEzB9I,EAyEE2N,YAAc,SAAAtE,GACZ,OAAOA,EAAK,IA1EhBrJ,EA4EE4N,kBAAoB,SAAAvE,GAClB,OAAOA,EAAK,GAAK,OAAS,UA7E9BrJ,EA+EEmL,WAAa,SAAA0C,GACX,OAAO7N,EAAKc,MAAMsH,cAAc0F,KAAK,SAAAzE,GAAI,OAAIA,EAAK,KAAOwE,KAhF7D7N,EAAA,OAAAd,OAAAkC,EAAA,EAAAlC,CAAAsO,EAAA1N,GAAAZ,OAAAmC,EAAA,EAAAnC,CAAAsO,EAAA,EAAAlM,IAAA,kBAAAC,MAAA,SA2CkB8H,EAAMC,GACpBpJ,KAAKmC,SACH,SAAA2F,GAAA,IAAGI,EAAHJ,EAAGI,cAAH,MAAwB,CACtBA,cAAclJ,OAAAiI,EAAA,EAAAjI,CAAKkJ,GAANvH,OAAA,CAAqB,CAACwI,GAAM,OAE3CC,KAhDN,CAAAhI,IAAA,qBAAAC,MAAA,SAmFqBuH,GAAW,IACpBV,EAAkBlI,KAAKY,MAAvBsH,cAENoB,EAMEtJ,KANFsJ,qBACAL,EAKEjJ,KALFiJ,WACAsE,EAIEvN,KAJFuN,YACAE,EAGEzN,KAHFyN,YACAC,EAEE1N,KAFF0N,kBACAzC,EACEjL,KADFiL,WAEF,OAAOjM,OAAAwF,EAAA,EAAAxF,CAAA,CACLsK,qBAAsBA,EAAqBV,GAC3CK,aACAf,gBACAqF,YAAaA,EAAY3E,GACzB6E,cACAC,oBACAzC,cACGrC,KArGT,CAAAxH,IAAA,SAAAC,MAAA,WAwGW,IAAAC,EAAAtB,KAAA2J,EACyC3J,KAAKtB,MAA7CkL,EADDD,EACCC,OADDC,EAAAF,EACS9G,gBADT,IAAAgH,EACoBD,EADpBC,EAC+BnL,EAD/BM,OAAAuK,EAAA,EAAAvK,CAAA2K,EAAA,uBAGP,OACEhL,EAAAC,EAAAC,cAACiL,EAAA,EAAD9K,OAAAC,OAAA,GACMP,EADN,CAEEyJ,aAAcnI,KAAKmI,aACnB/D,SAAUpE,KAAK8I,gBACfC,aAAc,OAEb,SAAAH,GAAS,OAAI/F,EAASvB,EAAKuH,mBAAmBD,UAlHvD0E,EAAA,CAA+ChP,IAAMG,WCG/CoP,GAAqB,SAAAC,GAAa,gBAAAC,GAAA,SAAAC,IAAA,OAAAhP,OAAAe,EAAA,EAAAf,CAAAgB,KAAAgO,GAAAhP,OAAAuB,EAAA,EAAAvB,CAAAgB,KAAAhB,OAAAwB,EAAA,EAAAxB,CAAAgP,GAAAtN,MAAAV,KAAAE,YAAA,OAAAlB,OAAAkC,EAAA,EAAAlC,CAAAgP,EAAAD,GAAA/O,OAAAmC,EAAA,EAAAnC,CAAAgP,EAAA,EAAA5M,IAAA,SAAAC,MAAA,WAE3B,IAAAsI,EACqD3J,KAAKtB,MAAzDuP,EADDtE,EACCsE,aAAcC,EADfvE,EACeuE,YAAaC,EAD5BxE,EAC4BwE,MAAOjG,EADnCyB,EACmCzB,cAC1C,OACEvJ,EAAAC,EAAAC,cAACiP,EAAD,CACE1J,SAAU6J,EACV/F,cAAeA,EACfgG,YAAaA,GAEZ,SAAAlM,GAAA,IACCoM,EADDpM,EACCoM,qBACAC,EAFDrM,EAECqM,aACA/E,EAHDtH,EAGCsH,qBAEAZ,GALD1G,EAICiH,WAJDjH,EAKC0G,QACAR,EANDlG,EAMCkG,cACAoG,EAPDtM,EAOCsM,aACA7F,EARDzG,EAQCyG,iBACA8F,EATDvM,EASCuM,WATDC,EAAAxM,EAUCuL,mBAVD,IAAAiB,EAUe,aAVfA,EAAAC,EAAAzM,EAWCyL,mBAXD,IAAAgB,EAWeC,IAXfD,EAAAE,EAAA3M,EAYC0L,yBAZD,IAAAiB,EAYqB,iBAAM,QAZ3BA,EAAAC,EAAA5M,EAaCiJ,kBAbD,IAAA2D,EAac,SAAAzF,GAAI,OAAIjB,EAAcc,SAASG,IAb7CyF,EAAA,OAeCjQ,EAAAC,EAAAC,cAAA,OACEuE,MAAO,CACLyL,OAAQ,OACR5J,SAAU,WACVuG,MAAO,SAGT7M,EAAAC,EAAAC,cAAA,MAAAG,OAAAC,OAAA,GACM8K,GAAI,CACNzG,OAAQ,UACR2B,SAAU,WACV4F,QAAS,iBACTiE,aAAc,GACd1E,OAAQ,oBACR0B,aAAc,SACdP,gBAAiB,UARrB,CAUEvI,QAAS,WACPuL,OAGF5P,EAAAC,EAAAC,cAAA,MACMkL,GAAI,CACNI,QAAS,OACT4E,SAAU,OACVlC,WAAY,WAGb3E,EAAc/H,OAAS,EACtB+H,EAAcxC,IAAI,SAACyD,EAAMhC,GAAP,OAChBxI,EAAAC,EAAAC,cAAA,MAAAG,OAAAC,OAAA,CACEmC,IAAK+F,GACD4C,GAAI,CACN8E,OAAQ,QACRG,YAAa,EACbF,aAAc,EACd3E,QAAS,eACTY,SAAU,OACVQ,gBAAiBmC,EAAkBvE,GACnC2C,aAAc,IATlB,CAWE9I,QAAS,SAAAiM,GACPA,EAAMC,iBACND,EAAMxF,kBACN8D,EAAYpE,EAAMhC,MAGpBxI,EAAAC,EAAAC,cAAA,MACMkL,GAAI,CACNI,QAAS,OACTgF,QAAS,EACTC,aAAc,SACdvC,WAAY,WAGdlO,EAAAC,EAAAC,cAAA,YAAO4O,EAAYtE,IACnBxK,EAAAC,EAAAC,cAAA,SAAAG,OAAAC,OAAA,GACMqK,EAAqB,CAAEH,SACvBY,GAAI,CACNzG,OAAQ,UACRkH,WAAY,GACZJ,OAAQ,OACRmB,gBAAiB,cACjBV,QAAS,IACTJ,SAAU,SARd,CAUErF,KAAK,WAVP,oBAkBNzG,EAAAC,EAAAC,cAAA,OACMkL,GAAI,CACN1G,MAAO,aAGR6K,IAIPvP,EAAAC,EAAAC,cAAC6N,GACK0B,EAAqB,CAGvBpL,QAHuB,SAGfiM,GACNA,EAAMxF,qBAIV9K,EAAAC,EAAAC,cAACiO,GAAD,CAAWpE,OAAQA,MAGvB/J,EAAAC,EAAAC,cAACyN,GAAS+B,EAAa,CAAE3F,WACtBA,EACGyF,EAAMzI,IAAI,SAACyD,EAAMhC,GAAP,OACRxI,EAAAC,EAAAC,cAACoL,GAADjL,OAAAC,OAAA,CACEmC,IAAK+F,GACDmH,EAAa,CACfnF,OACAhC,QACA6D,SAAUvC,IAAqBtB,EAC/B8D,WAAYA,EAAW9B,MAGxBA,KAGL,aAvIoB6E,EAAA,CACxBvP,cA+IH4Q,GAAsBxB,GAAmB5F,IACzCqH,GAAiCzB,GAC5CP,IC/IIiC,GAAY,SAAAN,GAAK,OAAIA,EAAMO,OAAOnO,OAElCoO,GAAW,SAAAzN,EAEf4F,GAGG,IAJDG,EAIC/F,EAJD+F,QAAS3D,EAIRpC,EAJQoC,SAEXgJ,EAEGlN,UAAAC,OAAA,QAAA0H,IAAA3H,UAAA,GAAAA,UAAA,GAFSwO,IACZgB,EACGxP,UAAAC,OAAA,QAAA0H,IAAA3H,UAAA,GAAAA,UAAA,GADIqP,GAEP,MAAO,CACLlO,MAAO0G,EAAQH,GACfxD,SAAU,SAAA/C,GAAK,OAAI+C,EAASwD,EAATxD,CAAegJ,EAAUsC,EAAKrO,QAIxCsO,GAAe,WAAM,IAAAC,EACFC,qBAAWhJ,GAAjCkB,EADwB6H,EACxB7H,QAAS3D,EADewL,EACfxL,SADe0L,EAEND,qBAAW1J,GAA7BI,EAFwBuJ,EAExBvJ,OAAQC,EAFgBsJ,EAEhBtJ,MACRzD,EAA4BgF,EAA5BhF,KAAMuC,EAAsByC,EAAtBzC,QAASD,EAAa0C,EAAb1C,SA+DvB,OACE1G,EAAAC,EAAAC,cAAA,QAAMsE,UAAU,4CACdxE,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,cACbxE,EAAAC,EAAAC,cAAA,QAAAG,OAAAC,OAAA,GACMwQ,GAAS,CAAE1H,UAAS3D,YAAY,iBAAkB,SAAA/C,GAAK,OACzD0O,SAAS1O,EAAO,MAFpB,CAIE+D,KAAK,SACL4K,IAAK,KACL9B,YAAY,OACZ/K,UAAU,eACVC,MAAO,CAAEoI,MAAO,YAGpB7M,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,sBACbxE,EAAAC,EAAAC,cAAA,QAAAG,OAAAC,OAAA,CACEmG,KAAK,QACDqK,GAAS,CAAE1H,UAAS3D,YAAY,SAFtC,CAGE8J,YAAY,QACZ/K,UAAU,mBAGdxE,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,aAAaC,MAAO,CAAE6M,SAAU,UAC7CtR,EAAAC,EAAAC,cAACyQ,GAAD,CACEpB,YAAY,QACZD,aACEwB,GAAS,CAAE1H,UAAS3D,YAAY,SAAUsK,IAAUA,KACjDtK,SAEL+J,MAAO5H,EACP2B,cAAeH,EAAQxB,UAG3B5H,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,qBAAqBC,MAAO,CAAEoI,MAAO,UAClD7M,EAAAC,EAAAC,cAACwQ,GAAD,CACEnB,YAAY,OACZD,aACEwB,GAAS,CAAE1H,UAAS3D,YAAY,QAASsK,IAAUA,KAChDtK,SAEL+J,MAAO3H,EACP0B,cAAeH,EAAQvB,SAG3B7H,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,cAzGA,WACjB,IAAIE,EAAQ,GACV6M,EAAO,SACPlN,EAAU,kBAAMoB,EAAS,OAATA,CAAiB,SAYnC,MAXa,SAATrB,GACFM,EAAQ,iBACRL,EAAU,kBAAMoB,EAAS,OAATA,CAAiB,aACf,YAATrB,GACTM,EAAQ,iBACRL,EAAU,kBAAMoB,EAAS,OAATA,CAAiB,WACf,UAATrB,IACTM,EAAQ,gBACR6M,EAAO,eACPlN,EAAU,kBAAMoB,EAAS,OAATA,CAAiB,QAGjCzF,EAAAC,EAAAC,cAAA,KACEsE,UAAS,OAAAxC,OAASuP,GAClB9M,MAAO,CACLC,QACAC,OAAQ,WAEVN,QAASA,IAmFkBmN,IAC7BxR,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,sBA/EG,WACpB,IAAIE,EAAQ,QACVL,EAAU,kBAAMoB,EAAS,UAATA,EAAoB,IAMtC,OALgB,IAAZkB,IACFjC,EAAQ,gBACRL,EAAU,kBAAMoB,EAAS,UAATA,CAAoB,QAIpCzF,EAAAC,EAAAC,cAAA,QAAMmE,QAASA,EAASG,UAAU,UAAUC,MAAO,CAAEC,UAArD,KAsEqC+M,IACrCzR,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,cAjEI,WACrB,IAAIE,EAAQ,GACVL,EAAU,kBAAMoB,EAAS,WAATA,EAAqB,IAKvC,OAJiB,IAAbiB,IACFhC,EAAQ,gBACRL,EAAU,kBAAMoB,EAAS,WAATA,CAAqB,QAGrCzF,EAAAC,EAAAC,cAAA,KACEsE,UAAS,aACTC,MAAO,CACLC,QACAC,OAAQ,WAEVN,QAASA,IAmDkBqN,0BCnItBC,GAAb,SAAA1Q,GAAA,SAAA0Q,IAAA,OAAAtR,OAAAe,EAAA,EAAAf,CAAAgB,KAAAsQ,GAAAtR,OAAAuB,EAAA,EAAAvB,CAAAgB,KAAAhB,OAAAwB,EAAA,EAAAxB,CAAAsR,GAAA5P,MAAAV,KAAAE,YAAA,OAAAlB,OAAAkC,EAAA,EAAAlC,CAAAsR,EAAA1Q,GAAAZ,OAAAmC,EAAA,EAAAnC,CAAAsR,EAAA,EAAAlP,IAAA,SAAAC,MAAA,WACW,IAAAsI,EACgD3J,KAAKtB,MAApD0F,EADDuF,EACCvF,SAAU8J,EADXvE,EACWuE,YAAaC,EADxBxE,EACwBwE,MAAOpF,EAD/BY,EAC+BZ,aACtC,OACEpK,EAAAC,EAAAC,cAACiL,EAAA,EAAD,CAAW1F,SAAUA,EAAU2E,aAAcA,GAC1C,SAAA/G,KACCuO,cADD,IAECjC,EAFDtM,EAECsM,aAEAD,GAJDrM,EAGCwO,cAHDxO,EAICqM,cACA3F,EALD1G,EAKC0G,OAEAD,GAPDzG,EAMCyO,WANDzO,EAOCyG,kBACAM,EARD/G,EAQC+G,aACAwF,EATDvM,EASCuM,WATD,OAWC5P,EAAAC,EAAAC,cAAA,OACEuE,MAAO,CACLyL,OAAQ,OACR5J,SAAU,WACVuG,MAAO,SAGT7M,EAAAC,EAAAC,cAAA,MAAAG,OAAAC,OAAA,GACM8K,GAAI,CACNzG,OAAQ,UACR2B,SAAU,WACV4F,QAAS,iBACTiE,aAAc,GACd1E,OAAQ,oBACR0B,aAAc,SACdP,gBAAiB,UARrB,CAUEvI,QAAS,WACPuL,OAGF5P,EAAAC,EAAAC,cAAA,MACMkL,GAAI,CACNI,QAAS,OACT4E,SAAU,OACVlC,WAAY,WAGb9D,EACCpK,EAAAC,EAAAC,cAAA,MACMkL,GAAI,CACN8E,OAAQ,QACRG,YAAa,EACbF,aAAc,EACd3E,QAAS,eACTY,SAAU,OACVQ,gBAAiB,OACjBO,aAAc,IAGhBnN,EAAAC,EAAAC,cAAA,MACMkL,GAAI,CACNI,QAAS,OACTgF,QAAS,EACTC,aAAc,SACdvC,WAAY,WAGdlO,EAAAC,EAAAC,cAAA,YAAOkK,KAIXpK,EAAAC,EAAAC,cAAA,OACMkL,GAAI,CACN1G,MAAO,aAGR6K,IAIPvP,EAAAC,EAAAC,cAAC6N,GAAD,KACE/N,EAAAC,EAAAC,cAACiO,GAAD,CAAWpE,OAAQA,MAGvB/J,EAAAC,EAAAC,cAACyN,GAAS+B,EAAa,CAAE3F,WACtBA,EACGyF,EAAMzI,IAAI,SAACyD,EAAMhC,GAAP,OACRxI,EAAAC,EAAAC,cAACoL,GAADjL,OAAAC,OAAA,CACEmC,IAAK+F,GACDmH,EAAa,CACfnF,OACAhC,QACA6D,SAAUvC,IAAqBtB,EAC/B8D,WAAYlC,IAAiBI,KAG9BA,KAGL,aAhGlBmH,EAAA,CAAqChS,IAAMG,+BCF9BiS,GAAb,SAAA3C,GAAA,SAAA2C,IAAA,IAAA7Q,EAAAC,EAAAd,OAAAe,EAAA,EAAAf,CAAAgB,KAAA0Q,GAAA,QAAAzQ,EAAAC,UAAAC,OAAAC,EAAA,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAAF,EAAAE,GAAAJ,UAAAI,GAAA,OAAAR,EAAAd,OAAAuB,EAAA,EAAAvB,CAAAgB,MAAAH,EAAAb,OAAAwB,EAAA,EAAAxB,CAAA0R,IAAAjQ,KAAAC,MAAAb,EAAA,CAAAG,MAAAW,OAAAP,MACEQ,MAAQ,CACN+P,MAAM,EACNC,OAAQ9Q,EAAK8Q,OAAO5P,KAAZhC,OAAAiC,EAAA,EAAAjC,QAAAiC,EAAA,EAAAjC,CAAAc,MAHZA,EAAA,OAAAd,OAAAkC,EAAA,EAAAlC,CAAA0R,EAAA3C,GAAA/O,OAAAmC,EAAA,EAAAnC,CAAA0R,EAAA,EAAAtP,IAAA,SAAAC,MAAA,WAOIrB,KAAKmC,SAAS,CAAEwO,MAAO3Q,KAAKY,MAAM+P,SAPtC,CAAAvP,IAAA,SAAAC,MAAA,WAWI,OAAO1C,EAAAC,EAAAC,cAACgS,EAAA,SAAD,KAAW7Q,KAAKtB,MAAMmE,SAAS7C,KAAKY,YAX/C8P,EAAA,CAA+BjS,aCMzBqS,GAAe,CACnBhN,MAAO,CACLY,MAAO,GACPG,MAAO,GACPO,KAAM,GACNR,eAAgB,GAChBmM,QAAS,IAEXC,SAAU,CACRhK,OAAQ,GACRiK,QAAS,KAIPtP,GAAU,SAAA5C,GAAI,MAAK,CACvB6C,OAAQ,mBACRC,eAAgB,mBAChBC,cAAa,UAAAnB,OAAY5B,EAAK8B,SAG1BvB,GAAiB,SAAAC,GACrB,GAAIA,EAASC,GAAI,OAAOD,EAASE,OACjC,MAAM,IAAIC,MAAM,eAGZwR,eACJ,SAAAA,EAAYxS,GAAO,IAAAoB,EAAA,OAAAd,OAAAe,EAAA,EAAAf,CAAAgB,KAAAkR,IACjBpR,EAAAd,OAAAuB,EAAA,EAAAvB,CAAAgB,KAAAhB,OAAAwB,EAAA,EAAAxB,CAAAkS,GAAAzQ,KAAAT,KAAMtB,KAYRyS,MAAQ,WACN,OACGC,KAAQtR,EAAKc,MAAMkD,MAAMY,QAC1B5E,EAAKc,MAAMkD,MAAMe,MAAM1E,OAAS,IAC/BiR,KAAQtR,EAAKc,MAAMkD,MAAMsB,OAjBXtF,EAqBnBiH,IAAM,WACJtF,MAAM,cAAe,CACnBC,OAAQ,OACRY,KAAMC,KAAKC,UAAU1C,EAAKc,MAAMkD,OAChCnC,QAASA,GAAQ7B,EAAKpB,MAAMK,QAE3BgD,KAAKzC,IACLyC,KAAK,SAAAyF,GACJ1H,EAAKpB,MAAM2S,MAAXrS,OAAAwF,EAAA,EAAAxF,CAAA,GAAsBc,EAAKc,MAAMkD,MAAU0D,IAE3C8J,EAAE,0BAA0BC,MAAM,WA/BrBzR,EAmCnBwE,OAAS,WACP7C,MAAK,eAAAd,OAAgBb,EAAKpB,MAAMoF,MAAMC,KAAO,CAC3CrC,OAAQ,MACRY,KAAMC,KAAKC,UAAU1C,EAAKc,MAAMkD,OAChCnC,QAASA,GAAQ7B,EAAKpB,MAAMK,QAE3BgD,KAAKzC,IACLyC,KAAK,SAAAyF,GACJ1H,EAAKpB,MAAM8S,SAAXxS,OAAAwF,EAAA,EAAAxF,CAAA,GAAyBc,EAAKc,MAAMkD,MAAU0D,IAE9C8J,EAAE,0BAA0BC,MAAM,WA7CrBzR,EAiDnB2D,OAAS,WACPiD,QAAQC,IAAI,CACVlF,MAAK,iCAAAd,OAAkCb,EAAKc,MAAMkD,MAAMY,OAAS,CAC/D/C,QAASA,GAAQ7B,EAAKpB,MAAMK,QAC3BgD,KAAKzC,IACRmC,MAAK,qCAAAd,OAAmCb,EAAKc,MAAMkD,MAAMY,OAAS,CAChE/C,QAASA,GAAQ7B,EAAKpB,MAAMK,QAC3BgD,KAAKzC,MACPyC,KAAK,SAAAC,GAAA,IAAAS,EAAAzD,OAAA4H,EAAA,EAAA5H,CAAAgD,EAAA,GAAEgF,EAAFvE,EAAA,GAAUwO,EAAVxO,EAAA,UACN3C,EAAKqC,SAAS,CAAE6O,SAAU,CAAEhK,SAAQiK,gBA1DrBnR,EA8DnB2R,yBAA2B,SAAAC,GAErBA,IAAe5R,EAAKc,MAAMkD,MAAM4N,WAClC5R,EAAKqC,SAAS,CACZ2B,MAAM9E,OAAAwF,EAAA,EAAAxF,CAAA,GACDc,EAAKc,MAAMkD,MADX,CAEH4N,WAAY,SAIhBjQ,MAAK,uBAAAd,OAAwB+Q,GAAc,CACzC/P,QAASA,GAAQ7B,EAAKpB,MAAMK,QAE3BgD,KAAKzC,IACLyC,KAAK,SAAA2F,GAAA,IAAG5D,EAAH4D,EAAG5D,MAAH,OACJhE,EAAKqC,SAAS,CACZ2B,MAAM9E,OAAAwF,EAAA,EAAAxF,CAAA,GACDc,EAAKc,MAAMkD,MADX,CAEH4N,aACAhN,MAAOZ,EAAMY,MACbG,MAAOf,EAAMe,MAAMa,IAAI,SAAAiM,GAAC,OAAIA,EAAEL,IAAGM,OACjCxM,KAAM,OACNR,eACEd,EAAM+N,SAAW/N,EAAM+N,QAAQC,YAC3B,IAAI5P,KAAK4B,EAAM+N,QAAQC,aAAaC,cACpCjO,EAAMc,eACZmM,QAASjN,EAAMkO,SACf/L,QAASnC,EAAMmO,OAASnO,EAAMmO,OAAOC,KAAO,UAzFrCpS,EAgGnBqS,0BAA4B,SAAAT,GAEtBA,IAAe5R,EAAKc,MAAMkD,MAAM4N,WAClC5R,EAAKqC,SAAS,CACZ2B,MAAM9E,OAAAwF,EAAA,EAAAxF,CAAA,GACDc,EAAKc,MAAMkD,MADX,CAEH4N,WAAY,SAIhBjQ,MAAK,uBAAAd,OAAwB+Q,GAAc,CACzC/P,QAASA,GAAQ7B,EAAKpB,MAAMK,QAE3BgD,KAAKzC,IACLyC,KAAK,SAAA+F,GAAA,IAAGsK,EAAHtK,EAAGsK,SAAH,OACJtS,EAAKqC,SAAS,CACZ2B,MAAM9E,OAAAwF,EAAA,EAAAxF,CAAA,GACDc,EAAKc,MAAMkD,MADX,CAEH4N,aACAhN,MAAO0N,EAAS1N,MAChBG,MAAOuN,EAASvN,MAAMa,IAAI,SAAAiM,GAAC,OAAIA,EAAEL,IAAGM,OACpCxM,KAAM,WACNR,eAAgBwN,EAASC,UACzBtB,QAASqB,EAASJ,SAClB/L,QAASmM,EAASH,OAASG,EAASH,OAAOC,KAAO,UAxH3CpS,EA+HnBwS,QAAU,SAAC/N,GAAoC,IAA7B6I,EAA6BlN,UAAAC,OAAA,QAAA0H,IAAA3H,UAAA,GAAAA,UAAA,GAAjB,SAAAsH,GAAI,OAAIA,GACpC,OAAO,SAAAyH,GAAK,OACVnP,EAAKqC,SAAS,CACZ2B,MAAM9E,OAAAwF,EAAA,EAAAxF,CAAA,GAAMc,EAAKc,MAAMkD,MAAlB9E,OAAAyF,EAAA,EAAAzF,CAAA,GAA0BuF,EAAQ6I,EAAU6B,EAAMO,OAAOnO,aAlIjDvB,EAsInByS,SAAW,SAAAhO,GACT,OAAO,SAAAlD,GAAK,OACVvB,EAAKqC,SAAS,CAAE2B,MAAM9E,OAAAwF,EAAA,EAAAxF,CAAA,GAAMc,EAAKc,MAAMkD,MAAlB9E,OAAAyF,EAAA,EAAAzF,CAAA,GAA0BuF,EAAQlD,QAtIzDvB,EAAKc,MAAQ,CACXkD,MAAOpF,EAAMoF,MAAQpF,EAAMoF,MAAQgN,GAAahN,MAChDkN,SAAUF,GAAaE,UAJRlR,mFAUjBwR,EAAE,0BAA0BkB,GAAG,gBAAiBxS,KAAKtB,MAAM+T,0CAiIpD,IAAAnR,EAAAtB,KACC8D,EAAU9D,KAAKY,MAAfkD,MACR,OACEnF,EAAAC,EAAAC,cAACgS,EAAA,SAAD,KACG7Q,KAAKtB,MAAMgU,YAAY5R,SAAWsF,EACjCzH,EAAAC,EAAAC,cAAA,yBAEAF,EAAAC,EAAAC,cAAA,OACEsE,UAAU,oCACV+D,GAAG,wBACHyL,SAAS,KACTC,KAAK,SACLC,YAAU,QAEVlU,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,qCAAqCyP,KAAK,YACvDjU,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,iBACbxE,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,gBACbxE,EAAAC,EAAAC,cAAA,MAAIsE,UAAU,eACVW,GAASA,EAAMY,OAAU,OAE7B/F,EAAAC,EAAAC,cAAA,UACEuG,KAAK,SACLjC,UAAU,QACV2P,eAAa,QACbC,aAAW,SAEXpU,EAAAC,EAAAC,cAAA,QAAMmU,cAAY,QAAlB,UAGJrU,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,cACbxE,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,YACbxE,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,qBACbxE,EAAAC,EAAAC,cAAA,SAAOoU,QAAQ,SAAf,SACAtU,EAAAC,EAAAC,cAAA,SACEuG,KAAK,OACLjC,UAAU,eACV+D,GAAG,QACHgM,mBAAiB,QACjBhF,YAAY,cACZ9J,SAAUpE,KAAKsS,QAAQ,SACvBjR,MAAOrB,KAAKY,MAAMkD,MAAMY,SAG5B/F,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,gCACbxE,EAAAC,EAAAC,cAAA,KACEsE,UAAU,uBACVC,MAAO,CACLE,OAAQ,UACRD,MAAO,UACP8P,WAAY,QAEdnQ,QAAShD,KAAKyD,WAInBzD,KAAKY,MAAMoQ,SAAShK,OAAO7G,OAAS,EACnCxB,EAAAC,EAAAC,cAACuU,GAAD,KACG,SAAAC,GAAsB,IAAnB1C,EAAmB0C,EAAnB1C,KAAMC,EAAayC,EAAbzC,OACR,OACEjS,EAAAC,EAAAC,cAACgS,EAAA,SAAD,KACElS,EAAAC,EAAAC,cAAA,OAAKmE,QAAS4N,EAAQxN,MAAO,CAAEE,OAAQ,YACpChC,EAAKV,MAAMoQ,SAAShK,OAAO7G,OAD9B,UAEGwQ,EACChS,EAAAC,EAAAC,cAAA,KAAGsE,UAAU,sBAEbxE,EAAAC,EAAAC,cAAA,KAAGsE,UAAU,yBAGjBxE,EAAAC,EAAAC,cAAA,OACEsE,UAAU,MACVC,MAAO,CACLuI,UAAW,SACXxB,QAASwG,EAAO,OAAS,OACzB5B,SAAU,WAGXzN,EAAKV,MAAMoQ,SAAShK,OAAOtB,IAAI,SAAA5B,GAAK,OACnCnF,EAAAC,EAAAC,cAAA,OACEuC,IAAK0C,EAAMwP,KACXnQ,UAAS,wBAAAxC,OACPmD,EAAMwP,OAAShS,EAAKV,MAAMkD,MAAM4N,WAC5B,WACA,IAEN1O,QAAS,kBACP1B,EAAKmQ,yBAAyB3N,EAAMwP,QAGrCxP,EAAMwP,OACPhS,EAAKV,MAAMkD,MAAM4N,WACf/S,EAAAC,EAAAC,cAAA,KAAGsE,UAAU,kDACX,KACJxE,EAAAC,EAAAC,cAAA,WACGiF,EAAMY,MADT,KACkB,IACfZ,EAAM+N,SAAW/N,EAAM+N,QAAQC,YAC5B,IAAI5P,KACF4B,EAAM+N,QAAQC,aACdC,cACFjO,EAAMc,gBAEZjG,EAAAC,EAAAC,cAAA,WACGiF,EAAMmO,OACLtT,EAAAC,EAAAC,cAAA,OACEmH,IAAKlC,EAAMmO,OAAOC,KAClBhM,IAAI,eACJ9C,MAAO,CAAEoI,MAAO,UAEhB,aASlB,KACHxL,KAAKY,MAAMoQ,SAASC,QAAQ9Q,OAAS,EACpCxB,EAAAC,EAAAC,cAACuU,GAAD,KACG,SAAAG,GAAsB,IAAnB5C,EAAmB4C,EAAnB5C,KAAMC,EAAa2C,EAAb3C,OACR,OACEjS,EAAAC,EAAAC,cAACgS,EAAA,SAAD,KACElS,EAAAC,EAAAC,cAAA,OAAKmE,QAAS4N,EAAQxN,MAAO,CAAEE,OAAQ,YACpChC,EAAKV,MAAMoQ,SAASC,QAAQ9Q,OAD/B,YAEGwQ,EACChS,EAAAC,EAAAC,cAAA,KAAGsE,UAAU,sBAEbxE,EAAAC,EAAAC,cAAA,KAAGsE,UAAU,yBAGjBxE,EAAAC,EAAAC,cAAA,OACEsE,UAAU,MACVC,MAAO,CACLuI,UAAW,SACXxB,QAASwG,EAAO,OAAS,OACzB5B,SAAU,WAGXzN,EAAKV,MAAMoQ,SAASC,QAAQvL,IAAI,SAAA8N,GAAM,OACrC7U,EAAAC,EAAAC,cAAA,OACEuC,IAAKoS,EAAOF,KACZnQ,UAAS,wBAAAxC,OACP6S,EAAOF,OAAShS,EAAKV,MAAMkD,MAAM4N,WAC7B,WACA,IAEN1O,QAAS,kBACP1B,EAAK6Q,0BAA0BqB,EAAOF,QAGvCE,EAAOF,OACRhS,EAAKV,MAAMkD,MAAM4N,WACf/S,EAAAC,EAAAC,cAAA,KAAGsE,UAAU,kDACX,KACJxE,EAAAC,EAAAC,cAAA,WACG2U,EAAO9O,MADV,MACoB8O,EAAOnB,WAE3B1T,EAAAC,EAAAC,cAAA,WACG2U,EAAOvB,OACNtT,EAAAC,EAAAC,cAAA,OACEmH,IAAKwN,EAAOvB,OAAOC,KACnBhM,IAAI,gBACJ9C,MAAO,CAAEoI,MAAO,UAEhB,aASlB,KACJ7M,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,cACbxE,EAAAC,EAAAC,cAAA,sBACAF,EAAAC,EAAAC,cAACwQ,GAAD,CACEnH,cAAelI,KAAKY,MAAMkD,MAAMe,MAChCqJ,YAAY,QACZC,MAAOnO,KAAKtB,MAAMgU,YAAYnM,OAC9B0H,aAAcjO,KAAKuS,SAAS,YAGhC5T,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,cACbxE,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAAC4U,GAAD,CACE1K,aAAc/I,KAAKY,MAAMkD,MAAMsB,KAC/B8I,YAAY,OACZC,MAAOnO,KAAKtB,MAAMgU,YAAYlM,MAC9BpC,SAAUpE,KAAKuS,SAAS,WAG5B5T,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,cACbxE,EAAAC,EAAAC,cAAA,SAAOoU,QAAQ,mBAAf,mBACAtU,EAAAC,EAAAC,cAAA,SACEuG,KAAK,SACLjC,UAAU,eACV+D,GAAG,kBACHgM,mBAAiB,kBACjBhF,YAAY,wBACZ9J,SAAUpE,KAAKsS,QAAQ,iBAAkB,SAAA9K,GAAI,OAC3CuI,SAASvI,EAAM,MAEjBnG,MAAOrB,KAAKY,MAAMkD,MAAMc,kBAG5BjG,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,cACbxE,EAAAC,EAAAC,cAAA,SAAOoU,QAAQ,WAAf,WACAtU,EAAAC,EAAAC,cAAA,YACEsE,UAAU,eACV+D,GAAG,UACHgM,mBAAiB,UACjBhF,YAAY,gBACZ9J,SAAUpE,KAAKsS,QAAQ,WACvBjR,MAAOrB,KAAKY,MAAMkD,MAAMiN,YAI9BpS,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,gBACbxE,EAAAC,EAAAC,cAAA,UACEuG,KAAK,SACLjC,UAAU,oBACV2P,eAAa,SAHf,SAOAnU,EAAAC,EAAAC,cAAA,UACEuG,KAAK,SACLsO,UAAW1T,KAAKmR,QAChBhO,UAAU,kBACVH,QAAShD,KAAKY,MAAMkD,MAAMC,IAAM/D,KAAKsE,OAAStE,KAAK+G,KAElDjD,EAAMC,IAAM,SAAW,oBApXTzF,IAAMG,WAgY5BkV,IT9ZkBlV,GS8ZUD,EAAS0S,IT9ZN,SAAAxS,GAAK,OAC/CC,EAAAC,EAAAC,cAACsH,EAAmBrH,SAApB,KACG,SAAA4T,GAAW,OAAI/T,EAAAC,EAAAC,cAACJ,GAADO,OAAAC,OAAA,GAAeP,EAAf,CAAsBgU,YAAaA,SUOjDnP,GAAYqQ,GAAmB,GA6BxBC,GAAO,WAAM,IAEhB/S,EAAW+O,qBAAW1J,GAAtBrF,OAFgBgP,EAWpBD,qBAAWhJ,GAPbc,EAJsBmI,EAItBnI,WACAX,EALsB8I,EAKtB9I,OACAS,EANsBqI,EAMtBrI,MACAF,EAPsBuI,EAOtBvI,OACAQ,EARsB+H,EAQtB/H,QACAhB,EATsB+I,EAStB/I,IACAzC,EAVsBwL,EAUtBxL,OAEIvF,EAAO8Q,qBAAWxR,GAZAyV,EAeIC,mBAAS/M,EAAO7G,OAAS4H,EAAQC,OAfrCgM,EAAAhV,OAAA4H,EAAA,EAAA5H,CAAA8U,EAAA,GAejBG,EAfiBD,EAAA,GAeTE,EAfSF,EAAA,GAAAG,EAgBEJ,mBA9CJ,IA8BEK,EAAApV,OAAA4H,EAAA,EAAA5H,CAAAmV,EAAA,GAgBjBrQ,EAhBiBsQ,EAAA,GAgBVC,EAhBUD,EAAA,GAAAE,EAiBFP,mBAAS,GAjBPQ,EAAAvV,OAAA4H,EAAA,EAAA5H,CAAAsV,EAAA,GAiBjBlT,EAjBiBmT,EAAA,GAiBZC,EAjBYD,EAAA,GAAAE,EAkBIV,oBAAS,GAlBbW,EAAA1V,OAAA4H,EAAA,EAAA5H,CAAAyV,EAAA,GAkBjBE,EAlBiBD,EAAA,GAkBTE,EAlBSF,EAAA,GAqBlBG,EAAW,SAAAZ,GAEA,IAAXA,GACFtM,IAEFiN,GAAU,GACVrR,GAtDe,SAACwE,EAASkM,GAE3B,IAAM1N,EAASwB,EAAQxB,OACpBc,OAAO,SAAAxC,GAAK,OAAIA,EAAM,KACtBa,IAAI,SAAAb,GAAK,OAAIA,EAAM,KAChBiQ,EAAY/M,EAAQxB,OACvBc,OAAO,SAAAxC,GAAK,OAAKA,EAAM,KACvBa,IAAI,SAAAb,GAAK,OAAIA,EAAM,KACtB,OAAO7F,OAAO+V,KAAKhN,GAChBV,OAAO,SAAAjG,GAAG,MAAY,WAARA,IACdiG,OACC,SAAAjG,GAAG,OACC4T,IAAQjN,EAAQ3G,KACC,OAAjB2G,EAAQ3G,IACS,KAAjB2G,EAAQ3G,IACT4T,IAAQjN,EAAQ3G,KAAS2G,EAAQ3G,GAAKjB,OAAS,IAEnDuF,IAAI,SAAAtE,GAAG,SAAAT,OAAOS,EAAP,KAAAT,OAAcoH,EAAQ3G,MAC7BT,OACC4F,EAAOpG,OAAS,EAAhB,UAAAQ,OAA8B4F,EAAOzB,KAAK,MAAS,GACnDgQ,EAAU3U,OAAS,EAAnB,aAAAQ,OAAoCmU,EAAUhQ,KAAK,MAAS,GAZzD,UAAAnE,OAaOsT,IAEX5M,OAAOC,SACPxC,KAAK,KA8BImQ,CAAWlN,EAASkM,GAASlV,GACpCgD,KAAKwF,GACLxF,KAAK,WACJmS,EAAUD,EAAS,GACnBW,GAAU,MA+BhB,OAnBAM,oBACE,WAEE,IAAMC,EAAoBC,KAASP,EAAU,IAAK,CAChDQ,SAAS,EACTC,UAAU,IAOZ,OAJsB,IAAlBtO,EAAO7G,QACTgV,EAAkB,GAEpBP,GAAU,GACH,kBAAMO,EAAkBI,WAEjC,CAACxN,IAEHmN,oBAzBkB,WAEZ9T,EAAM,GAERkQ,EAAE,0BAA0BC,MAAM,SAqBjB,CAACzN,IAIpBnF,EAAAC,EAAAC,cAAA,WACGiC,IAAWsF,EACVzH,EAAAC,EAAAC,cAAA,MAAIsE,UAAU,oBACZxE,EAAAC,EAAAC,cAAA,KAAGsE,UAAU,kCAGfxE,EAAAC,EAAAC,cAACgS,EAAA,SAAD,KACElS,EAAAC,EAAAC,cAAC8U,GAAD,CAEEvS,IAAK0C,EAAMC,KAAO3C,EAClB0C,MAAOA,EAAMC,IAAMD,EAAQ,KAC3BuN,MAAO,SAAAvN,GAAK,OAAIiD,EAAIjD,IACpB0N,SAAU,SAAA1N,GAAK,OAAIQ,EAAOR,EAAMC,IAAKD,MAEvCnF,EAAAC,EAAAC,cAAA,KACEmE,QAAS,WACPqR,EA7GU,IA8GVG,EAAOpT,EAAM,IAEf+B,UAAU,2BACVC,MAAO,CACL8B,IAAK,OACLsQ,KAAM,OACNvQ,SAAU,WACV5B,MAAO,UACPC,OAAQ,WAEVoB,MAAM,6BAER/F,EAAAC,EAAAC,cAAC4W,GAAD,MACA9W,EAAAC,EAAAC,cAAA,MAAIsE,UAAU,eACX6D,EAAO7G,SAAWsH,GAASA,EAAQ,EAClC9I,EAAAC,EAAAC,cAAA,YAAO4I,EAAP,mBACET,EAAO7G,OAASsH,EAClB9I,EAAAC,EAAAC,cAAA,YACGmI,EAAO7G,OADV,OACsBsH,EADtB,mBAGEkN,EACFhW,EAAAC,EAAAC,cAAA,kCACE,MAENF,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,UACZ6D,EAAOtB,IAAI,SAAA5B,GAAK,OACfnF,EAAAC,EAAAC,cAACqF,EAAD,CACE9C,IAAK0C,EAAMC,IACXD,MAAOA,EACPM,SAAU,SAAAN,GAAK,OAAIQ,EAAOR,EAAMC,IAAKD,IACrCO,SAAU,SAAAqR,GAAC,OAAIpR,EAAOR,EAAMC,SAAK8D,IACjC1D,OAAQ,WACNkQ,EAASrV,OAAAwF,EAAA,EAAAxF,CAAA,GACJ8E,IAEL0Q,EAAOpT,EAAM,SAKrBzC,EAAAC,EAAAC,cAAA,MAAIsE,UAAU,oBACVwR,EAIE,KAHFhW,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,KAAGsE,UAAU,mCAIlB6D,EAAO7G,OAASsH,EACf9I,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,mBACbxE,EAAAC,EAAAC,cAAA,UACEmE,QAAS,kBAAM6R,EAASZ,IACxB9Q,UAAU,0BAFZ,mBAQF0E,wBC/KN8N,GAAgB,SAAAjX,GAAS,IAAAoV,EACHC,mBAASrV,EAAM2C,OAAS,IADrB2S,EAAAhV,OAAA4H,EAAA,EAAA5H,CAAA8U,EAAA,GACtBzS,EADsB2S,EAAA,GACf4B,EADe5B,EAAA,GAAAG,EAELJ,oBAAUrV,EAAM2C,OAFX+S,EAAApV,OAAA4H,EAAA,EAAA5H,CAAAmV,EAAA,GAEtB0B,EAFsBzB,EAAA,GAEhB0B,EAFgB1B,EAAA,GAGvBhH,EAAY1O,EAAM0O,WAAasB,IAC/BqH,EAAOrX,EAAMqX,OAAQ,EAC3B,OACEpX,EAAAC,EAAAC,cAACgS,EAAA,SAAD,MACIkF,GAAQF,EACRlX,EAAAC,EAAAC,cAACgS,EAAA,SAAD,KACGnS,EAAMsX,gBAANhX,OAAAwF,EAAA,EAAAxF,CAAA,GACIN,EADJ,CAEC2C,QACA+C,SAAU,SAAA6K,GAAK,OAAI2G,EAASxI,EAAU6B,EAAMO,OAAOnO,YAErD1C,EAAAC,EAAAC,cAAA,UACEsE,UAAU,kBACVH,QAAS,SAAAiM,GACPA,EAAMC,iBACND,EAAMxF,kBACFpI,IACF3C,EAAM0F,SAAS/C,GACfyU,GAAQ,MAPd,OAeFnX,EAAAC,EAAAC,cAACgS,EAAA,SAAD,KACGnS,EAAMuX,YAAY,CACjB9S,UAAWzE,EAAMyE,UACjB9B,QACA2B,QAAS,SAAAiM,GACF8G,IACH9G,EAAMC,iBACND,EAAMxF,kBACNqM,GAAQ,UAUXI,GAAgB,SAAAxX,GAAK,OAChCC,EAAAC,EAAAC,cAACsX,GAADnX,OAAAC,OAAA,GACMP,EADN,CAEEsX,gBAAiB,SAAAI,GAAU,OACzBzX,EAAAC,EAAAC,cAAA,SACEqP,YAAakI,EAAWlI,YACxB9I,KAAK,OACL/D,MAAO+U,EAAW/U,MAClB+C,SAAUgS,EAAWhS,SACrBpB,QAAS,SAAAiM,GACPA,EAAMC,iBACND,EAAMxF,sBAIZwM,YAAa,SAAAI,GAAU,OACrB1X,EAAAC,EAAAC,cAAA,QAAMmE,QAASqT,EAAWrT,QAASG,UAAWkT,EAAWlT,WACtDkT,EAAWhV,YAMPiV,GAAmB,SAAA5X,GAAK,OACnCC,EAAAC,EAAAC,cAACsX,GAADnX,OAAAC,OAAA,GACMP,EADN,CAEEsX,gBAAiB,SAAAI,GAAU,OACzBzX,EAAAC,EAAAC,cAAA,YACEqP,YAAakI,EAAWlI,YACxB9K,MAAOgT,EAAWhT,MAClB/B,MAAO+U,EAAW/U,MAClBkV,KAAMH,EAAWG,MAAQ,EACzBnS,SAAUgS,EAAWhS,SACrBpB,QAAS,SAAAiM,GACPA,EAAMC,iBACND,EAAMxF,sBAIZwM,YAAa,SAAAI,GAAU,OACrB1X,EAAAC,EAAAC,cAAA,QAAMmE,QAASqT,EAAWrT,QAASG,UAAWkT,EAAWlT,WACtDzE,EAAM8X,MACLH,EAAWhV,MAAMmV,MAAM,MAAM9Q,IAAI,SAACyD,EAAM/H,GAAP,OAC/BzC,EAAAC,EAAAC,cAACgS,EAAA,SAAD,CAAUzP,IAAKA,GACZ+H,EACDxK,EAAAC,EAAAC,cAAA,cAIJF,EAAAC,EAAAC,cAACgS,EAAA,SAAD,KAAWwF,EAAWhV,aC3FnBoV,WAAU,SAAAzU,GAA0C,IAAvC0U,EAAuC1U,EAAvC0U,QAASvP,EAA8BnF,EAA9BmF,MAAOwP,EAAuB3U,EAAvB2U,iBAElC5X,EAAO8Q,qBAAWxR,GAFuCuR,EAGvCC,qBAAW+G,IAA3B9S,EAHuD8L,EAGvD9L,MAAOiS,EAHgDnG,EAGhDmG,KAHgDjG,EAIxBD,qBAAWgH,IAA1C5S,EAJuD6L,EAIvD7L,OAAe6S,EAJwChH,EAI/C3I,MAJ+C2M,EAK/BC,mBAAS,YALsBC,EAAAhV,OAAA4H,EAAA,EAAA5H,CAAA8U,EAAA,GAKxDiD,EALwD/C,EAAA,GAK9CgD,EAL8ChD,EAAA,GAczDiD,EAAgB,SAAA7J,GACpB,IAAM8J,EAAWC,aAAQrT,EAAOsJ,GAC1BnJ,EAASiT,EAASzR,QAAQqR,IhBwDP,SAAChT,EAAOG,EAAQyS,EAAS3X,GACpD,OAAO0C,MAAK,eAAAd,OACKmD,EAAMC,IADX,aAAApD,OAC0BsD,EAAOF,IADjC,cAAApD,OACiD+V,EAAQ3S,KACnE,CACErC,OAAQ,MACRY,KAAMC,KAAKC,UAAUkU,GACrB/U,QAASA,EAAQ5C,KAEnBgD,KAAKzC,IgB9DLsU,CAAuBsD,EAAUjT,EADjBA,EAAO0B,SAASwB,GACkBpI,GAAMgD,KACtD4U,IAIJ,OACEhY,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,yBACbxE,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,sDACX4S,GACApX,EAAAC,EAAAC,cAAA,KACEsE,UAAU,8BACVH,QAAS,SAAAiM,GACPA,EAAMC,iBACND,EAAMxF,kBACF5D,OAAOC,QAAQ,qBhBmDJ,SAAChC,EAAOG,EAAQyS,EAAS3X,GACpD,OAAO0C,MAAK,eAAAd,OACKmD,EAAMC,IADX,aAAApD,OAC0BsD,EAAOF,IADjC,cAAApD,OACiD+V,EAAQ3S,KACnE,CACErC,OAAQ,SACRC,QAASA,EAAQ5C,KAEnBgD,KAAKzC,GgBzDOsU,CAAuB9P,EAAOG,EAAQyS,EAAS3X,GAAMgD,KACnD4U,MAMVhY,EAAAC,EAAAC,cAAA,OACEsE,UAAU,oBACVC,MAAO,CACLC,MAAOqT,EAAQ3T,KAAO,iBAAmB,GACzC4H,WAAY+L,EAAQ3T,KAAO,OAAS,GACpCO,OAAQ,WAEVN,QAAS,kBAvCI,SAAAoK,GACnB,IAAM8J,EAAWC,aAAQrT,EAAOsJ,GAC1BnJ,EAASiT,EAASzR,QAAQqR,GAEhClD,EAAsBsD,EAAUjT,EAAQlF,GAAMgD,KAAK4U,GAoC3C3S,CAAa,SAAAF,GACX,GAAKA,EAAM2B,QAAQqR,GAAanR,SAASwB,GAAOpE,KAK9Ce,EAAM2B,QAAQqR,GAAanR,SAASwB,GAAOpE,MAAO,OAJlD,IAAK,IAAIsG,EAAI,EAAGA,GAAKlC,EAAOkC,IAC1BvF,EAAM2B,QAAQqR,GAAanR,SAAS0D,GAAGtG,MAAO,MAQrDoE,EAAQ,GAEXxI,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,sBACbxE,EAAAC,EAAAC,cAACuY,GAAD,CACErB,KAAMA,EACN5S,UAAS,kCAAAxC,OACP+V,EAAQ3T,KAAO,OAAS,IAE1B1B,MAAOqV,EAAQhS,MACfwJ,YAAY,QACZ9J,SAAU,SAAAM,GAAK,OACbuS,EAAc,SAAAnT,GACZA,EAAM2B,QAAQqR,GAAanR,SAASwB,GAAOzC,MAAQA,SAM7D/F,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,iDACbxE,EAAAC,EAAAC,cAACwY,GAAD,CACEtB,KAAMA,EACN3S,MAAO,CAAEoI,MAAO,QAChB+K,KAAM,EACNlV,MAAOqV,EAAQ3F,QACf7C,YAAY,UACZ/K,UAAS,GAAAxC,OAAKoW,EAAL,4CACT3S,SAAU,SAAA2M,GAAO,OACfkG,EAAc,SAAAnT,GACZA,EAAM2B,QAAQqR,GAAanR,SAASwB,GAAO4J,QAAUA,OAI1DgG,GACCpY,EAAAC,EAAAC,cAAA,QAAMuE,MAAO,CAAEE,OAAQ,WAAaN,QAAS,kBAAMgU,EAAY,MAC7DrY,EAAAC,EAAAC,cAAA,KAAGsE,UAAU,gCCnGZmU,GAAY,WAA0B,IAAzBC,EAAyBrX,UAAAC,OAAA,QAAA0H,IAAA3H,UAAA,IAAAA,UAAA,GAAA4T,EACvBC,mBAASwD,GADcvD,EAAAhV,OAAA4H,EAAA,EAAA5H,CAAA8U,EAAA,GAC1CzS,EAD0C2S,EAAA,GACnC4B,EADmC5B,EAAA,GAGjD,MAAO,CAAC3S,EADO,kBAAMuU,GAAUvU,MAIpBmW,GAAW,WAAuB,IAAtBD,EAAsBrX,UAAAC,OAAA,QAAA0H,IAAA3H,UAAA,GAAAA,UAAA,GAAP,GAAOiU,EACnBJ,mBAASwD,GADUnD,EAAApV,OAAA4H,EAAA,EAAA5H,CAAAmV,EAAA,GACtC9S,EADsC+S,EAAA,GAC/BwB,EAD+BxB,EAAA,GAE7C,MAAO,CACL,CACE/S,QACA+C,SAAU,SAAA6K,GAAK,OAAI2G,EAAS3G,EAAMO,OAAOnO,SAE3CuU,ICDSiB,GAAgBvY,IAAMC,cAAc,IAEpCkZ,GAAS,SAAAzV,GAAuC,IAApCiC,EAAoCjC,EAApCiC,OAAQkD,EAA4BnF,EAA5BmF,MAAOuQ,EAAqB1V,EAArB0V,eAEhC3Y,EAAO8Q,qBAAWxR,GAFmCuR,EAGnCC,qBAAW+G,IAA3B9S,EAHmD8L,EAGnD9L,MAAOiS,EAH4CnG,EAG5CmG,KAH4C4B,EAIpCL,KAJoCM,EAAA5Y,OAAA4H,EAAA,EAAA5H,CAAA2Y,EAAA,GAIpDhH,EAJoDiH,EAAA,GAI9ChH,EAJ8CgH,EAAA,GAOrD5T,EAAe,SAAAoJ,GACnB,IAAM8J,EAAWC,aAAQrT,EAAOsJ,GAC1BnJ,EAASiT,EAASzR,QAAQ0B,GAChCyM,EAAsBsD,EAAUjT,EAAQlF,GAAMgD,KAAK2V,IAG/C3U,EAAOyC,IAAMvB,EAAO0B,SAAU,SAAW1B,EAAO0B,SAASxF,OAAS,EAClE0X,EAAUjS,IAAK3B,EAAO0B,SAAU,SAAW1B,EAAO0B,SAASxF,OAAS,EAE1E,OACExB,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,UACbxE,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,gBAAgBH,QAAS4N,GACtCjS,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OACEsE,UAAU,qBACVH,QAAS,SAAAiM,GACPA,EAAMC,iBACND,EAAMxF,kBACNzF,EAAa,SAAAF,GACXA,EAAM2B,QAAQ0B,GAAOpE,MAAQA,MAIjCpE,EAAAC,EAAAC,cAAC0G,EAAD,CAAWxC,KAAMA,EAAMG,QAAS2U,MAEhC9B,GACApX,EAAAC,EAAAC,cAAA,KACEsE,UAAU,6BACVH,QAAS,SAAAiM,GACPA,EAAMC,iBACND,EAAMxF,kBACF5D,OAAOC,QAAQ,oBlBWP,SAAChC,EAAOG,EAAQlF,GAC1C,OAAO0C,MAAK,eAAAd,OAAgBmD,EAAMC,IAAtB,aAAApD,OAAqCsD,EAAOF,KAAO,CAC7DrC,OAAQ,SACRC,QAASA,EAAQ5C,KAChBgD,KAAKzC,GkBdQsU,CAAsB9P,EAAOG,EAAQlF,GAAMgD,KACzC2V,MArBZ,cA2BgBvQ,EAAQ,EA3BxB,YA6BExI,EAAAC,EAAAC,cAACuY,GAAD,CACErB,KAAMA,EACN7H,YAAY,OACZ7M,MAAO4C,EAAOW,eACdwI,UAAW,SAAA/L,GAAK,OAAI0O,SAAS1O,EAAO,KACpC+C,SAAU,SAAAQ,GAAc,OACtBZ,EAAa,SAAAF,GACXA,EAAM2B,QAAQ0B,GAAOvC,eAAiBA,QAK9CjG,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,uBACZwN,EACChS,EAAAC,EAAAC,cAAA,KAAGsE,UAAU,sBAEbxE,EAAAC,EAAAC,cAAA,KAAGsE,UAAU,0BAInBxE,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,YACbxE,EAAAC,EAAAC,cAACgY,GAAcjU,SAAf,CAAwBvB,MAAO,CAAE4C,SAAQkD,UACtCwJ,GACC1M,EAAO0B,SAASD,IAAI,SAACgR,EAASoB,GAAV,OAClBnZ,EAAAC,EAAAC,cAACkZ,GAAD,CACE3W,IAAKsV,EAAQ3S,IACb2S,QAASA,EACTvP,MAAO2Q,EACPnB,iBAAkBe,QAM1B3B,OAeAlO,EAdAlJ,EAAAC,EAAAC,cAACgS,EAAA,SAAD,KACGF,GACChS,EAAAC,EAAAC,cAAA,UACEsE,UAAU,kBACVH,QAAS,kBlB/BG,SAACc,EAAOG,EAAQlF,GACxC,OAAO0C,MAAK,eAAAd,OAAgBmD,EAAMC,IAAtB,aAAApD,OAAqCsD,EAAOF,IAA5C,aAA4D,CACtErC,OAAQ,OACRY,KAAMC,KAAKC,UAAUyB,GACrBtC,QAASA,EAAQ5C,KAChBgD,KAAKzC,GkB2BMsU,CAAoB9P,EAAOG,EAAQlF,GAAMgD,KAAK2V,KAGhD/Y,EAAAC,EAAAC,cAAA,KAAGsE,UAAU,gBANf,sBCzFCyT,WAAetY,IAAMC,cAAc,KAEnCyZ,GAAQC,aAAW,SAAAjW,GAAwB,IAArBkW,EAAqBlW,EAArBkW,MAAOC,EAAcnW,EAAdmW,QAElCpZ,EAAO8Q,qBAAWxR,GAClB2I,EAAS6I,qBAAWhJ,GAH4BiN,EAK5BC,qBAL4BC,EAAAhV,OAAA4H,EAAA,EAAA5H,CAAA8U,EAAA,GAK/ChQ,EAL+CkQ,EAAA,GAKxCK,EALwCL,EAAA,GAAA2D,EAM/BL,IAAU,GANqBM,EAAA5Y,OAAA4H,EAAA,EAAA5H,CAAA2Y,EAAA,GAM/C5B,EAN+C6B,EAAA,GAMzChH,EANyCgH,EAAA,GAStD1C,oBAAU,kBnBZY,SAAChO,EAAInI,GAC3B,OAAO0C,MAAK,eAAAd,OAAgBuG,GAAM,CAChCvF,QAASA,EAAQ5C,KAChBgD,KAAKzC,GmBSQsU,CAAkBsE,EAAME,OAAOlR,GAAInI,GAAMgD,KAAKsS,IAAW,CACvE6D,EAAME,OAAOlR,KAIf,IAAMrD,EAAc,SAAAuJ,GAAS,OAAI,WAC/BwG,EAAqBuD,aAAQrT,EAAOsJ,GAAYrO,GAAMgD,KAAKsW,KAIvDA,EAAe,SAAAC,GACnBjE,EAASiE,GACTtR,EAAO1C,OAAOgU,EAAavU,IAAKuU,IAGlC,OACE3Z,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,6BACXW,EAKAnF,EAAAC,EAAAC,cAACgS,EAAA,SAAD,KACElS,EAAAC,EAAAC,cAAA,KACEmE,QAAS,kBAAMmV,EAAQI,UACvBpV,UAAU,iCACVC,MAAO,CACL8B,IAAK,OACLsQ,KAAM,OACNvQ,SAAU,WACV5B,MAAO,UACPC,OAAQ,WAEVoB,MAAM,iCAER/F,EAAAC,EAAAC,cAAA,OACEsE,UAAU,6BACVC,MAAO,CAAE6B,SAAU,aAEnBtG,EAAAC,EAAAC,cAAA,KACEmE,QAAS4N,EACTzN,UAAS,OAAAxC,OAASoV,EAAO,UAAY,eAA5B,UACT3S,MAAO,CACLC,MAAO,yBACP4B,SAAU,WACVC,IAAK,MACLC,MAAO,MACP7B,OAAQ,WAEVoB,MAAK,YAAA/D,OACHoV,EAAO,OAAS,QADb,8BAIPpX,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,iCACbxE,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OACEmH,IAAKlC,EAAMmC,QACX7C,MAAO,CAAEqI,UAAW,SACpBvF,IAAI,kBAGRvH,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,0BAA0BC,MAAO,CAAEoV,SAAU,IAC1D7Z,EAAAC,EAAAC,cAAA,MAAIsE,UAAU,eACXW,EAAMY,MADT,MACmBZ,EAAMc,gBAEzBjG,EAAAC,EAAAC,cAAA,MAAIsE,UAAU,qCACXW,EAAMe,MAAMC,KAAK,MAEpBnG,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACwY,GAAD,CACEb,OAAO,EACPT,KAAMA,EACN1U,MAAOyC,EAAMiN,QACb3N,MAAO,CAAEoI,MAAO,QAChB0C,YAAY,UACZqI,KAAK,IACLnS,SAAU,SAAA2M,GAAO,OACflN,EAAY,SAAAC,GACVA,EAAMiN,QAAUA,GADlBlN,SAQVlF,EAAAC,EAAAC,cAAA,WACkB,SAAfiF,EAAMsB,KACLzG,EAAAC,EAAAC,cAAC0G,EAAD,CACExC,KAAMe,EAAMf,KACZC,QAASa,EAAY,SAAAC,GACnBA,EAAMf,MAAQe,EAAMf,cAIxB8E,GAGJlJ,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,eACG,SAAfW,EAAMsB,KACLzG,EAAAC,EAAAC,cAACgS,EAAA,SAAD,KACElS,EAAAC,EAAAC,cAAC+X,GAAahU,SAAd,CAAuBvB,MAAO,CAAE0U,OAAMjS,UACpCnF,EAAAC,EAAAC,cAAA,WACGiF,EAAM2B,QAAQC,IAAI,SAACzB,EAAQ6S,GAAT,OACjBnY,EAAAC,EAAAC,cAAC4Z,GAAD,CACErX,IAAK0V,EACL7S,OAAQA,EACRkD,MAAO2P,EACPY,eAAgBW,QAKtBtC,OAWAlO,EAVAlJ,EAAAC,EAAAC,cAAA,UACEsE,UAAU,kBACVH,QAAS,kBnBzFN,SAACc,EAAO/E,GAC/B,OAAO0C,MAAK,eAAAd,OAAgBmD,EAAMC,IAAtB,YAAqC,CAC/CrC,OAAQ,OACRY,KAAMC,KAAKC,UAAUsB,GACrBnC,QAASA,EAAQ5C,KAChBgD,KAAKzC,GmBqFcsU,CAAmB9P,EAAO/E,GAAMgD,KAAKsW,KAGvC1Z,EAAAC,EAAAC,cAAA,KAAGsE,UAAU,gBANf,wBAcJ0E,KA7GRlJ,EAAAC,EAAAC,cAAA,MAAIsE,UAAU,oBACZxE,EAAAC,EAAAC,cAAA,KAAGsE,UAAU,qCCtCViD,GAAUjH,OAAO,WACjBkH,GAASlH,OAAO,UAOvBG,GAAiB,SAAAC,GACrB,GAAIA,EAASC,GAAI,OAAOD,EAASE,OACjC,MAAM,IAAIC,MAAM,eA0DLgZ,GAAQla,cAtDnB,SAAAma,EAAYja,GAAO,IAAAoB,EAAA,OAAAd,OAAAe,EAAA,EAAAf,CAAAgB,KAAA2Y,IACjB7Y,EAAAd,OAAAuB,EAAA,EAAAvB,CAAAgB,KAAAhB,OAAAwB,EAAA,EAAAxB,CAAA2Z,GAAAlY,KAAAT,KAAMtB,KACDkC,MAAQ,CACXE,OAAQsF,GACRoB,UAAMK,GAIR/H,EAAK8Y,cAAgBxD,KAAStV,EAAK2B,MAAO3B,EAAKpB,MAAM0W,UAAY,EAAG,CAClEC,SAAS,EACTC,UAAU,IAVKxV,sFAejBE,KAAK4Y,cAAcrD,sJAGb,IA7BMxW,EA6BNuC,EAAAtB,KACN,OAAOyB,MAAK,GAAAd,OAAIX,KAAKtB,MAAMma,UAAY,CACrClX,SA/BU5C,EA+BOiB,KAAKtB,MAAMK,KA/BT,CACvB6C,OAAQ,mBACRC,eAAgB,mBAChBC,cAAa,UAAAnB,OAAY5B,EAAK8B,WA8BzBkB,KAAKzC,IACLyC,KAAK,SAAAyF,GACJlG,EAAKa,SAAS,CACZrB,OAAQuF,GACRmB,SAEFlG,EAAK5C,MAAMoa,WAAaxX,EAAK5C,MAAMoa,UAAUtR,kDAKjDxH,KAAK4Y,iDAIL,OACEja,EAAAC,EAAAC,cAACgS,EAAA,SAAD,KACG7Q,KAAKtB,MAAMmE,SAAS,CACnB/B,OAAQd,KAAKY,MAAME,OACnB0G,KAAMxH,KAAKY,MAAM4G,eA1CI/I,cCblBsa,GAAS,WACpB,OACEpa,EAAAC,EAAAC,cAAA,OACEsE,UAAU,cACVC,MAAO,CACLmI,gBAAiB,yBACjBlI,MAAO,uBACPwH,QAAS,QAGXlM,EAAAC,EAAAC,cAAA,MAAIsE,UAAU,UACZxE,EAAAC,EAAAC,cAACkG,EAAA,EAAD,CAAMC,GAAG,KAAT,iBAEFrG,EAAAC,EAAAC,cAAC6Z,GAAD,CAAOG,SAAS,uBACb,SAAA7W,GAAA,IAAGwF,EAAHxF,EAAGwF,KAAH,OAAc7I,EAAAC,EAAAC,cAAA,UAAK2I,EAAOA,EAAKC,MAAQ,EAAzB,qBAEjB9I,EAAAC,EAAAC,cAACkG,EAAA,EAAD,CAAMC,GAAG,UACPrG,EAAAC,EAAAC,cAAA,KACEsE,UAAU,yBACVC,MAAO,CACL8B,IAAK,OACLC,MAAO,OACPF,SAAU,WACV5B,MAAO,UACPC,OAAQ,WAEVoB,MAAM,oDCvBVnB,GAAYqQ,GAAmB,GAC/BoF,GAAe,SAACxS,EAAOD,GAC3B,OAAOC,EAAMd,IAAI,SAAAN,GAAI,MAAK,CACxBwC,KAAMxC,EACNqC,MAAO,EACPlB,OAAQA,EAAOb,IAAI,SAAAb,GAAK,MAAK,CAC3B+C,KAAM/C,EACN4C,MAAO,EACP1E,KAAM,EACNkW,OAAQ,SAKDC,GAAa,WAExB,IAAMna,EAAO8Q,qBAAWxR,GAFMuR,EAGJC,qBAAW1J,GAA7BI,EAHsBqJ,EAGtBrJ,OAAQC,EAHcoJ,EAGdpJ,MAHcsN,EAIJC,mBAASiF,GAAaxS,EAAOD,IAJzByN,EAAAhV,OAAA4H,EAAA,EAAA5H,CAAA8U,EAAA,GAIvBqF,EAJuBnF,EAAA,GAIhBoF,EAJgBpF,EAAA,GAuE9B,OARAkB,oBACE,WACEkE,EAASJ,GAAaxS,EAAOD,IA1DZ,SAACC,EAAOD,GAC3BC,EAAM6S,QAAQ,SAAAjU,GAAI,OAChB7B,GAAS,SAAA5C,OAAUyE,EAAV,YAA0BrG,GAChCgD,KAAK,SAAAyF,GAAI,OACR4R,EACEjC,aACE,SAAAmC,GACQA,EAAM1L,KAAK,SAAA2L,GAAC,OAAInU,IAASmU,EAAE3R,OAAMH,MAAQD,EAAKC,WAI3D1F,KAAK,kBACJwE,EAAO8S,QAAQ,SAAAxU,GACbtB,GAAS,SAAA5C,OAAUyE,EAAV,YAAAzE,OAAyBkE,EAAzB,YAA0C9F,GAAMgD,KACvD,SAAAyF,GAAI,OACF4R,EACEjC,aACE,SAAAmC,GACQA,EACH1L,KAAK,SAAA2L,GAAC,OAAInU,IAASmU,EAAE3R,OACrBrB,OAAOqH,KAAK,SAAA4L,GAAC,OAAI3U,IAAU2U,EAAE5R,OAAMH,MAAQD,EAAKC,WAI7DlE,GAAS,SAAA5C,OACEyE,EADF,YAAAzE,OACiBkE,EADjB,sBAEP9F,GACAgD,KAAK,SAAAyF,GAAI,OACT4R,EACEjC,aACE,SAAAmC,GACQA,EACH1L,KAAK,SAAA2L,GAAC,OAAInU,IAASmU,EAAE3R,OACrBrB,OAAOqH,KAAK,SAAA4L,GAAC,OAAI3U,IAAU2U,EAAE5R,OAAM7E,KAAOyE,EAAKC,WAI1DlE,GAAS,SAAA5C,OACEyE,EADF,YAAAzE,OACiBkE,EADjB,uBAEP9F,GACAgD,KAAK,SAAAyF,GAAI,OACT4R,EACEjC,aACE,SAAAmC,GACQA,EACH1L,KAAK,SAAA2L,GAAC,OAAInU,IAASmU,EAAE3R,OACrBrB,OAAOqH,KAAK,SAAA4L,GAAC,OAAI3U,IAAU2U,EAAE5R,OAAMqR,OAASzR,EAAKC,iBAalEgS,CAAajT,EAAOD,IAEtB,CAACC,EAAOD,IAIR5H,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,iCACZgW,EAAMzT,IAAI,SAACN,EAAM+B,GAAP,OACTxI,EAAAC,EAAAC,cAAA,OAAKuE,MAAO,CAAEoI,MAAO,SAAWpK,IAAK+F,GACnCxI,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,kBACbxE,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,aACbxE,EAAAC,EAAAC,cAAA,MAAIsE,UAAU,cACXiC,EAAKqC,MADR,IACgBrC,EAAKwC,MAErBjJ,EAAAC,EAAAC,cAAA,WACG6a,KAAQtU,EAAKmB,OAAQ,CAAC,SAAU,CAAC,SAASb,IACzC,SAACb,EAAOsC,GAAR,OACExI,EAAAC,EAAAC,cAACgS,EAAA,SAAD,CAAUzP,IAAK+F,GACbxI,EAAAC,EAAAC,cAAA,WACG,IACAgG,EAAM4C,MAFT,IAEiB5C,EAAM+C,KAFvB,KAE+B,IAC5B/C,EAAM4C,OACY,IAAb5C,EAAM9B,KAAc8B,EAAM4C,OAAOkS,QAAQ,GAC3C,EALN,UAMU,KAEVhb,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,iBAAiB/B,IAAK+F,GACnCxI,EAAAC,EAAAC,cAAA,OACEsE,UAAU,sBACVyP,KAAK,cACLxP,MAAO,CACLoI,MAAK,eAAA7K,OAAiC,IAAfkE,EAAMoU,OAC3BS,KAAQtU,EAAKmB,OAAQ,CAAC,SAAU,CAAC,SAAS,GACvCkB,MAFA,QAKN5C,EAAMoU,QAERpU,EAAM4C,MAAQ5C,EAAMoU,OAASpU,EAAM9B,KAClCpE,EAAAC,EAAAC,cAAA,OACEsE,UAAU,uBACVyP,KAAK,cACLxP,MAAO,CACLoI,MAAK,eAAA7K,OAGH,KAHsBkE,EAAM4C,MAC5B5C,EAAMoU,OACNpU,EAAM9B,MAEN2W,KAAQtU,EAAKmB,OAAQ,CAAC,SAAU,CAAC,SAAS,GACvCkB,MALA,QAQN5C,EAAM4C,MAAQ5C,EAAMoU,OAASpU,EAAM9B,WAGtC8E,EAEFlJ,EAAAC,EAAAC,cAAA,OACEsE,UAAU,oBACVyP,KAAK,cACLxP,MAAO,CACLoI,MAAK,eAAA7K,OAA+B,IAAbkE,EAAM9B,KAC3B2W,KAAQtU,EAAKmB,OAAQ,CAAC,SAAU,CAAC,SAAS,GACvCkB,MAFA,QAKN5C,EAAM9B,mBCzJ7BpB,WAAU,SAAA5C,GAAI,MAAK,CACvB6C,OAAQ,mBACRC,eAAgB,mBAChBC,cAAa,UAAAnB,OAAY5B,EAAK8B,UAG1BvB,GAAiB,SAAAC,GACrB,GAAIA,EAASC,GAAI,OAAOD,EAASE,OACjC,MAAM,IAAIC,MAAM,eCQLka,WAAM,SAAA5X,GAAA,IAbC6X,EAaExW,EAAHrB,EAAGqB,MAAOyW,EAAV9X,EAAU8X,MAAOC,EAAjB/X,EAAiB+X,IAAjBC,EAAAhY,EAAsBmB,iBAAtB,IAAA6W,EAAkC,GAAlCA,EAAAC,EAAAjY,EAAsCoB,aAAtC,IAAA6W,EAA8C,GAA9CA,EAAA,OACjBtb,EAAAC,EAAAC,cAAA,QACEsE,UAAS,OAAAxC,OAASoZ,EAAM,MAAQ,GAAvB,KAAApZ,OAA6BwC,GACtCC,MAAKpE,OAAAwF,EAAA,EAAAxF,CAAA,CACHuM,gBAAiBlI,EACjBA,MAAK,GAAA1C,QAlBSkZ,EAkBQxW,EAjBD,IAArBwW,EAAIK,QAAQ,OACdL,EAAMA,EAAIM,MAAM,IAML,KAHDpK,SAAS8J,EAAIM,MAAM,EAAG,GAAI,IAGT,KAFnBpK,SAAS8J,EAAIM,MAAM,EAAG,GAAI,IAEQ,KADnCpK,SAAS8J,EAAIM,MAAM,EAAG,GAAI,IACiB,IAChD,UACA,aASG/W,IAGJ0W,KClBCM,GAAS,SAAApK,GACb,OAAOqK,KAAKC,MAAMD,KAAKD,SAAWC,KAAKC,MAAMtK,KAEzCuK,GAAgB,WACpB,UAAA5Z,OAAWyZ,GAAO,KACfI,SAAS,IACTC,SAAS,EAAG,MAFf9Z,OAEsByZ,GAAO,KAC1BI,SAAS,IACTC,SAAS,EAAG,MAJf9Z,OAIsByZ,GAAO,KAC1BI,SAAS,IACTC,SAAS,EAAG,OAGJC,GAAU,WAErB,IAAM3b,EAAO8Q,qBAAWxR,GAFGsc,EAKDnD,GAAS+C,MALRK,EAAA5b,OAAA4H,EAAA,EAAA5H,CAAA2b,EAAA,GAKpBtX,EALoBuX,EAAA,GAKbC,EALaD,EAAA,GAAAE,EAMDtD,GAAS,IANRuD,EAAA/b,OAAA4H,EAAA,EAAA5H,CAAA8b,EAAA,GAMpBhB,EANoBiB,EAAA,GAMbC,EANaD,EAAA,GAAAjH,EAOHC,mBAAS,IAPNC,EAAAhV,OAAA4H,EAAA,EAAA5H,CAAA8U,EAAA,GAOpBmH,EAPoBjH,EAAA,GAOdkH,EAPclH,EAAA,GAc3B,OAJAkB,oBAAU,YFnBW,SAAAnW,GACrB,OAAO0C,MAAK,YAAc,CACxBE,QAASA,GAAQ5C,KAChBgD,KAAKzC,KEiBN6b,CAAQpc,GAAMgD,KAAKmZ,IAClB,IAGDvc,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,uBACZ8X,EAAKvV,IAAI,SAAA0V,GAAG,OACXzc,EAAAC,EAAAC,cAAA,OACEuC,IAAKga,EAAIrX,IACTZ,UAAU,mBACVC,MAAO,CACLiY,SAAU,WAIZ1c,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACyc,GAADtc,OAAAC,OAAA,GAASmc,EAAT,CAAcrB,KAAG,MAEnBpb,EAAAC,EAAAC,cAAA,UACEuG,KAAK,SACLjC,UAAU,sBACVH,QAAS,SAAAiM,GACPA,EAAMC,iBACND,EAAMxF,kBACF5D,OAAOC,QAAQ,iBF7BR,SAACsV,EAAKrc,GAC7B,OAAO0C,MAAK,aAAAd,OAAcya,EAAIrX,KAAO,CACnCrC,OAAQ,SACRC,QAASA,GAAQ5C,KAChBgD,KAAKzC,IE0BMic,CAAUH,EAAKrc,GAAMgD,KAAK,SAAA2T,GAAC,OACzBwF,EAAQ,SAAAD,GAAI,OAAIA,EAAK5T,OAAO,SAAAkS,GAAC,OAAIA,EAAExV,MAAQqX,EAAIrX,YAKrDpF,EAAAC,EAAAC,cAAA,KAAGsE,UAAU,qBAInBxE,EAAAC,EAAAC,cAAA,QAAMsE,UAAU,eACdxE,EAAAC,EAAAC,cAAA,QAAAG,OAAAC,OAAA,CAAOmG,KAAK,QAAQjC,UAAU,4BAA+BE,IAC7D1E,EAAAC,EAAAC,cAAA,QAAAG,OAAAC,OAAA,CACEmG,KAAK,OACLjC,UAAU,oBACV+K,YAAY,SACR4L,IAENnb,EAAAC,EAAAC,cAAA,UACEuG,KAAK,SACLjC,UAAU,2BACVH,QAAS,WACP6X,EAASN,QAGX5b,EAAAC,EAAAC,cAAA,KAAGsE,UAAU,qBAEfxE,EAAAC,EAAAC,cAAA,UACEuG,KAAK,SACLjC,UAAU,8BACVH,QAAS,YFpEM,SAACoY,EAAKrc,GAC7B,OAAO0C,MAAK,YAAc,CACxBC,OAAQ,OACRY,KAAMC,KAAKC,UAAU4Y,GACrBzZ,QAASA,GAAQ5C,KAChBgD,KAAKzC,KEgEEkc,CACE,CACE1B,MAAOA,EAAMzY,MACbgC,MAAOA,EAAMhC,OAEftC,GAECgD,KAAK,SAAAqZ,GAAG,OAAIF,EAAQ,SAAAD,GAAI,OAAAjc,OAAAiI,EAAA,EAAAjI,CAAQic,GAARta,OAAA,CAAcya,QACtCrZ,KAAK,SAAA2T,GACJmF,EAASN,MACTS,EAAS,QAIfrc,EAAAC,EAAAC,cAAA,KAAGsE,UAAU,kBAEfxE,EAAAC,EAAAC,cAACyc,GAAD,CACElY,MAAO,CAAEqY,WAAY,QACrBpY,MAAOA,EAAMhC,MACbyY,MAAOA,EAAMzY,OAAS,aC9EjBqa,oLAhBX,OACE/c,EAAAC,EAAAC,cAACgS,EAAA,SAAD,KACElS,EAAAC,EAAAC,cAAC8c,EAAA,EAAD,KACEhd,EAAAC,EAAAC,cAACgS,EAAA,SAAD,KACElS,EAAAC,EAAAC,cAAC+c,GAAD,MACAjd,EAAAC,EAAAC,cAACgd,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,IAAIC,UAAWnI,KACjClV,EAAAC,EAAAC,cAACgd,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,aAAaC,UAAWhE,KAC1CrZ,EAAAC,EAAAC,cAACgd,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,SAASC,UAAW9C,KACtCva,EAAAC,EAAAC,cAACgd,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,SAASC,UAAWtB,eAVhCjc,aCqCLwd,GAAQzd,6MA1CnBoC,MAAQ,CACNwB,SAAU,4EAGH,IAAAd,EAAAtB,KACP,OACErB,EAAAC,EAAAC,cAAA,WACGmB,KAAKtB,MAAMK,KAAK+B,SAAWzB,EAC1BV,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,qBAAqByP,KAAK,SAAzC,qBAIA/K,EAEFlJ,EAAAC,EAAAC,cAAA,OAAKsE,UAAU,cACbxE,EAAAC,EAAAC,cAAA,SAAOoU,QAAQ,YAAf,YACAtU,EAAAC,EAAAC,cAAA,SACEuG,KAAK,OACLjC,UAAU,eACV+D,GAAG,WACHgM,mBAAiB,WACjBhF,YAAY,iBACZ7M,MAAOrB,KAAKY,MAAMwB,SAClBgC,SAAU,SAAA6K,GAAK,OAAI3N,EAAKa,SAAS,CAAEC,SAAU6M,EAAMO,OAAOnO,SAC1D6a,UAAW,SAAAjN,GACS,UAAdA,EAAM7N,KACRE,EAAK5C,MAAMK,KAAKgC,MAAMO,EAAKV,MAAMwB,cAIzCzD,EAAAC,EAAAC,cAAA,UACEuG,KAAK,SACLjC,UAAU,kBACVH,QAAS,kBAAM1B,EAAK5C,MAAMK,KAAKgC,MAAMO,EAAKV,MAAMwB,YAHlD,kBA/BuB3D,cCM/B0d,IAASvS,OACPjL,EAAAC,EAAAC,cAACud,EAAD,KACEzd,EAAAC,EAAAC,cAACR,EAAYS,SAAb,KACG,SAAAkD,GAAA,IAAGnB,EAAHmB,EAAGnB,MAAH,OACCA,EACElC,EAAAC,EAAAC,cAACwd,EAAD,CAAqBxb,MAAOA,GAC1BlC,EAAAC,EAAAC,cAACyd,EAAD,KACE3d,EAAAC,EAAAC,cAAC0d,GAAD,QAIJ5d,EAAAC,EAAAC,cAACod,GAAD,SAKRO,SAASC,eAAe","file":"static/js/main.bd209570.chunk.js","sourcesContent":["const headers = user => ({\n  Accept: \"application/json\",\n  \"Content-Type\": \"application/json\",\n  Authorization: `Bearer ${user.token}`\n});\n\nconst handleResponse = response => {\n  if (response.ok) return response.json();\n  throw new Error(\"Fetch fail\");\n};\n\nexport const getMovie = (id, user) => {\n  return fetch(`/api/movies/${id}`, {\n    headers: headers(user)\n  }).then(handleResponse);\n};\n\nlet controller;\nexport const getMovies = abortable => (search, user) => {\n  if (abortable && controller) {\n    controller.abort();\n  }\n  controller = new AbortController();\n  return fetch(`/api/movies?${search}`, {\n    headers: headers(user),\n    signal: controller.signal\n  })\n    .then(response => {\n      controller = null;\n      return response;\n    })\n    .then(handleResponse);\n};\n\nexport const updateMovie = (movie, user) => {\n  return fetch(`/api/movies/${movie._id}`, {\n    method: \"PUT\",\n    body: JSON.stringify(movie),\n    headers: headers(user)\n  }).then(handleResponse);\n};\n\nexport const deleteMovie = (movie, user) => {\n  return fetch(`/api/movies/${movie._id}`, {\n    method: \"DELETE\",\n    headers: headers(user)\n  }).then(handleResponse);\n};\n\nexport const addSeason = (movie, user) => {\n  return fetch(`/api/movies/${movie._id}/seasons`, {\n    method: \"POST\",\n    body: JSON.stringify(movie),\n    headers: headers(user)\n  }).then(handleResponse);\n};\n\nexport const updateSeason = (movie, season, user) => {\n  return fetch(`/api/movies/${movie._id}/seasons/${season._id}`, {\n    method: \"PUT\",\n    body: JSON.stringify(season),\n    headers: headers(user)\n  }).then(handleResponse);\n};\n\nexport const deleteSeason = (movie, season, user) => {\n  return fetch(`/api/movies/${movie._id}/seasons/${season._id}`, {\n    method: \"DELETE\",\n    headers: headers(user)\n  }).then(handleResponse);\n};\n\nexport const addEpisode = (movie, season, user) => {\n  return fetch(`/api/movies/${movie._id}/seasons/${season._id}/episodes`, {\n    method: \"POST\",\n    body: JSON.stringify(season),\n    headers: headers(user)\n  }).then(handleResponse);\n};\n\nexport const updateEpisode = (movie, season, episode, user) => {\n  return fetch(\n    `/api/movies/${movie._id}/seasons/${season._id}/episodes/${episode._id}`,\n    {\n      method: \"PUT\",\n      body: JSON.stringify(episode),\n      headers: headers(user)\n    }\n  ).then(handleResponse);\n};\n\nexport const deleteEpisode = (movie, season, episode, user) => {\n  return fetch(\n    `/api/movies/${movie._id}/seasons/${season._id}/episodes/${episode._id}`,\n    {\n      method: \"DELETE\",\n      headers: headers(user)\n    }\n  ).then(handleResponse);\n};\n","import React from \"react\";\n\nexport const UserContext = React.createContext();\nexport const withUser = Component => props => (\n  <UserContext.Consumer>\n    {user => <Component {...props} user={user} />}\n  </UserContext.Consumer>\n);\n\nexport const LOGOUT = Symbol();\nexport const LOGIN = Symbol();\nexport const LOGIN_FAILED = Symbol();\n\nconst handleResponse = response => {\n  if (response.ok) return response.json();\n  throw new Error(\"Fetch fail\");\n};\n\nexport class UserProvider extends React.Component {\n  state = {\n    token: null,\n    status: LOGOUT,\n    login: this.login.bind(this)\n  };\n\n  componentDidMount() {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      fetch(\"/account\", {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`\n        }\n      })\n        .then(handleResponse)\n        .then(({ exp }) => {\n          if (new Date() < new Date(exp * 1000))\n            this.setState({ token, status: LOGIN });\n        });\n    }\n  }\n\n  login(password) {\n    fetch(\"/login\", {\n      method: \"POST\",\n      body: JSON.stringify({ password }),\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      }\n    })\n      .then(handleResponse)\n      .then(({ token }) => {\n        this.setState({ token, status: LOGIN });\n        localStorage.setItem(\"token\", token);\n      })\n      .catch(() => this.setState({ status: LOGIN_FAILED }));\n  }\n\n  render() {\n    return (\n      <UserContext.Provider value={this.state}>\n        {this.props.children}\n      </UserContext.Provider>\n    );\n  }\n}\n","import React from \"react\";\n\nexport const MovieSeen = ({ seen, onClick, partial = false }) => (\n  <i\n    className=\"fas fa-eye\"\n    style={{\n      color: partial && !seen ? \"var(--warning)\" : seen ? \"var(--success)\" : \"\",\n      cursor: \"pointer\"\n    }}\n    onClick={onClick}\n  />\n);\n","import React from \"react\";\nimport \"./MovieList.css\";\nimport { withUser } from \"../Login/UserContext\";\nimport { Link } from \"react-router-dom\";\nimport { MovieSeen } from \"../Common/MovieSeen\";\nimport { deleteMovie, updateMovie } from \"../Common/MovieAPI\";\nimport every from \"lodash/every\";\nimport some from \"lodash/some\";\n\nexport const MovieCard = withUser(\n  ({ movie, onEdit, user, onChange, onDelete }) => {\n    const update = (field, value) => () =>\n      updateMovie({ ...movie, [field]: value }, user).then(onChange);\n\n    const title = `${movie.title}`;\n    const subtitle = `${movie.productionYear} - ${movie.genre.join(\",\")}`;\n\n    return (\n      <div className=\"card movie-card\">\n        <div className=\"card-body\">\n          <h5 className=\"card-title\">\n            <Link to={`movie/${movie._id}`}>\n              <div className=\"ellipsis\" title={title}>\n                {title}\n              </div>\n            </Link>\n          </h5>\n          <h6\n            className=\"card-subtitle mb-2 text-muted ellipsis\"\n            title={subtitle}\n          >\n            {subtitle}\n          </h6>\n          <div\n            className=\"movie-card-actions\"\n            style={{ position: \"absolute\", top: 2, right: 4 }}\n          >\n            {movie.type !== \"Film\" && (\n              <i\n                className=\"fas fa-ban\"\n                style={{\n                  cursor: \"pointer\",\n                  color: movie.finished ? \"var(--danger)\" : \"black\"\n                }}\n                onClick={update(\"finished\", !movie.finished)}\n              />\n            )}\n            <span\n              className=\"netflix-small\"\n              style={{\n                color: movie.netflix ? \"var(--danger)\" : \"black\"\n              }}\n              onClick={update(\"netflix\", !movie.netflix)}\n            >\n              N\n            </span>\n            {movie.type === \"Film\" ? (\n              <MovieSeen\n                seen={movie.seen}\n                onClick={update(\"seen\", !movie.seen)}\n              />\n            ) : (\n              <MovieSeen\n                seen={\n                  every(\n                    movie.seasons.map(\n                      season =>\n                        every(season.episodes, \"seen\") &&\n                        season.episodes.length > 0\n                    )\n                  ) && movie.seasons.length > 0\n                }\n                partial={\n                  some(\n                    movie.seasons.map(\n                      season =>\n                        some(season.episodes, \"seen\") &&\n                        season.episodes.length > 0\n                    )\n                  ) && movie.seasons.length > 0\n                }\n              />\n            )}\n            <i\n              className=\"fas fa-pencil-alt\"\n              onClick={onEdit}\n              style={{ cursor: \"pointer\" }}\n            />\n            <i\n              className=\"fas fa-trash\"\n              onClick={() => {\n                if (window.confirm()) {\n                  deleteMovie(movie, user).then(onDelete);\n                }\n              }}\n              style={{ cursor: \"pointer\" }}\n            />\n          </div>\n          <div className=\"poster text-center\">\n            <img src={movie.fileUrl} alt=\"movie poster\" />\n          </div>\n        </div>\n      </div>\n    );\n  }\n);\n","import React from \"react\";\n\nexport const ApplicationContext = React.createContext();\nexport const withApplication = Component => props => (\n  <ApplicationContext.Consumer>\n    {application => <Component {...props} application={application} />}\n  </ApplicationContext.Consumer>\n);\n\nexport const LOADING = Symbol();\nexport const LOADED = Symbol();\n\nexport class ApplicationProvider extends React.Component {\n  state = {\n    genres: [],\n    types: [],\n    status: LOADING\n  };\n\n  componentDidMount() {\n    const options = {\n      headers: {\n        Authorization: `Bearer ${this.props.token}`\n      }\n    };\n\n    const handleResponse = response => {\n      if (response.ok) return response.json();\n      throw new Error(\"Fetch fail\");\n    };\n    Promise.all([\n      fetch(\"/api/movies/genre\", options).then(handleResponse),\n      fetch(\"/api/movies/type\", options).then(handleResponse)\n    ]).then(([genres, types]) => {\n      this.setState({\n        genres,\n        types,\n        status: LOADED\n      });\n    });\n  }\n\n  render() {\n    return (\n      <ApplicationContext.Provider value={this.state}>\n        {this.props.children}\n      </ApplicationContext.Provider>\n    );\n  }\n}\n","import React from \"react\";\nimport findIndex from \"lodash/findIndex\";\n\nexport const MoviesContext = React.createContext();\n\nexport class MoviesProvider extends React.Component {\n  add = movie => {\n    this.setState(({ movies }) => ({ movies: [movie, ...movies] }));\n  };\n\n  update = (id, movie) => {\n    const index = findIndex(this.state.movies, [\"_id\", id]);\n    const movies = [...this.state.movies];\n    movies[index] = movie;\n    this.setState({\n      movies: movies.filter(Boolean) // pass undefined as delete and then use filter te remove the element\n    });\n  };\n\n  addAll = ({ data, count }) => {\n    this.setState(({ movies }) => ({ movies: [...movies, ...data], count }));\n  };\n\n  invalidate = () => {\n    this.setState({ movies: [], count: 0 });\n  };\n\n  onChange = name => (value = \"\") => {\n    this.setState(({ filters }) => ({\n      movies: [],\n      count: 0,\n      filters: { ...filters, [name]: value }\n    }));\n  };\n\n  state = {\n    movies: [],\n    count: 0,\n    filters: {\n      productionYear: \"\",\n      title: \"\",\n      genres: [],\n      types: [],\n      seen: null, // null = dont care, true = have seen, false = have not seen\n      netflix: null, // null = dont care, true = on netflix\n      finished: null, // null = dont care, true = finished\n      limit: 30\n    },\n    onChange: this.onChange,\n    addAll: this.addAll,\n    update: this.update,\n    add: this.add,\n    invalidate: this.invalidate\n  };\n\n  render() {\n    return (\n      <MoviesContext.Provider value={this.state}>\n        {this.props.children}\n      </MoviesContext.Provider>\n    );\n  }\n}\n","import React from \"react\";\nimport Downshift from \"downshift\";\n\nexport class MultiDownshift extends React.Component {\n  state = { selectedItems: this.props.selectedItems || [] };\n\n  componentDidUpdate(prevProps) {\n    if (\n      prevProps.selectedItems !== this.props.selectedItems &&\n      this.props.selectedItems !== this.state.selectedItems\n    ) {\n      this.setState({ selectedItems: this.props.selectedItems || [] });\n    }\n  }\n  stateReducer = (state, changes) => {\n    switch (changes.type) {\n      case Downshift.stateChangeTypes.keyDownEnter:\n      case Downshift.stateChangeTypes.clickItem:\n        return {\n          ...changes,\n          highlightedIndex: state.highlightedIndex,\n          isOpen: true\n        };\n      default:\n        return changes;\n    }\n  };\n\n  callOnChange = downshift => () => {\n    if (this.props.onChange) {\n      this.props.onChange(\n        this.state.selectedItems,\n        this.getStateAndHelpers(downshift)\n      );\n    }\n  };\n\n  handleSelection = (selectedItem, downshift) => {\n    if (this.state.selectedItems.includes(selectedItem)) {\n      this.removeItem(selectedItem, this.callOnChange(downshift));\n    } else {\n      this.addSelectedItem(selectedItem, this.callOnChange(downshift));\n    }\n  };\n\n  removeItem = (item, cb) => {\n    this.setState(({ selectedItems }) => {\n      return {\n        selectedItems: selectedItems.filter(i => i !== item)\n      };\n    }, cb);\n  };\n  addSelectedItem(item, cb) {\n    this.setState(\n      ({ selectedItems }) => ({\n        selectedItems: [...selectedItems, item]\n      }),\n      cb\n    );\n  }\n\n  getRemoveButtonProps = downshift => ({ onClick, item, ...props } = {}) => {\n    return {\n      onClick: e => {\n        // TODO: use something like downshift's composeEventHandlers utility instead\n        onClick && onClick(e);\n        e.stopPropagation();\n        this.removeItem(item, this.callOnChange(downshift));\n      },\n      ...props\n    };\n  };\n\n  getStateAndHelpers(downshift) {\n    const { selectedItems } = this.state;\n    const { getRemoveButtonProps, removeItem } = this;\n    return {\n      getRemoveButtonProps: getRemoveButtonProps(downshift),\n      removeItem,\n      selectedItems,\n      ...downshift\n    };\n  }\n  render() {\n    const { render, children = render, ...props } = this.props;\n    // TODO: compose together props (rather than overwriting them) like downshift does\n    return (\n      <Downshift\n        {...props}\n        stateReducer={this.stateReducer}\n        onChange={this.handleSelection}\n        selectedItem={null}\n      >\n        {downshift => children(this.getStateAndHelpers(downshift))}\n      </Downshift>\n    );\n  }\n}\n","import React from \"react\";\nimport { css as emoCSS } from \"emotion\";\nimport styled from \"react-emotion\";\n\n// TODO copy paste from downshift example :)\n\nconst css = (...args) => ({ className: emoCSS(...args) });\n\nconst Item = styled(\"li\")(\n  {\n    position: \"relative\",\n    cursor: \"pointer\",\n    display: \"block\",\n    border: \"none\",\n    height: \"auto\",\n    textAlign: \"left\",\n    borderTop: \"none\",\n    lineHeight: \"1em\",\n    color: \"rgba(0,0,0,.87)\",\n    fontSize: \"1rem\",\n    textTransform: \"none\",\n    fontWeight: \"400\",\n    boxShadow: \"none\",\n    padding: \".8rem 1.1rem\",\n    whiteSpace: \"normal\",\n    wordWrap: \"normal\"\n  },\n  ({ isActive, isSelected }) => {\n    const styles = [];\n    if (isActive) {\n      styles.push({\n        color: \"rgba(0,0,0,.95)\",\n        background: \"rgba(0,0,0,.03)\"\n      });\n    }\n    if (isSelected) {\n      styles.push({\n        color: \"rgba(0,0,0,.95)\",\n        fontWeight: \"700\"\n      });\n    }\n    return styles;\n  }\n);\n\nconst BaseMenu = styled(\"ul\")(\n  {\n    padding: 0,\n    marginTop: 0,\n    position: \"absolute\",\n    backgroundColor: \"white\",\n    width: \"100%\",\n    maxHeight: \"20rem\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    outline: \"0\",\n    transition: \"opacity .1s ease\",\n    borderRadius: \"0 0 .28571429rem .28571429rem\",\n    boxShadow: \"0 2px 3px 0 rgba(34,36,38,.15)\",\n    borderColor: \"#96c8da\",\n    borderTopWidth: \"0\",\n    borderRightWidth: 1,\n    borderBottomWidth: 1,\n    borderLeftWidth: 1,\n    borderStyle: \"solid\",\n    zIndex: 10\n  },\n  ({ isOpen }) => ({\n    border: isOpen ? null : \"none\"\n  })\n);\n\nconst Menu = React.forwardRef((props, ref) => (\n  <BaseMenu innerRef={ref} {...props} />\n));\n\nconst ControllerButton = styled(\"button\")({\n  backgroundColor: \"transparent\",\n  border: \"none\",\n  position: \"absolute\",\n  right: 0,\n  top: 0,\n  cursor: \"pointer\",\n  width: 47,\n  display: \"flex\",\n  flexDirection: \"column\",\n  height: \"100%\",\n  justifyContent: \"center\",\n  alignItems: \"center\"\n});\n\nfunction ArrowIcon({ isOpen }) {\n  return (\n    <svg\n      viewBox=\"0 0 20 20\"\n      preserveAspectRatio=\"none\"\n      width={16}\n      fill=\"transparent\"\n      stroke=\"#979797\"\n      strokeWidth=\"1.1px\"\n      transform={isOpen ? \"rotate(180)\" : null}\n    >\n      <path d=\"M1,6 L10,15 L19,6\" />\n    </svg>\n  );\n}\nexport { Menu, ControllerButton, Item, ArrowIcon, css };\n","import React from \"react\";\nimport Downshift from \"downshift\";\n\nexport class MultiDownshiftWithReverse extends React.Component {\n  state = { selectedItems: this.props.selectedItems || [] };\n  stateReducer = (state, changes) => {\n    switch (changes.type) {\n      case Downshift.stateChangeTypes.keyDownEnter:\n      case Downshift.stateChangeTypes.clickItem:\n        return {\n          ...changes,\n          highlightedIndex: state.highlightedIndex,\n          isOpen: true\n        };\n      default:\n        return changes;\n    }\n  };\n\n  callOnChange = downshift => () => {\n    if (this.props.onChange) {\n      this.props.onChange(\n        this.state.selectedItems,\n        this.getStateAndHelpers(downshift)\n      );\n    }\n  };\n\n  handleSelection = (selectedItem, downshift) => {\n    if (\n      this.state.selectedItems.filter(item => selectedItem === item[0]).length >\n      0\n    ) {\n      this.removeItem([selectedItem], this.callOnChange(downshift));\n    } else {\n      this.addSelectedItem(selectedItem, this.callOnChange(downshift));\n    }\n  };\n\n  removeItem = (item, cb) => {\n    this.setState(({ selectedItems }) => {\n      return {\n        selectedItems: selectedItems.filter(i => i[0] !== item[0])\n      };\n    }, cb);\n  };\n  addSelectedItem(item, cb) {\n    this.setState(\n      ({ selectedItems }) => ({\n        selectedItems: [...selectedItems, [item, true]]\n      }),\n      cb\n    );\n  }\n\n  getRemoveButtonProps = downshift => ({ onClick, item, ...props } = {}) => {\n    return {\n      onClick: e => {\n        // TODO: use something like downshift's composeEventHandlers utility instead\n        onClick && onClick(e);\n        e.stopPropagation();\n        this.removeItem(item, this.callOnChange(downshift));\n      },\n      ...props\n    };\n  };\n\n  clickOnItem = downshift => (item, index) => {\n    this.setState(({ selectedItems }) => {\n      const newSelectedItems = selectedItems;\n      newSelectedItems[index] = [item[0], !item[1]];\n      return {\n        selectedItems: newSelectedItems.filter(i => i !== item[0])\n      };\n    }, this.callOnChange(downshift));\n  };\n  displayItem = item => {\n    return item[0];\n  };\n  displayBackground = item => {\n    return item[1] ? \"#ccc\" : \"tomato\";\n  };\n  isSelected = itemToFind => {\n    return this.state.selectedItems.find(item => item[0] === itemToFind);\n  };\n\n  getStateAndHelpers(downshift) {\n    const { selectedItems } = this.state;\n    const {\n      getRemoveButtonProps,\n      removeItem,\n      clickOnItem,\n      displayItem,\n      displayBackground,\n      isSelected\n    } = this;\n    return {\n      getRemoveButtonProps: getRemoveButtonProps(downshift),\n      removeItem,\n      selectedItems,\n      clickOnItem: clickOnItem(downshift),\n      displayItem,\n      displayBackground,\n      isSelected,\n      ...downshift\n    };\n  }\n  render() {\n    const { render, children = render, ...props } = this.props;\n    // TODO: compose together props (rather than overwriting them) like downshift does\n    return (\n      <Downshift\n        {...props}\n        stateReducer={this.stateReducer}\n        onChange={this.handleSelection}\n        selectedItem={null}\n      >\n        {downshift => children(this.getStateAndHelpers(downshift))}\n      </Downshift>\n    );\n  }\n}\n","import { MultiDownshift } from \"./MultiDownshift\";\nimport { ArrowIcon, ControllerButton, css, Item, Menu } from \"../shared\";\nimport React, { Component } from \"react\";\nimport identity from \"lodash/identity\";\nimport { MultiDownshiftWithReverse } from \"./MultiDownshiftWithReverse\";\n\nconst BaseMultiDownshift = BaseComponent =>\n  class extends Component {\n    render() {\n      const { handleChange, placeholder, items, selectedItems } = this.props;\n      return (\n        <BaseComponent\n          onChange={handleChange}\n          selectedItems={selectedItems}\n          placeholder={placeholder}\n        >\n          {({\n            getToggleButtonProps,\n            getMenuProps,\n            getRemoveButtonProps,\n            removeItem,\n            isOpen,\n            selectedItems,\n            getItemProps,\n            highlightedIndex,\n            toggleMenu,\n            clickOnItem = () => void 0,\n            displayItem = identity,\n            displayBackground = () => \"#ccc\",\n            isSelected = item => selectedItems.includes(item)\n          }) => (\n            <div\n              style={{\n                margin: \"auto\",\n                position: \"relative\",\n                width: \"100%\"\n              }}\n            >\n              <div\n                {...css({\n                  cursor: \"pointer\",\n                  position: \"relative\",\n                  padding: \".375rem .75rem\",\n                  paddingRight: 50,\n                  border: \"1px solid #ced4da\",\n                  borderRadius: \".25rem\",\n                  backgroundColor: \"white\"\n                })}\n                onClick={() => {\n                  toggleMenu();\n                }}\n              >\n                <div\n                  {...css({\n                    display: \"flex\",\n                    flexWrap: \"wrap\",\n                    alignItems: \"center\"\n                  })}\n                >\n                  {selectedItems.length > 0 ? (\n                    selectedItems.map((item, index) => (\n                      <div\n                        key={index}\n                        {...css({\n                          margin: \"0 2px\",\n                          paddingLeft: 8,\n                          paddingRight: 8,\n                          display: \"inline-block\",\n                          wordWrap: \"none\",\n                          backgroundColor: displayBackground(item),\n                          borderRadius: 2\n                        })}\n                        onClick={event => {\n                          event.preventDefault();\n                          event.stopPropagation();\n                          clickOnItem(item, index);\n                        }}\n                      >\n                        <div\n                          {...css({\n                            display: \"grid\",\n                            gridGap: 6,\n                            gridAutoFlow: \"column\",\n                            alignItems: \"center\"\n                          })}\n                        >\n                          <span>{displayItem(item)}</span>\n                          <button\n                            {...getRemoveButtonProps({ item })}\n                            {...css({\n                              cursor: \"pointer\",\n                              lineHeight: 0.8,\n                              border: \"none\",\n                              backgroundColor: \"transparent\",\n                              padding: \"0\",\n                              fontSize: \"16px\"\n                            })}\n                            type=\"button\"\n                          >\n                            \n                          </button>\n                        </div>\n                      </div>\n                    ))\n                  ) : (\n                    <span\n                      {...css({\n                        color: \"#6c757d;\"\n                      })}\n                    >\n                      {placeholder}\n                    </span>\n                  )}\n                </div>\n                <ControllerButton\n                  {...getToggleButtonProps({\n                    // prevents the menu from immediately toggling\n                    // closed (due to our custom click handler above).\n                    onClick(event) {\n                      event.stopPropagation();\n                    }\n                  })}\n                >\n                  <ArrowIcon isOpen={isOpen} />\n                </ControllerButton>\n              </div>\n              <Menu {...getMenuProps({ isOpen })}>\n                {isOpen\n                  ? items.map((item, index) => (\n                      <Item\n                        key={index}\n                        {...getItemProps({\n                          item,\n                          index,\n                          isActive: highlightedIndex === index,\n                          isSelected: isSelected(item)\n                        })}\n                      >\n                        {item}\n                      </Item>\n                    ))\n                  : null}\n              </Menu>\n            </div>\n          )}\n        </BaseComponent>\n      );\n    }\n  };\n\nexport const AsyncMultiDownshift = BaseMultiDownshift(MultiDownshift);\nexport const AsyncMultiDownshiftwithReverse = BaseMultiDownshift(\n  MultiDownshiftWithReverse\n);\n","import React, { useContext } from \"react\";\nimport identity from \"lodash/identity\";\nimport { MoviesContext } from \"../Common/MoviesContext\";\nimport {\n  AsyncMultiDownshift,\n  AsyncMultiDownshiftwithReverse\n} from \"../Common/AsyncMultiDownshift\";\nimport { ApplicationContext } from \"../ApplicationContext\";\n\nconst fromEvent = event => event.target.value;\n\nconst forInput = (\n  { filters, onChange },\n  name,\n  transform = identity,\n  from = fromEvent\n) => {\n  return {\n    value: filters[name],\n    onChange: value => onChange(name)(transform(from(value)))\n  };\n};\n\nexport const MoviesFilter = () => {\n  const { filters, onChange } = useContext(MoviesContext);\n  const { genres, types } = useContext(ApplicationContext);\n  const { seen, netflix, finished } = filters;\n\n  const renderSeen = () => {\n    let color = \"\",\n      icon = \"fa-eye\",\n      onClick = () => onChange(\"seen\")(\"true\");\n    if (seen === \"true\") {\n      color = \"var(--success)\";\n      onClick = () => onChange(\"seen\")(\"partial\");\n    } else if (seen === \"partial\") {\n      color = \"var(--warning)\";\n      onClick = () => onChange(\"seen\")(\"false\");\n    } else if (seen === \"false\") {\n      color = \"var(--danger)\";\n      icon = \"fa-eye-slash\";\n      onClick = () => onChange(\"seen\")(null);\n    }\n    return (\n      <i\n        className={`fas ${icon}`}\n        style={{\n          color,\n          cursor: \"pointer\"\n        }}\n        onClick={onClick}\n      />\n    );\n  };\n\n  const renderNetflix = () => {\n    let color = \"black\",\n      onClick = () => onChange(\"netflix\")(true);\n    if (netflix === true) {\n      color = \"var(--danger)\";\n      onClick = () => onChange(\"netflix\")(null);\n    }\n\n    return (\n      <span onClick={onClick} className=\"netflix\" style={{ color }}>\n        N\n      </span>\n    );\n  };\n\n  const renderFinished = () => {\n    let color = \"\",\n      onClick = () => onChange(\"finished\")(true);\n    if (finished === true) {\n      color = \"var(--danger)\";\n      onClick = () => onChange(\"finished\")(null);\n    }\n    return (\n      <i\n        className={`fas fa-ban`}\n        style={{\n          color,\n          cursor: \"pointer\"\n        }}\n        onClick={onClick}\n      />\n    );\n  };\n\n  return (\n    <form className=\"form-inline movies-filter mt-4 mb-4 ml-3\">\n      <div className=\"form-group\">\n        <input\n          {...forInput({ filters, onChange }, \"productionYear\", value =>\n            parseInt(value, 10)\n          )}\n          type=\"number\"\n          max={2200}\n          placeholder=\"YYYY\"\n          className=\"form-control\"\n          style={{ width: \"90px\" }}\n        />\n      </div>\n      <div className=\"form-group mx-sm-3\">\n        <input\n          type=\"text\"\n          {...forInput({ filters, onChange }, \"title\")}\n          placeholder=\"Title\"\n          className=\"form-control\"\n        />\n      </div>\n      <div className=\"form-group\" style={{ minWidth: \"220px\" }}>\n        <AsyncMultiDownshiftwithReverse\n          placeholder=\"Genre\"\n          handleChange={\n            forInput({ filters, onChange }, \"genres\", identity, identity)\n              .onChange\n          }\n          items={genres}\n          selectedItems={filters.genres}\n        />\n      </div>\n      <div className=\"form-group mx-sm-3\" style={{ width: \"220px\" }}>\n        <AsyncMultiDownshift\n          placeholder=\"Type\"\n          handleChange={\n            forInput({ filters, onChange }, \"types\", identity, identity)\n              .onChange\n          }\n          items={types}\n          selectedItems={filters.types}\n        />\n      </div>\n      <div className=\"form-group\">{renderSeen()}</div>\n      <div className=\"form-group mx-sm-3\">{renderNetflix()}</div>\n      <div className=\"form-group\">{renderFinished()}</div>\n    </form>\n  );\n};\n","import React from \"react\";\nimport Downshift from \"downshift\";\nimport { ArrowIcon, ControllerButton, css, Item, Menu } from \"../shared\";\n\nexport class SingleDownshift extends React.Component {\n  render() {\n    const { onChange, placeholder, items, selectedItem } = this.props;\n    return (\n      <Downshift onChange={onChange} selectedItem={selectedItem}>\n        {({\n          getInputProps,\n          getItemProps,\n          getLabelProps,\n          getMenuProps,\n          isOpen,\n          inputValue,\n          highlightedIndex,\n          selectedItem,\n          toggleMenu\n        }) => (\n          <div\n            style={{\n              margin: \"auto\",\n              position: \"relative\",\n              width: \"100%\"\n            }}\n          >\n            <div\n              {...css({\n                cursor: \"pointer\",\n                position: \"relative\",\n                padding: \".375rem .75rem\",\n                paddingRight: 50,\n                border: \"1px solid #ced4da\",\n                borderRadius: \".25rem\",\n                backgroundColor: \"white\"\n              })}\n              onClick={() => {\n                toggleMenu();\n              }}\n            >\n              <div\n                {...css({\n                  display: \"flex\",\n                  flexWrap: \"wrap\",\n                  alignItems: \"center\"\n                })}\n              >\n                {selectedItem ? (\n                  <div\n                    {...css({\n                      margin: \"0 2px\",\n                      paddingLeft: 8,\n                      paddingRight: 8,\n                      display: \"inline-block\",\n                      wordWrap: \"none\",\n                      backgroundColor: \"#ccc\",\n                      borderRadius: 2\n                    })}\n                  >\n                    <div\n                      {...css({\n                        display: \"grid\",\n                        gridGap: 6,\n                        gridAutoFlow: \"column\",\n                        alignItems: \"center\"\n                      })}\n                    >\n                      <span>{selectedItem}</span>\n                    </div>\n                  </div>\n                ) : (\n                  <span\n                    {...css({\n                      color: \"#6c757d;\"\n                    })}\n                  >\n                    {placeholder}\n                  </span>\n                )}\n              </div>\n              <ControllerButton>\n                <ArrowIcon isOpen={isOpen} />\n              </ControllerButton>\n            </div>\n            <Menu {...getMenuProps({ isOpen })}>\n              {isOpen\n                ? items.map((item, index) => (\n                    <Item\n                      key={index}\n                      {...getItemProps({\n                        item,\n                        index,\n                        isActive: highlightedIndex === index,\n                        isSelected: selectedItem === item\n                      })}\n                    >\n                      {item}\n                    </Item>\n                  ))\n                : null}\n            </Menu>\n          </div>\n        )}\n      </Downshift>\n    );\n  }\n}\n","import React, { Component, Fragment } from \"react\";\n\nexport class Accordion extends Component {\n  state = {\n    open: false,\n    toggle: this.toggle.bind(this)\n  };\n\n  toggle() {\n    this.setState({ open: !this.state.open });\n  }\n\n  render() {\n    return <Fragment>{this.props.children(this.state)}</Fragment>;\n  }\n}\n","import React, { Fragment } from \"react\";\nimport { SingleDownshift } from \"../Common/SingleDownshift\";\nimport { LOADING, withApplication } from \"../ApplicationContext\";\nimport isEmpty from \"lodash/isEmpty\";\nimport { AsyncMultiDownshift } from \"../Common/AsyncMultiDownshift\";\nimport { Accordion } from \"../Common/Accordion\";\nimport { withUser } from \"../Login/UserContext\";\n\nconst defaultState = {\n  movie: {\n    title: \"\",\n    genre: [],\n    type: \"\",\n    productionYear: \"\",\n    summary: \"\"\n  },\n  allocine: {\n    movies: [],\n    tvshows: []\n  }\n};\n\nconst headers = user => ({\n  Accept: \"application/json\",\n  \"Content-Type\": \"application/json\",\n  Authorization: `Bearer ${user.token}`\n});\n\nconst handleResponse = response => {\n  if (response.ok) return response.json();\n  throw new Error(\"Fetch fail\");\n};\n\nclass MovieFormWithContext extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      movie: props.movie ? props.movie : defaultState.movie,\n      allocine: defaultState.allocine\n    };\n  }\n\n  componentDidMount() {\n    // eslint-disable-next-line no-undef\n    $(\"#movie-creator-updator\").on(\"hide.bs.modal\", this.props.onClose);\n  }\n\n  valid = () => {\n    return (\n      !isEmpty(this.state.movie.title) &&\n      this.state.movie.genre.length > 0 &&\n      !isEmpty(this.state.movie.type)\n    );\n  };\n\n  add = () => {\n    fetch(\"/api/movies\", {\n      method: \"POST\",\n      body: JSON.stringify(this.state.movie),\n      headers: headers(this.props.user)\n    })\n      .then(handleResponse)\n      .then(data => {\n        this.props.onAdd({ ...this.state.movie, ...data });\n        // eslint-disable-next-line no-undef\n        $(\"#movie-creator-updator\").modal(\"hide\");\n      });\n  };\n\n  update = () => {\n    fetch(`/api/movies/${this.props.movie._id}`, {\n      method: \"PUT\",\n      body: JSON.stringify(this.state.movie),\n      headers: headers(this.props.user)\n    })\n      .then(handleResponse)\n      .then(data => {\n        this.props.onUpdate({ ...this.state.movie, ...data });\n        // eslint-disable-next-line no-undef\n        $(\"#movie-creator-updator\").modal(\"hide\");\n      });\n  };\n\n  search = () => {\n    Promise.all([\n      fetch(`/api/allocine?type=Film&title=${this.state.movie.title}`, {\n        headers: headers(this.props.user)\n      }).then(handleResponse),\n      fetch(`/api/allocine?type=Srie&title=${this.state.movie.title}`, {\n        headers: headers(this.props.user)\n      }).then(handleResponse)\n    ]).then(([movies, tvshows]) =>\n      this.setState({ allocine: { movies, tvshows } })\n    );\n  };\n\n  synchronizeMovieAllocine = idAllocine => {\n    // if click on the currently selected movie, unselect it\n    if (idAllocine === this.state.movie.idAllocine) {\n      this.setState({\n        movie: {\n          ...this.state.movie,\n          idAllocine: null\n        }\n      });\n    } else {\n      fetch(`/api/allocine/movie/${idAllocine}`, {\n        headers: headers(this.props.user)\n      })\n        .then(handleResponse)\n        .then(({ movie }) =>\n          this.setState({\n            movie: {\n              ...this.state.movie,\n              idAllocine,\n              title: movie.title,\n              genre: movie.genre.map(m => m.$).sort(),\n              type: \"Film\",\n              productionYear:\n                movie.release && movie.release.releaseDate\n                  ? new Date(movie.release.releaseDate).getFullYear()\n                  : movie.productionYear,\n              summary: movie.synopsis,\n              fileUrl: movie.poster ? movie.poster.href : \"\"\n            }\n          })\n        );\n    }\n  };\n\n  synchronizeTvShowAllocine = idAllocine => {\n    // if click on the currently selected movie, unselect it\n    if (idAllocine === this.state.movie.idAllocine) {\n      this.setState({\n        movie: {\n          ...this.state.movie,\n          idAllocine: null\n        }\n      });\n    } else {\n      fetch(`/api/allocine/serie/${idAllocine}`, {\n        headers: headers(this.props.user)\n      })\n        .then(handleResponse)\n        .then(({ tvseries }) =>\n          this.setState({\n            movie: {\n              ...this.state.movie,\n              idAllocine,\n              title: tvseries.title,\n              genre: tvseries.genre.map(m => m.$).sort(),\n              type: \"Srie\",\n              productionYear: tvseries.yearStart,\n              summary: tvseries.synopsis,\n              fileUrl: tvseries.poster ? tvseries.poster.href : \"\"\n            }\n          })\n        );\n    }\n  };\n\n  onInput = (field, transform = data => data) => {\n    return event =>\n      this.setState({\n        movie: { ...this.state.movie, [field]: transform(event.target.value) }\n      });\n  };\n\n  onSelect = field => {\n    return value =>\n      this.setState({ movie: { ...this.state.movie, [field]: value } });\n  };\n\n  render() {\n    const { movie } = this.state;\n    return (\n      <Fragment>\n        {this.props.application.status === LOADING ? (\n          <div>Loading...</div>\n        ) : (\n          <div\n            className=\"movie-modal modal fade movie-form\"\n            id=\"movie-creator-updator\"\n            tabIndex=\"-1\"\n            role=\"dialog\"\n            data-show=\"true\"\n          >\n            <div className=\"modal-dialog modal-dialog-centered\" role=\"document\">\n              <div className=\"modal-content\">\n                <div className=\"modal-header\">\n                  <h5 className=\"modal-title\">\n                    {(movie && movie.title) || \"New\"}\n                  </h5>\n                  <button\n                    type=\"button\"\n                    className=\"close\"\n                    data-dismiss=\"modal\"\n                    aria-label=\"Close\"\n                  >\n                    <span aria-hidden=\"true\">&times;</span>\n                  </button>\n                </div>\n                <div className=\"modal-body\">\n                  <div className=\"form-row\">\n                    <div className=\"form-group col-11\">\n                      <label htmlFor=\"title\">Title</label>\n                      <input\n                        type=\"text\"\n                        className=\"form-control\"\n                        id=\"title\"\n                        aria-describedby=\"title\"\n                        placeholder=\"Enter title\"\n                        onChange={this.onInput(\"title\")}\n                        value={this.state.movie.title}\n                      />\n                    </div>\n                    <div className=\"form-group col-1 text-center\">\n                      <i\n                        className=\"fab fa-angular fa-2x\"\n                        style={{\n                          cursor: \"pointer\",\n                          color: \"#fecc00\",\n                          paddingTop: \"35px\"\n                        }}\n                        onClick={this.search}\n                      />\n                    </div>\n                  </div>\n                  {this.state.allocine.movies.length > 0 ? (\n                    <Accordion>\n                      {({ open, toggle }) => {\n                        return (\n                          <Fragment>\n                            <div onClick={toggle} style={{ cursor: \"pointer\" }}>\n                              {this.state.allocine.movies.length} movies\n                              {open ? (\n                                <i className=\"fas fa-chevron-up\" />\n                              ) : (\n                                <i className=\"fas fa-chevron-down\" />\n                              )}\n                            </div>\n                            <div\n                              className=\"row\"\n                              style={{\n                                overflowX: \"scroll\",\n                                display: open ? \"flex\" : \"none\",\n                                flexWrap: \"nowrap\"\n                              }}\n                            >\n                              {this.state.allocine.movies.map(movie => (\n                                <div\n                                  key={movie.code}\n                                  className={`col-2 allocine-movie ${\n                                    movie.code === this.state.movie.idAllocine\n                                      ? \"selected\"\n                                      : \"\"\n                                  }`}\n                                  onClick={() =>\n                                    this.synchronizeMovieAllocine(movie.code)\n                                  }\n                                >\n                                  {movie.code ===\n                                  this.state.movie.idAllocine ? (\n                                    <i className=\"fas fa-check-circle selected-movie-icon fa-2x\" />\n                                  ) : null}\n                                  <div>\n                                    {movie.title} -{\" \"}\n                                    {movie.release && movie.release.releaseDate\n                                      ? new Date(\n                                          movie.release.releaseDate\n                                        ).getFullYear()\n                                      : movie.productionYear}\n                                  </div>\n                                  <div>\n                                    {movie.poster ? (\n                                      <img\n                                        src={movie.poster.href}\n                                        alt=\"movie poster\"\n                                        style={{ width: \"100%\" }}\n                                      />\n                                    ) : null}\n                                  </div>\n                                </div>\n                              ))}\n                            </div>\n                          </Fragment>\n                        );\n                      }}\n                    </Accordion>\n                  ) : null}\n                  {this.state.allocine.tvshows.length > 0 ? (\n                    <Accordion>\n                      {({ open, toggle }) => {\n                        return (\n                          <Fragment>\n                            <div onClick={toggle} style={{ cursor: \"pointer\" }}>\n                              {this.state.allocine.tvshows.length} tv shows\n                              {open ? (\n                                <i className=\"fas fa-chevron-up\" />\n                              ) : (\n                                <i className=\"fas fa-chevron-down\" />\n                              )}\n                            </div>\n                            <div\n                              className=\"row\"\n                              style={{\n                                overflowX: \"scroll\",\n                                display: open ? \"flex\" : \"none\",\n                                flexWrap: \"nowrap\"\n                              }}\n                            >\n                              {this.state.allocine.tvshows.map(tvshow => (\n                                <div\n                                  key={tvshow.code}\n                                  className={`col-2 allocine-movie ${\n                                    tvshow.code === this.state.movie.idAllocine\n                                      ? \"selected\"\n                                      : \"\"\n                                  }`}\n                                  onClick={() =>\n                                    this.synchronizeTvShowAllocine(tvshow.code)\n                                  }\n                                >\n                                  {tvshow.code ===\n                                  this.state.movie.idAllocine ? (\n                                    <i className=\"fas fa-check-circle selected-movie-icon fa-2x\" />\n                                  ) : null}\n                                  <div>\n                                    {tvshow.title} - {tvshow.yearStart}\n                                  </div>\n                                  <div>\n                                    {tvshow.poster ? (\n                                      <img\n                                        src={tvshow.poster.href}\n                                        alt=\"tvshow poster\"\n                                        style={{ width: \"100%\" }}\n                                      />\n                                    ) : null}\n                                  </div>\n                                </div>\n                              ))}\n                            </div>\n                          </Fragment>\n                        );\n                      }}\n                    </Accordion>\n                  ) : null}\n                  <div className=\"form-group\">\n                    <label>Genre</label>\n                    <AsyncMultiDownshift\n                      selectedItems={this.state.movie.genre}\n                      placeholder=\"Genre\"\n                      items={this.props.application.genres}\n                      handleChange={this.onSelect(\"genre\")}\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label>Type</label>\n                    <SingleDownshift\n                      selectedItem={this.state.movie.type}\n                      placeholder=\"Type\"\n                      items={this.props.application.types}\n                      onChange={this.onSelect(\"type\")}\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label htmlFor=\"production-year\">Production Year</label>\n                    <input\n                      type=\"number\"\n                      className=\"form-control\"\n                      id=\"production-year\"\n                      aria-describedby=\"production year\"\n                      placeholder=\"Enter production year\"\n                      onChange={this.onInput(\"productionYear\", data =>\n                        parseInt(data, 10)\n                      )}\n                      value={this.state.movie.productionYear}\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label htmlFor=\"summary\">Summary</label>\n                    <textarea\n                      className=\"form-control\"\n                      id=\"summary\"\n                      aria-describedby=\"summary\"\n                      placeholder=\"Enter summary\"\n                      onChange={this.onInput(\"summary\")}\n                      value={this.state.movie.summary}\n                    />\n                  </div>\n                </div>\n                <div className=\"modal-footer\">\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-secondary\"\n                    data-dismiss=\"modal\"\n                  >\n                    Close\n                  </button>\n                  <button\n                    type=\"button\"\n                    disabled={!this.valid()}\n                    className=\"btn btn-primary\"\n                    onClick={this.state.movie._id ? this.update : this.add}\n                  >\n                    {movie._id ? \"Update\" : \"Save\"}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nexport const MovieForm = withApplication(withUser(MovieFormWithContext));\n","import React, { Fragment, useContext, useEffect, useState } from \"react\";\nimport { MovieCard } from \"./MovieCard\";\nimport isArray from \"lodash/isArray\";\nimport { ApplicationContext, LOADING } from \"../ApplicationContext\";\nimport { MoviesContext } from \"../Common/MoviesContext\";\nimport { MoviesFilter } from \"./MoviesFilter\";\nimport * as MovieAPI from \"../Common/MovieAPI\";\nimport { UserContext } from \"../Login/UserContext\";\nimport debounce from \"lodash/debounce\";\nimport { MovieForm } from \"./MovieForm\";\n\nconst newMovie = () => ({});\nconst getMovies = MovieAPI.getMovies(true);\n\nconst buildQuery = (filters, offset) => {\n  // can use lodash/partition to one line\n  const genres = filters.genres\n    .filter(genre => genre[1])\n    .map(genre => genre[0]);\n  const notGenres = filters.genres\n    .filter(genre => !genre[1])\n    .map(genre => genre[0]);\n  return Object.keys(filters)\n    .filter(key => key !== \"genres\") // handle genres manually)\n    .filter(\n      key =>\n        (!isArray(filters[key]) &&\n          filters[key] !== null &&\n          filters[key] !== \"\") ||\n        (isArray(filters[key]) && filters[key].length > 0)\n    )\n    .map(key => `${key}=${filters[key]}`)\n    .concat(\n      genres.length > 0 ? `genres=${genres.join(\",\")}` : \"\",\n      notGenres.length > 0 ? `notGenres=${notGenres.join(\",\")}` : \"\",\n      `offset=${offset}`\n    )\n    .filter(Boolean) // remove empty strings\n    .join(\"&\");\n};\n\nexport const List = () => {\n  // load contexts\n  const { status } = useContext(ApplicationContext);\n  const {\n    invalidate,\n    movies,\n    count,\n    addAll,\n    filters,\n    add,\n    update\n  } = useContext(MoviesContext);\n  const user = useContext(UserContext);\n\n  // create state\n  const [offset, setOffset] = useState(movies.length / filters.limit);\n  const [movie, setMovie] = useState(newMovie());\n  const [key, setKey] = useState(0);\n  const [loaded, setLoaded] = useState(false);\n\n  //create actions\n  const loadMore = offset => {\n    // invalidate if there is a new search\n    if (offset === 0) {\n      invalidate();\n    }\n    setLoaded(false);\n    getMovies(buildQuery(filters, offset), user)\n      .then(addAll)\n      .then(() => {\n        setOffset(offset + 1); // useInc\n        setLoaded(true);\n      });\n  };\n  const showMovie = () => {\n    // ignore first trigger, needed for backward navigation\n    if (key > 0) {\n      // eslint-disable-next-line no-undef\n      $(\"#movie-creator-updator\").modal(\"show\");\n    }\n  };\n\n  // create effects\n  useEffect(\n    () => {\n      // useDebounce :)\n      const debouncedLoadMore = debounce(loadMore, 400, {\n        leading: false,\n        trailing: true\n      });\n      // no movies ? then automatically fetch some (note: every time a filter is updated, movies are cleaned up)\n      if (movies.length === 0) {\n        debouncedLoadMore(0);\n      }\n      setLoaded(false);\n      return () => debouncedLoadMore.cancel();\n    },\n    [filters]\n  );\n  useEffect(showMovie, [movie]);\n\n  // render\n  return (\n    <div>\n      {status === LOADING ? (\n        <h2 className=\"text-center mt-2\">\n          <i className=\"fas fa-spinner fa-spin fa-2x\" />\n        </h2>\n      ) : (\n        <Fragment>\n          <MovieForm\n            // force reinitialisation of movie form\n            key={movie._id || key}\n            movie={movie._id ? movie : null}\n            onAdd={movie => add(movie)}\n            onUpdate={movie => update(movie._id, movie)}\n          />\n          <i\n            onClick={() => {\n              setMovie(newMovie());\n              setKey(key + 1);\n            }}\n            className=\"fas fa-plus-circle fa-3x\"\n            style={{\n              top: \"22px\",\n              left: \"22px\",\n              position: \"absolute\",\n              color: \"#F1F7EE\",\n              cursor: \"pointer\"\n            }}\n            title=\"Add a movie or a tv show\"\n          />\n          <MoviesFilter />\n          <h2 className=\"text-center\">\n            {movies.length === count && count > 0 ? (\n              <span>{count} movies/tvshows</span>\n            ) : movies.length < count ? (\n              <span>\n                {movies.length} of {count} movies/tvshows\n              </span>\n            ) : loaded ? (\n              <span> No movies/tvshows</span>\n            ) : null}\n          </h2>\n          <div className=\"movies\">\n            {movies.map(movie => (\n              <MovieCard\n                key={movie._id}\n                movie={movie}\n                onChange={movie => update(movie._id, movie)}\n                onDelete={_ => update(movie._id, undefined)}\n                onEdit={() => {\n                  setMovie({\n                    ...movie // create a new movie to force the show effect to be displayed\n                  });\n                  setKey(key + 1); // mandatory otherwise first edit fail\n                }}\n              />\n            ))}\n          </div>\n          <h2 className=\"text-center mt-2\">\n            {!loaded ? (\n              <span>\n                <i className=\"fas fa-spinner fa-spin fa-2x\" />\n              </span>\n            ) : null}\n          </h2>\n          {movies.length < count ? (\n            <div className=\"text-center m-3\">\n              <button\n                onClick={() => loadMore(offset)}\n                className=\"btn btn-primary btn-lg\"\n              >\n                Load more\n              </button>\n            </div>\n          ) : (\n            undefined\n          )}\n        </Fragment>\n      )}\n    </div>\n  );\n};\n","import React, { Fragment, useState } from \"react\";\nimport identity from \"lodash/identity\";\n\nconst EditableField = props => {\n  const [value, setValue] = useState(props.value || \"\");\n  const [edit, setEdit] = useState(!props.value);\n  const transform = props.transform || identity;\n  const lock = props.lock || false;\n  return (\n    <Fragment>\n      {!lock && edit ? (\n        <Fragment>\n          {props.renderFormField({\n            ...props,\n            value,\n            onChange: event => setValue(transform(event.target.value))\n          })}\n          <button\n            className=\"btn btn-primary\"\n            onClick={event => {\n              event.preventDefault();\n              event.stopPropagation();\n              if (value) {\n                props.onChange(value);\n                setEdit(false);\n              }\n            }}\n          >\n            OK\n          </button>\n        </Fragment>\n      ) : (\n        <Fragment>\n          {props.renderValue({\n            className: props.className,\n            value,\n            onClick: event => {\n              if (!lock) {\n                event.preventDefault();\n                event.stopPropagation();\n                setEdit(true);\n              }\n            }\n          })}\n        </Fragment>\n      )}\n    </Fragment>\n  );\n};\n\nexport const EditableInput = props => (\n  <EditableField\n    {...props}\n    renderFormField={fieldProps => (\n      <input\n        placeholder={fieldProps.placeholder}\n        type=\"text\"\n        value={fieldProps.value}\n        onChange={fieldProps.onChange}\n        onClick={event => {\n          event.preventDefault();\n          event.stopPropagation();\n        }}\n      />\n    )}\n    renderValue={valueProps => (\n      <span onClick={valueProps.onClick} className={valueProps.className}>\n        {valueProps.value}\n      </span>\n    )}\n  />\n);\n\nexport const EditableTextarea = props => (\n  <EditableField\n    {...props}\n    renderFormField={fieldProps => (\n      <textarea\n        placeholder={fieldProps.placeholder}\n        style={fieldProps.style}\n        value={fieldProps.value}\n        rows={fieldProps.rows || 2}\n        onChange={fieldProps.onChange}\n        onClick={event => {\n          event.preventDefault();\n          event.stopPropagation();\n        }}\n      />\n    )}\n    renderValue={valueProps => (\n      <span onClick={valueProps.onClick} className={valueProps.className}>\n        {props.split ? (\n          valueProps.value.split(\"\\n\").map((item, key) => (\n            <Fragment key={key}>\n              {item}\n              <br />\n            </Fragment>\n          ))\n        ) : (\n          <Fragment>{valueProps.value}</Fragment>\n        )}\n      </span>\n    )}\n  />\n);\n","import { EditableInput, EditableTextarea } from \"../../Common/EditableField\";\nimport React, { useContext, useState } from \"react\";\nimport { UserContext } from \"../../Login/UserContext\";\nimport { produce } from \"immer\";\nimport * as MovieAPI from \"../../Common/MovieAPI\";\nimport { MovieContext } from \"../Movie\";\nimport { SeasonContext } from \"./Season\";\n\nexport const Episode = ({ episode, index, onEpisodeChanged }) => {\n  // get contexts\n  const user = useContext(UserContext);\n  const { movie, lock } = useContext(MovieContext);\n  const { season, index: seasonIndex } = useContext(SeasonContext);\n  const [ellipsis, setEllipsis] = useState(\"ellipsis\");\n\n  // actions\n  const updateSeason = transform => {\n    const newMovie = produce(movie, transform);\n    const season = newMovie.seasons[seasonIndex];\n    // onEpisodeChanged(newMovie);\n    MovieAPI.updateSeason(newMovie, season, user).then(onEpisodeChanged);\n  };\n  const updateEpisode = transform => {\n    const newMovie = produce(movie, transform);\n    const season = newMovie.seasons[seasonIndex];\n    const episode = season.episodes[index];\n    MovieAPI.updateEpisode(newMovie, season, episode, user).then(\n      onEpisodeChanged\n    );\n  };\n\n  return (\n    <div className=\"row episode mr-0 ml-0\">\n      <div className=\" col-md-12 col-xl-2 align-items-center d-flex p-0\">\n        {!lock && (\n          <i\n            className=\"fas fa-times delete-episode\"\n            onClick={event => {\n              event.preventDefault();\n              event.stopPropagation();\n              if (window.confirm(\"Delete episode ?\")) {\n                MovieAPI.deleteEpisode(movie, season, episode, user).then(\n                  onEpisodeChanged\n                );\n              }\n            }}\n          />\n        )}\n        <div\n          className=\"text-center col-1\"\n          style={{\n            color: episode.seen ? \"var(--success)\" : \"\",\n            fontWeight: episode.seen ? \"bold\" : \"\",\n            cursor: \"pointer\"\n          }}\n          onClick={() =>\n            updateSeason(movie => {\n              if (!movie.seasons[seasonIndex].episodes[index].seen) {\n                for (let i = 0; i <= index; i++) {\n                  movie.seasons[seasonIndex].episodes[i].seen = true;\n                }\n              } else {\n                movie.seasons[seasonIndex].episodes[index].seen = false;\n              }\n            })\n          }\n        >\n          {index + 1}\n        </div>\n        <div className=\"text-center col-11\">\n          <EditableInput\n            lock={lock}\n            className={`font-weight-bold episode-title ${\n              episode.seen ? \"seen\" : \"\"\n            }`}\n            value={episode.title}\n            placeholder=\"Title\"\n            onChange={title =>\n              updateEpisode(movie => {\n                movie.seasons[seasonIndex].episodes[index].title = title;\n              })\n            }\n          />\n        </div>\n      </div>\n      <div className=\"col-md-12 col-xl-10 align-items-center d-flex\">\n        <EditableTextarea\n          lock={lock}\n          style={{ width: \"100%\" }}\n          rows={4}\n          value={episode.summary}\n          placeholder=\"Summary\"\n          className={`${ellipsis} d-block episode-summary w-100 text-left`}\n          onChange={summary =>\n            updateEpisode(movie => {\n              movie.seasons[seasonIndex].episodes[index].summary = summary;\n            })\n          }\n        />\n        {ellipsis && (\n          <span style={{ cursor: \"pointer\" }} onClick={() => setEllipsis(\"\")}>\n            <i className=\"fas fa-question-circle\" />\n          </span>\n        )}\n      </div>\n    </div>\n  );\n};\n","import { useState } from \"react\";\n\nexport const useToggle = (initialValue = false) => {\n  const [value, setValue] = useState(initialValue);\n  const toggle = () => setValue(!value);\n  return [value, toggle];\n};\n\nexport const useInput = (initialValue = \"\") => {\n  const [value, setValue] = useState(initialValue);\n  return [\n    {\n      value,\n      onChange: event => setValue(event.target.value)\n    },\n    setValue\n  ];\n};\n","import { useContext, Fragment } from \"react\";\nimport { EditableInput } from \"../../Common/EditableField\";\nimport * as MovieAPI from \"../../Common/MovieAPI\";\nimport React from \"react\";\nimport { produce } from \"immer\";\nimport { UserContext } from \"../../Login/UserContext\";\nimport \"./Season.css\";\nimport { MovieSeen } from \"../../Common/MovieSeen\";\nimport { Episode } from \"./Episode\";\nimport every from \"lodash/every\";\nimport some from \"lodash/some\";\nimport { useToggle } from \"../../Common/hooks\";\nimport { MovieContext } from \"../../Movie/Movie\";\n\nexport const SeasonContext = React.createContext({});\n\nexport const Season = ({ season, index, onMovieChanged }) => {\n  // get contexts\n  const user = useContext(UserContext);\n  const { movie, lock } = useContext(MovieContext);\n  const [open, toggle] = useToggle();\n\n  // actions\n  const updateSeason = transform => {\n    const newMovie = produce(movie, transform);\n    const season = newMovie.seasons[index];\n    MovieAPI.updateSeason(newMovie, season, user).then(onMovieChanged);\n  };\n\n  const seen = every(season.episodes, \"seen\") && season.episodes.length > 0;\n  const oneSeen = some(season.episodes, \"seen\") && season.episodes.length > 0;\n\n  return (\n    <div className=\"season\">\n      <div className=\"season-header\" onClick={toggle}>\n        <div>\n          <div\n            className=\"season-header-view\"\n            onClick={event => {\n              event.preventDefault();\n              event.stopPropagation();\n              updateSeason(movie => {\n                movie.seasons[index].seen = !seen;\n              });\n            }}\n          >\n            <MovieSeen seen={seen} partial={oneSeen} />\n          </div>\n          {!lock && (\n            <i\n              className=\"fas fa-times delete-season\"\n              onClick={event => {\n                event.preventDefault();\n                event.stopPropagation();\n                if (window.confirm(\"Delete season ?\")) {\n                  MovieAPI.deleteSeason(movie, season, user).then(\n                    onMovieChanged\n                  );\n                }\n              }}\n            />\n          )}\n          &nbsp;Season {index + 1}\n          &nbsp;-&nbsp;\n          <EditableInput\n            lock={lock}\n            placeholder=\"YYYY\"\n            value={season.productionYear}\n            transform={value => parseInt(value, 10)}\n            onChange={productionYear =>\n              updateSeason(movie => {\n                movie.seasons[index].productionYear = productionYear;\n              })\n            }\n          />\n        </div>\n        <div className=\"season-header-arrow\">\n          {open ? (\n            <i className=\"fas fa-chevron-up\" />\n          ) : (\n            <i className=\"fas fa-chevron-down\" />\n          )}\n        </div>\n      </div>\n      <div className=\"episodes\">\n        <SeasonContext.Provider value={{ season, index }}>\n          {open &&\n            season.episodes.map((episode, episodeIndex) => (\n              <Episode\n                key={episode._id}\n                episode={episode}\n                index={episodeIndex}\n                onEpisodeChanged={onMovieChanged}\n              />\n            ))}\n        </SeasonContext.Provider>\n      </div>\n\n      {!lock ? (\n        <Fragment>\n          {open && (\n            <button\n              className=\"btn btn-primary\"\n              onClick={() =>\n                MovieAPI.addEpisode(movie, season, user).then(onMovieChanged)\n              }\n            >\n              <i className=\"fas fa-plus\" />\n              &nbsp;Add episode\n            </button>\n          )}\n        </Fragment>\n      ) : (\n        undefined\n      )}\n    </div>\n  );\n};\n","import React, { Fragment, useContext, useEffect, useState } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport * as MovieAPI from \"../Common/MovieAPI\";\nimport { UserContext } from \"../Login/UserContext\";\nimport { MovieSeen } from \"../Common/MovieSeen\";\nimport { MoviesContext } from \"../Common/MoviesContext\";\nimport { produce } from \"immer\";\nimport { Season } from \"./Season/Season\";\nimport { EditableTextarea } from \"../Common/EditableField\";\nimport { useToggle } from \"../Common/hooks\";\nimport \"./Movie.css\";\n\nexport const MovieContext = React.createContext({});\n\nexport const Movie = withRouter(({ match, history }) => {\n  // get contexts\n  const user = useContext(UserContext);\n  const movies = useContext(MoviesContext);\n  // create state\n  const [movie, setMovie] = useState();\n  const [lock, toggle] = useToggle(true);\n\n  // create effects\n  useEffect(() => MovieAPI.getMovie(match.params.id, user).then(setMovie), [\n    match.params.id\n  ]);\n\n  // create actions\n  const updateMovie = transform => () => {\n    MovieAPI.updateMovie(produce(movie, transform), user).then(mergeContext);\n  };\n\n  // helper\n  const mergeContext = updatedMovie => {\n    setMovie(updatedMovie);\n    movies.update(updatedMovie._id, updatedMovie);\n  };\n\n  return (\n    <div className=\"container movie-container\">\n      {!movie ? (\n        <h2 className=\"text-center mt-2\">\n          <i className=\"fas fa-spinner fa-spin fa-2x\" />\n        </h2>\n      ) : (\n        <Fragment>\n          <i\n            onClick={() => history.goBack()}\n            className=\"fas fa-arrow-circle-left fa-3x\"\n            style={{\n              top: \"22px\",\n              left: \"22px\",\n              position: \"absolute\",\n              color: \"#F1F7EE\",\n              cursor: \"pointer\"\n            }}\n            title=\"Return to the list of movies\"\n          />\n          <div\n            className=\"p-5 mt-3 single-movie-card\"\n            style={{ position: \"relative\" }}\n          >\n            <i\n              onClick={toggle}\n              className={`fas ${lock ? \"fa-lock\" : \"fa-lock-open\"} fa-2x`}\n              style={{\n                color: \"var(--movie-secondary)\",\n                position: \"absolute\",\n                top: \"5px\",\n                right: \"5px\",\n                cursor: \"pointer\"\n              }}\n              title={`Click to ${\n                lock ? \"open\" : \"close\"\n              } movie for modifications`}\n            />\n            <div className=\"d-flex justify-content-center\">\n              <div>\n                <img\n                  src={movie.fileUrl}\n                  style={{ maxHeight: \"300px\" }}\n                  alt=\"movie poster\"\n                />\n              </div>\n              <div className=\"pl-2 d-flex flex-column\" style={{ flexGrow: 1 }}>\n                <h1 className=\"text-center\">\n                  {movie.title} - {movie.productionYear}\n                </h1>\n                <h6 className=\"text-center single-movie-subtitle\">\n                  {movie.genre.join(\",\")}\n                </h6>\n                <div>\n                  <EditableTextarea\n                    split={true}\n                    lock={lock}\n                    value={movie.summary}\n                    style={{ width: \"100%\" }}\n                    placeholder=\"Summary\"\n                    rows=\"7\"\n                    onChange={summary =>\n                      updateMovie(movie => {\n                        movie.summary = summary;\n                      })()\n                    }\n                  />\n                </div>\n              </div>\n            </div>\n            <div>\n              {movie.type === \"Film\" ? (\n                <MovieSeen\n                  seen={movie.seen}\n                  onClick={updateMovie(movie => {\n                    movie.seen = !movie.seen;\n                  })}\n                />\n              ) : (\n                undefined\n              )}\n            </div>\n            <div className=\"text-center\">\n              {movie.type !== \"Film\" ? (\n                <Fragment>\n                  <MovieContext.Provider value={{ lock, movie }}>\n                    <div>\n                      {movie.seasons.map((season, seasonIndex) => (\n                        <Season\n                          key={seasonIndex}\n                          season={season}\n                          index={seasonIndex}\n                          onMovieChanged={mergeContext}\n                        />\n                      ))}\n                    </div>\n                  </MovieContext.Provider>\n                  {!lock ? (\n                    <button\n                      className=\"btn btn-primary\"\n                      onClick={() =>\n                        MovieAPI.addSeason(movie, user).then(mergeContext)\n                      }\n                    >\n                      <i className=\"fas fa-plus\" />\n                      &nbsp;Add season\n                    </button>\n                  ) : (\n                    undefined\n                  )}\n                </Fragment>\n              ) : (\n                undefined\n              )}\n            </div>\n          </div>\n        </Fragment>\n      )}\n    </div>\n  );\n});\n","import React, { Component, Fragment } from \"react\";\nimport debounce from \"lodash/debounce\";\nimport { withUser } from \"../Login/UserContext\";\n\nexport const LOADING = Symbol(\"LOADING\");\nexport const LOADED = Symbol(\"LOADED\");\n\nconst headers = user => ({\n  Accept: \"application/json\",\n  \"Content-Type\": \"application/json\",\n  Authorization: `Bearer ${user.token}`\n});\nconst handleResponse = response => {\n  if (response.ok) return response.json();\n  throw new Error(\"Fetch fail\");\n};\n\nclass FetchWithContext extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      status: LOADING,\n      data: undefined\n    };\n\n    // TODO probably not the best place to debounce\n    this.debounceFetch = debounce(this.fetch, this.props.debounce || 0, {\n      leading: false,\n      trailing: true\n    });\n  }\n\n  componentWillUnmount() {\n    this.debounceFetch.cancel();\n  }\n\n  fetch() {\n    return fetch(`${this.props.endpoint}`, {\n      headers: headers(this.props.user)\n    })\n      .then(handleResponse)\n      .then(data => {\n        this.setState({\n          status: LOADED,\n          data\n        });\n        this.props.onSuccess && this.props.onSuccess(data);\n      });\n  }\n\n  componentDidMount() {\n    this.debounceFetch();\n  }\n\n  render() {\n    return (\n      <Fragment>\n        {this.props.children({\n          status: this.state.status,\n          data: this.state.data\n        })}\n      </Fragment>\n    );\n  }\n}\n\n/**\n * - create a context that holds movies\n * - dont load if there is already sth in the context\n * - pass initial data to prevent fetch the api (if data, dont fetch on cDM)\n */\n\nexport const Fetch = withUser(FetchWithContext);\n","import { Fetch } from \"./Common/Fetch\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport const Header = () => {\n  return (\n    <div\n      className=\"text-center\"\n      style={{\n        backgroundColor: \"var(--movie-secondary)\",\n        color: \"var(--movie-primary)\",\n        padding: \"4px\"\n      }}\n    >\n      <h1 className=\"header\">\n        <Link to=\"/\">Cinematheque</Link>\n      </h1>\n      <Fetch endpoint=\"/api/movies?limit=0\">\n        {({ data }) => <h6>{data ? data.count : 0} movies/tvshows</h6>}\n      </Fetch>\n      <Link to=\"/stats\">\n        <i\n          className=\"fas fa-chart-bar fa-3x\"\n          style={{\n            top: \"22px\",\n            right: \"22px\",\n            position: \"absolute\",\n            color: \"#F1F7EE\",\n            cursor: \"pointer\"\n          }}\n          title=\"Show statistics\"\n        />\n      </Link>\n    </div>\n  );\n};\n","import React, { Fragment, useContext, useEffect, useState } from \"react\";\nimport { ApplicationContext } from \"../ApplicationContext\";\nimport * as MovieAPI from \"../Common/MovieAPI\";\nimport \"./Statistics.css\";\nimport { produce } from \"immer\";\nimport { UserContext } from \"../Login/UserContext\";\nimport orderBy from \"lodash/orderBy\";\nconst getMovies = MovieAPI.getMovies(false);\nconst initialState = (types, genres) => {\n  return types.map(type => ({\n    name: type,\n    count: 0,\n    genres: genres.map(genre => ({\n      name: genre,\n      count: 0,\n      seen: 0,\n      unseen: 0\n    }))\n  }));\n};\n\nexport const Statistics = () => {\n  // get contexts\n  const user = useContext(UserContext);\n  const { genres, types } = useContext(ApplicationContext);\n  const [stats, setStats] = useState(initialState(types, genres));\n\n  // actions\n  const fetchByTypes = (types, genres) => {\n    types.forEach(type =>\n      getMovies(`types=${type}&limit=0`, user)\n        .then(data =>\n          setStats(\n            produce(\n              draft =>\n                void (draft.find(t => type === t.name).count = data.count)\n            )\n          )\n        )\n        .then(() =>\n          genres.forEach(genre => {\n            getMovies(`types=${type}&genres=${genre}&limit=0`, user).then(\n              data =>\n                setStats(\n                  produce(\n                    draft =>\n                      void (draft\n                        .find(t => type === t.name)\n                        .genres.find(g => genre === g.name).count = data.count)\n                  )\n                )\n            );\n            getMovies(\n              `types=${type}&genres=${genre}&seen=true&limit=0`,\n              user\n            ).then(data =>\n              setStats(\n                produce(\n                  draft =>\n                    void (draft\n                      .find(t => type === t.name)\n                      .genres.find(g => genre === g.name).seen = data.count)\n                )\n              )\n            );\n            getMovies(\n              `types=${type}&genres=${genre}&seen=false&limit=0`,\n              user\n            ).then(data =>\n              setStats(\n                produce(\n                  draft =>\n                    void (draft\n                      .find(t => type === t.name)\n                      .genres.find(g => genre === g.name).unseen = data.count)\n                )\n              )\n            );\n          })\n        )\n    );\n  };\n\n  // effects\n  useEffect(\n    () => {\n      setStats(initialState(types, genres));\n      fetchByTypes(types, genres);\n    },\n    [types, genres]\n  );\n\n  return (\n    <div>\n      <div className=\"d-flex justify-content-around\">\n        {stats.map((type, index) => (\n          <div style={{ width: \"500px\" }} key={index}>\n            <div className=\"card stat-card\">\n              <div className=\"card-body\">\n                <h5 className=\"card-title\">\n                  {type.count} {type.name}\n                </h5>\n                <div>\n                  {orderBy(type.genres, [\"count\"], [\"desc\"]).map(\n                    (genre, index) => (\n                      <Fragment key={index}>\n                        <div>\n                          {\" \"}\n                          {genre.count} {genre.name} ({\" \"}\n                          {genre.count\n                            ? ((genre.seen * 100) / genre.count).toFixed(2)\n                            : 0}\n                          % seen){\" \"}\n                        </div>\n                        <div className=\"movie-progress\" key={index}>\n                          <div\n                            className=\"progress-bar unseen\"\n                            role=\"progressbar\"\n                            style={{\n                              width: `calc(20px + ${(genre.unseen * 100) /\n                                orderBy(type.genres, [\"count\"], [\"desc\"])[0]\n                                  .count}%)`\n                            }}\n                          >\n                            {genre.unseen}\n                          </div>\n                          {genre.count - genre.unseen - genre.seen ? (\n                            <div\n                              className=\"progress-bar pending\"\n                              role=\"progressbar\"\n                              style={{\n                                width: `calc(20px + ${((genre.count -\n                                  genre.unseen -\n                                  genre.seen) *\n                                  100) /\n                                  orderBy(type.genres, [\"count\"], [\"desc\"])[0]\n                                    .count}%)`\n                              }}\n                            >\n                              {genre.count - genre.unseen - genre.seen}\n                            </div>\n                          ) : (\n                            undefined\n                          )}\n                          <div\n                            className=\"progress-bar seen\"\n                            role=\"progressbar\"\n                            style={{\n                              width: `calc(20px + ${(genre.seen * 100) /\n                                orderBy(type.genres, [\"count\"], [\"desc\"])[0]\n                                  .count}%)`\n                            }}\n                          >\n                            {genre.seen}\n                          </div>\n                        </div>\n                      </Fragment>\n                    )\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n","const headers = user => ({\n  Accept: \"application/json\",\n  \"Content-Type\": \"application/json\",\n  Authorization: `Bearer ${user.token}`\n});\n\nconst handleResponse = response => {\n  if (response.ok) return response.json();\n  throw new Error(\"Fetch fail\");\n};\n\nexport const getTags = user => {\n  return fetch(`/api/tags`, {\n    headers: headers(user)\n  }).then(handleResponse);\n};\n\nexport const createTag = (tag, user) => {\n  return fetch(`/api/tags`, {\n    method: \"POST\",\n    body: JSON.stringify(tag),\n    headers: headers(user)\n  }).then(handleResponse);\n};\n\nexport const deleteTag = (tag, user) => {\n  return fetch(`/api/tags/${tag._id}`, {\n    method: \"DELETE\",\n    headers: headers(user)\n  }).then(handleResponse);\n};\n","import React from \"react\";\nimport \"./Tag.css\";\n\nconst invertColor = hex => {\n  if (hex.indexOf(\"#\") === 0) {\n    hex = hex.slice(1);\n  }\n\n  const red = parseInt(hex.slice(0, 2), 16),\n    green = parseInt(hex.slice(2, 4), 16),\n    blue = parseInt(hex.slice(4, 6), 16);\n  return red * 0.299 + green * 0.587 + blue * 0.114 > 186\n    ? \"#000000\"\n    : \"#FFFFFF\";\n};\n\nexport const Tag = ({ color, label, big, className = \"\", style = {} }) => (\n  <span\n    className={`tag ${big ? \"big\" : \"\"} ${className}`}\n    style={{\n      backgroundColor: color,\n      color: `${invertColor(color)}`,\n      ...style\n    }}\n  >\n    {label}\n  </span>\n);\n","import React, { useEffect, useState, useContext } from \"react\";\nimport \"./TagList.css\";\nimport { useInput } from \"../Common/hooks\";\nimport { createTag, deleteTag, getTags } from \"../Common/TagAPI\";\nimport { UserContext } from \"../Login/UserContext\";\nimport { Tag } from \"./Tag\";\n\nconst random = max => {\n  return Math.floor(Math.random() * Math.floor(max));\n};\nconst generateColor = () => {\n  return `#${random(256)\n    .toString(16)\n    .padStart(2, \"0\")}${random(256)\n    .toString(16)\n    .padStart(2, \"0\")}${random(256)\n    .toString(16)\n    .padStart(2, \"0\")}`;\n};\n\nexport const TagList = () => {\n  // get context\n  const user = useContext(UserContext);\n\n  // create state\n  const [color, setColor] = useInput(generateColor());\n  const [label, setLabel] = useInput(\"\");\n  const [tags, setTags] = useState([]);\n\n  //create effects\n  useEffect(() => {\n    getTags(user).then(setTags);\n  }, []);\n\n  return (\n    <div className=\"container tags-card\">\n      {tags.map(tag => (\n        <div\n          key={tag._id}\n          className=\"mt-2 mb-2 d-flex\"\n          style={{\n            overflow: \"hidden\" // Collapsing margins\n          }}\n        >\n          {/* avoid the tag element to fill up all the available height */}\n          <div>\n            <Tag {...tag} big />\n          </div>\n          <button\n            type=\"button\"\n            className=\"btn btn-danger ml-2\"\n            onClick={event => {\n              event.preventDefault();\n              event.stopPropagation();\n              if (window.confirm(\"Delete tag ?\")) {\n                deleteTag(tag, user).then(_ =>\n                  setTags(tags => tags.filter(t => t._id !== tag._id))\n                );\n              }\n            }}\n          >\n            <i className=\"fas fa-times\" />\n          </button>\n        </div>\n      ))}\n      <form className=\"form-inline\">\n        <input type=\"color\" className=\"form-control colorpicker\" {...color} />\n        <input\n          type=\"text\"\n          className=\"form-control ml-2\"\n          placeholder=\"Label\"\n          {...label}\n        />\n        <button\n          type=\"button\"\n          className=\"btn btn-info btn-sm ml-2\"\n          onClick={() => {\n            setColor(generateColor());\n          }}\n        >\n          <i className=\"fas fa-sync-alt\" />\n        </button>\n        <button\n          type=\"button\"\n          className=\"btn btn-primary btn-sm ml-2\"\n          onClick={() => {\n            createTag(\n              {\n                label: label.value,\n                color: color.value\n              },\n              user\n            )\n              .then(tag => setTags(tags => [...tags, tag]))\n              .then(_ => {\n                setColor(generateColor());\n                setLabel(\"\");\n              });\n          }}\n        >\n          <i className=\"fas fa-check\" />\n        </button>\n        <Tag\n          style={{ marginLeft: \"auto\" }}\n          color={color.value}\n          label={label.value || \"Label\"}\n        />\n      </form>\n    </div>\n  );\n};\n","import React, { Component, Fragment } from \"react\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport \"./App.css\";\nimport { List } from \"./MovieList/List\";\nimport { Movie } from \"./Movie/Movie\";\nimport { Header } from \"./Header\";\nimport { Statistics } from \"./Statistics/Statistics\";\nimport { TagList } from \"./Admin/TagList\";\n\nclass App extends Component {\n  render() {\n    return (\n      <Fragment>\n        <Router>\n          <Fragment>\n            <Header />\n            <Route exact path=\"/\" component={List} />\n            <Route exact path=\"/movie/:id\" component={Movie} />\n            <Route exact path=\"/stats\" component={Statistics} />\n            <Route exact path=\"/admin\" component={TagList} />\n          </Fragment>\n        </Router>\n      </Fragment>\n    );\n  }\n}\n\nexport default App;\n","import React, { Component } from \"react\";\nimport { LOGIN_FAILED, withUser } from \"./UserContext\";\n\nclass LoginWithContext extends Component {\n  state = {\n    password: \"\"\n  };\n\n  render() {\n    return (\n      <div>\n        {this.props.user.status === LOGIN_FAILED ? (\n          <div className=\"alert alert-danger\" role=\"alert\">\n            Login failed\n          </div>\n        ) : (\n          undefined\n        )}\n        <div className=\"form-group\">\n          <label htmlFor=\"password\">Password</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            id=\"password\"\n            aria-describedby=\"password\"\n            placeholder=\"Enter password\"\n            value={this.state.password}\n            onChange={event => this.setState({ password: event.target.value })}\n            onKeyDown={event => {\n              if (event.key === \"Enter\")\n                this.props.user.login(this.state.password);\n            }}\n          />\n        </div>\n        <button\n          type=\"button\"\n          className=\"btn btn-primary\"\n          onClick={() => this.props.user.login(this.state.password)}\n        >\n          Submit\n        </button>\n      </div>\n    );\n  }\n}\n\nexport const Login = withUser(LoginWithContext);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { ApplicationProvider } from \"./ApplicationContext\";\nimport { UserProvider, UserContext } from \"./Login/UserContext\";\nimport { Login } from \"./Login/Login\";\nimport { MoviesProvider } from \"./Common/MoviesContext\";\n\nReactDOM.render(\n  <UserProvider>\n    <UserContext.Consumer>\n      {({ token }) =>\n        token ? (\n          <ApplicationProvider token={token}>\n            <MoviesProvider>\n              <App />\n            </MoviesProvider>\n          </ApplicationProvider>\n        ) : (\n          <Login />\n        )\n      }\n    </UserContext.Consumer>\n  </UserProvider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}