{"version":3,"sources":["Common/MovieAPI.js","Common/MovieSeen.js","Movie/Movie.util.js","Login/UserContext.js","Common/TagAPI.js","ApplicationContext.js","Admin/Tag.js","MovieList/MovieCard.jsx","Common/MoviesContext.js","Common/MultiDownshift.jsx","shared.js","Common/MultiDownshiftWithReverse.jsx","Common/AsyncMultiDownshift.jsx","MovieList/MoviesFilter.js","Common/SingleDownshift.jsx","Common/Accordion.jsx","MovieList/MovieForm.jsx","MovieList/List.js","Common/EditableField.js","Notifications/NotificationContext.js","Movie/Season/Episode.js","Common/hooks.js","Movie/Season/Season.js","Movie/Movie.js","Common/Fetch.jsx","Header.js","Statistics/Statistics.js","Admin/tag.utils.js","Admin/TagListElement.js","Admin/TagList.js","Notifications/Notification.js","Notifications/NotificationsList.js","App.js","Login/Login.js","index.js"],"names":["controller","MovieSeen","_ref","seen","onClick","_ref$partial","partial","react_default","a","createElement","className","style","color","cursor","seasonTag","seasonIndex","concat","toString","padStart","episodeTag","episodeIndex","createNotification","dispatch","content","type","payload","arguments","length","undefined","headers","user","Accept","Content-Type","Authorization","token","handleError","error","message","handleResponse","response","ok","json","Error","getMovies","abortable","search","abort","AbortController","fetch","signal","then","catch","updateMovie","movie","_id","method","body","JSON","stringify","addSeason","updateSeason","season","addEpisode","UserContext","React","createContext","withUser","Component","props","Consumer","Object","assign","LOGOUT","Symbol","LOGIN","LOGIN_FAILED","UserProvider","_React$Component","_getPrototypeOf2","_this","classCallCheck","this","_len","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","state","status","login","bind","assertThisInitialized","inherits","createClass","key","value","_this2","localStorage","getItem","exp","Date","setState","password","_this3","_ref2","setItem","Provider","children","ApplicationContext","LOADING","LOADED","ApplicationProvider","set","field","fn","objectSpread","defineProperty","genres","types","tags","options","Promise","all","slicedToArray","Tag","hex","label","big","_ref$className","_ref$style","_ref$onClick","backgroundColor","indexOf","slice","parseInt","MovieCard","onEdit","onChange","onDelete","useContext","update","title","subtitle","productionYear","genre","join","Link","to","position","top","right","finished","MovieSeen_MovieSeen","every","seasons","map","episodes","some","window","confirm","deleteMovie","src","fileUrl","replace","alt","movieTag","Tag_Tag","find","tag","toLowerCase","open","MoviesContext","initialState","movies","count","filters","limit","reducer","console","log","toConsumableArray","index","findIndex","id","filter","Boolean","produce","transform","name","MoviesProvider","_useReducer","useReducer","_useReducer2","MultiDownshift","selectedItems","stateReducer","changes","Downshift","stateChangeTypes","keyDownEnter","clickItem","highlightedIndex","isOpen","callOnChange","downshift","getStateAndHelpers","handleSelection","selectedItem","includes","removeItem","addSelectedItem","item","cb","i","getRemoveButtonProps","objectWithoutProperties","e","stopPropagation","prevProps","_ref3","_this$props","render","_this$props$children","downshift_esm","css","emoCSS","Item","styled","display","border","height","textAlign","borderTop","lineHeight","fontSize","textTransform","fontWeight","boxShadow","padding","whiteSpace","wordWrap","isActive","isSelected","styles","push","background","BaseMenu","marginTop","width","maxHeight","overflowY","overflowX","outline","transition","borderRadius","borderColor","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","zIndex","Menu","forwardRef","ref","innerRef","ControllerButton","flexDirection","justifyContent","alignItems","ArrowIcon","viewBox","preserveAspectRatio","fill","stroke","strokeWidth","d","MultiDownshiftWithReverse","clickOnItem","newSelectedItems","displayItem","displayBackground","itemToFind","_ref4","BaseMultiDownshift","BaseComponent","_Component","_class","handleChange","placeholder","items","getToggleButtonProps","getMenuProps","getItemProps","toggleMenu","_ref$clickOnItem","_ref$displayItem","identity","_ref$displayBackgroun","_ref$isSelected","margin","paddingRight","flexWrap","paddingLeft","event","preventDefault","gridGap","gridAutoFlow","AsyncMultiDownshift","AsyncMultiDownshiftwithReverse","fromEvent","target","forInput","from","FilterTag","selected","onAdd","MoviesFilter","_useContext","_useContext2","max","minWidth","icon","renderSeen","renderFinished","MoviesFilter_FilterTag","filterTag","t","SingleDownshift","getInputProps","getLabelProps","inputValue","Accordion","toggle","react","defaultState","summary","allocine","tvshows","MovieFormWithContext","valid","isEmpty","add","data","$","modal","onUpdate","synchronizeMovieAllocine","idAllocine","m","sort","release","releaseDate","getFullYear","synopsis","poster","href","synchronizeTvShowAllocine","tvseries","yearStart","onInput","onSelect","on","onClose","application","tabIndex","role","data-show","data-dismiss","aria-label","aria-hidden","htmlFor","aria-describedby","paddingTop","Accordion_Accordion","_ref5","code","_ref6","tvshow","SingleDownshift_SingleDownshift","disabled","MovieForm","MovieAPI","List","_useState","useState","_useState2","offset","setOffset","_useState3","_useState4","setMovie","_useState5","_useState6","setKey","_useState7","_useState8","loaded","setLoaded","loadMore","_","notGenres","keys","isArray","buildQuery","useEffect","debouncedLoadMore","debounce","leading","trailing","cancel","isFirstRun","useRef","current","left","MoviesFilter_MoviesFilter","MovieCard_MovieCard","EditableField","setValue","edit","setEdit","lock","lastInitialValue","renderFormField","submit","draggable","onDragStart","renderValue","EditableInput","EditableField_EditableField","fieldProps","onKeyDown","valueProps","EditableTextarea","rows","ctrlKey","split","NotificationContext","action","getTime","notification","NotificationProvider","notifications","Episode","episode","onDragOver","onDragEnd","dragging","MovieContext","SeasonContext","moviesDispatch","ellipsis","setEllipsis","setStyle","transformEpisode","updateEpisode","transformedEpisode","draft","opacity","dataTransfer","dropEffect","EditableField_EditableInput","EditableField_EditableTextarea","useToggle","initialValue","useInput","Season","_useToggle","_useToggle2","setEpisodes","setOpacity","drag","setDrag","transformSeason","oneSeen","s","Episode_Episode","tmp","asyncToGenerator","regenerator_default","mark","_callee","times","_loop","wrap","_context2","prev","next","newEpisode","_context","sent","stop","delegateYield","MovieTag","Movie","withRouter","match","history","setSeasons","fileRef","params","handleFiles","files","file","FormData","append","goBack","flex","accept","click","Movie_MovieTag","flexGrow","Season_Season_Season","newSeason","Fetch","FetchWithContext","debounceFetch","endpoint","onSuccess","Header","unseen","Statistics","stats","setStats","forEach","g","fetchByTypes","fetchByTags","orderBy","toFixed","random","Math","floor","generateColor","TagListElement","toggleEdit","_useInput","_useInput2","setColor","_useInput3","overflow","updateTag","marginLeft","deleteTag","TagList","setTags","_useInput4","setLabel","TagListElement_TagListElement","createTag","Notification","animateProgress","setAnimateProgress","notificationOut","setNotificationOut","onAnimationEnd","animationName","NotificationsList","Notification_Notification","App","BrowserRouter","Header_Header","NotificationsList_NotificationsList","Route","exact","path","component","Login","ReactDOM","UserContext_UserProvider","ApplicationContext_ApplicationProvider","MoviesContext_MoviesProvider","NotificationContext_NotificationProvider","src_App_0","document","getElementById"],"mappings":"yOA0BIA,+ICxBSC,EAAY,SAAAC,GAAA,IAAGC,EAAHD,EAAGC,KAAMC,EAATF,EAASE,QAATC,EAAAH,EAAkBI,eAAlB,IAAAD,KAAA,OACvBE,EAAAC,EAAAC,cAAA,KACEC,UAAU,aACVC,MAAO,CACLC,MAAON,IAAYH,EAAO,iBAAmBA,EAAO,iBAAmB,GACvEU,OAAQ,WAEVT,QAASA,KCTAU,EAAY,SAAAC,GACvB,UAAAC,QAAYD,EAAc,GAAGE,WAAWC,SAAS,EAAG,OAEzCC,EAAa,SAACJ,EAAaK,GACtC,SAAAJ,OAAUF,EAAUC,GAApB,KAAAC,QAAqCI,EAAe,GAAGH,WAAWC,SAAS,EAAG,OAEnEG,EAAqB,SAACC,EAAUC,GAC3CD,EAAS,CACPE,KAAM,MACNC,QAAS,CACPF,UACAC,KALqEE,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAd,cFJvDG,EAAU,SAAAC,GAAI,MAAK,CACvBC,OAAQ,mBACRC,eAAgB,mBAChBC,cAAa,UAAAjB,OAAYc,EAAKI,SAGnBC,EAAc,SAAAC,GAEzB,MADAf,EAAmBe,EAAMC,QAAS,SAC5BD,GAGFE,EAAiB,SAAAC,GACrB,GAAIA,EAASC,GAAI,OAAOD,EAASE,OACjC,MAAM,IAAIC,MAAM,eAYLC,EAAY,SAAAC,GAAS,OAAI,SAACC,EAAQf,GAK7C,OAJIc,GAAa5C,GACfA,EAAW8C,QAEb9C,EAAa,IAAI+C,gBACVC,MAAK,eAAAhC,OAAgB6B,GAAU,CACpChB,QAASA,EAAQC,GACjBmB,OAAQjD,EAAWiD,SAElBC,KAAKZ,GACLY,KAAK,SAAAX,GAEJ,OADAvC,EAAa,KACNuC,IAERY,MAAMhB,KAGEiB,EAAc,SAACC,EAAOvB,GACjC,OAAOkB,MAAK,eAAAhC,OAAgBqC,EAAMC,KAAO,CACvCC,OAAQ,MACRC,KAAMC,KAAKC,UAAUL,GACrBxB,QAASA,EAAQC,KAEhBoB,KAAKZ,GACLa,MAAMhB,IA2BEwB,EAAY,SAACN,EAAOvB,GAC/B,OAAOkB,MAAK,eAAAhC,OAAgBqC,EAAMC,IAAtB,YAAqC,CAC/CC,OAAQ,OACRC,KAAMC,KAAKC,UAAUL,GACrBxB,QAASA,EAAQC,KAEhBoB,KAAKZ,GACLa,MAAMhB,IAGEyB,EAAe,SAACP,EAAOQ,EAAQ/B,GAC1C,OAAOkB,MAAK,eAAAhC,OAAgBqC,EAAMC,IAAtB,aAAAtC,OAAqC6C,EAAOP,KAAO,CAC7DC,OAAQ,MACRC,KAAMC,KAAKC,UAAUG,GACrBhC,QAASA,EAAQC,KAEhBoB,KAAKZ,GACLa,MAAMhB,IAcE2B,EAAa,SAACT,EAAOQ,EAAQ/B,GACxC,OAAOkB,MAAK,eAAAhC,OAAgBqC,EAAMC,IAAtB,aAAAtC,OAAqC6C,EAAOP,IAA5C,aAA4D,CACtEC,OAAQ,OACRC,KAAMC,KAAKC,UAAUG,GACrBhC,QAASA,EAAQC,KAEhBoB,KAAKZ,GACLa,MAAMhB,8CGlHE4B,EAAcC,IAAMC,gBACpBC,EAAW,SAAAC,GAAS,OAAI,SAAAC,GAAK,OACxC7D,EAAAC,EAAAC,cAACsD,EAAYM,SAAb,KAAuB,SAAAvC,GAAI,OAAIvB,EAAAC,EAAAC,cAAC0D,EAADG,OAAAC,OAAA,GAAeH,EAAf,CAAsBtC,KAAMA,SAGhD0C,EAASC,SACTC,EAAQD,SACRE,EAAeF,SAEtBnC,EAAiB,SAAAC,GACrB,GAAIA,EAASC,GAAI,OAAOD,EAASE,OACjC,MAAM,IAAIC,MAAM,eAGLkC,EAAb,SAAAC,GAAA,SAAAD,IAAA,IAAAE,EAAAC,EAAAT,OAAAU,EAAA,EAAAV,CAAAW,KAAAL,GAAA,QAAAM,EAAAxD,UAAAC,OAAAwD,EAAA,IAAAC,MAAAF,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAAF,EAAAE,GAAA3D,UAAA2D,GAAA,OAAAN,EAAAT,OAAAgB,EAAA,EAAAhB,CAAAW,MAAAH,EAAAR,OAAAiB,EAAA,EAAAjB,CAAAM,IAAAY,KAAAC,MAAAX,EAAA,CAAAG,MAAAjE,OAAAmE,MACEO,MAAQ,CACNxD,MAAO,KACPyD,OAAQnB,EACRoB,MAAOb,EAAKa,MAAMC,KAAXvB,OAAAwB,EAAA,EAAAxB,QAAAwB,EAAA,EAAAxB,CAAAS,MAJXA,EAAA,OAAAT,OAAAyB,EAAA,EAAAzB,CAAAM,EAAAC,GAAAP,OAAA0B,EAAA,EAAA1B,CAAAM,EAAA,EAAAqB,IAAA,oBAAAC,MAAA,WAOsB,IAAAC,EAAAlB,KACZ/C,EAAQkE,aAAaC,QAAQ,SAC/BnE,GACFc,MAAM,WAAY,CAChBO,OAAQ,OACR1B,QAAS,CACPE,OAAQ,mBACRC,eAAgB,mBAChBC,cAAa,UAAAjB,OAAYkB,MAG1BgB,KAAKZ,GACLY,KAAK,SAAAhD,GAAa,IAAVoG,EAAUpG,EAAVoG,IACH,IAAIC,KAAS,IAAIA,KAAW,IAAND,IAAaH,EAAKK,SAAS,CAAEtE,QAAOyD,OAAQjB,QApBhF,CAAAuB,IAAA,QAAAC,MAAA,SAyBQO,GAAU,IAAAC,EAAAzB,KACdjC,MAAM,SAAU,CACdO,OAAQ,OACRC,KAAMC,KAAKC,UAAU,CAAE+C,aACvB5E,QAAS,CACPE,OAAQ,mBACRC,eAAgB,sBAGjBkB,KAAKZ,GACLY,KAAK,SAAAyD,GAAe,IAAZzE,EAAYyE,EAAZzE,MACPwE,EAAKF,SAAS,CAAEtE,QAAOyD,OAAQjB,IAC/B0B,aAAaQ,QAAQ,QAAS1E,KAE/BiB,MAAM,kBAAMuD,EAAKF,SAAS,CAAEb,OAAQhB,QAvC3C,CAAAsB,IAAA,SAAAC,MAAA,WA2CI,OAAO3F,EAAAC,EAAAC,cAACsD,EAAY8C,SAAb,CAAsBX,MAAOjB,KAAKS,OAAQT,KAAKb,MAAM0C,cA3ChElC,EAAA,CAAkCZ,IAAMG,WChBlCtC,EAAU,SAAAC,GAAI,MAAK,CACvBC,OAAQ,mBACRC,eAAgB,mBAChBC,cAAa,UAAAjB,OAAYc,EAAKI,SAG1BI,EAAiB,SAAAC,GACrB,GAAIA,EAASC,GAAI,OAAOD,EAASE,OACjC,MAAM,IAAIC,MAAM,eCLLqE,EAAqB/C,IAAMC,gBAO3B+C,EAAUvC,SACVwC,EAASxC,SAETyC,EAAb,SAAArC,GAAA,SAAAqC,IAAA,IAAApC,EAAAC,EAAAT,OAAAU,EAAA,EAAAV,CAAAW,KAAAiC,GAAA,QAAAhC,EAAAxD,UAAAC,OAAAwD,EAAA,IAAAC,MAAAF,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAAF,EAAAE,GAAA3D,UAAA2D,GAAA,OAAAN,EAAAT,OAAAgB,EAAA,EAAAhB,CAAAW,MAAAH,EAAAR,OAAAiB,EAAA,EAAAjB,CAAA4C,IAAA1B,KAAAC,MAAAX,EAAA,CAAAG,MAAAjE,OAAAmE,MACEgC,IAAM,SAAAC,GAAK,OAAI,SAAAC,GACbtC,EAAKyB,SAAS,SAAAd,GAAK,OAAApB,OAAAgD,EAAA,EAAAhD,CAAA,GAAUoB,EAAVpB,OAAAiD,EAAA,EAAAjD,CAAA,GAAkB8C,EAAQC,EAAG3B,EAAM0B,UAF1DrC,EA6BEW,MAAQ,CACN8B,OAAQ,GACRC,MAAO,GACPC,KAAM,GACN/B,OAAQqB,EACRG,IAAKpC,EAAKoC,KAlCdpC,EAAA,OAAAT,OAAAyB,EAAA,EAAAzB,CAAA4C,EAAArC,GAAAP,OAAA0B,EAAA,EAAA1B,CAAA4C,EAAA,EAAAjB,IAAA,oBAAAC,MAAA,WAKsB,IDPCpE,ECODqE,EAAAlB,KACZ0C,EAAU,CACd9F,QAAS,CACPI,cAAa,UAAAjB,OAAYiE,KAAKb,MAAMlC,SAIlCI,EAAiB,SAAAC,GACrB,GAAIA,EAASC,GAAI,OAAOD,EAASE,OACjC,MAAM,IAAIC,MAAM,eAElBkF,QAAQC,IAAI,CACV7E,MAAM,oBAAqB2E,GAASzE,KAAKZ,GACzCU,MAAM,mBAAoB2E,GAASzE,KAAKZ,IDpBvBR,ECqBTmD,KAAKb,MDpBVpB,MAAK,YAAc,CACxBnB,QAASA,EAAQC,KAChBoB,KAAKZ,MCmBHY,KAAK,SAAAhD,GAA2B,IAAAyG,EAAArC,OAAAwD,EAAA,EAAAxD,CAAApE,EAAA,GAAzBsH,EAAyBb,EAAA,GAAjBc,EAAiBd,EAAA,GAAVe,EAAUf,EAAA,GACjCR,EAAKK,SAAS,CACZgB,SACAC,QACAC,OACA/B,OAAQsB,QAzBhB,CAAAhB,IAAA,SAAAC,MAAA,WAsCI,OAAO3F,EAAAC,EAAAC,cAACsG,EAAmBF,SAApB,CAA6BX,MAAOjB,KAAKS,OAAQT,KAAKb,MAAM0C,cAtCvEI,EAAA,CAAyClD,IAAMG,WCClC4D,UAAM,SAAA7H,GAAA,IAXC8H,EAWEpH,EAAHV,EAAGU,MAAOqH,EAAV/H,EAAU+H,MAAOC,EAAjBhI,EAAiBgI,IAAjBC,EAAAjI,EAAsBQ,iBAAtB,IAAAyH,EAAkC,GAAlCA,EAAAC,EAAAlI,EAAsCS,aAAtC,IAAAyH,EAA8C,GAA9CA,EAAAC,EAAAnI,EAAkDE,eAAlD,IAAAiI,EAA4D,aAA5DA,EAAA,OACjB9H,EAAAC,EAAAC,cAAA,QACEC,UAAS,OAAAM,OAASkH,EAAM,MAAQ,GAAvB,KAAAlH,OAA6BN,GACtCC,MAAK2D,OAAAgD,EAAA,EAAAhD,CAAA,CACHgE,gBAAiB1H,EACjBA,MAAK,GAAAI,QAhBSgH,EAgBQpH,EAfD,IAArBoH,EAAIO,QAAQ,OACdP,EAAMA,EAAIQ,MAAM,IAML,KAHDC,SAAST,EAAIQ,MAAM,EAAG,GAAI,IAGT,KAFnBC,SAAST,EAAIQ,MAAM,EAAG,GAAI,IAEQ,KADnCC,SAAST,EAAIQ,MAAM,EAAG,GAAI,IACiB,IAAM,UAAY,aAS/D7H,GAELP,QAASA,GAER6H,KCbQS,EAAY,SAAAxI,GAA2C,IAAxCmD,EAAwCnD,EAAxCmD,MAAOsF,EAAiCzI,EAAjCyI,OAAQC,EAAyB1I,EAAzB0I,SAAUC,EAAe3I,EAAf2I,SAC7C/G,EAAOgH,qBAAW/E,GAChB2D,EAASoB,qBAAW/B,GAApBW,KACFqB,EAAS,SAAC3B,EAAOlB,GAAR,OAAkB,kBAAM9C,EAAYkB,OAAAgD,EAAA,EAAAhD,CAAA,GAAKjB,EAANiB,OAAAiD,EAAA,EAAAjD,CAAA,GAAc8C,EAAQlB,IAASpE,GAAMoB,KAAK0F,KAEtFI,EAAK,GAAAhI,OAAMqC,EAAM2F,OACjBC,EAAQ,GAAAjI,OAAMqC,EAAM6F,eAAZ,OAAAlI,OAAgCqC,EAAM8F,MAAMC,KAAK,MAE/D,OACE7I,EAAAC,EAAAC,cAAA,OAAKC,UAAU,mBACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACbH,EAAAC,EAAAC,cAAA,MAAIC,UAAU,cACZH,EAAAC,EAAAC,cAAC4I,EAAA,EAAD,CAAMC,GAAE,SAAAtI,OAAWqC,EAAMC,MACvB/C,EAAAC,EAAAC,cAAA,OAAKC,UAAU,WAAWsI,MAAOA,GAC9BA,KAIPzI,EAAAC,EAAAC,cAAA,MAAIC,UAAU,yCAAyCsI,MAAOC,GAC3DA,GAEH1I,EAAAC,EAAAC,cAAA,OAAKC,UAAU,qBAAqBC,MAAO,CAAE4I,SAAU,WAAYC,IAAK,EAAGC,MAAO,IAChE,SAAfpG,EAAM7B,MACLjB,EAAAC,EAAAC,cAAA,KACEC,UAAU,aACVC,MAAO,CACLE,OAAQ,UACRD,MAAOyC,EAAMqG,SAAW,gBAAkB,SAE5CtJ,QAAS2I,EAAO,YAAa1F,EAAMqG,YAGvB,SAAfrG,EAAM7B,KACLjB,EAAAC,EAAAC,cAACkJ,EAAD,CAAWxJ,KAAMkD,EAAMlD,KAAMC,QAAS2I,EAAO,QAAS1F,EAAMlD,QAE5DI,EAAAC,EAAAC,cAACkJ,EAAD,CACExJ,KACEyJ,IAAMvG,EAAMwG,QAAQC,IAAI,SAAAjG,GAAM,OAAI+F,IAAM/F,EAAOkG,SAAU,SAAWlG,EAAOkG,SAASpI,OAAS,MAC7F0B,EAAMwG,QAAQlI,OAAS,EAEzBrB,QACE0J,IAAK3G,EAAMwG,QAAQC,IAAI,SAAAjG,GAAM,OAAImG,IAAKnG,EAAOkG,SAAU,SAAWlG,EAAOkG,SAASpI,OAAS,MAC3F0B,EAAMwG,QAAQlI,OAAS,IAI7BpB,EAAAC,EAAAC,cAAA,KAAGC,UAAU,oBAAoBN,QAASuI,EAAQhI,MAAO,CAAEE,OAAQ,aACnEN,EAAAC,EAAAC,cAAA,KACEC,UAAU,eACVN,QAAS,WACH6J,OAAOC,WPQE,SAAC7G,EAAOvB,GACjC,OAAOkB,MAAK,eAAAhC,OAAgBqC,EAAMC,KAAO,CACvCC,OAAQ,SACR1B,QAASA,EAAQC,KAEhBoB,KAAKZ,GACLa,MAAMhB,GObKgI,CAAY9G,EAAOvB,GAAMoB,KAAK2F,IAGlClI,MAAO,CAAEE,OAAQ,cAGrBN,EAAAC,EAAAC,cAAA,OAAKC,UAAU,sBACbH,EAAAC,EAAAC,cAAA,OAAK2J,IAAK/G,EAAMgH,QAAUhH,EAAMgH,QAAQC,QAAQ,QAAS,UAAY,gBAAiBC,IAAI,kBAE5FhK,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBACZ2C,EAAMqE,KAAKoC,IAAI,SAAAU,GAAQ,OACtBjK,EAAAC,EAAAC,cAACgK,EAADnG,OAAAC,OAAA,CACE0B,IAAKuE,GACD9C,EAAKgD,KAAK,SAAAC,GAAG,OAAIA,EAAIrH,MAAQkH,IAFnC,CAGE9J,UAAU,OACVN,QAAS,WACP,IAAMuK,EAAMjD,EAAKgD,KAAK,SAAAC,GAAG,OAAIA,EAAIrH,MAAQkH,IACrCG,GAAmC,YAA5BA,EAAI1C,MAAM2C,eACnBX,OAAOY,KAAP,oCAAA7J,OAAgDqC,EAAM2F,OAAS,0EC5EpE8B,GAAgB9G,IAAMC,gBAE7B8G,GAAe,CACnBC,OAAQ,GACRC,MAAO,EACPC,QAAS,CACPhC,eAAgB,GAChBF,MAAO,GACPxB,OAAQ,GACRC,MAAO,GACPC,KAAM,GACNvH,KAAM,KACNuJ,SAAU,KACVyB,MAAO,KAILC,GAAU,WAA6C,IAA5C1F,EAA4ChE,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAApCqJ,GAAoC7K,EAAAwB,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EAApBJ,EAAoBtB,EAApBsB,KAAMC,EAAcvB,EAAduB,QAE7C,OADA4J,QAAQC,IAAI5F,EAAOlE,EAAMC,GACjBD,GACN,IAAK,MACH,OAAO8C,OAAAgD,EAAA,EAAAhD,CAAA,GAAKoB,EAAZ,CAAmBsF,OAAM,CAAGvJ,EAAQ4B,OAAXrC,OAAAsD,OAAAiH,GAAA,EAAAjH,CAAqBoB,EAAMsF,WACtD,IAAK,SACH,IAAMQ,EAAQC,KAAU/F,EAAMsF,OAAQ,CAAC,MAAOvJ,EAAQiK,KAChDV,EAAM1G,OAAAiH,GAAA,EAAAjH,CAAOoB,EAAMsF,QAGzB,OAFAA,EAAOQ,GAAS/J,EAAQ4B,MAEjBiB,OAAAgD,EAAA,EAAAhD,CAAA,GAAKoB,EAAZ,CAAmBsF,OAAQA,EAAOW,OAAOC,WAG3C,IAAK,wBACH,IAAMJ,EAAQC,KAAU/F,EAAMsF,OAAQ,CAAC,MAAOvJ,EAAQiK,KAChDV,EAAM1G,OAAAiH,GAAA,EAAAjH,CAAOoB,EAAMsF,QAGzB,OAFAA,EAAOQ,GAASK,aAAQb,EAAOQ,GAAQ/J,EAAQqK,WAExCxH,OAAAgD,EAAA,EAAAhD,CAAA,GAAKoB,EAAZ,CAAmBsF,OAAQA,EAAOW,OAAOC,WAE3C,IAAK,UACH,OAAOtH,OAAAgD,EAAA,EAAAhD,CAAA,GAAKoB,EAAZ,CAAmBsF,OAAO1G,OAAAiH,GAAA,EAAAjH,CAAKoB,EAAMsF,QAAZhK,OAAAsD,OAAAiH,GAAA,EAAAjH,CAAuB7C,EAAQuJ,SAASC,MAAOxJ,EAAQwJ,QAClF,IAAK,aACH,OAAO3G,OAAAgD,EAAA,EAAAhD,CAAA,GAAKoB,EAAZ,CAAmBsF,OAAQ,GAAIC,MAAO,IACxC,IAAK,gBACH,OAAO3G,OAAAgD,EAAA,EAAAhD,CAAA,GAAKoB,EAAZ,CAAmBwF,QAAQ5G,OAAAgD,EAAA,EAAAhD,CAAA,GAAMyG,GAAaG,WAChD,IAAK,kBACH,OAAO5G,OAAAgD,EAAA,EAAAhD,CAAA,GACFoB,EADL,CAEEsF,OAAQ,GACRC,MAAO,EACPC,QAAQ5G,OAAAgD,EAAA,EAAAhD,CAAA,GAAMoB,EAAMwF,QAAb5G,OAAAiD,EAAA,EAAAjD,CAAA,GAAuB7C,EAAQsK,KAAOtK,EAAQyE,UAEzD,QACE,OAAOR,IAIAsG,GAAiB,SAAA5H,GAAS,IAAA6H,EACXC,qBAAWd,GAASL,IADToB,EAAA7H,OAAAwD,EAAA,EAAAxD,CAAA2H,EAAA,GAC9BvG,EAD8ByG,EAAA,GACvB7K,EADuB6K,EAAA,GAErC,OAAO5L,EAAAC,EAAAC,cAACqK,GAAcjE,SAAf,CAAwBX,MAAO,CAAER,QAAOpE,aAAa8C,EAAM0C,iDC1DvDsF,GAAb,SAAAvH,GAAA,SAAAuH,IAAA,IAAAtH,EAAAC,EAAAT,OAAAU,EAAA,EAAAV,CAAAW,KAAAmH,GAAA,QAAAlH,EAAAxD,UAAAC,OAAAwD,EAAA,IAAAC,MAAAF,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAAF,EAAAE,GAAA3D,UAAA2D,GAAA,OAAAN,EAAAT,OAAAgB,EAAA,EAAAhB,CAAAW,MAAAH,EAAAR,OAAAiB,EAAA,EAAAjB,CAAA8H,IAAA5G,KAAAC,MAAAX,EAAA,CAAAG,MAAAjE,OAAAmE,MACEO,MAAQ,CAAE2G,cAAetH,EAAKX,MAAMiI,eAAiB,IADvDtH,EAQEuH,aAAe,SAAC5G,EAAO6G,GACrB,OAAQA,EAAQ/K,MACd,KAAKgL,KAAUC,iBAAiBC,aAChC,KAAKF,KAAUC,iBAAiBE,UAC9B,OAAOrI,OAAAgD,EAAA,EAAAhD,CAAA,GACFiI,EADL,CAEEK,iBAAkBlH,EAAMkH,iBACxBC,QAAQ,IAEZ,QACE,OAAON,IAlBfxH,EAsBE+H,aAAe,SAAAC,GAAS,OAAI,WACtBhI,EAAKX,MAAMwE,UACb7D,EAAKX,MAAMwE,SAAS7D,EAAKW,MAAM2G,cAAetH,EAAKiI,mBAAmBD,MAxB5EhI,EA4BEkI,gBAAkB,SAACC,EAAcH,GAC3BhI,EAAKW,MAAM2G,cAAcc,SAASD,GACpCnI,EAAKqI,WAAWF,EAAcnI,EAAK+H,aAAaC,IAEhDhI,EAAKsI,gBAAgBH,EAAcnI,EAAK+H,aAAaC,KAhC3DhI,EAoCEqI,WAAa,SAACE,EAAMC,GAClBxI,EAAKyB,SAAS,SAAAtG,GACZ,MAAO,CACLmM,cAFiCnM,EAApBmM,cAEgBV,OAAO,SAAA6B,GAAC,OAAIA,IAAMF,MAEhDC,IAzCPxI,EAoDE0I,qBAAuB,SAAAV,GAAS,OAAI,WAAsC,IAAApG,EAAAjF,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAP,GAA5BtB,EAAmCuG,EAAnCvG,QAASkN,EAA0B3G,EAA1B2G,KAASlJ,EAAiBE,OAAAoJ,GAAA,EAAApJ,CAAAqC,EAAA,oBACxE,OAAOrC,OAAAgD,EAAA,EAAAhD,CAAA,CACLlE,QAAS,SAAAuN,GAEPvN,GAAWA,EAAQuN,GACnBA,EAAEC,kBACF7I,EAAKqI,WAAWE,EAAMvI,EAAK+H,aAAaC,MAEvC3I,KA5DTW,EAAA,OAAAT,OAAAyB,EAAA,EAAAzB,CAAA8H,EAAAvH,GAAAP,OAAA0B,EAAA,EAAA1B,CAAA8H,EAAA,EAAAnG,IAAA,qBAAAC,MAAA,SAGqB2H,GACbA,EAAUxB,gBAAkBpH,KAAKb,MAAMiI,eAAiBpH,KAAKb,MAAMiI,gBAAkBpH,KAAKS,MAAM2G,eAClGpH,KAAKuB,SAAS,CAAE6F,cAAepH,KAAKb,MAAMiI,eAAiB,OALjE,CAAApG,IAAA,kBAAAC,MAAA,SA2CkBoH,EAAMC,GACpBtI,KAAKuB,SACH,SAAAsH,GAAA,IAAGzB,EAAHyB,EAAGzB,cAAH,MAAwB,CACtBA,cAAc/H,OAAAiH,GAAA,EAAAjH,CAAK+H,GAANrL,OAAA,CAAqBsM,MAEpCC,KAhDN,CAAAtH,IAAA,qBAAAC,MAAA,SAgEqB6G,GAAW,IACpBV,EAAkBpH,KAAKS,MAAvB2G,cACAoB,EAAqCxI,KAArCwI,qBAAsBL,EAAenI,KAAfmI,WAC9B,OAAO9I,OAAAgD,EAAA,EAAAhD,CAAA,CACLmJ,qBAAsBA,EAAqBV,GAC3CK,aACAf,iBACGU,KAvET,CAAA9G,IAAA,SAAAC,MAAA,WA0EW,IAAAC,EAAAlB,KAAA8I,EACyC9I,KAAKb,MAA7C4J,EADDD,EACCC,OADDC,EAAAF,EACSjH,gBADT,IAAAmH,EACoBD,EADpBC,EAC+B7J,EAD/BE,OAAAoJ,GAAA,EAAApJ,CAAAyJ,EAAA,uBAGP,OACExN,EAAAC,EAAAC,cAACyN,GAAA,EAAD5J,OAAAC,OAAA,GAAeH,EAAf,CAAsBkI,aAAcrH,KAAKqH,aAAc1D,SAAU3D,KAAKgI,gBAAiBC,aAAc,OAClG,SAAAH,GAAS,OAAIjG,EAASX,EAAK6G,mBAAmBD,UA/EvDX,EAAA,CAAoCpI,IAAMG,6BCGpCgK,GAAM,iBAAc,CAAEzN,UAAW0N,OAAM3I,WAAN,EAAA/D,aAEjC2M,GAAOC,aAAO,KAAPA,CACX,CACE/E,SAAU,WACV1I,OAAQ,UACR0N,QAAS,QACTC,OAAQ,OACRC,OAAQ,OACRC,UAAW,OACXC,UAAW,OACXC,WAAY,MACZhO,MAAO,kBACPiO,SAAU,OACVC,cAAe,OACfC,WAAY,MACZC,UAAW,OACXC,QAAS,eACTC,WAAY,SACZC,SAAU,UAEZ,SAAAjP,GAA8B,IAA3BkP,EAA2BlP,EAA3BkP,SAAUC,EAAiBnP,EAAjBmP,WACLC,EAAS,GAaf,OAZIF,GACFE,EAAOC,KAAK,CACV3O,MAAO,kBACP4O,WAAY,oBAGZH,GACFC,EAAOC,KAAK,CACV3O,MAAO,kBACPmO,WAAY,QAGTO,IAILG,GAAWnB,aAAO,KAAPA,CACf,CACEW,QAAS,EACTS,UAAW,EACXnG,SAAU,WACVjB,gBAAiB,QACjBqH,MAAO,OACPC,UAAW,QACXC,UAAW,OACXC,UAAW,SACXC,QAAS,IACTC,WAAY,mBACZC,aAAc,gCACdjB,UAAW,iCACXkB,YAAa,UACbC,eAAgB,IAChBC,iBAAkB,EAClBC,kBAAmB,EACnBC,gBAAiB,EACjBC,YAAa,QACbC,OAAQ,IAEV,SAAA7J,GAAA,MAAiB,CACf6H,OADF7H,EAAGkG,OACgB,KAAO,UAItB4D,GAAOzM,IAAM0M,WAAW,SAACtM,EAAOuM,GAAR,OAAgBpQ,EAAAC,EAAAC,cAACgP,GAADnL,OAAAC,OAAA,CAAUqM,SAAUD,GAASvM,MAErEyM,GAAmBvC,aAAO,SAAPA,CAAiB,CACxChG,gBAAiB,cACjBkG,OAAQ,OACRjF,SAAU,WACVE,MAAO,EACPD,IAAK,EACL3I,OAAQ,UACR8O,MAAO,GACPpB,QAAS,OACTuC,cAAe,SACfrC,OAAQ,OACRsC,eAAgB,SAChBC,WAAY,WAGd,SAASC,GAATnD,GAA+B,IAAVjB,EAAUiB,EAAVjB,OACnB,OACEtM,EAAAC,EAAAC,cAAA,OACEyQ,QAAQ,YACRC,oBAAoB,OACpBxB,MAAO,GACPyB,KAAK,cACLC,OAAO,UACPC,YAAY,QACZxF,UAAWe,EAAS,cAAgB,MAEpCtM,EAAAC,EAAAC,cAAA,QAAM8Q,EAAE,uBCjGP,INCwBpN,GMDlBqN,GAAb,SAAA3M,GAAA,SAAA2M,IAAA,IAAA1M,EAAAC,EAAAT,OAAAU,EAAA,EAAAV,CAAAW,KAAAuM,GAAA,QAAAtM,EAAAxD,UAAAC,OAAAwD,EAAA,IAAAC,MAAAF,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAAF,EAAAE,GAAA3D,UAAA2D,GAAA,OAAAN,EAAAT,OAAAgB,EAAA,EAAAhB,CAAAW,MAAAH,EAAAR,OAAAiB,EAAA,EAAAjB,CAAAkN,IAAAhM,KAAAC,MAAAX,EAAA,CAAAG,MAAAjE,OAAAmE,MACEO,MAAQ,CAAE2G,cAAetH,EAAKX,MAAMiI,eAAiB,IADvDtH,EAEEuH,aAAe,SAAC5G,EAAO6G,GACrB,OAAQA,EAAQ/K,MACd,KAAKgL,KAAUC,iBAAiBC,aAChC,KAAKF,KAAUC,iBAAiBE,UAC9B,OAAOrI,OAAAgD,EAAA,EAAAhD,CAAA,GACFiI,EADL,CAEEK,iBAAkBlH,EAAMkH,iBACxBC,QAAQ,IAEZ,QACE,OAAON,IAZfxH,EAgBE+H,aAAe,SAAAC,GAAS,OAAI,WACtBhI,EAAKX,MAAMwE,UACb7D,EAAKX,MAAMwE,SAAS7D,EAAKW,MAAM2G,cAAetH,EAAKiI,mBAAmBD,MAlB5EhI,EAsBEkI,gBAAkB,SAACC,EAAcH,GAC3BhI,EAAKW,MAAM2G,cAAcV,OAAO,SAAA2B,GAAI,OAAIJ,IAAiBI,EAAK,KAAI3L,OAAS,EAC7EoD,EAAKqI,WAAW,CAACF,GAAenI,EAAK+H,aAAaC,IAElDhI,EAAKsI,gBAAgBH,EAAcnI,EAAK+H,aAAaC,KA1B3DhI,EA8BEqI,WAAa,SAACE,EAAMC,GAClBxI,EAAKyB,SAAS,SAAAtG,GACZ,MAAO,CACLmM,cAFiCnM,EAApBmM,cAEgBV,OAAO,SAAA6B,GAAC,OAAIA,EAAE,KAAOF,EAAK,OAExDC,IAnCPxI,EA8CE0I,qBAAuB,SAAAV,GAAS,OAAI,WAAsC,IAAApG,EAAAjF,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAP,GAA5BtB,EAAmCuG,EAAnCvG,QAASkN,EAA0B3G,EAA1B2G,KAASlJ,EAAiBE,OAAAoJ,GAAA,EAAApJ,CAAAqC,EAAA,oBACxE,OAAOrC,OAAAgD,EAAA,EAAAhD,CAAA,CACLlE,QAAS,SAAAuN,GAEPvN,GAAWA,EAAQuN,GACnBA,EAAEC,kBACF7I,EAAKqI,WAAWE,EAAMvI,EAAK+H,aAAaC,MAEvC3I,KAtDTW,EA0DE0M,YAAc,SAAA1E,GAAS,OAAI,SAACO,EAAM9B,GAChCzG,EAAKyB,SAAS,SAAAsH,GAAuB,IAC7B4D,EAD6B5D,EAApBzB,cAGf,OADAqF,EAAiBlG,GAAS,CAAC8B,EAAK,IAAKA,EAAK,IACnC,CACLjB,cAAeqF,EAAiB/F,OAAO,SAAA6B,GAAC,OAAIA,IAAMF,EAAK,OAExDvI,EAAK+H,aAAaC,MAjEzBhI,EAmEE4M,YAAc,SAAArE,GACZ,OAAOA,EAAK,IApEhBvI,EAsEE6M,kBAAoB,SAAAtE,GAClB,OAAOA,EAAK,GAAK,OAAS,UAvE9BvI,EAyEEsK,WAAa,SAAAwC,GACX,OAAO9M,EAAKW,MAAM2G,cAAc3B,KAAK,SAAA4C,GAAI,OAAIA,EAAK,KAAOuE,KA1E7D9M,EAAA,OAAAT,OAAAyB,EAAA,EAAAzB,CAAAkN,EAAA3M,GAAAP,OAAA0B,EAAA,EAAA1B,CAAAkN,EAAA,EAAAvL,IAAA,kBAAAC,MAAA,SAqCkBoH,EAAMC,GACpBtI,KAAKuB,SACH,SAAAsL,GAAA,IAAGzF,EAAHyF,EAAGzF,cAAH,MAAwB,CACtBA,cAAc/H,OAAAiH,GAAA,EAAAjH,CAAK+H,GAANrL,OAAA,CAAqB,CAACsM,GAAM,OAE3CC,KA1CN,CAAAtH,IAAA,qBAAAC,MAAA,SA6EqB6G,GAAW,IACpBV,EAAkBpH,KAAKS,MAAvB2G,cACAoB,EAA8FxI,KAA9FwI,qBAAsBL,EAAwEnI,KAAxEmI,WAAYqE,EAA4DxM,KAA5DwM,YAAaE,EAA+C1M,KAA/C0M,YAAaC,EAAkC3M,KAAlC2M,kBAAmBvC,EAAepK,KAAfoK,WACvF,OAAO/K,OAAAgD,EAAA,EAAAhD,CAAA,CACLmJ,qBAAsBA,EAAqBV,GAC3CK,aACAf,gBACAoF,YAAaA,EAAY1E,GACzB4E,cACAC,oBACAvC,cACGtC,KAxFT,CAAA9G,IAAA,SAAAC,MAAA,WA2FW,IAAAC,EAAAlB,KAAA8I,EACyC9I,KAAKb,MAA7C4J,EADDD,EACCC,OADDC,EAAAF,EACSjH,gBADT,IAAAmH,EACoBD,EADpBC,EAC+B7J,EAD/BE,OAAAoJ,GAAA,EAAApJ,CAAAyJ,EAAA,uBAGP,OACExN,EAAAC,EAAAC,cAACyN,GAAA,EAAD5J,OAAAC,OAAA,GAAeH,EAAf,CAAsBkI,aAAcrH,KAAKqH,aAAc1D,SAAU3D,KAAKgI,gBAAiBC,aAAc,OAClG,SAAAH,GAAS,OAAIjG,EAASX,EAAK6G,mBAAmBD,UAhGvDyE,EAAA,CAA+CxN,IAAMG,WCG/C4N,GAAqB,SAAAC,GAAa,gBAAAC,GAAA,SAAAC,IAAA,OAAA5N,OAAAU,EAAA,EAAAV,CAAAW,KAAAiN,GAAA5N,OAAAgB,EAAA,EAAAhB,CAAAW,KAAAX,OAAAiB,EAAA,EAAAjB,CAAA4N,GAAAzM,MAAAR,KAAAvD,YAAA,OAAA4C,OAAAyB,EAAA,EAAAzB,CAAA4N,EAAAD,GAAA3N,OAAA0B,EAAA,EAAA1B,CAAA4N,EAAA,EAAAjM,IAAA,SAAAC,MAAA,WAE3B,IAAA6H,EACqD9I,KAAKb,MAAzD+N,EADDpE,EACCoE,aAAcC,EADfrE,EACeqE,YAAaC,EAD5BtE,EAC4BsE,MAAOhG,EADnC0B,EACmC1B,cAC1C,OACE9L,EAAAC,EAAAC,cAACuR,EAAD,CAAepJ,SAAUuJ,EAAc9F,cAAeA,EAAe+F,YAAaA,GAC/E,SAAAlS,GAAA,IACCoS,EADDpS,EACCoS,qBACAC,EAFDrS,EAECqS,aACA9E,EAHDvN,EAGCuN,qBAEAZ,GALD3M,EAICkN,WAJDlN,EAKC2M,QACAR,EANDnM,EAMCmM,cACAmG,EAPDtS,EAOCsS,aACA5F,EARD1M,EAQC0M,iBACA6F,EATDvS,EASCuS,WATDC,EAAAxS,EAUCuR,mBAVD,IAAAiB,EAUe,aAVfA,EAAAC,EAAAzS,EAWCyR,mBAXD,IAAAgB,EAWeC,KAXfD,EAAAE,EAAA3S,EAYC0R,yBAZD,IAAAiB,EAYqB,iBAAM,QAZ3BA,EAAAC,EAAA5S,EAaCmP,kBAbD,IAAAyD,EAac,SAAAxF,GAAI,OAAIjB,EAAcc,SAASG,IAb7CwF,EAAA,OAeCvS,EAAAC,EAAAC,cAAA,OACEE,MAAO,CACLoS,OAAQ,OACRxJ,SAAU,WACVoG,MAAO,SAGTpP,EAAAC,EAAAC,cAAA,MAAA6D,OAAAC,OAAA,GACM4J,GAAI,CACNtN,OAAQ,UACR0I,SAAU,WACV0F,QAAS,iBACT+D,aAAc,GACdxE,OAAQ,oBACRyB,aAAc,SACd3H,gBAAiB,UARrB,CAUElI,QAAS,WACPqS,OAGFlS,EAAAC,EAAAC,cAAA,MACM0N,GAAI,CACNI,QAAS,OACT0E,SAAU,OACVjC,WAAY,WAGb3E,EAAc1K,OAAS,EACtB0K,EAAcvC,IAAI,SAACwD,EAAM9B,GAAP,OAChBjL,EAAAC,EAAAC,cAAA,MAAA6D,OAAAC,OAAA,CACE0B,IAAKuF,GACD2C,GAAI,CACN4E,OAAQ,QACRG,YAAa,EACbF,aAAc,EACdzE,QAAS,eACTY,SAAU,OACV7G,gBAAiBsJ,EAAkBtE,GACnC2C,aAAc,IATlB,CAWE7P,QAAS,SAAA+S,GACPA,EAAMC,iBACND,EAAMvF,kBACN6D,EAAYnE,EAAM9B,MAGpBjL,EAAAC,EAAAC,cAAA,MACM0N,GAAI,CACNI,QAAS,OACT8E,QAAS,EACTC,aAAc,SACdtC,WAAY,WAGdzQ,EAAAC,EAAAC,cAAA,YAAOkR,EAAYrE,IACnB/M,EAAAC,EAAAC,cAAA,SAAA6D,OAAAC,OAAA,GACMkJ,EAAqB,CAAEH,SACvBa,GAAI,CACNtN,OAAQ,UACR+N,WAAY,GACZJ,OAAQ,OACRlG,gBAAiB,cACjB2G,QAAS,IACTJ,SAAU,SARd,CAUErN,KAAK,WAVP,oBAkBNjB,EAAAC,EAAAC,cAAA,OACM0N,GAAI,CACNvN,MAAO,aAGRwR,IAIP7R,EAAAC,EAAAC,cAACoQ,GACKyB,EAAqB,CAGvBlS,QAHuB,SAGf+S,GACNA,EAAMvF,qBAIVrN,EAAAC,EAAAC,cAACwQ,GAAD,CAAWpE,OAAQA,MAGvBtM,EAAAC,EAAAC,cAACgQ,GAAS8B,EAAa,CAAE1F,WACtBA,EACGwF,EAAMvI,IAAI,SAACwD,EAAM9B,GAAP,OACRjL,EAAAC,EAAAC,cAAC4N,GAAD/J,OAAAC,OAAA,CACE0B,IAAKuF,GACDgH,EAAa,CACflF,OACA9B,QACA4D,SAAUxC,IAAqBpB,EAC/B6D,WAAYA,EAAW/B,MAGxBA,KAGL,aAnIoB4E,EAAA,CACxB/N,cA2IHoP,GAAsBxB,GAAmB3F,IACzCoH,GAAiCzB,GAAmBP,IC5I3DiC,GAAY,SAAAN,GAAK,OAAIA,EAAMO,OAAOxN,OAElCyN,GAAW,SAAAzT,EAAwB6L,GAAiD,IAAtEb,EAAsEhL,EAAtEgL,QAAStC,EAA6D1I,EAA7D0I,SAAkBkD,EAA2CpK,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAA/BkR,KAAUgB,EAAqBlS,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAd+R,GAC1E,MAAO,CACLvN,MAAOgF,EAAQa,GACfnD,SAAU,SAAA1C,GAAK,OAAI0C,EAASmD,EAATnD,CAAekD,EAAU8H,EAAK1N,QAI/C2N,GAAY,SAAAlN,GAAA,IAAGgE,EAAHhE,EAAGgE,IAAKmJ,EAARnN,EAAQmN,SAAUC,EAAlBpN,EAAkBoN,MAAOlL,EAAzBlC,EAAyBkC,SAAzB,OAChBtI,EAAAC,EAAAC,cAAA,QAAML,QAAS0T,EAAWjL,EAAWkL,GACnCxT,EAAAC,EAAAC,cAACgK,EAADnG,OAAAC,OAAA,GAASoG,EAAT,CAAcjK,UAAS,mBAAAM,OAAqB8S,EAAW,WAAa,SAI3DE,GAAe,WAAM,IAAAC,EAI5BnL,qBAAWgC,IAFJI,EAFqB+I,EAE9BvO,MAASwF,QACT5J,EAH8B2S,EAG9B3S,SAH8B4S,EAKApL,qBAAW/B,GAAnCS,EALwB0M,EAKxB1M,OAAQC,EALgByM,EAKhBzM,MAAOC,EALSwM,EAKTxM,KACfvH,EAAmB+K,EAAnB/K,KAAMuJ,EAAawB,EAAbxB,SAERd,EAAW,SAAAmD,GAAI,OAAI,SAAA7F,GACvB5E,EAAS,CAAEE,KAAM,kBAAmBC,QAAS,CAAEsK,OAAM7F,aAiDvD,OACE3F,EAAAC,EAAAC,cAAA,QAAMC,UAAU,uCACdH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,mBACbH,EAAAC,EAAAC,cAAA,QAAA6D,OAAAC,OAAA,GACMoP,GAAS,CAAEzI,UAAStC,YAAY,iBAAkB,SAAA1C,GAAK,OAAIuC,SAASvC,EAAO,MADjF,CAEE1E,KAAK,SACL2S,IAAK,KACL/B,YAAY,OACZ1R,UAAU,eACVC,MAAO,CAAEgP,MAAO,YAGpBpP,EAAAC,EAAAC,cAAA,OAAKC,UAAU,mBACbH,EAAAC,EAAAC,cAAA,QAAA6D,OAAAC,OAAA,CAAO/C,KAAK,QAAWmS,GAAS,CAAEzI,UAAStC,YAAY,SAAvD,CAAiEwJ,YAAY,QAAQ1R,UAAU,mBAEjGH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kBAAkBC,MAAO,CAAEyT,SAAU,UAClD7T,EAAAC,EAAAC,cAAC+S,GAAD,CACEpB,YAAY,QACZD,aAAcwB,GAAS,CAAEzI,UAAStC,YAAY,SAAUgK,KAAUA,MAAUhK,SAC5EyJ,MAAO7K,EACP6E,cAAenB,EAAQ1D,UAG3BjH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kBAAkBC,MAAO,CAAEgP,MAAO,UAC/CpP,EAAAC,EAAAC,cAAC8S,GAAD,CACEnB,YAAY,OACZD,aAAcwB,GAAS,CAAEzI,UAAStC,YAAY,QAASgK,KAAUA,MAAUhK,SAC3EyJ,MAAO5K,EACP4E,cAAenB,EAAQzD,SAG3BlH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,mBA7EA,WACjB,IAAIE,EAAQ,GACVyT,EAAO,SACPjU,EAAU,kBAAMwI,EAAS,OAATA,CAAiB,SAYnC,MAXa,SAATzI,GACFS,EAAQ,iBACRR,EAAU,kBAAMwI,EAAS,OAATA,CAAiB,aACf,YAATzI,GACTS,EAAQ,iBACRR,EAAU,kBAAMwI,EAAS,OAATA,CAAiB,WACf,UAATzI,IACTS,EAAQ,gBACRyT,EAAO,eACPjU,EAAU,kBAAMwI,EAAS,OAATA,CAAiB,QAGjCrI,EAAAC,EAAAC,cAAA,KACEC,UAAS,OAAAM,OAASqT,GAClB1T,MAAO,CACLC,QACAC,OAAQ,WAEVT,QAASA,IAuDuBkU,IAClC/T,EAAAC,EAAAC,cAAA,OAAKC,UAAU,mBAnDI,WACrB,IAAIE,EAAQ,GACVR,EAAU,kBAAMwI,EAAS,WAATA,EAAqB,IAKvC,OAJiB,IAAbc,IACF9I,EAAQ,gBACRR,EAAU,kBAAMwI,EAAS,WAATA,CAAqB,QAGrCrI,EAAAC,EAAAC,cAAA,KACEC,UAAS,aACTC,MAAO,CACLC,QACAC,OAAQ,WAEVT,QAASA,IAqCuBmU,IAClChU,EAAAC,EAAAC,cAAA,WACGiH,EAAKoC,IAAI,SAAAa,GAAG,OACXpK,EAAAC,EAAAC,cAAC+T,GAAD,CACEvO,IAAK0E,EAAIrH,IACTqH,IAAKA,EACLmJ,SAAU5I,EAAQxD,KAAKgD,KAAK,SAAA+J,GAAS,OAAIA,IAAc9J,EAAIrH,MAC3DyQ,MAAO,kBAAMnL,EAAS,OAATA,CAAAtE,OAAAiH,GAAA,EAAAjH,CAAqB4G,EAAQxD,MAA7B1G,OAAA,CAAmC2J,EAAIrH,QACpDuF,SAAU,kBAAMD,EAAS,OAATA,CAAiBsC,EAAQxD,KAAKiE,OAAO,SAAA+I,GAAC,OAAIA,IAAM/J,EAAIrH,mCCpHnEqR,GAAb,SAAA9P,GAAA,SAAA8P,IAAA,OAAArQ,OAAAU,EAAA,EAAAV,CAAAW,KAAA0P,GAAArQ,OAAAgB,EAAA,EAAAhB,CAAAW,KAAAX,OAAAiB,EAAA,EAAAjB,CAAAqQ,GAAAlP,MAAAR,KAAAvD,YAAA,OAAA4C,OAAAyB,EAAA,EAAAzB,CAAAqQ,EAAA9P,GAAAP,OAAA0B,EAAA,EAAA1B,CAAAqQ,EAAA,EAAA1O,IAAA,SAAAC,MAAA,WACW,IAAA6H,EACgD9I,KAAKb,MAApDwE,EADDmF,EACCnF,SAAUwJ,EADXrE,EACWqE,YAAaC,EADxBtE,EACwBsE,MAAOnF,EAD/Ba,EAC+Bb,aACtC,OACE3M,EAAAC,EAAAC,cAACyN,GAAA,EAAD,CAAWtF,SAAUA,EAAUsE,aAAcA,GAC1C,SAAAhN,KACC0U,cADD,IAECpC,EAFDtS,EAECsS,aAEAD,GAJDrS,EAGC2U,cAHD3U,EAICqS,cACA1F,EALD3M,EAKC2M,OAEAD,GAPD1M,EAMC4U,WAND5U,EAOC0M,kBACAM,EARDhN,EAQCgN,aACAuF,EATDvS,EASCuS,WATD,OAWClS,EAAAC,EAAAC,cAAA,OACEE,MAAO,CACLoS,OAAQ,OACRxJ,SAAU,WACVoG,MAAO,SAGTpP,EAAAC,EAAAC,cAAA,MAAA6D,OAAAC,OAAA,GACM4J,GAAI,CACNtN,OAAQ,UACR0I,SAAU,WACV0F,QAAS,iBACT+D,aAAc,GACdxE,OAAQ,oBACRyB,aAAc,SACd3H,gBAAiB,UARrB,CAUElI,QAAS,WACPqS,OAGFlS,EAAAC,EAAAC,cAAA,MACM0N,GAAI,CACNI,QAAS,OACT0E,SAAU,OACVjC,WAAY,WAGb9D,EACC3M,EAAAC,EAAAC,cAAA,MACM0N,GAAI,CACN4E,OAAQ,QACRG,YAAa,EACbF,aAAc,EACdzE,QAAS,eACTY,SAAU,OACV7G,gBAAiB,OACjB2H,aAAc,IAGhB1P,EAAAC,EAAAC,cAAA,MACM0N,GAAI,CACNI,QAAS,OACT8E,QAAS,EACTC,aAAc,SACdtC,WAAY,WAGdzQ,EAAAC,EAAAC,cAAA,YAAOyM,KAIX3M,EAAAC,EAAAC,cAAA,OACM0N,GAAI,CACNvN,MAAO,aAGRwR,IAIP7R,EAAAC,EAAAC,cAACoQ,GAAD,KACEtQ,EAAAC,EAAAC,cAACwQ,GAAD,CAAWpE,OAAQA,MAGvBtM,EAAAC,EAAAC,cAACgQ,GAAS8B,EAAa,CAAE1F,WACtBA,EACGwF,EAAMvI,IAAI,SAACwD,EAAM9B,GAAP,OACRjL,EAAAC,EAAAC,cAAC4N,GAAD/J,OAAAC,OAAA,CACE0B,IAAKuF,GACDgH,EAAa,CACflF,OACA9B,QACA4D,SAAUxC,IAAqBpB,EAC/B6D,WAAYnC,IAAiBI,KAG9BA,KAGL,aAhGlBqH,EAAA,CAAqC3Q,IAAMG,+BCF9B4Q,GAAb,SAAA9C,GAAA,SAAA8C,IAAA,IAAAjQ,EAAAC,EAAAT,OAAAU,EAAA,EAAAV,CAAAW,KAAA8P,GAAA,QAAA7P,EAAAxD,UAAAC,OAAAwD,EAAA,IAAAC,MAAAF,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAAF,EAAAE,GAAA3D,UAAA2D,GAAA,OAAAN,EAAAT,OAAAgB,EAAA,EAAAhB,CAAAW,MAAAH,EAAAR,OAAAiB,EAAA,EAAAjB,CAAAyQ,IAAAvP,KAAAC,MAAAX,EAAA,CAAAG,MAAAjE,OAAAmE,MACEO,MAAQ,CACNmF,MAAM,EACNmK,OAAQjQ,EAAKiQ,OAAOnP,KAAZvB,OAAAwB,EAAA,EAAAxB,QAAAwB,EAAA,EAAAxB,CAAAS,MAHZA,EAAA,OAAAT,OAAAyB,EAAA,EAAAzB,CAAAyQ,EAAA9C,GAAA3N,OAAA0B,EAAA,EAAA1B,CAAAyQ,EAAA,EAAA9O,IAAA,SAAAC,MAAA,WAOIjB,KAAKuB,SAAS,CAAEqE,MAAO5F,KAAKS,MAAMmF,SAPtC,CAAA5E,IAAA,SAAAC,MAAA,WAWI,OAAO3F,EAAAC,EAAAC,cAACwU,EAAA,SAAD,KAAWhQ,KAAKb,MAAM0C,SAAS7B,KAAKS,YAX/CqP,EAAA,CAA+B5Q,aCMzB+Q,GAAe,CACnB7R,MAAO,CACL2F,MAAO,GACPG,MAAO,GACP3H,KAAM,GACN0H,eAAgB,GAChBiM,QAAS,IAEXC,SAAU,CACRpK,OAAQ,GACRqK,QAAS,KAIPxT,GAAU,SAAAC,GAAI,MAAK,CACvBC,OAAQ,mBACRC,eAAgB,mBAChBC,cAAa,UAAAjB,OAAYc,EAAKI,SAG1BI,GAAiB,SAAAC,GACrB,GAAIA,EAASC,GAAI,OAAOD,EAASE,OACjC,MAAM,IAAIC,MAAM,eAGZ4S,eACJ,SAAAA,EAAYlR,GAAO,IAAAW,EAAA,OAAAT,OAAAU,EAAA,EAAAV,CAAAW,KAAAqQ,IACjBvQ,EAAAT,OAAAgB,EAAA,EAAAhB,CAAAW,KAAAX,OAAAiB,EAAA,EAAAjB,CAAAgR,GAAA9P,KAAAP,KAAMb,KAYRmR,MAAQ,WACN,OAAQC,KAAQzQ,EAAKW,MAAMrC,MAAM2F,QAAUjE,EAAKW,MAAMrC,MAAM8F,MAAMxH,OAAS,IAAM6T,KAAQzQ,EAAKW,MAAMrC,MAAM7B,OAdzFuD,EAiBnB0Q,IAAM,WACJzS,MAAM,cAAe,CACnBO,OAAQ,OACRC,KAAMC,KAAKC,UAAUqB,EAAKW,MAAMrC,OAChCxB,QAASA,GAAQkD,EAAKX,MAAMtC,QAE3BoB,KAAKZ,IACLY,KAAK,SAAAwS,GACJ3Q,EAAKX,MAAM2P,MAAXzP,OAAAgD,EAAA,EAAAhD,CAAA,GAAsBS,EAAKW,MAAMrC,MAAUqS,IAE3CC,EAAE,0BAA0BC,MAAM,WA3BrB7Q,EA+BnBgE,OAAS,WACP/F,MAAK,eAAAhC,OAAgB+D,EAAKX,MAAMf,MAAMC,KAAO,CAC3CC,OAAQ,MACRC,KAAMC,KAAKC,UAAUqB,EAAKW,MAAMrC,OAChCxB,QAASA,GAAQkD,EAAKX,MAAMtC,QAE3BoB,KAAKZ,IACLY,KAAK,SAAAwS,GACJ3Q,EAAKX,MAAMyR,SAAXvR,OAAAgD,EAAA,EAAAhD,CAAA,GAAyBS,EAAKW,MAAMrC,MAAUqS,IAE9CC,EAAE,0BAA0BC,MAAM,WAzCrB7Q,EA6CnBlC,OAAS,WACP+E,QAAQC,IAAI,CACV7E,MAAK,iCAAAhC,OAAkC+D,EAAKW,MAAMrC,MAAM2F,OAAS,CAC/DnH,QAASA,GAAQkD,EAAKX,MAAMtC,QAC3BoB,KAAKZ,IACRU,MAAK,qCAAAhC,OAAmC+D,EAAKW,MAAMrC,MAAM2F,OAAS,CAChEnH,QAASA,GAAQkD,EAAKX,MAAMtC,QAC3BoB,KAAKZ,MACPY,KAAK,SAAAhD,GAAA,IAAAyG,EAAArC,OAAAwD,EAAA,EAAAxD,CAAApE,EAAA,GAAE8K,EAAFrE,EAAA,GAAU0O,EAAV1O,EAAA,UAAuB5B,EAAKyB,SAAS,CAAE4O,SAAU,CAAEpK,SAAQqK,gBArDlDtQ,EAwDnB+Q,yBAA2B,SAAAC,GAErBA,IAAehR,EAAKW,MAAMrC,MAAM0S,WAClChR,EAAKyB,SAAS,CACZnD,MAAMiB,OAAAgD,EAAA,EAAAhD,CAAA,GACDS,EAAKW,MAAMrC,MADX,CAEH0S,WAAY,SAIhB/S,MAAK,uBAAAhC,OAAwB+U,GAAc,CACzClU,QAASA,GAAQkD,EAAKX,MAAMtC,QAE3BoB,KAAKZ,IACLY,KAAK,SAAA4K,GAAA,IAAGzK,EAAHyK,EAAGzK,MAAH,OACJ0B,EAAKyB,SAAS,CACZnD,MAAMiB,OAAAgD,EAAA,EAAAhD,CAAA,GACDS,EAAKW,MAAMrC,MADX,CAEH0S,aACA/M,MAAO3F,EAAM2F,MACbG,MAAO9F,EAAM8F,MAAMW,IAAI,SAAAkM,GAAC,OAAIA,EAAEL,IAAGM,OACjCzU,KAAM,OACN0H,eACE7F,EAAM6S,SAAW7S,EAAM6S,QAAQC,YAC3B,IAAI5P,KAAKlD,EAAM6S,QAAQC,aAAaC,cACpC/S,EAAM6F,eACZiM,QAAS9R,EAAMgT,SACfhM,QAAShH,EAAMiT,OAASjT,EAAMiT,OAAOC,KAAO,UAnFrCxR,EA0FnByR,0BAA4B,SAAAT,GAEtBA,IAAehR,EAAKW,MAAMrC,MAAM0S,WAClChR,EAAKyB,SAAS,CACZnD,MAAMiB,OAAAgD,EAAA,EAAAhD,CAAA,GACDS,EAAKW,MAAMrC,MADX,CAEH0S,WAAY,SAIhB/S,MAAK,uBAAAhC,OAAwB+U,GAAc,CACzClU,QAASA,GAAQkD,EAAKX,MAAMtC,QAE3BoB,KAAKZ,IACLY,KAAK,SAAA4O,GAAA,IAAG2E,EAAH3E,EAAG2E,SAAH,OACJ1R,EAAKyB,SAAS,CACZnD,MAAMiB,OAAAgD,EAAA,EAAAhD,CAAA,GACDS,EAAKW,MAAMrC,MADX,CAEH0S,aACA/M,MAAOyN,EAASzN,MAChBG,MAAOsN,EAAStN,MAAMW,IAAI,SAAAkM,GAAC,OAAIA,EAAEL,IAAGM,OACpCzU,KAAM,WACN0H,eAAgBuN,EAASC,UACzBvB,QAASsB,EAASJ,SAClBhM,QAASoM,EAASH,OAASG,EAASH,OAAOC,KAAO,UAlH3CxR,EAyHnB4R,QAAU,SAACvP,GAAoC,IAA7B0E,EAA6BpK,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAjB,SAAAgU,GAAI,OAAIA,GACpC,OAAO,SAAAvC,GAAK,OACVpO,EAAKyB,SAAS,CACZnD,MAAMiB,OAAAgD,EAAA,EAAAhD,CAAA,GAAMS,EAAKW,MAAMrC,MAAlBiB,OAAAiD,EAAA,EAAAjD,CAAA,GAA0B8C,EAAQ0E,EAAUqH,EAAMO,OAAOxN,aA5HjDnB,EAgInB6R,SAAW,SAAAxP,GACT,OAAO,SAAAlB,GAAK,OAAInB,EAAKyB,SAAS,CAAEnD,MAAMiB,OAAAgD,EAAA,EAAAhD,CAAA,GAAMS,EAAKW,MAAMrC,MAAlBiB,OAAAiD,EAAA,EAAAjD,CAAA,GAA0B8C,EAAQlB,QA/HvEnB,EAAKW,MAAQ,CACXrC,MAAOe,EAAMf,MAAQe,EAAMf,MAAQ6R,GAAa7R,MAChD+R,SAAUF,GAAaE,UAJRrQ,mFAUjB4Q,EAAE,0BAA0BkB,GAAG,gBAAiB5R,KAAKb,MAAM0S,0CA0HpD,IAAA3Q,EAAAlB,KACC5B,EAAU4B,KAAKS,MAAfrC,MACR,OACE9C,EAAAC,EAAAC,cAACwU,EAAA,SAAD,KACGhQ,KAAKb,MAAM2S,YAAYpR,SAAWqB,EACjCzG,EAAAC,EAAAC,cAAA,yBAEAF,EAAAC,EAAAC,cAAA,OACEC,UAAU,oCACVgL,GAAG,wBACHsL,SAAS,KACTC,KAAK,SACLC,YAAU,QAEV3W,EAAAC,EAAAC,cAAA,OAAKC,UAAU,qCAAqCuW,KAAK,YACvD1W,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iBACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBACbH,EAAAC,EAAAC,cAAA,MAAIC,UAAU,eAAgB2C,GAASA,EAAM2F,OAAU,OACvDzI,EAAAC,EAAAC,cAAA,UAAQe,KAAK,SAASd,UAAU,QAAQyW,eAAa,QAAQC,aAAW,SACtE7W,EAAAC,EAAAC,cAAA,QAAM4W,cAAY,QAAlB,UAGJ9W,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,YACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,qBACbH,EAAAC,EAAAC,cAAA,SAAO6W,QAAQ,SAAf,SACA/W,EAAAC,EAAAC,cAAA,SACEe,KAAK,OACLd,UAAU,eACVgL,GAAG,QACH6L,mBAAiB,QACjBnF,YAAY,cACZxJ,SAAU3D,KAAK0R,QAAQ,SACvBzQ,MAAOjB,KAAKS,MAAMrC,MAAM2F,SAG5BzI,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gCACbH,EAAAC,EAAAC,cAAA,KACEC,UAAU,uBACVC,MAAO,CACLE,OAAQ,UACRD,MAAO,UACP4W,WAAY,QAEdpX,QAAS6E,KAAKpC,WAInBoC,KAAKS,MAAM0P,SAASpK,OAAOrJ,OAAS,EACnCpB,EAAAC,EAAAC,cAACgX,GAAD,KACG,SAAAC,GAAsB,IAAnB7M,EAAmB6M,EAAnB7M,KAAMmK,EAAa0C,EAAb1C,OACR,OACEzU,EAAAC,EAAAC,cAACwU,EAAA,SAAD,KACE1U,EAAAC,EAAAC,cAAA,OAAKL,QAAS4U,EAAQrU,MAAO,CAAEE,OAAQ,YACpCsF,EAAKT,MAAM0P,SAASpK,OAAOrJ,OAD9B,UAEGkJ,EAAOtK,EAAAC,EAAAC,cAAA,KAAGC,UAAU,sBAAyBH,EAAAC,EAAAC,cAAA,KAAGC,UAAU,yBAE7DH,EAAAC,EAAAC,cAAA,OACEC,UAAU,MACVC,MAAO,CACLmP,UAAW,SACXvB,QAAS1D,EAAO,OAAS,OACzBoI,SAAU,WAGX9M,EAAKT,MAAM0P,SAASpK,OAAOlB,IAAI,SAAAzG,GAAK,OACnC9C,EAAAC,EAAAC,cAAA,OACEwF,IAAK5C,EAAMsU,KACXjX,UAAS,wBAAAM,OACPqC,EAAMsU,OAASxR,EAAKT,MAAMrC,MAAM0S,WAAa,WAAa,IAE5D3V,QAAS,kBAAM+F,EAAK2P,yBAAyBzS,EAAMsU,QAElDtU,EAAMsU,OAASxR,EAAKT,MAAMrC,MAAM0S,WAC/BxV,EAAAC,EAAAC,cAAA,KAAGC,UAAU,kDACX,KACJH,EAAAC,EAAAC,cAAA,WACG4C,EAAM2F,MADT,KACkB,IACf3F,EAAM6S,SAAW7S,EAAM6S,QAAQC,YAC5B,IAAI5P,KAAKlD,EAAM6S,QAAQC,aAAaC,cACpC/S,EAAM6F,gBAEZ3I,EAAAC,EAAAC,cAAA,WACG4C,EAAMiT,OACL/V,EAAAC,EAAAC,cAAA,OAAK2J,IAAK/G,EAAMiT,OAAOC,KAAMhM,IAAI,eAAe5J,MAAO,CAAEgP,MAAO,UAC9D,aASlB,KACH1K,KAAKS,MAAM0P,SAASC,QAAQ1T,OAAS,EACpCpB,EAAAC,EAAAC,cAACgX,GAAD,KACG,SAAAG,GAAsB,IAAnB/M,EAAmB+M,EAAnB/M,KAAMmK,EAAa4C,EAAb5C,OACR,OACEzU,EAAAC,EAAAC,cAACwU,EAAA,SAAD,KACE1U,EAAAC,EAAAC,cAAA,OAAKL,QAAS4U,EAAQrU,MAAO,CAAEE,OAAQ,YACpCsF,EAAKT,MAAM0P,SAASC,QAAQ1T,OAD/B,YAEGkJ,EAAOtK,EAAAC,EAAAC,cAAA,KAAGC,UAAU,sBAAyBH,EAAAC,EAAAC,cAAA,KAAGC,UAAU,yBAE7DH,EAAAC,EAAAC,cAAA,OACEC,UAAU,MACVC,MAAO,CACLmP,UAAW,SACXvB,QAAS1D,EAAO,OAAS,OACzBoI,SAAU,WAGX9M,EAAKT,MAAM0P,SAASC,QAAQvL,IAAI,SAAA+N,GAAM,OACrCtX,EAAAC,EAAAC,cAAA,OACEwF,IAAK4R,EAAOF,KACZjX,UAAS,wBAAAM,OACP6W,EAAOF,OAASxR,EAAKT,MAAMrC,MAAM0S,WAAa,WAAa,IAE7D3V,QAAS,kBAAM+F,EAAKqQ,0BAA0BqB,EAAOF,QAEpDE,EAAOF,OAASxR,EAAKT,MAAMrC,MAAM0S,WAChCxV,EAAAC,EAAAC,cAAA,KAAGC,UAAU,kDACX,KACJH,EAAAC,EAAAC,cAAA,WACGoX,EAAO7O,MADV,MACoB6O,EAAOnB,WAE3BnW,EAAAC,EAAAC,cAAA,WACGoX,EAAOvB,OACN/V,EAAAC,EAAAC,cAAA,OAAK2J,IAAKyN,EAAOvB,OAAOC,KAAMhM,IAAI,gBAAgB5J,MAAO,CAAEgP,MAAO,UAChE,aASlB,KACJpP,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACbH,EAAAC,EAAAC,cAAA,sBACAF,EAAAC,EAAAC,cAAC8S,GAAD,CACElH,cAAepH,KAAKS,MAAMrC,MAAM8F,MAChCiJ,YAAY,QACZC,MAAOpN,KAAKb,MAAM2S,YAAYvP,OAC9B2K,aAAclN,KAAK2R,SAAS,YAGhCrW,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACbH,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAACqX,GAAD,CACE5K,aAAcjI,KAAKS,MAAMrC,MAAM7B,KAC/B4Q,YAAY,OACZC,MAAOpN,KAAKb,MAAM2S,YAAYtP,MAC9BmB,SAAU3D,KAAK2R,SAAS,WAG5BrW,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACbH,EAAAC,EAAAC,cAAA,SAAO6W,QAAQ,mBAAf,mBACA/W,EAAAC,EAAAC,cAAA,SACEe,KAAK,SACLd,UAAU,eACVgL,GAAG,kBACH6L,mBAAiB,kBACjBnF,YAAY,wBACZxJ,SAAU3D,KAAK0R,QAAQ,iBAAkB,SAAAjB,GAAI,OAAIjN,SAASiN,EAAM,MAChExP,MAAOjB,KAAKS,MAAMrC,MAAM6F,kBAG5B3I,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACbH,EAAAC,EAAAC,cAAA,SAAO6W,QAAQ,WAAf,WACA/W,EAAAC,EAAAC,cAAA,YACEC,UAAU,eACVgL,GAAG,UACH6L,mBAAiB,UACjBnF,YAAY,gBACZxJ,SAAU3D,KAAK0R,QAAQ,WACvBzQ,MAAOjB,KAAKS,MAAMrC,MAAM8R,YAI9B5U,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBACbH,EAAAC,EAAAC,cAAA,UAAQe,KAAK,SAASd,UAAU,oBAAoByW,eAAa,SAAjE,SAGA5W,EAAAC,EAAAC,cAAA,UACEe,KAAK,SACLuW,UAAW9S,KAAKsQ,QAChB7U,UAAU,kBACVN,QAAS6E,KAAKS,MAAMrC,MAAMC,IAAM2B,KAAK8D,OAAS9D,KAAKwQ,KAElDpS,EAAMC,IAAM,SAAW,oBApUTU,IAAMG,WAgV5B6T,IX7WkB7T,GW6WUD,EAASoR,IX7WN,SAAAlR,GAAK,OAC/C7D,EAAAC,EAAAC,cAACsG,EAAmB1C,SAApB,KACG,SAAA0S,GAAW,OAAIxW,EAAAC,EAAAC,cAAC0D,GAADG,OAAAC,OAAA,GAAeH,EAAf,CAAsB2S,YAAaA,SYMjDpU,GAAYsV,GAAmB,GAuBxBC,GAAO,WAAM,IAEhBvS,EAAWmD,qBAAW/B,GAAtBpB,OAFgBuO,EAGIpL,qBAAWgC,IAA/BpF,EAHgBwO,EAGhBxO,MAAOpE,EAHS4S,EAGT5S,SACP0J,EAA2BtF,EAA3BsF,OAAQE,EAAmBxF,EAAnBwF,QAASD,EAAUvF,EAAVuF,MACnBnJ,EAAOgH,qBAAW/E,GALAoU,EAQIC,mBAASpN,EAAOrJ,OAASuJ,EAAQC,OARrCkN,EAAA/T,OAAAwD,EAAA,EAAAxD,CAAA6T,EAAA,GAQjBG,EARiBD,EAAA,GAQTE,EARSF,EAAA,GAAAG,EASEJ,mBAjCJ,IAwBEK,EAAAnU,OAAAwD,EAAA,EAAAxD,CAAAkU,EAAA,GASjBnV,EATiBoV,EAAA,GASVC,EATUD,EAAA,GAAAE,EAUFP,mBAAS,GAVPQ,EAAAtU,OAAAwD,EAAA,EAAAxD,CAAAqU,EAAA,GAUjB1S,EAViB2S,EAAA,GAUZC,EAVYD,EAAA,GAAAE,EAYIV,oBAAS,GAZbW,EAAAzU,OAAAwD,EAAA,EAAAxD,CAAAwU,EAAA,GAYjBE,EAZiBD,EAAA,GAYTE,EAZSF,EAAA,GAelBG,EAAW,SAAAC,GACfF,GAAU,GACVtW,GAtCe,SAACuI,EAASoN,GAE3B,IAAM9Q,EAAS0D,EAAQ1D,OAAOmE,OAAO,SAAAxC,GAAK,OAAIA,EAAM,KAAIW,IAAI,SAAAX,GAAK,OAAIA,EAAM,KACrEiQ,EAAYlO,EAAQ1D,OAAOmE,OAAO,SAAAxC,GAAK,OAAKA,EAAM,KAAIW,IAAI,SAAAX,GAAK,OAAIA,EAAM,KAC/E,OAAO7E,OAAO+U,KAAKnO,GAChBS,OAAO,SAAA1F,GAAG,MAAY,WAARA,IACd0F,OACC,SAAA1F,GAAG,OACCqT,IAAQpO,EAAQjF,KAA0B,OAAjBiF,EAAQjF,IAAkC,KAAjBiF,EAAQjF,IAC3DqT,IAAQpO,EAAQjF,KAASiF,EAAQjF,GAAKtE,OAAS,IAEnDmI,IAAI,SAAA7D,GAAG,SAAAjF,OAAOiF,EAAP,KAAAjF,OAAckK,EAAQjF,MAC7BjF,OACCwG,EAAO7F,OAAS,EAAhB,UAAAX,OAA8BwG,EAAO4B,KAAK,MAAS,GACnDgQ,EAAUzX,OAAS,EAAnB,aAAAX,OAAoCoY,EAAUhQ,KAAK,MAAS,GAVzD,UAAApI,OAWOsX,IAEX3M,OAAOC,SACPxC,KAAK,KAoBImQ,CAAWrO,EAASoN,GAASxW,GAAMoB,KAAK,SAAA8H,GAEjC,IAAXsN,GACFhX,EAAS,CAAEE,KAAM,eAEnByX,GAAU,GACV3X,EAAS,CAAEE,KAAM,UAAWC,QAAS,CAAEuJ,OAAQA,EAAO0K,KAAMzK,MAAOD,EAAOC,YAY9EuO,oBACE,WAEE,IAAMC,EAAoBC,KAASR,EAAU,IAAK,CAChDS,SAAS,EACTC,UAAU,IASZ,OALc,IAAV3O,IACF3J,EAAS,CAAEE,KAAM,eACjBiY,IACAR,GAAU,IAEL,kBAAMQ,EAAkBI,WAEjC,CAAC3O,IAEHsO,oBA3BkB,WAEZvT,EAAM,GAER0P,EAAE,0BAA0BC,MAAM,SAuBjB,CAACvS,IAEtB,IAAMyW,EAAaC,kBAAO,GAa1B,OAZAP,oBACE,WACMM,EAAWE,QACbF,EAAWE,SAAU,EAGvBd,KAEF,CAACZ,IAKD/X,EAAAC,EAAAC,cAAA,WACGkF,IAAWqB,EACVzG,EAAAC,EAAAC,cAAA,MAAIC,UAAU,oBACZH,EAAAC,EAAAC,cAAA,KAAGC,UAAU,kCAGfH,EAAAC,EAAAC,cAACwU,EAAA,SAAD,KACE1U,EAAAC,EAAAC,cAACuX,GAAD,CAEE/R,IAAK5C,EAAMC,KAAO2C,EAClB5C,MAAOA,EAAMC,IAAMD,EAAQ,KAC3B0Q,MAAO,SAAA1Q,GAAK,OAAI/B,EAAS,CAAEE,KAAM,MAAOC,QAAS,CAAE4B,YACnDwS,SAAU,SAAAxS,GAAK,OAAI/B,EAAS,CAAEE,KAAM,SAAUC,QAAS,CAAE4B,QAAOqI,GAAIrI,EAAMC,UAE5E/C,EAAAC,EAAAC,cAAA,KACEL,QAAS,WACPsY,EA7GU,IA8GVG,EAAO5S,EAAM,IAEfvF,UAAU,2BACVC,MAAO,CACL6I,IAAK,OACLyQ,KAAM,OACN1Q,SAAU,WACV3I,MAAO,UACPC,OAAQ,WAEVmI,MAAM,6BAERzI,EAAAC,EAAAC,cAACyZ,GAAD,MACA3Z,EAAAC,EAAAC,cAAA,MAAIC,UAAU,eACXsK,EAAOrJ,SAAWsJ,GAASA,EAAQ,EAClC1K,EAAAC,EAAAC,cAAA,YAAOwK,EAAP,mBACED,EAAOrJ,OAASsJ,EAClB1K,EAAAC,EAAAC,cAAA,YACGuK,EAAOrJ,OADV,OACsBsJ,EADtB,mBAGE+N,EACFzY,EAAAC,EAAAC,cAAA,kCACE,MAENF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,UACZsK,EAAOlB,IAAI,SAAAzG,GAAK,OACf9C,EAAAC,EAAAC,cAAC0Z,EAAD,CACElU,IAAK5C,EAAMC,IACXD,MAAOA,EACPuF,SAAU,SAAAvF,GAAK,OAAI/B,EAAS,CAAEE,KAAM,SAAUC,QAAS,CAAE4B,QAAOqI,GAAIrI,EAAMC,QAC1EuF,SAAU,SAAAsQ,GAAC,OAAI7X,EAAS,CAAEE,KAAM,SAAUC,QAAS,CAAEiK,GAAIrI,EAAMC,QAC/DqF,OAAQ,WACN+P,EAASpU,OAAAgD,EAAA,EAAAhD,CAAA,GACJjB,IAELwV,EAAO5S,EAAM,SAKrB1F,EAAAC,EAAAC,cAAA,MAAIC,UAAU,oBACVsY,EAIE,KAHFzY,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,KAAGC,UAAU,mCAIlBsK,EAAOrJ,OAASsJ,GAAS+N,EACxBzY,EAAAC,EAAAC,cAAA,OAAKC,UAAU,mBACbH,EAAAC,EAAAC,cAAA,UAAQL,QAAS,kBAAMmY,EAAUD,EAAS,IAAI5X,UAAU,0BAAxD,mBAKFkB,4CC5KNwY,GAAgB,SAAAhW,GAAS,IAAA+T,EACHC,mBAAShU,EAAM8B,OAAS,IADrBmS,EAAA/T,OAAAwD,EAAA,EAAAxD,CAAA6T,EAAA,GACtBjS,EADsBmS,EAAA,GACfgC,EADehC,EAAA,GAAAG,EAELJ,oBAAUhU,EAAM8B,OAFXuS,EAAAnU,OAAAwD,EAAA,EAAAxD,CAAAkU,EAAA,GAEtB8B,EAFsB7B,EAAA,GAEhB8B,EAFgB9B,EAAA,GAGvB3M,EAAY1H,EAAM0H,WAAa8G,KAC/B4H,EAAOpW,EAAMoW,OAAQ,EAGrBC,EAAmBV,iBAAO3V,EAAM8B,OAOtC,OANI9B,EAAM8B,QAAUuU,EAAiBT,UACnCK,EAASjW,EAAM8B,OAAS,IACxBqU,GAASnW,EAAM8B,OACfuU,EAAiBT,QAAU5V,EAAM8B,OAIjC3F,EAAAC,EAAAC,cAACwU,EAAA,SAAD,MACIuF,GAAQF,EACR/Z,EAAAC,EAAAC,cAACwU,EAAA,SAAD,KACG7Q,EAAMsW,gBAANpW,OAAAgD,EAAA,EAAAhD,CAAA,GACIF,EADJ,CAEC8B,QACA0C,SAAU,SAAAuK,GAAK,OAAIkH,EAASvO,EAAUqH,EAAMO,OAAOxN,SACnDyU,OAAQ,WACFzU,IACF9B,EAAMwE,SAAS1C,GACfqU,GAAQ,QAIdha,EAAAC,EAAAC,cAAA,UACEC,UAAU,kBACVka,WAAW,EACXC,YAAa,SAAA1H,GAEXA,EAAMC,iBACND,EAAMvF,mBAERxN,QAAS,SAAA+S,GACPA,EAAMC,iBACND,EAAMvF,kBACF1H,IACF9B,EAAMwE,SAAS1C,GACfqU,GAAQ,MAbd,OAqBFha,EAAAC,EAAAC,cAACwU,EAAA,SAAD,KACG7Q,EAAM0W,YAAY,CACjBpa,UAAW0D,EAAM1D,UACjBwF,QACA9F,QAAS,SAAA+S,GACFqH,IACHrH,EAAMC,iBACND,EAAMvF,kBACN2M,GAAQ,UAUXQ,GAAgB,SAAA3W,GAAK,OAChC7D,EAAAC,EAAAC,cAACua,GAAD1W,OAAAC,OAAA,GACMH,EADN,CAEEsW,gBAAiB,SAAAO,GAAU,OACzB1a,EAAAC,EAAAC,cAAA,OAAKC,UAAU,8BACbH,EAAAC,EAAAC,cAAA,SACEC,UAAU,oBACV0R,YAAa6I,EAAW7I,YACxB5Q,KAAM4C,EAAM5C,MAAQ,OACpB0E,MAAO+U,EAAW/U,MAClBgV,UAAW,SAAA/H,GACS,UAAdA,EAAMlN,KACRgV,EAAWN,UAGfC,WAAW,EACXC,YAAa,SAAA1H,GAEXA,EAAMC,iBACND,EAAMvF,mBAERhF,SAAUqS,EAAWrS,SACrBxI,QAAS,SAAA+S,GACPA,EAAMC,iBACND,EAAMvF,uBAKdkN,YAAa,SAAAK,GAAU,OACrB5a,EAAAC,EAAAC,cAAA,QAAML,QAAS+a,EAAW/a,QAASM,UAAWya,EAAWza,WACtDya,EAAWjV,YAMPkV,GAAmB,SAAAhX,GAAK,OACnC7D,EAAAC,EAAAC,cAACua,GAAD1W,OAAAC,OAAA,GACMH,EADN,CAEEsW,gBAAiB,SAAAO,GAAU,OACzB1a,EAAAC,EAAAC,cAAA,YACEC,UAAU,qBACV0R,YAAa6I,EAAW7I,YACxBzR,MAAOsa,EAAWta,MAClBuF,MAAO+U,EAAW/U,MAClBmV,KAAMJ,EAAWI,MAAQ,EACzBH,UAAW,SAAA/H,GACS,UAAdA,EAAMlN,KAAmBkN,EAAMmI,SACjCL,EAAWN,UAGfC,WAAW,EACXC,YAAa,SAAA1H,GAEXA,EAAMC,iBACND,EAAMvF,mBAERhF,SAAUqS,EAAWrS,SACrBxI,QAAS,SAAA+S,GACPA,EAAMC,iBACND,EAAMvF,sBAIZkN,YAAa,SAAAK,GAAU,OACrB5a,EAAAC,EAAAC,cAAA,QAAML,QAAS+a,EAAW/a,QAASM,UAAWya,EAAWza,WACtD0D,EAAMmX,MACLJ,EAAWjV,MAAMqV,MAAM,MAAMzR,IAAI,SAACwD,EAAMrH,GAAP,OAC/B1F,EAAAC,EAAAC,cAACwU,EAAA,SAAD,CAAUhP,IAAKA,GACZqH,EACD/M,EAAAC,EAAAC,cAAA,cAIJF,EAAAC,EAAAC,cAACwU,EAAA,SAAD,KAAWkG,EAAWjV,aChJnBsV,GAAsBxX,IAAMC,gBAEnCmH,GAAU,WAAwB,IAAvB1F,EAAuBhE,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAf,GAAI+Z,EAAW/Z,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACtC,OAAQ6Z,EAAOja,MACb,IAAK,MACH,OAAO8C,OAAAiH,GAAA,EAAAjH,CAAIoB,GAAX1E,OAAA,CAAAsD,OAAAgD,EAAA,EAAAhD,CAAA,GAAuBmX,EAAOha,QAA9B,CAAuCiK,IAAI,IAAInF,MAAOmV,cACxD,IAAK,QACH,OAAOhW,EAAMiG,OAAO,SAAAgQ,GAAY,OAAIA,EAAajQ,KAAO+P,EAAOha,QAAQiK,KACzE,QACE,OAAOhG,IAIAkW,GAAuB,SAAAxX,GAAS,IAAA6H,EACjBC,qBAAWd,GAAS,IADHe,EAAA7H,OAAAwD,EAAA,EAAAxD,CAAA2H,EAAA,GACpCvG,EADoCyG,EAAA,GAC7B7K,EAD6B6K,EAAA,GAE3C,OACE5L,EAAAC,EAAAC,cAAC+a,GAAoB3U,SAArB,CAA8BX,MAAO,CAAE2V,cAAenW,EAAOpE,aAC1D8C,EAAM0C,WCRAgV,GAAU,SAAA5b,GAAsE,IAAnE6b,EAAmE7b,EAAnE6b,QAASvQ,EAA0DtL,EAA1DsL,MAAOqP,EAAmD3a,EAAnD2a,YAAamB,EAAsC9b,EAAtC8b,WAAYC,EAA0B/b,EAA1B+b,UAAWC,EAAehc,EAAfgc,SAEtEpa,EAAOgH,qBAAW/E,GAFmEkQ,EAGnEnL,qBAAWqT,IAA3B9Y,EAHmF4Q,EAGnF5Q,MAAOmX,EAH4EvG,EAG5EuG,KAH4EtG,EAIpDpL,qBAAWsT,IAA1CvY,EAJmFqQ,EAInFrQ,OAAe9C,EAJoEmT,EAI3E1I,MACRlK,EAAawH,qBAAW0S,IAAxBla,SACU+a,EAAmBvT,qBAAWgC,IAAxCxJ,SANmF6W,EAS3DC,mBAAS,YATkDC,EAAA/T,OAAAwD,EAAA,EAAAxD,CAAA6T,EAAA,GASpFmE,EAToFjE,EAAA,GAS1EkE,EAT0ElE,EAAA,GAAAG,EAUjEJ,mBAAS,IAVwDK,EAAAnU,OAAAwD,EAAA,EAAAxD,CAAAkU,EAAA,GAUpF7X,EAVoF8X,EAAA,GAU7E+D,EAV6E/D,EAAA,GAarFgE,EAAmB,SAAA3Q,GACvBuQ,EAAe,CACb7a,KAAM,wBACNC,QAAS,CACPiK,GAAIrI,EAAMC,IACVwI,gBAWA4Q,EAAgB,SAAA5Q,GACpB,IAAM6Q,EAAqB9Q,aAAQkQ,EAASjQ,GAI5C,OAHA2Q,EAAiB,SAAAG,GACfA,EAAM/S,QAAQ9I,GAAagJ,SAASyB,GAASmR,IpB4EtB,SAACtZ,EAAOQ,EAAQkY,EAASja,GACpD,OAAOkB,MAAK,eAAAhC,OAAgBqC,EAAMC,IAAtB,aAAAtC,OAAqC6C,EAAOP,IAA5C,cAAAtC,OAA4D+a,EAAQzY,KAAO,CACrFC,OAAQ,MACRC,KAAMC,KAAKC,UAAUqY,GACrBla,QAASA,EAAQC,KAChBoB,KAAKZ,GoB/EC2V,CAAuB5U,EAAOQ,EAAQ8Y,EAAoB7a,GAAMqB,MAAM,SAAAgW,GAE3EsD,EAAiB,SAAAG,GACfA,EAAM/S,QAAQ9I,GAAagJ,SAASyB,GAASuQ,OAKnD,OACExb,EAAAC,EAAAC,cAAA,OACEC,UAAU,wBACVka,WAAYJ,EACZK,YAAa,SAAA1H,GACXqJ,EAAS,CACPlU,gBAAiB,iCACjBuU,QAAS,MACTjc,MAAO,yBAETuS,EAAM2J,aAAaC,WAAa,OAChC5J,EAAMvF,kBACNiN,KAEFmB,WAAY,WACVE,GAAYF,KAEdC,UAAW,SAAA9I,GACTA,EAAMvF,kBACNqO,IACAO,EAAS,KAEX7b,MAAOA,GAEPJ,EAAAC,EAAAC,cAAA,OAAKC,UAAU,sDACX8Z,GACAja,EAAAC,EAAAC,cAAA,KACEC,UAAU,8BACVN,QAAS,SAAA+S,GACPA,EAAMC,iBACND,EAAMvF,kBACF3D,OAAOC,QAAQ,qBpB2CJ,SAAC7G,EAAOQ,EAAQkY,EAASja,GACpD,OAAOkB,MAAK,eAAAhC,OAAgBqC,EAAMC,IAAtB,aAAAtC,OAAqC6C,EAAOP,IAA5C,cAAAtC,OAA4D+a,EAAQzY,KAAO,CACrFC,OAAQ,SACR1B,QAASA,EAAQC,KAEhBoB,KAAK,SAAAX,GACJ,IAAKA,EAASC,GAAI,MAAM,IAAIE,MAAM,gBAEnCS,MAAMhB,GoBlDK8V,CAAuB5U,EAAOQ,EAAQkY,EAASja,GAC5CoB,KAAK,kBACJuZ,EAAiB,SAAAG,GACfA,EAAM/S,QAAQ9I,GAAagJ,SAAW6S,EAAM/S,QAAQ9I,GAAagJ,SAAS4B,OACxE,SAAAgC,GAAC,OAAIA,EAAErK,MAAQyY,EAAQzY,UAI5BJ,KAAK,kBAAM7B,EAAmBC,EAAD,GAAAN,OAAcG,EAAWJ,EAAayK,GAAtC,oBAKxCjL,EAAAC,EAAAC,cAAA,OACEC,UAAU,oBACVC,MAAO,CACLC,MAAOmb,EAAQ5b,KAAO,iBAAmB,GACzC4O,WAAYgN,EAAQ5b,KAAO,OAAS,GACpCU,OAAQ,WAEVT,QAAS,kBAxEI0L,EAyEE,SAAAjI,GACX,GAAKA,EAAOkG,SAASyB,GAAOrL,KAK1B0D,EAAOkG,SAASyB,GAAOrL,MAAO,OAJ9B,IAAK,IAAIqN,EAAI,EAAGA,GAAKhC,EAAOgC,IAC1B3J,EAAOkG,SAASyD,GAAGrN,MAAO,GA3EjC8X,EAAsB5U,EAAOwI,aAAQhI,EAAQiI,GAAYhK,GAAMoB,KAAK,SAAAW,GACzE4Y,EAAiB,SAAAG,GACfA,EAAM/S,QAAQ9I,GAAe8C,OA8EtBX,KAAK,kBAAM7B,EAAmBC,EAAD,GAAAN,OAAcF,EAAUC,GAAxB,sBAjFrB,IAAA+K,IAoFZN,EAAQ,GAEXjL,EAAAC,EAAAC,cAAA,OAAKC,UAAU,sBACbH,EAAAC,EAAAC,cAACuc,GAAD,CACExC,KAAMA,EACN9Z,UAAS,kCAAAM,OAAoC+a,EAAQ5b,KAAO,OAAS,IACrE+F,MAAO6V,EAAQ/S,MACfoJ,YAAY,QACZxJ,SAAU,SAAAI,GAAK,OACb0T,EAAc,SAAAX,GACZA,EAAQ/S,MAAQA,IACf9F,KAAK,kBAAM7B,EAAmBC,EAAD,GAAAN,OAAcG,EAAWJ,EAAayK,GAAtC,4BAKxCjL,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iDACbH,EAAAC,EAAAC,cAACwc,GAAD,CACEzC,KAAMA,EACN7Z,MAAO,CAAEgP,MAAO,QAChB0L,KAAM,EACNnV,MAAO6V,EAAQ5G,QACf/C,YAAY,UACZ1R,UAAS,GAAAM,OAAKsb,EAAL,4CACT1T,SAAU,SAAAuM,GAAO,OACfuH,EAAc,SAAAX,GACZA,EAAQ5G,QAAUA,IACjBjS,KAAK,kBAAM7B,EAAmBC,EAAD,GAAAN,OAAcG,EAAWJ,EAAayK,GAAtC,4BAGnC8Q,GACC/b,EAAAC,EAAAC,cAAA,QAAME,MAAO,CAAEE,OAAQ,WAAaT,QAAS,kBAAMmc,EAAY,MAC7Dhc,EAAAC,EAAAC,cAAA,KAAGC,UAAU,+BCnJZwc,GAAY,WAA0B,IAAzBC,EAAyBzb,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAAAyW,EACvBC,mBAAS+E,GADc9E,EAAA/T,OAAAwD,EAAA,EAAAxD,CAAA6T,EAAA,GAC1CjS,EAD0CmS,EAAA,GACnCgC,EADmChC,EAAA,GAGjD,MAAO,CAACnS,EADO,kBAAMmU,GAAUnU,MAIpBkX,GAAW,WAAuB,IAAtBD,EAAsBzb,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAP,GAAO8W,EACnBJ,mBAAS+E,GADU1E,EAAAnU,OAAAwD,EAAA,EAAAxD,CAAAkU,EAAA,GACtCtS,EADsCuS,EAAA,GAC/B4B,EAD+B5B,EAAA,GAE7C,MAAO,CACL,CACEvS,QACA0C,SAAU,SAAAuK,GAAK,OAAIkH,EAASlH,EAAMO,OAAOxN,SAE3CmU,ICCS+B,WAAgBpY,IAAMC,cAAc,KAEpCoZ,GAAS,SAAAnd,GAAqE,IAAlE2D,EAAkE3D,EAAlE2D,OAAQ2H,EAA0DtL,EAA1DsL,MAAOqP,EAAmD3a,EAAnD2a,YAAamB,EAAsC9b,EAAtC8b,WAAYC,EAA0B/b,EAA1B+b,UAAWC,EAAehc,EAAfgc,SAEpEpa,EAAOgH,qBAAW/E,GAFiEkQ,EAGjEnL,qBAAWqT,IAA3B9Y,EAHiF4Q,EAGjF5Q,MAAOmX,EAH0EvG,EAG1EuG,KACPlZ,EAAawH,qBAAW0S,IAAxBla,SACU+a,EAAmBvT,qBAAWgC,IAAxCxJ,SALiFgc,EAOlEJ,KAPkEK,EAAAjZ,OAAAwD,EAAA,EAAAxD,CAAAgZ,EAAA,GAOlFzS,EAPkF0S,EAAA,GAO5EvI,EAP4EuI,EAAA,GAAApF,EAQzDC,mBAAS,GARgDC,EAAA/T,OAAAwD,EAAA,EAAAxD,CAAA6T,EAAA,GAQlFpO,EARkFsO,EAAA,GAQxEmF,EARwEnF,EAAA,GAAAG,EAS3DJ,mBAAS,KATkDK,EAAAnU,OAAAwD,EAAA,EAAAxD,CAAAkU,EAAA,GASlFqE,EATkFpE,EAAA,GASzEgF,EATyEhF,EAAA,GAAAE,EAUjEP,qBAViEQ,EAAAtU,OAAAwD,EAAA,EAAAxD,CAAAqU,EAAA,GAUlF+E,EAVkF9E,EAAA,GAU5E+E,EAV4E/E,EAAA,GAanFgF,EAAkB,SAAA9R,GACtBuQ,EAAe,CACb7a,KAAM,wBACNC,QAAS,CACPiK,GAAIrI,EAAMC,IACVwI,gBAKAlI,EAAe,WAAgC,IAA/BkI,EAA+BpK,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAnB,SAAAwE,GAAK,OAAIA,GACzC,OAAO+R,EAAsB5U,EAAOwI,aAAQhI,EAAQiI,GAAYhK,GAAMoB,KAAK,SAAAW,GAAM,OAC/E+Z,EAAgB,SAAAhB,GACdA,EAAM/S,QAAQ2B,GAAS3H,OAKvB1D,EAAOyJ,IAAM/F,EAAOkG,SAAU,SAAWlG,EAAOkG,SAASpI,OAAS,EAClEkc,EAAU7T,IAAKnG,EAAOkG,SAAU,SAAWlG,EAAOkG,SAASpI,OAAS,EAE1E,OACEpB,EAAAC,EAAAC,cAAA,OACEC,UAAU,SACVka,WAAYJ,EACZK,YAAa,SAAA1H,GACXsK,EAAW,OACXtK,EAAM2J,aAAaC,WAAa,OAChC5J,EAAMvF,kBACNiN,KAEFoB,UAAW,SAAA9I,GACTA,EAAMvF,kBACNqO,IACAwB,EAAW,QAEbzB,WAAY,WACVE,GAAYF,KAEdrb,MAAO,CACLkc,YAGFtc,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBAAgBN,QAAS4U,GACtCzU,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OACEC,UAAU,qBACVN,QAAS,SAAA+S,GACPA,EAAMC,iBACND,EAAMvF,kBACNhK,EAAa,SAAAC,GACXA,EAAO1D,MAAQA,IACd+C,KAAK,kBAAM7B,EAAmBC,EAAD,GAAAN,OAAcF,EAAU0K,GAAxB,wBAGlCjL,EAAAC,EAAAC,cAACkJ,EAAD,CAAWxJ,KAAMA,EAAMG,QAASud,MAEhCrD,GACAja,EAAAC,EAAAC,cAAA,KACEC,UAAU,6BACVN,QAAS,SAAA+S,GACPA,EAAMC,iBACND,EAAMvF,kBACF3D,OAAOC,QAAQ,oBtBIP,SAAC7G,EAAOQ,EAAQ/B,GAC1C,OAAOkB,MAAK,eAAAhC,OAAgBqC,EAAMC,IAAtB,aAAAtC,OAAqC6C,EAAOP,KAAO,CAC7DC,OAAQ,SACR1B,QAASA,EAAQC,KAEhBoB,KAAK,SAAAX,GACJ,IAAKA,EAASC,GAAI,MAAM,IAAIE,MAAM,gBAEnCS,MAAMhB,GsBXO8V,CAAsB5U,EAAOQ,EAAQ/B,GAClCoB,KAAK,kBACJ0a,EAAgB,SAAAhB,GACdA,EAAM/S,QAAU+S,EAAM/S,QAAQ8B,OAAO,SAAAmS,GAAC,OAAIA,EAAExa,MAAQO,EAAOP,UAG9DJ,KAAK,kBAAM7B,EAAmBC,EAAD,GAAAN,OAAcF,EAAU0K,GAAxB,oBA1B1C,cA+BgBA,EAAQ,EA/BxB,YAiCEjL,EAAAC,EAAAC,cAACuc,GAAD,CACExC,KAAMA,EACNpI,YAAY,OACZ5Q,KAAK,SACL0E,MAAOrC,EAAOqF,eACd4C,UAAW,SAAA5F,GAAK,OAAIuC,SAASvC,EAAO,KACpC0C,SAAU,SAAAM,GAAc,OACtBtF,EAAa,SAAAC,GACXA,EAAOqF,eAAiBA,IACvBhG,KAAK,kBAAM7B,EAAmBC,EAAD,GAAAN,OAAcF,EAAU0K,GAAxB,qCAItCjL,EAAAC,EAAAC,cAAA,OAAKC,UAAU,uBACZmK,EAAOtK,EAAAC,EAAAC,cAAA,KAAGC,UAAU,sBAAyBH,EAAAC,EAAAC,cAAA,KAAGC,UAAU,0BAG/DH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,YACbH,EAAAC,EAAAC,cAAC2b,GAAcvV,SAAf,CAAwBX,MAAO,CAAErC,SAAQ2H,UACtCX,GACChH,EAAOkG,SAASD,IAAI,SAACiS,EAAS3a,GAAV,OAClBb,EAAAC,EAAAC,cAACsd,GAAD,CACE9X,IAAK8V,EAAQzY,IACbyY,QAASA,EACTvQ,MAAOpK,EACP8a,cAAmBta,IAAT8b,EACV7C,YAAa,WACX8C,EAAQvc,IAEV4a,WAAY,WACN5a,IAAiBsc,IACnBC,EAAQvc,GACRyC,EAAOkG,SAAW8B,aAAQhI,EAAOkG,SAAU,SAAA6S,GACzC,IAAMoB,EAAMpB,EAAMxb,GAClBwb,EAAMxb,GAAgBwb,EAAMc,GAC5Bd,EAAMc,GAAQM,MAIpB/B,UAAW,WACTrY,IAAeV,KAAK,kBAClB7B,EAAmBC,EAAD,GAAAN,OAAcG,EAAWqK,EAAOpK,GAAhC,mBAEpBuc,WAOVnD,OAwCA5Y,EAvCArB,EAAAC,EAAAC,cAACwU,EAAA,SAAD,KACGpK,GACCtK,EAAAC,EAAAC,cAAA,OACEC,UAAU,gCACVka,WAAW,EACXC,YAAa,SAAA1H,GAEXA,EAAMC,iBACND,EAAMvF,oBAGRrN,EAAAC,EAAAC,cAAA,SACEe,KAAK,SACLd,UAAU,eACVC,MAAO,CAAEgP,MAAO,QAChB/G,SAAU,SAAAuK,GAAK,OAAIqK,EAAY/U,SAAS0K,EAAMO,OAAOxN,MAAO,MAC5DA,MAAO6D,IAETxJ,EAAAC,EAAAC,cAAA,UACEC,UAAU,wBACVN,QAAOkE,OAAA2Z,GAAA,EAAA3Z,CAAA4Z,GAAA1d,EAAA2d,KAAE,SAAAC,IAAA,IAAAC,EAAAC,EAAA9Q,EAAA,OAAA0Q,GAAA1d,EAAA+d,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OACDL,EAAQtU,GAAY,EADnBuU,EAAAJ,GAAA1d,EAAA2d,KAAA,SAAAG,EAEE9Q,GAFF,IAAAmR,EAAA,OAAAT,GAAA1d,EAAA+d,KAAA,SAAAK,GAAA,cAAAA,EAAAH,KAAAG,EAAAF,MAAA,cAAAE,EAAAF,KAAA,EAGoBzG,EAAoB5U,EAAOQ,EAAQ/B,GAHvD,OAGC6c,EAHDC,EAAAC,KAILjB,EAAgB,SAAAhB,GACdA,EAAM/S,QAAQ2B,GAAOzB,SAASwF,KAAKoP,KALhC,wBAAAC,EAAAE,SAAAR,EAAArZ,QAEEuI,EAAI,EAFN,YAESA,EAAI6Q,GAFb,CAAAG,EAAAE,KAAA,eAAAF,EAAAO,cAAAT,EAEE9Q,GAFF,eAEoBA,IAFpBgR,EAAAE,KAAA,eAQPrd,EAAmBC,EAAD,GAAAN,OAAcF,EAAU0K,GAAxB,aAAAxK,OAA0Cqd,EAA1C,cAClBb,EAAY,GATL,yBAAAgB,EAAAM,SAAAV,EAAAnZ,UAYT1E,EAAAC,EAAAC,cAAA,KAAGC,UAAU,gBAdf,oDChKDyb,GAAenY,IAAMC,cAAc,IAE1C+a,GAAW,SAAA9e,GAAA,IAAGyK,EAAHzK,EAAGyK,IAAKmJ,EAAR5T,EAAQ4T,SAAUC,EAAlB7T,EAAkB6T,MAAOlL,EAAzB3I,EAAyB2I,SAAzB,OAAA3I,EAAmCsa,KAK9C1G,EACFvT,EAAAC,EAAAC,cAAA,QAAMC,UAAU,QACdH,EAAAC,EAAAC,cAACgK,EAADnG,OAAAC,OAAA,GAASoG,EAAT,CAAcjK,UAAS,oBAEvB,KAPFH,EAAAC,EAAAC,cAAA,QAAML,QAAS0T,EAAWjL,EAAWkL,EAAOrT,UAAU,QACpDH,EAAAC,EAAAC,cAACgK,EAADnG,OAAAC,OAAA,GAASoG,EAAT,CAAcjK,UAAS,kBAAAM,OAAoB8S,EAAW,WAAa,SAQ5DmL,GAAQC,aAAW,SAAAvY,GAAwB,IAArBwY,EAAqBxY,EAArBwY,MAAOC,EAAczY,EAAdyY,QAElCtd,EAAOgH,qBAAW/E,GAF8BkQ,EAMlDnL,qBAAWgC,IAFJE,EAJ2CiJ,EAIpDvO,MAASsF,OACCqR,EAL0CpI,EAKpD3S,SALoD6W,EAOxBC,mBAAS,GAPeC,EAAA/T,OAAAwD,EAAA,EAAAxD,CAAA6T,EAAA,GAO/CtO,EAP+CwO,EAAA,GAOtCgH,EAPsChH,EAAA,GAQ9C3Q,EAASoB,qBAAW/B,GAApBW,KACApG,EAAawH,qBAAW0S,IAAxBla,SAT8CkX,EAW9BJ,qBAX8BK,EAAAnU,OAAAwD,EAAA,EAAAxD,CAAAkU,EAAA,GAW/CkF,EAX+CjF,EAAA,GAWzCkF,EAXyClF,EAAA,GAAA6E,EAY/BJ,IAAU,GAZqBK,EAAAjZ,OAAAwD,EAAA,EAAAxD,CAAAgZ,EAAA,GAY/C9C,EAZ+C+C,EAAA,GAYzCvI,EAZyCuI,EAAA,GAchD+B,EAAUvF,mBAGZ1W,EAAQqH,KAAKM,EAAQ,CAAC,MAAOmU,EAAMI,OAAO7T,KAC9C8N,oBACE,WACOnW,GvBhCa,SAACqI,EAAI5J,GAC3B,OAAOkB,MAAK,eAAAhC,OAAgB0K,GAAM,CAChC7J,QAASA,EAAQC,KAEhBoB,KAAKZ,GACLa,MAAMhB,GuB4BH8V,CAAkBkH,EAAMI,OAAO7T,GAAI5J,GAAMoB,KAAK,SAAAG,GAC5CgZ,EAAe,CAAE7a,KAAM,MAAOC,QAAS,CAAE4B,cAI/C,CAAC8b,EAAMI,OAAO7T,KAIhB,IAAMtI,EAAc,WAAgC,IAA/B0I,EAA+BpK,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAnB,SAAAwE,GAAK,OAAIA,GACxC,OAAO+R,EAAqBpM,aAAQxI,EAAOyI,GAAYhK,GAAMoB,KAAK,SAAAG,GAChEgZ,EAAe,CAAE7a,KAAM,SAAUC,QAAS,CAAEiK,GAAIrI,EAAMC,IAAKD,cAGzDmc,EAAc,SAAAC,GACG,IAAjBA,EAAM9d,QvBZmB,SAAC0B,EAAOqc,EAAM5d,GAC7C,IAAM4T,EAAO,IAAIiK,SAEjB,OADAjK,EAAKkK,OAAO,OAAQF,GACb1c,MAAK,eAAAhC,OAAgBqC,EAAMC,IAAtB,WAAoC,CAC9CC,OAAQ,OACRC,KAAMkS,EACN7T,QAAS,CACPE,OAAQ,mBACRE,cAAa,UAAAjB,OAAYc,EAAKI,UAG/BgB,KAAKZ,GACLa,MAAMhB,GuBCL8V,CAA2B5U,EAAOoc,EAAM,GAAI3d,GACzCoB,KAAK,SAAAG,GACJgZ,EAAe,CAAE7a,KAAM,SAAUC,QAAS,CAAEiK,GAAIrI,EAAMC,IAAKD,aAE5DH,KAAK,kBAAM7B,EAAmBC,EAAD,GAAAN,OAAcqC,EAAM2F,MAApB,yBAIpC,OACEzI,EAAAC,EAAAC,cAAA,OAAKC,UAAU,6BACX2C,EAKA9C,EAAAC,EAAAC,cAACwU,EAAA,SAAD,KACE1U,EAAAC,EAAAC,cAAA,KACEL,QAAS,kBAAMgf,EAAQS,UACvBnf,UAAU,iCACVC,MAAO,CACL6I,IAAK,OACLyQ,KAAM,OACN1Q,SAAU,WACV3I,MAAO,UACPC,OAAQ,WAEVmI,MAAM,iCAERzI,EAAAC,EAAAC,cAAA,OAAKC,UAAU,6BAA6BC,MAAO,CAAE4I,SAAU,aAC7DhJ,EAAAC,EAAAC,cAAA,KACEL,QAAS4U,EACTtU,UAAS,OAAAM,OAASwZ,EAAO,UAAY,eAA5B,UACT7Z,MAAO,CACLC,MAAO,yBACP2I,SAAU,WACVC,IAAK,MACLC,MAAO,MACP5I,OAAQ,WAEVmI,MAAK,YAAAhI,OAAcwZ,EAAO,OAAS,QAA9B,8BAEPja,EAAAC,EAAAC,cAAA,OAAKC,UAAU,UACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SAASC,MAAO,CAAEmf,KAAM,YAAahP,cAAe,WACjEvQ,EAAAC,EAAAC,cAAA,SACEsf,OAAO,oBACPve,KAAK,OACLmP,IAAK2O,EACL3e,MAAO,CAAE4N,QAAS,QAClB3F,SAAU,SAAAuK,GAAK,OAAIqM,EAAYrM,EAAMO,OAAO+L,UAE9Clf,EAAAC,EAAAC,cAAA,OACE2J,IAAK/G,EAAMgH,QAAUhH,EAAMgH,QAAQC,QAAQ,QAAS,UAAY,gBAChE3J,MAAO,CACL8N,OAAQ,QACRkB,MAAO,QACP9O,OAAQ2Z,EAAO,OAAS,WAE1BjQ,IAAI,eACJnK,QAAS,kBAAOoa,GAAQ8E,EAAQtF,QAAQgG,WAE1Czf,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBACZgH,EAAKoC,IAAI,SAAAa,GAAG,OACXpK,EAAAC,EAAAC,cAACwf,GAAD,CACEha,IAAK0E,EAAIrH,IACTqH,IAAKA,EACL6P,KAAMA,EACN1G,SAAUzQ,EAAMqE,KAAKgD,KAAK,SAAAF,GAAQ,OAAIA,IAAaG,EAAIrH,MACvDyQ,MAAO,kBACL3Q,EAAY,SAAAC,GACVA,EAAMqE,KAAK6H,KAAK5E,EAAIrH,OACnBJ,KAAK,kBAAM7B,EAAmBC,EAAD,GAAAN,OAAcqC,EAAM2F,MAApB,WAAAhI,OAAmC2J,EAAI1C,MAAvC,cAElCY,SAAU,kBACRzF,EAAY,SAAAC,GACVA,EAAMqE,KAAOrE,EAAMqE,KAAKiE,OAAO,SAAAnB,GAAQ,OAAIA,IAAaG,EAAIrH,QAC3DJ,KAAK,kBAAM7B,EAAmBC,EAAD,GAAAN,OAAcqC,EAAM2F,MAApB,WAAAhI,OAAmC2J,EAAI1C,MAAvC,sBAM1C1H,EAAAC,EAAAC,cAAA,OAAKC,UAAU,0BAA0BC,MAAO,CAAEuf,SAAU,IAC1D3f,EAAAC,EAAAC,cAAA,MAAIC,UAAU,eACZH,EAAAC,EAAAC,cAACuc,GAAD,CACExC,KAAMA,EACNtU,MAAO7C,EAAM2F,MACboJ,YAAY,QACZxJ,SAAU,SAAAI,GAAK,OACb5F,EAAY,SAAAC,GACVA,EAAM2F,MAAQA,IACb9F,KAAK,kBAAM7B,EAAmBC,EAAD,GAAAN,OAAcgI,EAAd,0BAEjC,IAVL,IAWI,IACFzI,EAAAC,EAAAC,cAACuc,GAAD,CACExC,KAAMA,EACNtU,MAAO7C,EAAM6F,eACbkJ,YAAY,OACZ5Q,KAAK,SACLsK,UAAW,SAAA5F,GAAK,OAAIuC,SAASvC,EAAO,KACpC0C,SAAU,SAAAM,GAAc,OACtB9F,EAAY,SAAAC,GACVA,EAAM6F,eAAiBA,IACtBhG,KAAK,kBAAM7B,EAAmBC,EAAD,GAAAN,OAAcqC,EAAM2F,MAApB,qCAItCzI,EAAAC,EAAAC,cAAA,MAAIC,UAAU,qCAAqC2C,EAAM8F,MAAMC,KAAK,MACpE7I,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACwc,GAAD,CACE1B,OAAO,EACPf,KAAMA,EACNtU,MAAO7C,EAAM8R,QACbxU,MAAO,CAAEgP,MAAO,QAChByC,YAAY,UACZiJ,KAAK,IACLzS,SAAU,SAAAuM,GAAO,OACf/R,EAAY,SAAAC,GACVA,EAAM8R,QAAUA,IACfjS,KAAK,kBAAM7B,EAAmBC,EAAD,GAAAN,OAAcqC,EAAM2F,MAApB,+BAM1CzI,EAAAC,EAAAC,cAAA,WACkB,SAAf4C,EAAM7B,KACLjB,EAAAC,EAAAC,cAACkJ,EAAD,CACExJ,KAAMkD,EAAMlD,KACZC,QAAS,kBACPgD,EAAY,SAAAC,GACVA,EAAMlD,MAAQkD,EAAMlD,OACnB+C,KAAK,kBAAM7B,EAAmBC,EAAD,GAAAN,OAAcqC,EAAM2F,MAApB,8BAIpCpH,GAGJrB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eACG,SAAf2C,EAAM7B,KACLjB,EAAAC,EAAAC,cAACwU,EAAA,SAAD,KACE1U,EAAAC,EAAAC,cAAC0b,GAAatV,SAAd,CAAuBX,MAAO,CAAEsU,OAAMnX,UACpC9C,EAAAC,EAAAC,cAAA,WACG4C,EAAMwG,QAAQC,IAAI,SAACjG,EAAQ9C,GAAT,OACjBR,EAAAC,EAAAC,cAAC0f,GAAD,CACEla,IAAKpC,EAAOP,IACZO,OAAQA,EACR2H,MAAOzK,EACPmb,cAAmBta,IAAT8b,EACV7C,YAAa,kBAAM8C,EAAQ5c,IAC3Bib,WAAY,WACNjb,IAAgB2c,IAClBC,EAAQ5c,GACRsC,EAAMwG,QAAUgC,aAAQxI,EAAMwG,QAAS,SAAA+S,GACrC,IAAMoB,EAAMpB,EAAM7b,GAClB6b,EAAM7b,GAAe6b,EAAMc,GAC3Bd,EAAMc,GAAQM,MAIpB/B,UAAW,WACT7Y,IAAcF,KAAK,kBACjB7B,EAAmBC,EAAD,GAAAN,OAAcF,EAAUC,GAAxB,mBAEpB4c,WAMRnD,OAkCA5Y,EAjCArB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iCACbH,EAAAC,EAAAC,cAAA,SACEe,KAAK,SACLd,UAAU,eACVC,MAAO,CAAEgP,MAAO,QAChB/G,SAAU,SAAAuK,GAAK,OAAIkM,EAAW5W,SAAS0K,EAAMO,OAAOxN,MAAO,MAC3DA,MAAO2D,IAETtJ,EAAAC,EAAAC,cAAA,UACEC,UAAU,wBACVN,QAAOkE,OAAA2Z,GAAA,EAAA3Z,CAAA4Z,GAAA1d,EAAA2d,KAAE,SAAAC,IAAA,IAAAC,EAAAC,EAAA9Q,EAAA,OAAA0Q,GAAA1d,EAAA+d,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OACDL,EAAQxU,GAAW,EADlByU,EAAAJ,GAAA1d,EAAA2d,KAAA,SAAAG,EAEE9Q,GAFF,IAAA4S,EAAA,OAAAlC,GAAA1d,EAAA+d,KAAA,SAAAK,GAAA,cAAAA,EAAAH,KAAAG,EAAAF,MAAA,cAAAE,EAAAF,KAAA,EAGmBzG,EAAmB5U,EAAOvB,GAH7C,OAGCse,EAHDxB,EAAAC,KAILxC,EAAe,CACb7a,KAAM,wBACNC,QAAS,CACPiK,GAAIrI,EAAMC,IACVwI,UAAW,SAAA8Q,GACTA,EAAM/S,QAAQ0F,KAAK6Q,OATpB,wBAAAxB,EAAAE,SAAAR,EAAArZ,QAEEuI,EAAI,EAFN,YAESA,EAAI6Q,GAFb,CAAAG,EAAAE,KAAA,eAAAF,EAAAO,cAAAT,EAEE9Q,GAFF,eAEoBA,IAFpBgR,EAAAE,KAAA,eAcPrd,EAAmBC,EAAD,GAAAN,OAAcqC,EAAM2F,MAApB,aAAAhI,OAAqCqd,EAArC,aAClBgB,EAAW,GAfJ,yBAAAb,EAAAM,SAAAV,EAAAnZ,UAkBT1E,EAAAC,EAAAC,cAAA,KAAGC,UAAU,gBApBf,yBA6BNkB,KAtMRrB,EAAAC,EAAAC,cAAA,MAAIC,UAAU,oBACZH,EAAAC,EAAAC,cAAA,KAAGC,UAAU,qCC3EVsG,GAAUvC,OAAO,WACjBwC,GAASxC,OAAO,UAOvBnC,GAAiB,SAAAC,GACrB,GAAIA,EAASC,GAAI,OAAOD,EAASE,OACjC,MAAM,IAAIC,MAAM,eA0DL2d,GAAQnc,cAtDnB,SAAAoc,EAAYlc,GAAO,IAAAW,EAAA,OAAAT,OAAAU,EAAA,EAAAV,CAAAW,KAAAqb,IACjBvb,EAAAT,OAAAgB,EAAA,EAAAhB,CAAAW,KAAAX,OAAAiB,EAAA,EAAAjB,CAAAgc,GAAA9a,KAAAP,KAAMb,KACDsB,MAAQ,CACXC,OAAQqB,GACR0O,UAAM9T,GAIRmD,EAAKwb,cAAgB7G,KAAS3U,EAAK/B,MAAO+B,EAAKX,MAAMsV,UAAY,EAAG,CAClEC,SAAS,EACTC,UAAU,IAVK7U,sFAejBE,KAAKsb,cAAc1G,sJAGb,IA7BM/X,EA6BNqE,EAAAlB,KACN,OAAOjC,MAAK,GAAAhC,OAAIiE,KAAKb,MAAMoc,UAAY,CACrC3e,SA/BUC,EA+BOmD,KAAKb,MAAMtC,KA/BT,CACvBC,OAAQ,mBACRC,eAAgB,mBAChBC,cAAa,UAAAjB,OAAYc,EAAKI,WA8BzBgB,KAAKZ,IACLY,KAAK,SAAAwS,GACJvP,EAAKK,SAAS,CACZb,OAAQsB,GACRyO,SAEFvP,EAAK/B,MAAMqc,WAAata,EAAK/B,MAAMqc,UAAU/K,kDAKjDzQ,KAAKsb,iDAIL,OACEhgB,EAAAC,EAAAC,cAACwU,EAAA,SAAD,KACGhQ,KAAKb,MAAM0C,SAAS,CACnBnB,OAAQV,KAAKS,MAAMC,OACnB+P,KAAMzQ,KAAKS,MAAMgQ,eA1CIvR,cCblBuc,GAAS,WACpB,OACEngB,EAAAC,EAAAC,cAAA,OACEC,UAAU,cACVC,MAAO,CACL2H,gBAAiB,yBACjB1H,MAAO,uBACPqO,QAAS,QAGX1O,EAAAC,EAAAC,cAAA,MAAIC,UAAU,UACZH,EAAAC,EAAAC,cAAC4I,EAAA,EAAD,CAAMC,GAAG,KAAT,iBAEF/I,EAAAC,EAAAC,cAAC4f,GAAD,CAAOG,SAAS,uBAAuB,SAAAtgB,GAAA,IAAGwV,EAAHxV,EAAGwV,KAAH,OAAcnV,EAAAC,EAAAC,cAAA,UAAKiV,EAAOA,EAAKzK,MAAQ,EAAzB,qBACrD1K,EAAAC,EAAAC,cAAC4I,EAAA,EAAD,CAAMC,GAAG,UACP/I,EAAAC,EAAAC,cAAA,KACEC,UAAU,yBACVC,MAAO,CACL6I,IAAK,OACLC,MAAO,OACPF,SAAU,WACV3I,MAAO,UACPC,OAAQ,WAEVmI,MAAM,oDCjBVrG,GAAYsV,GAAmB,GAE/BlN,GAAe,SAACtD,EAAOD,EAAQE,GACnC,MAAO,CACLD,MAAOA,EAAMqC,IAAI,SAAAtI,GAAI,MAAK,CACxBuK,KAAMvK,EACNyJ,MAAO,EACPzD,OAAQA,EAAOsC,IAAI,SAAAX,GAAK,MAAK,CAC3B4C,KAAM5C,EACN8B,MAAO,EACP9K,KAAM,EACNwgB,OAAQ,QAGZjZ,KAAMA,EAAKoC,IAAI,SAAAa,GAAG,MAAK,CACrBe,GAAIf,EAAIrH,IACRyI,KAAMpB,EAAI1C,MACVrH,MAAO+J,EAAI/J,MACXqK,MAAO,OAKA2V,GAAa1B,aAAW,SAAAhf,GAAiB,IAAdkf,EAAclf,EAAdkf,QAEhCtd,EAAOgH,qBAAW/E,GAF4BkQ,EAGpBnL,qBAAW/B,GAAnCS,EAH4CyM,EAG5CzM,OAAQC,EAHoCwM,EAGpCxM,MAAOC,EAH6BuM,EAG7BvM,KACfpG,EAAawH,qBAAWgC,IAAxBxJ,SAJ4C6W,EAK1BC,mBAASrN,GAAatD,EAAOD,EAAQE,IALX2Q,EAAA/T,OAAAwD,EAAA,EAAAxD,CAAA6T,EAAA,GAK7C0I,EAL6CxI,EAAA,GAKtCyI,EALsCzI,EAAA,GAiEpD,OATAmB,oBACE,WACEsH,EAAS/V,GAAatD,EAAOD,EAAQE,IAlDpB,SAACD,EAAOD,GAC3BC,EAAMsZ,QAAQ,SAAAvf,GAAI,OAChBmB,GAAS,SAAA3B,OAAUQ,EAAV,YAA0BM,GAChCoB,KAAK,SAAAwS,GAAI,OAAIoL,EAASjV,aAAQ,SAAA+Q,GAAeA,EAAMnV,MAAMiD,KAAK,SAAAgK,GAAC,OAAIlT,IAASkT,EAAE3I,OAAMd,MAAQyK,EAAKzK,WACjG/H,KAAK,kBACJsE,EAAOuZ,QAAQ,SAAA5X,GACbxG,GAAS,SAAA3B,OAAUQ,EAAV,YAAAR,OAAyBmI,EAAzB,YAA0CrH,GAAMoB,KAAK,SAAAwS,GAAI,OAChEoL,EACEjV,aACE,SAAA+Q,GACQA,EAAMnV,MAAMiD,KAAK,SAAAgK,GAAC,OAAIlT,IAASkT,EAAE3I,OAAMvE,OAAOkD,KAAK,SAAAsW,GAAC,OAAI7X,IAAU6X,EAAEjV,OAAMd,MAAQyK,EAAKzK,WAIrGtI,GAAS,SAAA3B,OAAUQ,EAAV,YAAAR,OAAyBmI,EAAzB,sBAAoDrH,GAAMoB,KAAK,SAAAwS,GAAI,OAC1EoL,EACEjV,aACE,SAAA+Q,GACQA,EAAMnV,MAAMiD,KAAK,SAAAgK,GAAC,OAAIlT,IAASkT,EAAE3I,OAAMvE,OAAOkD,KAAK,SAAAsW,GAAC,OAAI7X,IAAU6X,EAAEjV,OAAM5L,KAAOuV,EAAKzK,WAIpGtI,GAAS,SAAA3B,OAAUQ,EAAV,YAAAR,OAAyBmI,EAAzB,uBAAqDrH,GAAMoB,KAAK,SAAAwS,GAAI,OAC3EoL,EACEjV,aACE,SAAA+Q,GACQA,EAAMnV,MAAMiD,KAAK,SAAAgK,GAAC,OAAIlT,IAASkT,EAAE3I,OAAMvE,OAAOkD,KAAK,SAAAsW,GAAC,OAAI7X,IAAU6X,EAAEjV,OAAM4U,OAASjL,EAAKzK,iBAyB5GgW,CAAaxZ,EAAOD,GAhBJ,SAAAE,GAClBA,EAAKqZ,QAAQ,SAAApW,GAAG,OACdhI,GAAS,QAAA3B,OAAS2J,EAAIrH,IAAb,YAA4BxB,GAAMoB,KAAK,SAAAwS,GAAI,OAClDoL,EACEjV,aAAQ,SAAA+Q,GACNA,EAAMlV,KAAKgD,KAAK,SAAAgK,GAAC,OAAI/J,EAAIrH,MAAQoR,EAAEhJ,KAAIT,OAASyK,EAAKzK,aAY3DiW,CAAYxZ,IAEd,CAACD,EAAOD,EAAQE,IAIhBnH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gDACZmgB,EAAMpZ,MAAMqC,IAAI,SAACtI,EAAMgK,GAAP,OACfjL,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iBAAiBuF,IAAKuF,GACnCjL,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACbH,EAAAC,EAAAC,cAAA,MAAIC,UAAU,0BACXc,EAAKyJ,MADR,IACgBzJ,EAAKuK,MAErBxL,EAAAC,EAAAC,cAAA,WACG0gB,KAAQ3f,EAAKgG,OAAQ,CAAC,SAAU,CAAC,SAASsC,IAAI,SAACX,EAAOqC,GAAR,OAC7CjL,EAAAC,EAAAC,cAACwU,EAAA,SAAD,CAAUhP,IAAKuF,GACbjL,EAAAC,EAAAC,cAAA,WACG,IACA0I,EAAM8B,MAFT,IAEiB9B,EAAM4C,KAFvB,MAEgC5C,EAAM8B,OAAuB,IAAb9B,EAAMhJ,KAAcgJ,EAAM8B,OAAOmW,QAAQ,GAAK,EAF9F,UAGQ,KAER7gB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kBACbH,EAAAC,EAAAC,cAAA,OACEC,UAAU,sBACVuW,KAAK,cACLtW,MAAO,CACLgP,MAAK,eAAA3O,OAAiC,IAAfmI,EAAMwX,OAC3BQ,KAAQ3f,EAAKgG,OAAQ,CAAC,SAAU,CAAC,SAAS,GAAGyD,MAD1C,QAIN9B,EAAMwX,QAERxX,EAAM8B,MAAQ9B,EAAMwX,OAASxX,EAAMhJ,KAClCI,EAAAC,EAAAC,cAAA,OACEC,UAAU,uBACVuW,KAAK,cACLtW,MAAO,CACLgP,MAAK,eAAA3O,OAA8D,KAA3CmI,EAAM8B,MAAQ9B,EAAMwX,OAASxX,EAAMhJ,MACzDghB,KAAQ3f,EAAKgG,OAAQ,CAAC,SAAU,CAAC,SAAS,GAAGyD,MAD1C,QAIN9B,EAAM8B,MAAQ9B,EAAMwX,OAASxX,EAAMhJ,WAGtCyB,EAEFrB,EAAAC,EAAAC,cAAA,OACEC,UAAU,oBACVuW,KAAK,cACLtW,MAAO,CACLgP,MAAK,eAAA3O,OAA+B,IAAbmI,EAAMhJ,KAC3BghB,KAAQ3f,EAAKgG,OAAQ,CAAC,SAAU,CAAC,SAAS,GAAGyD,MAD1C,QAIN9B,EAAMhJ,eASvBI,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iCACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kCACZmgB,EAAMnZ,KAAKoC,IAAI,SAACa,EAAKa,GAAN,OACdjL,EAAAC,EAAAC,cAAA,MACEC,UAAU,uCACVC,MAAO,CACLE,OAAQ,WAEVoF,IAAKuF,GAELjL,EAAAC,EAAAC,cAACgK,EAAD,CACExC,MAAK,GAAAjH,OAAK2J,EAAIM,MAAT,KAAAjK,OAAkB2J,EAAIoB,MAC3BnL,MAAO+J,EAAI/J,MACXR,QAAS,WACPkB,EAAS,CAAEE,KAAM,kBACjBF,EAAS,CAAEE,KAAM,kBAAmBC,QAAS,CAAEsK,KAAM,OAAQ7F,MAAO,CAACyE,EAAIe,OACzE0T,EAAQ7P,KAAK,gBC7KzB8R,UAAS,SAAAlN,GACb,OAAOmN,KAAKC,MAAMD,KAAKD,SAAWC,KAAKC,MAAMpN,MAElCqN,GAAgB,WAC3B,UAAAxgB,OAAWqgB,GAAO,KACfpgB,SAAS,IACTC,SAAS,EAAG,MAFfF,OAEsBqgB,GAAO,KAC1BpgB,SAAS,IACTC,SAAS,EAAG,MAJfF,OAIsBqgB,GAAO,KAC1BpgB,SAAS,IACTC,SAAS,EAAG,OCDJugB,GAAiB,SAAAvhB,GAAiC,IAA9ByK,EAA8BzK,EAA9ByK,IAAK9B,EAAyB3I,EAAzB2I,SAAUgN,EAAe3V,EAAf2V,SAAeyH,EAClCJ,IAAU,GADwBK,EAAAjZ,OAAAwD,EAAA,EAAAxD,CAAAgZ,EAAA,GACtDhD,EADsDiD,EAAA,GAChDmE,EADgDnE,EAAA,GAAAoE,EAEnCvE,GAASzS,EAAI/J,OAAS,IAFaghB,EAAAtd,OAAAwD,EAAA,EAAAxD,CAAAqd,EAAA,GAEtD/gB,EAFsDghB,EAAA,GAE/CC,EAF+CD,EAAA,GAAAE,EAG7C1E,GAASzS,EAAI1C,OAAS,IAA/BA,EAHsD3D,OAAAwD,EAAA,EAAAxD,CAAAwd,EAAA,MAKvDhgB,EAAOgH,qBAAW/E,GAChB2D,EAASoB,qBAAW/B,GAApBW,KAER,OACEnH,EAAAC,EAAAC,cAAA,OACEC,UAAU,mBACVC,MAAO,CACLohB,SAAU,WAIVzH,EAqBA/Z,EAAAC,EAAAC,cAAA,QAAMC,UAAU,qBACdH,EAAAC,EAAAC,cAAA,QAAA6D,OAAAC,OAAA,CAAO/C,KAAK,QAAQd,UAAU,4BAA+BE,IAC7DL,EAAAC,EAAAC,cAAA,QAAA6D,OAAAC,OAAA,CAAO/C,KAAK,OAAOd,UAAU,oBAAoB0R,YAAY,SAAYnK,IACzE1H,EAAAC,EAAAC,cAAA,UACEe,KAAK,SACLd,UAAU,2BACVN,QAAS,WACPyhB,EAASL,QAGXjhB,EAAAC,EAAAC,cAAA,KAAGC,UAAU,qBAEfH,EAAAC,EAAAC,cAAA,UACEe,KAAK,SACLd,UAAU,8BACVN,QAAS,YxBpCI,SAACuK,EAAK7I,GAC7B,OAAOkB,MAAK,aAAAhC,OAAc2J,EAAIrH,KAAO,CACnCC,OAAQ,MACRC,KAAMC,KAAKC,UAAUiH,GACrB9I,QAASA,EAAQC,KAChBoB,KAAKZ,IwBgCI0f,CACE,CACE1e,IAAKqH,EAAIrH,IACT1C,MAAOA,EAAMsF,MACb+B,MAAOA,EAAM/B,OAEfpE,GAECoB,KAAK2S,GACL3S,KAAKwe,IAEV3J,UAAW9P,EAAM/B,OAASwB,EAAKgD,KAAK,SAAAC,GAAG,OAAIA,EAAI1C,MAAM2C,gBAAkB3C,EAAM/B,MAAM0E,iBAEnFrK,EAAAC,EAAAC,cAAA,KAAGC,UAAU,kBAEfH,EAAAC,EAAAC,cAACgK,EAAD,CAAK9J,MAAO,CAAEshB,WAAY,QAAUrhB,MAAOA,EAAMsF,MAAO+B,MAAOA,EAAM/B,OAAS,WAnDhF3F,EAAAC,EAAAC,cAACwU,EAAA,SAAD,KACE1U,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACgK,EAADnG,OAAAC,OAAA,GAASoG,EAAT,CAAczC,KAAG,MAEnB3H,EAAAC,EAAAC,cAAA,UAAQe,KAAK,SAASd,UAAU,uBAAuBN,QAASshB,GAC9DnhB,EAAAC,EAAAC,cAAA,KAAGC,UAAU,uBAEfH,EAAAC,EAAAC,cAAA,UACEe,KAAK,SACLd,UAAU,sBACVN,QAAS,SAAA+Y,GACHlP,OAAOC,QAAQ,iBxBJR,SAACS,EAAK7I,GAC7B,OAAOkB,MAAK,aAAAhC,OAAc2J,EAAIrH,KAAO,CACnCC,OAAQ,SACR1B,QAASA,EAAQC,KAChBoB,KAAKZ,GwBCM4f,CAAUvX,EAAK7I,GAAMoB,KAAK2F,KAI9BtI,EAAAC,EAAAC,cAAA,KAAGC,UAAU,qBC/BZyhB,GAAU,WAErB,IAAMrgB,EAAOgH,qBAAW/E,GAFGkQ,EAGLnL,qBAAW/B,GAAzBW,EAHmBuM,EAGnBvM,KACF0a,GAAUjb,EAJW8M,EAGb9M,KACM,QAJOwa,EAODvE,GAASoE,MAPRI,EAAAtd,OAAAwD,EAAA,EAAAxD,CAAAqd,EAAA,GAOpB/gB,EAPoBghB,EAAA,GAObC,EAPaD,EAAA,GAAAE,EAQD1E,GAAS,IARRiF,EAAA/d,OAAAwD,EAAA,EAAAxD,CAAAwd,EAAA,GAQpB7Z,EARoBoa,EAAA,GAQbC,EARaD,EAAA,GAU3B,OACE9hB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,uBACZgH,EAAKoC,IAAI,SAACa,EAAKa,GAAN,OACRjL,EAAAC,EAAAC,cAAC8hB,GAAD,CACEtc,IAAK0E,EAAIrH,IACTqH,IAAKA,EACL9B,SAAU,kBAAMuZ,EAAQ,SAAA1a,GAAI,OAAIA,EAAKiE,OAAO,SAAA+I,GAAC,OAAIA,EAAEpR,MAAQqH,EAAIrH,SAC/DuS,SAAU,SAAAlL,GACRyX,EAAQ,SAAA1a,GAAI,OACVmE,aAAQnE,EAAM,SAAAkV,GACZA,EAAMpR,GAASb,WAMzBpK,EAAAC,EAAAC,cAAA,QAAMC,UAAU,eACdH,EAAAC,EAAAC,cAAA,QAAA6D,OAAAC,OAAA,CAAO/C,KAAK,QAAQd,UAAU,4BAA+BE,IAC7DL,EAAAC,EAAAC,cAAA,QAAA6D,OAAAC,OAAA,CAAO/C,KAAK,OAAOd,UAAU,oBAAoB0R,YAAY,SAAYnK,IACzE1H,EAAAC,EAAAC,cAAA,UACEe,KAAK,SACLd,UAAU,2BACVN,QAAS,WACPyhB,EAASL,QAGXjhB,EAAAC,EAAAC,cAAA,KAAGC,UAAU,qBAEfH,EAAAC,EAAAC,cAAA,UACEe,KAAK,SACLd,UAAU,8BACVN,QAAS,YzBnCM,SAACuK,EAAK7I,GAC7B,OAAOkB,MAAK,YAAc,CACxBO,OAAQ,OACRC,KAAMC,KAAKC,UAAUiH,GACrB9I,QAASA,EAAQC,KAChBoB,KAAKZ,IyB+BEkgB,CACE,CACEva,MAAOA,EAAM/B,MACbtF,MAAOA,EAAMsF,OAEfpE,GAECoB,KAAK,SAAAyH,GAAG,OAAIyX,EAAQ,SAAA1a,GAAI,OAAApD,OAAAiH,GAAA,EAAAjH,CAAQoD,GAAR1G,OAAA,CAAc2J,QACtCzH,KAAK,SAAAiW,GACJ0I,EAASL,MACTc,EAAS,OAGfvK,UAAW9P,EAAM/B,OAASwB,EAAKgD,KAAK,SAAAC,GAAG,OAAIA,EAAI1C,MAAM2C,gBAAkB3C,EAAM/B,MAAM0E,iBAEnFrK,EAAAC,EAAAC,cAAA,KAAGC,UAAU,kBAEfH,EAAAC,EAAAC,cAACgK,EAAD,CAAK9J,MAAO,CAAEshB,WAAY,QAAUrhB,MAAOA,EAAMsF,MAAO+B,MAAOA,EAAM/B,OAAS,aClEzEuc,WAAe,SAAAviB,GAA6BA,EAA1BsL,MAA0B,IAAnBmQ,EAAmBzb,EAAnByb,aAAmBxD,EACTC,oBAAS,GADAC,EAAA/T,OAAAwD,EAAA,EAAAxD,CAAA6T,EAAA,GAChDuK,EADgDrK,EAAA,GAC/BsK,EAD+BtK,EAAA,GAAAG,EAETJ,oBAAS,GAFAK,EAAAnU,OAAAwD,EAAA,EAAAxD,CAAAkU,EAAA,GAEhDoK,EAFgDnK,EAAA,GAE/BoK,EAF+BpK,EAAA,GAG/CnX,EAAawH,qBAAW0S,IAAxBla,SACR,OACEf,EAAAC,EAAAC,cAAA,OACEC,UAAS,gBAAAM,OAAkB2a,EAAana,KAA/B,KAAAR,OAAuC4hB,EAAkB,MAAQ,MAC1EE,eAAgB,SAAA3P,GACc,aAAxBA,EAAM4P,cACRJ,GAAmB,GACc,cAAxBxP,EAAM4P,eACfzhB,EAAS,CAAEE,KAAM,QAASC,QAAS,CAAEiK,GAAIiQ,EAAajQ,QAI1DnL,EAAAC,EAAAC,cAAA,OAAKC,UAAU,wBAAwBib,EAAapa,SACpDhB,EAAAC,EAAAC,cAAA,OACEC,UAAS,kDAAAM,OAAoD0hB,EAAkB,UAAY,IAC3F/hB,MAAOiiB,EAAkB,CAAEjT,MAAO,KAAQ,GAC1CmT,eAAgB,kBAAMD,GAAmB,SClBpCG,WAAoB,WAAM,IAC7BnH,EAAkB/S,qBAAW0S,IAA7BK,cACR,OACEtb,EAAAC,EAAAC,cAAA,OAAKC,UAAU,qBACZmb,EAAc/R,IAAI,SAAC6R,EAAcnQ,GAAf,OACjBjL,EAAAC,EAAAC,cAACwiB,GAAD,CAAchd,IAAK0V,EAAajQ,GAAIF,MAAOA,EAAOmQ,aAAcA,SCmBzDuH,oLAjBX,OACE3iB,EAAAC,EAAAC,cAACwU,EAAA,SAAD,KACE1U,EAAAC,EAAAC,cAAC0iB,EAAA,EAAD,KACE5iB,EAAAC,EAAAC,cAACwU,EAAA,SAAD,KACE1U,EAAAC,EAAAC,cAAC2iB,GAAD,MACA7iB,EAAAC,EAAAC,cAAC4iB,GAAD,MACA9iB,EAAAC,EAAAC,cAAC6iB,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,IAAIC,UAAWvL,KACjC3X,EAAAC,EAAAC,cAAC6iB,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,aAAaC,UAAWxE,KAC1C1e,EAAAC,EAAAC,cAAC6iB,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,SAASC,UAAW7C,KACtCrgB,EAAAC,EAAAC,cAAC6iB,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,SAASC,UAAWtB,eAXhChe,aC+BLuf,GAAQxf,6MArCnBwB,MAAQ,CACNe,SAAU,4EAGH,IAAAN,EAAAlB,KACP,OACE1E,EAAAC,EAAAC,cAAA,WACGwE,KAAKb,MAAMtC,KAAK6D,SAAWhB,EAC1BpE,EAAAC,EAAAC,cAAA,OAAKC,UAAU,qBAAqBuW,KAAK,SAAzC,qBAIArV,EAEFrB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACbH,EAAAC,EAAAC,cAAA,SAAO6W,QAAQ,YAAf,YACA/W,EAAAC,EAAAC,cAAA,SACEe,KAAK,OACLd,UAAU,eACVgL,GAAG,WACH6L,mBAAiB,WACjBnF,YAAY,iBACZlM,MAAOjB,KAAKS,MAAMe,SAClBmC,SAAU,SAAAuK,GAAK,OAAIhN,EAAKK,SAAS,CAAEC,SAAU0M,EAAMO,OAAOxN,SAC1DgV,UAAW,SAAA/H,GACS,UAAdA,EAAMlN,KAAiBE,EAAK/B,MAAMtC,KAAK8D,MAAMO,EAAKT,MAAMe,cAIlElG,EAAAC,EAAAC,cAAA,UAAQe,KAAK,SAASd,UAAU,kBAAkBN,QAAS,kBAAM+F,EAAK/B,MAAMtC,KAAK8D,MAAMO,EAAKT,MAAMe,YAAlG,kBA9BuBtC,cCO/Bwf,IAAS3V,OACPzN,EAAAC,EAAAC,cAACmjB,EAAD,KACErjB,EAAAC,EAAAC,cAACsD,EAAYM,SAAb,KACG,SAAAnE,GAAA,IAAGgC,EAAHhC,EAAGgC,MAAH,OACCA,EACE3B,EAAAC,EAAAC,cAACojB,EAAD,CAAqB3hB,MAAOA,GAC1B3B,EAAAC,EAAAC,cAACqjB,GAAD,KACEvjB,EAAAC,EAAAC,cAACsjB,GAAD,KACExjB,EAAAC,EAAAC,cAACujB,GAAD,SAKNzjB,EAAAC,EAAAC,cAACijB,GAAD,SAKRO,SAASC,eAAe","file":"static/js/main.69c496d0.chunk.js","sourcesContent":["import { createNotification } from \"../Movie/Movie.util\";\n\nconst headers = user => ({\n  Accept: \"application/json\",\n  \"Content-Type\": \"application/json\",\n  Authorization: `Bearer ${user.token}`\n});\n\nexport const handleError = error => {\n  createNotification(error.message, \"error\");\n  throw error;\n};\n\nconst handleResponse = response => {\n  if (response.ok) return response.json();\n  throw new Error(\"Fetch fail\");\n};\n\nexport const getMovie = (id, user) => {\n  return fetch(`/api/movies/${id}`, {\n    headers: headers(user)\n  })\n    .then(handleResponse)\n    .catch(handleError);\n};\n\nlet controller;\nexport const getMovies = abortable => (search, user) => {\n  if (abortable && controller) {\n    controller.abort();\n  }\n  controller = new AbortController();\n  return fetch(`/api/movies?${search}`, {\n    headers: headers(user),\n    signal: controller.signal\n  })\n    .then(handleResponse)\n    .then(response => {\n      controller = null;\n      return response;\n    })\n    .catch(handleError);\n};\n\nexport const updateMovie = (movie, user) => {\n  return fetch(`/api/movies/${movie._id}`, {\n    method: \"PUT\",\n    body: JSON.stringify(movie),\n    headers: headers(user)\n  })\n    .then(handleResponse)\n    .catch(handleError);\n};\n\nexport const updateMoviePoster = (movie, file, user) => {\n  const data = new FormData();\n  data.append(\"file\", file);\n  return fetch(`/api/movies/${movie._id}/poster`, {\n    method: \"POST\",\n    body: data,\n    headers: {\n      Accept: \"application/json\",\n      Authorization: `Bearer ${user.token}`\n    }\n  })\n    .then(handleResponse)\n    .catch(handleError);\n};\n\nexport const deleteMovie = (movie, user) => {\n  return fetch(`/api/movies/${movie._id}`, {\n    method: \"DELETE\",\n    headers: headers(user)\n  })\n    .then(handleResponse)\n    .catch(handleError);\n};\n\nexport const addSeason = (movie, user) => {\n  return fetch(`/api/movies/${movie._id}/seasons`, {\n    method: \"POST\",\n    body: JSON.stringify(movie),\n    headers: headers(user)\n  })\n    .then(handleResponse)\n    .catch(handleError);\n};\n\nexport const updateSeason = (movie, season, user) => {\n  return fetch(`/api/movies/${movie._id}/seasons/${season._id}`, {\n    method: \"PUT\",\n    body: JSON.stringify(season),\n    headers: headers(user)\n  })\n    .then(handleResponse)\n    .catch(handleError);\n};\n\nexport const deleteSeason = (movie, season, user) => {\n  return fetch(`/api/movies/${movie._id}/seasons/${season._id}`, {\n    method: \"DELETE\",\n    headers: headers(user)\n  })\n    .then(response => {\n      if (!response.ok) throw new Error(\"Fetch fail\");\n    })\n    .catch(handleError);\n};\n\nexport const addEpisode = (movie, season, user) => {\n  return fetch(`/api/movies/${movie._id}/seasons/${season._id}/episodes`, {\n    method: \"POST\",\n    body: JSON.stringify(season),\n    headers: headers(user)\n  })\n    .then(handleResponse)\n    .catch(handleError);\n};\n\nexport const updateEpisode = (movie, season, episode, user) => {\n  return fetch(`/api/movies/${movie._id}/seasons/${season._id}/episodes/${episode._id}`, {\n    method: \"PUT\",\n    body: JSON.stringify(episode),\n    headers: headers(user)\n  }).then(handleResponse);\n};\n\nexport const deleteEpisode = (movie, season, episode, user) => {\n  return fetch(`/api/movies/${movie._id}/seasons/${season._id}/episodes/${episode._id}`, {\n    method: \"DELETE\",\n    headers: headers(user)\n  })\n    .then(response => {\n      if (!response.ok) throw new Error(\"Fetch fail\");\n    })\n    .catch(handleError);\n};\n","import React from \"react\";\n\nexport const MovieSeen = ({ seen, onClick, partial = false }) => (\n  <i\n    className=\"fas fa-eye\"\n    style={{\n      color: partial && !seen ? \"var(--warning)\" : seen ? \"var(--success)\" : \"\",\n      cursor: \"pointer\"\n    }}\n    onClick={onClick}\n  />\n);\n","export const seasonTag = seasonIndex => {\n  return `S${(seasonIndex + 1).toString().padStart(2, \"0\")}`;\n};\nexport const episodeTag = (seasonIndex, episodeIndex) => {\n  return `${seasonTag(seasonIndex)}E${(episodeIndex + 1).toString().padStart(2, \"0\")}`;\n};\nexport const createNotification = (dispatch, content, type = \"success\") => {\n  dispatch({\n    type: \"ADD\",\n    payload: {\n      content,\n      type\n    }\n  });\n};\n","import React from \"react\";\n\nexport const UserContext = React.createContext();\nexport const withUser = Component => props => (\n  <UserContext.Consumer>{user => <Component {...props} user={user} />}</UserContext.Consumer>\n);\n\nexport const LOGOUT = Symbol();\nexport const LOGIN = Symbol();\nexport const LOGIN_FAILED = Symbol();\n\nconst handleResponse = response => {\n  if (response.ok) return response.json();\n  throw new Error(\"Fetch fail\");\n};\n\nexport class UserProvider extends React.Component {\n  state = {\n    token: null,\n    status: LOGOUT,\n    login: this.login.bind(this)\n  };\n\n  componentDidMount() {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      fetch(\"/account\", {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`\n        }\n      })\n        .then(handleResponse)\n        .then(({ exp }) => {\n          if (new Date() < new Date(exp * 1000)) this.setState({ token, status: LOGIN });\n        });\n    }\n  }\n\n  login(password) {\n    fetch(\"/login\", {\n      method: \"POST\",\n      body: JSON.stringify({ password }),\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      }\n    })\n      .then(handleResponse)\n      .then(({ token }) => {\n        this.setState({ token, status: LOGIN });\n        localStorage.setItem(\"token\", token);\n      })\n      .catch(() => this.setState({ status: LOGIN_FAILED }));\n  }\n\n  render() {\n    return <UserContext.Provider value={this.state}>{this.props.children}</UserContext.Provider>;\n  }\n}\n","const headers = user => ({\n  Accept: \"application/json\",\n  \"Content-Type\": \"application/json\",\n  Authorization: `Bearer ${user.token}`\n});\n\nconst handleResponse = response => {\n  if (response.ok) return response.json();\n  throw new Error(\"Fetch fail\");\n};\n\nexport const getTags = user => {\n  return fetch(`/api/tags`, {\n    headers: headers(user)\n  }).then(handleResponse);\n};\n\nexport const createTag = (tag, user) => {\n  return fetch(`/api/tags`, {\n    method: \"POST\",\n    body: JSON.stringify(tag),\n    headers: headers(user)\n  }).then(handleResponse);\n};\n\nexport const updateTag = (tag, user) => {\n  return fetch(`/api/tags/${tag._id}`, {\n    method: \"PUT\",\n    body: JSON.stringify(tag),\n    headers: headers(user)\n  }).then(handleResponse);\n};\n\nexport const deleteTag = (tag, user) => {\n  return fetch(`/api/tags/${tag._id}`, {\n    method: \"DELETE\",\n    headers: headers(user)\n  }).then(handleResponse);\n};\n","import React from \"react\";\nimport { getTags } from \"./Common/TagAPI\";\n\nexport const ApplicationContext = React.createContext();\nexport const withApplication = Component => props => (\n  <ApplicationContext.Consumer>\n    {application => <Component {...props} application={application} />}\n  </ApplicationContext.Consumer>\n);\n\nexport const LOADING = Symbol();\nexport const LOADED = Symbol();\n\nexport class ApplicationProvider extends React.Component {\n  set = field => fn => {\n    this.setState(state => ({ ...state, [field]: fn(state[field]) }));\n  };\n\n  componentDidMount() {\n    const options = {\n      headers: {\n        Authorization: `Bearer ${this.props.token}`\n      }\n    };\n\n    const handleResponse = response => {\n      if (response.ok) return response.json();\n      throw new Error(\"Fetch fail\");\n    };\n    Promise.all([\n      fetch(\"/api/movies/genre\", options).then(handleResponse),\n      fetch(\"/api/movies/type\", options).then(handleResponse),\n      getTags(this.props)\n    ]).then(([genres, types, tags]) => {\n      this.setState({\n        genres,\n        types,\n        tags,\n        status: LOADED\n      });\n    });\n  }\n  state = {\n    genres: [],\n    types: [],\n    tags: [],\n    status: LOADING,\n    set: this.set\n  };\n\n  render() {\n    return <ApplicationContext.Provider value={this.state}>{this.props.children}</ApplicationContext.Provider>;\n  }\n}\n","import React from \"react\";\nimport \"./Tag.css\";\n\nconst invertColor = hex => {\n  if (hex.indexOf(\"#\") === 0) {\n    hex = hex.slice(1);\n  }\n\n  const red = parseInt(hex.slice(0, 2), 16),\n    green = parseInt(hex.slice(2, 4), 16),\n    blue = parseInt(hex.slice(4, 6), 16);\n  return red * 0.299 + green * 0.587 + blue * 0.114 > 186 ? \"#000000\" : \"#FFFFFF\";\n};\n\nexport const Tag = ({ color, label, big, className = \"\", style = {}, onClick = () => void 0 }) => (\n  <span\n    className={`tag ${big ? \"big\" : \"\"} ${className}`}\n    style={{\n      backgroundColor: color,\n      color: `${invertColor(color)}`,\n      ...style\n    }}\n    onClick={onClick}\n  >\n    {label}\n  </span>\n);\n","import React, { useContext } from \"react\";\nimport \"./MovieList.css\";\nimport { Link } from \"react-router-dom\";\nimport { MovieSeen } from \"../Common/MovieSeen\";\nimport { deleteMovie, updateMovie } from \"../Common/MovieAPI\";\nimport every from \"lodash/every\";\nimport some from \"lodash/some\";\nimport { UserContext } from \"../Login/UserContext\";\nimport { ApplicationContext } from \"../ApplicationContext\";\nimport { Tag } from \"../Admin/Tag\";\n\nexport const MovieCard = ({ movie, onEdit, onChange, onDelete }) => {\n  const user = useContext(UserContext);\n  const { tags } = useContext(ApplicationContext);\n  const update = (field, value) => () => updateMovie({ ...movie, [field]: value }, user).then(onChange);\n\n  const title = `${movie.title}`;\n  const subtitle = `${movie.productionYear} - ${movie.genre.join(\",\")}`;\n\n  return (\n    <div className=\"card movie-card\">\n      <div className=\"card-body\">\n        <h5 className=\"card-title\">\n          <Link to={`movie/${movie._id}`}>\n            <div className=\"ellipsis\" title={title}>\n              {title}\n            </div>\n          </Link>\n        </h5>\n        <h6 className=\"card-subtitle mb-2 text-muted ellipsis\" title={subtitle}>\n          {subtitle}\n        </h6>\n        <div className=\"movie-card-actions\" style={{ position: \"absolute\", top: 2, right: 4 }}>\n          {movie.type !== \"Film\" && (\n            <i\n              className=\"fas fa-ban\"\n              style={{\n                cursor: \"pointer\",\n                color: movie.finished ? \"var(--danger)\" : \"black\"\n              }}\n              onClick={update(\"finished\", !movie.finished)}\n            />\n          )}\n          {movie.type === \"Film\" ? (\n            <MovieSeen seen={movie.seen} onClick={update(\"seen\", !movie.seen)} />\n          ) : (\n            <MovieSeen\n              seen={\n                every(movie.seasons.map(season => every(season.episodes, \"seen\") && season.episodes.length > 0)) &&\n                movie.seasons.length > 0\n              }\n              partial={\n                some(movie.seasons.map(season => some(season.episodes, \"seen\") && season.episodes.length > 0)) &&\n                movie.seasons.length > 0\n              }\n            />\n          )}\n          <i className=\"fas fa-pencil-alt\" onClick={onEdit} style={{ cursor: \"pointer\" }} />\n          <i\n            className=\"fas fa-trash\"\n            onClick={() => {\n              if (window.confirm()) {\n                deleteMovie(movie, user).then(onDelete);\n              }\n            }}\n            style={{ cursor: \"pointer\" }}\n          />\n        </div>\n        <div className=\"poster text-center\">\n          <img src={movie.fileUrl ? movie.fileUrl.replace(\"http:\", \"https:\") : \"/no-image.png\"} alt=\"movie poster\" />\n        </div>\n        <div className=\"mt-2 text-center\">\n          {movie.tags.map(movieTag => (\n            <Tag\n              key={movieTag}\n              {...tags.find(tag => tag._id === movieTag)}\n              className=\"mr-2\"\n              onClick={() => {\n                const tag = tags.find(tag => tag._id === movieTag);\n                if (tag && tag.label.toLowerCase() === \"netflix\") {\n                  window.open(`https://www.netflix.com/search?q=${movie.title}`, \"_blank\");\n                }\n              }}\n            />\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, { useReducer } from \"react\";\nimport findIndex from \"lodash/findIndex\";\nimport { produce } from \"immer\";\n\nexport const MoviesContext = React.createContext();\n\nconst initialState = {\n  movies: [],\n  count: 0,\n  filters: {\n    productionYear: \"\",\n    title: \"\",\n    genres: [],\n    types: [],\n    tags: [],\n    seen: null, // null = dont care, true = have seen, false = have not seen\n    finished: null, // null = dont care, true = finished\n    limit: 30\n  }\n};\n\nconst reducer = (state = initialState, { type, payload }) => {\n  console.log(state, type, payload);\n  switch (type) {\n    case \"ADD\":\n      return { ...state, movies: [payload.movie, ...state.movies] };\n    case \"UPDATE\": {\n      const index = findIndex(state.movies, [\"_id\", payload.id]);\n      const movies = [...state.movies];\n      movies[index] = payload.movie;\n      // pass undefined as delete and then use filter te remove the element\n      return { ...state, movies: movies.filter(Boolean) };\n    }\n    // next step => create real action ADD / DELETE / SEASONS / EPISODES\n    case \"UPDATE_WITH_TRANSFORM\": {\n      const index = findIndex(state.movies, [\"_id\", payload.id]);\n      const movies = [...state.movies];\n      movies[index] = produce(movies[index], payload.transform);\n      // pass undefined as delete and then use filter te remove the element\n      return { ...state, movies: movies.filter(Boolean) };\n    }\n    case \"ADD_ALL\":\n      return { ...state, movies: [...state.movies, ...payload.movies], count: payload.count };\n    case \"INVALIDATE\":\n      return { ...state, movies: [], count: 0 };\n    case \"RESET_FILTERS\":\n      return { ...state, filters: { ...initialState.filters } };\n    case \"FILTERS_CHANGED\":\n      return {\n        ...state,\n        movies: [],\n        count: 0,\n        filters: { ...state.filters, [payload.name]: payload.value }\n      };\n    default:\n      return state;\n  }\n};\n\nexport const MoviesProvider = props => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  return <MoviesContext.Provider value={{ state, dispatch }}>{props.children}</MoviesContext.Provider>;\n};\n","import React from \"react\";\nimport Downshift from \"downshift\";\n\nexport class MultiDownshift extends React.Component {\n  state = { selectedItems: this.props.selectedItems || [] };\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.selectedItems !== this.props.selectedItems && this.props.selectedItems !== this.state.selectedItems) {\n      this.setState({ selectedItems: this.props.selectedItems || [] });\n    }\n  }\n  stateReducer = (state, changes) => {\n    switch (changes.type) {\n      case Downshift.stateChangeTypes.keyDownEnter:\n      case Downshift.stateChangeTypes.clickItem:\n        return {\n          ...changes,\n          highlightedIndex: state.highlightedIndex,\n          isOpen: true\n        };\n      default:\n        return changes;\n    }\n  };\n\n  callOnChange = downshift => () => {\n    if (this.props.onChange) {\n      this.props.onChange(this.state.selectedItems, this.getStateAndHelpers(downshift));\n    }\n  };\n\n  handleSelection = (selectedItem, downshift) => {\n    if (this.state.selectedItems.includes(selectedItem)) {\n      this.removeItem(selectedItem, this.callOnChange(downshift));\n    } else {\n      this.addSelectedItem(selectedItem, this.callOnChange(downshift));\n    }\n  };\n\n  removeItem = (item, cb) => {\n    this.setState(({ selectedItems }) => {\n      return {\n        selectedItems: selectedItems.filter(i => i !== item)\n      };\n    }, cb);\n  };\n  addSelectedItem(item, cb) {\n    this.setState(\n      ({ selectedItems }) => ({\n        selectedItems: [...selectedItems, item]\n      }),\n      cb\n    );\n  }\n\n  getRemoveButtonProps = downshift => ({ onClick, item, ...props } = {}) => {\n    return {\n      onClick: e => {\n        // TODO: use something like downshift's composeEventHandlers utility instead\n        onClick && onClick(e);\n        e.stopPropagation();\n        this.removeItem(item, this.callOnChange(downshift));\n      },\n      ...props\n    };\n  };\n\n  getStateAndHelpers(downshift) {\n    const { selectedItems } = this.state;\n    const { getRemoveButtonProps, removeItem } = this;\n    return {\n      getRemoveButtonProps: getRemoveButtonProps(downshift),\n      removeItem,\n      selectedItems,\n      ...downshift\n    };\n  }\n  render() {\n    const { render, children = render, ...props } = this.props;\n    // TODO: compose together props (rather than overwriting them) like downshift does\n    return (\n      <Downshift {...props} stateReducer={this.stateReducer} onChange={this.handleSelection} selectedItem={null}>\n        {downshift => children(this.getStateAndHelpers(downshift))}\n      </Downshift>\n    );\n  }\n}\n","import React from \"react\";\nimport { css as emoCSS } from \"emotion\";\nimport styled from \"react-emotion\";\n\n// TODO copy paste from downshift example :)\n\nconst css = (...args) => ({ className: emoCSS(...args) });\n\nconst Item = styled(\"li\")(\n  {\n    position: \"relative\",\n    cursor: \"pointer\",\n    display: \"block\",\n    border: \"none\",\n    height: \"auto\",\n    textAlign: \"left\",\n    borderTop: \"none\",\n    lineHeight: \"1em\",\n    color: \"rgba(0,0,0,.87)\",\n    fontSize: \"1rem\",\n    textTransform: \"none\",\n    fontWeight: \"400\",\n    boxShadow: \"none\",\n    padding: \".8rem 1.1rem\",\n    whiteSpace: \"normal\",\n    wordWrap: \"normal\"\n  },\n  ({ isActive, isSelected }) => {\n    const styles = [];\n    if (isActive) {\n      styles.push({\n        color: \"rgba(0,0,0,.95)\",\n        background: \"rgba(0,0,0,.03)\"\n      });\n    }\n    if (isSelected) {\n      styles.push({\n        color: \"rgba(0,0,0,.95)\",\n        fontWeight: \"700\"\n      });\n    }\n    return styles;\n  }\n);\n\nconst BaseMenu = styled(\"ul\")(\n  {\n    padding: 0,\n    marginTop: 0,\n    position: \"absolute\",\n    backgroundColor: \"white\",\n    width: \"100%\",\n    maxHeight: \"20rem\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    outline: \"0\",\n    transition: \"opacity .1s ease\",\n    borderRadius: \"0 0 .28571429rem .28571429rem\",\n    boxShadow: \"0 2px 3px 0 rgba(34,36,38,.15)\",\n    borderColor: \"#96c8da\",\n    borderTopWidth: \"0\",\n    borderRightWidth: 1,\n    borderBottomWidth: 1,\n    borderLeftWidth: 1,\n    borderStyle: \"solid\",\n    zIndex: 10\n  },\n  ({ isOpen }) => ({\n    border: isOpen ? null : \"none\"\n  })\n);\n\nconst Menu = React.forwardRef((props, ref) => <BaseMenu innerRef={ref} {...props} />);\n\nconst ControllerButton = styled(\"button\")({\n  backgroundColor: \"transparent\",\n  border: \"none\",\n  position: \"absolute\",\n  right: 0,\n  top: 0,\n  cursor: \"pointer\",\n  width: 47,\n  display: \"flex\",\n  flexDirection: \"column\",\n  height: \"100%\",\n  justifyContent: \"center\",\n  alignItems: \"center\"\n});\n\nfunction ArrowIcon({ isOpen }) {\n  return (\n    <svg\n      viewBox=\"0 0 20 20\"\n      preserveAspectRatio=\"none\"\n      width={16}\n      fill=\"transparent\"\n      stroke=\"#979797\"\n      strokeWidth=\"1.1px\"\n      transform={isOpen ? \"rotate(180)\" : null}\n    >\n      <path d=\"M1,6 L10,15 L19,6\" />\n    </svg>\n  );\n}\nexport { Menu, ControllerButton, Item, ArrowIcon, css };\n","import React from \"react\";\nimport Downshift from \"downshift\";\n\nexport class MultiDownshiftWithReverse extends React.Component {\n  state = { selectedItems: this.props.selectedItems || [] };\n  stateReducer = (state, changes) => {\n    switch (changes.type) {\n      case Downshift.stateChangeTypes.keyDownEnter:\n      case Downshift.stateChangeTypes.clickItem:\n        return {\n          ...changes,\n          highlightedIndex: state.highlightedIndex,\n          isOpen: true\n        };\n      default:\n        return changes;\n    }\n  };\n\n  callOnChange = downshift => () => {\n    if (this.props.onChange) {\n      this.props.onChange(this.state.selectedItems, this.getStateAndHelpers(downshift));\n    }\n  };\n\n  handleSelection = (selectedItem, downshift) => {\n    if (this.state.selectedItems.filter(item => selectedItem === item[0]).length > 0) {\n      this.removeItem([selectedItem], this.callOnChange(downshift));\n    } else {\n      this.addSelectedItem(selectedItem, this.callOnChange(downshift));\n    }\n  };\n\n  removeItem = (item, cb) => {\n    this.setState(({ selectedItems }) => {\n      return {\n        selectedItems: selectedItems.filter(i => i[0] !== item[0])\n      };\n    }, cb);\n  };\n  addSelectedItem(item, cb) {\n    this.setState(\n      ({ selectedItems }) => ({\n        selectedItems: [...selectedItems, [item, true]]\n      }),\n      cb\n    );\n  }\n\n  getRemoveButtonProps = downshift => ({ onClick, item, ...props } = {}) => {\n    return {\n      onClick: e => {\n        // TODO: use something like downshift's composeEventHandlers utility instead\n        onClick && onClick(e);\n        e.stopPropagation();\n        this.removeItem(item, this.callOnChange(downshift));\n      },\n      ...props\n    };\n  };\n\n  clickOnItem = downshift => (item, index) => {\n    this.setState(({ selectedItems }) => {\n      const newSelectedItems = selectedItems;\n      newSelectedItems[index] = [item[0], !item[1]];\n      return {\n        selectedItems: newSelectedItems.filter(i => i !== item[0])\n      };\n    }, this.callOnChange(downshift));\n  };\n  displayItem = item => {\n    return item[0];\n  };\n  displayBackground = item => {\n    return item[1] ? \"#ccc\" : \"tomato\";\n  };\n  isSelected = itemToFind => {\n    return this.state.selectedItems.find(item => item[0] === itemToFind);\n  };\n\n  getStateAndHelpers(downshift) {\n    const { selectedItems } = this.state;\n    const { getRemoveButtonProps, removeItem, clickOnItem, displayItem, displayBackground, isSelected } = this;\n    return {\n      getRemoveButtonProps: getRemoveButtonProps(downshift),\n      removeItem,\n      selectedItems,\n      clickOnItem: clickOnItem(downshift),\n      displayItem,\n      displayBackground,\n      isSelected,\n      ...downshift\n    };\n  }\n  render() {\n    const { render, children = render, ...props } = this.props;\n    // TODO: compose together props (rather than overwriting them) like downshift does\n    return (\n      <Downshift {...props} stateReducer={this.stateReducer} onChange={this.handleSelection} selectedItem={null}>\n        {downshift => children(this.getStateAndHelpers(downshift))}\n      </Downshift>\n    );\n  }\n}\n","import { MultiDownshift } from \"./MultiDownshift\";\nimport { ArrowIcon, ControllerButton, css, Item, Menu } from \"../shared\";\nimport React, { Component } from \"react\";\nimport identity from \"lodash/identity\";\nimport { MultiDownshiftWithReverse } from \"./MultiDownshiftWithReverse\";\n\nconst BaseMultiDownshift = BaseComponent =>\n  class extends Component {\n    render() {\n      const { handleChange, placeholder, items, selectedItems } = this.props;\n      return (\n        <BaseComponent onChange={handleChange} selectedItems={selectedItems} placeholder={placeholder}>\n          {({\n            getToggleButtonProps,\n            getMenuProps,\n            getRemoveButtonProps,\n            removeItem,\n            isOpen,\n            selectedItems,\n            getItemProps,\n            highlightedIndex,\n            toggleMenu,\n            clickOnItem = () => void 0,\n            displayItem = identity,\n            displayBackground = () => \"#ccc\",\n            isSelected = item => selectedItems.includes(item)\n          }) => (\n            <div\n              style={{\n                margin: \"auto\",\n                position: \"relative\",\n                width: \"100%\"\n              }}\n            >\n              <div\n                {...css({\n                  cursor: \"pointer\",\n                  position: \"relative\",\n                  padding: \".375rem .75rem\",\n                  paddingRight: 50,\n                  border: \"1px solid #ced4da\",\n                  borderRadius: \".25rem\",\n                  backgroundColor: \"white\"\n                })}\n                onClick={() => {\n                  toggleMenu();\n                }}\n              >\n                <div\n                  {...css({\n                    display: \"flex\",\n                    flexWrap: \"wrap\",\n                    alignItems: \"center\"\n                  })}\n                >\n                  {selectedItems.length > 0 ? (\n                    selectedItems.map((item, index) => (\n                      <div\n                        key={index}\n                        {...css({\n                          margin: \"0 2px\",\n                          paddingLeft: 8,\n                          paddingRight: 8,\n                          display: \"inline-block\",\n                          wordWrap: \"none\",\n                          backgroundColor: displayBackground(item),\n                          borderRadius: 2\n                        })}\n                        onClick={event => {\n                          event.preventDefault();\n                          event.stopPropagation();\n                          clickOnItem(item, index);\n                        }}\n                      >\n                        <div\n                          {...css({\n                            display: \"grid\",\n                            gridGap: 6,\n                            gridAutoFlow: \"column\",\n                            alignItems: \"center\"\n                          })}\n                        >\n                          <span>{displayItem(item)}</span>\n                          <button\n                            {...getRemoveButtonProps({ item })}\n                            {...css({\n                              cursor: \"pointer\",\n                              lineHeight: 0.8,\n                              border: \"none\",\n                              backgroundColor: \"transparent\",\n                              padding: \"0\",\n                              fontSize: \"16px\"\n                            })}\n                            type=\"button\"\n                          >\n                            \n                          </button>\n                        </div>\n                      </div>\n                    ))\n                  ) : (\n                    <span\n                      {...css({\n                        color: \"#6c757d;\"\n                      })}\n                    >\n                      {placeholder}\n                    </span>\n                  )}\n                </div>\n                <ControllerButton\n                  {...getToggleButtonProps({\n                    // prevents the menu from immediately toggling\n                    // closed (due to our custom click handler above).\n                    onClick(event) {\n                      event.stopPropagation();\n                    }\n                  })}\n                >\n                  <ArrowIcon isOpen={isOpen} />\n                </ControllerButton>\n              </div>\n              <Menu {...getMenuProps({ isOpen })}>\n                {isOpen\n                  ? items.map((item, index) => (\n                      <Item\n                        key={index}\n                        {...getItemProps({\n                          item,\n                          index,\n                          isActive: highlightedIndex === index,\n                          isSelected: isSelected(item)\n                        })}\n                      >\n                        {item}\n                      </Item>\n                    ))\n                  : null}\n              </Menu>\n            </div>\n          )}\n        </BaseComponent>\n      );\n    }\n  };\n\nexport const AsyncMultiDownshift = BaseMultiDownshift(MultiDownshift);\nexport const AsyncMultiDownshiftwithReverse = BaseMultiDownshift(MultiDownshiftWithReverse);\n","import React, { useContext } from \"react\";\nimport identity from \"lodash/identity\";\nimport { MoviesContext } from \"../Common/MoviesContext\";\nimport { AsyncMultiDownshift, AsyncMultiDownshiftwithReverse } from \"../Common/AsyncMultiDownshift\";\nimport { ApplicationContext } from \"../ApplicationContext\";\nimport { Tag } from \"../Admin/Tag\";\n\nconst fromEvent = event => event.target.value;\n\nconst forInput = ({ filters, onChange }, name, transform = identity, from = fromEvent) => {\n  return {\n    value: filters[name],\n    onChange: value => onChange(name)(transform(from(value)))\n  };\n};\n\nconst FilterTag = ({ tag, selected, onAdd, onDelete }) => (\n  <span onClick={selected ? onDelete : onAdd}>\n    <Tag {...tag} className={`filter-tag mr-2 ${selected ? \"selected\" : \"\"}`} />\n  </span>\n);\n\nexport const MoviesFilter = () => {\n  const {\n    state: { filters },\n    dispatch\n  } = useContext(MoviesContext);\n  const { genres, types, tags } = useContext(ApplicationContext);\n  const { seen, finished } = filters;\n\n  const onChange = name => value => {\n    dispatch({ type: \"FILTERS_CHANGED\", payload: { name, value } });\n  };\n\n  const renderSeen = () => {\n    let color = \"\",\n      icon = \"fa-eye\",\n      onClick = () => onChange(\"seen\")(\"true\");\n    if (seen === \"true\") {\n      color = \"var(--success)\";\n      onClick = () => onChange(\"seen\")(\"partial\");\n    } else if (seen === \"partial\") {\n      color = \"var(--warning)\";\n      onClick = () => onChange(\"seen\")(\"false\");\n    } else if (seen === \"false\") {\n      color = \"var(--danger)\";\n      icon = \"fa-eye-slash\";\n      onClick = () => onChange(\"seen\")(null);\n    }\n    return (\n      <i\n        className={`fas ${icon}`}\n        style={{\n          color,\n          cursor: \"pointer\"\n        }}\n        onClick={onClick}\n      />\n    );\n  };\n\n  const renderFinished = () => {\n    let color = \"\",\n      onClick = () => onChange(\"finished\")(true);\n    if (finished === true) {\n      color = \"var(--danger)\";\n      onClick = () => onChange(\"finished\")(null);\n    }\n    return (\n      <i\n        className={`fas fa-ban`}\n        style={{\n          color,\n          cursor: \"pointer\"\n        }}\n        onClick={onClick}\n      />\n    );\n  };\n\n  return (\n    <form className=\"form-inline movies-filter mt-4 ml-3\">\n      <div className=\"form-group mr-2\">\n        <input\n          {...forInput({ filters, onChange }, \"productionYear\", value => parseInt(value, 10))}\n          type=\"number\"\n          max={2200}\n          placeholder=\"YYYY\"\n          className=\"form-control\"\n          style={{ width: \"90px\" }}\n        />\n      </div>\n      <div className=\"form-group mr-2\">\n        <input type=\"text\" {...forInput({ filters, onChange }, \"title\")} placeholder=\"Title\" className=\"form-control\" />\n      </div>\n      <div className=\"form-group mr-2\" style={{ minWidth: \"220px\" }}>\n        <AsyncMultiDownshiftwithReverse\n          placeholder=\"Genre\"\n          handleChange={forInput({ filters, onChange }, \"genres\", identity, identity).onChange}\n          items={genres}\n          selectedItems={filters.genres}\n        />\n      </div>\n      <div className=\"form-group mr-2\" style={{ width: \"220px\" }}>\n        <AsyncMultiDownshift\n          placeholder=\"Type\"\n          handleChange={forInput({ filters, onChange }, \"types\", identity, identity).onChange}\n          items={types}\n          selectedItems={filters.types}\n        />\n      </div>\n      <div className=\"form-group mr-2\">{renderSeen()}</div>\n      <div className=\"form-group mr-2\">{renderFinished()}</div>\n      <div>\n        {tags.map(tag => (\n          <FilterTag\n            key={tag._id}\n            tag={tag}\n            selected={filters.tags.find(filterTag => filterTag === tag._id)}\n            onAdd={() => onChange(\"tags\")([...filters.tags, tag._id])}\n            onDelete={() => onChange(\"tags\")(filters.tags.filter(t => t !== tag._id))}\n          />\n        ))}\n      </div>\n    </form>\n  );\n};\n","import React from \"react\";\nimport Downshift from \"downshift\";\nimport { ArrowIcon, ControllerButton, css, Item, Menu } from \"../shared\";\n\nexport class SingleDownshift extends React.Component {\n  render() {\n    const { onChange, placeholder, items, selectedItem } = this.props;\n    return (\n      <Downshift onChange={onChange} selectedItem={selectedItem}>\n        {({\n          getInputProps,\n          getItemProps,\n          getLabelProps,\n          getMenuProps,\n          isOpen,\n          inputValue,\n          highlightedIndex,\n          selectedItem,\n          toggleMenu\n        }) => (\n          <div\n            style={{\n              margin: \"auto\",\n              position: \"relative\",\n              width: \"100%\"\n            }}\n          >\n            <div\n              {...css({\n                cursor: \"pointer\",\n                position: \"relative\",\n                padding: \".375rem .75rem\",\n                paddingRight: 50,\n                border: \"1px solid #ced4da\",\n                borderRadius: \".25rem\",\n                backgroundColor: \"white\"\n              })}\n              onClick={() => {\n                toggleMenu();\n              }}\n            >\n              <div\n                {...css({\n                  display: \"flex\",\n                  flexWrap: \"wrap\",\n                  alignItems: \"center\"\n                })}\n              >\n                {selectedItem ? (\n                  <div\n                    {...css({\n                      margin: \"0 2px\",\n                      paddingLeft: 8,\n                      paddingRight: 8,\n                      display: \"inline-block\",\n                      wordWrap: \"none\",\n                      backgroundColor: \"#ccc\",\n                      borderRadius: 2\n                    })}\n                  >\n                    <div\n                      {...css({\n                        display: \"grid\",\n                        gridGap: 6,\n                        gridAutoFlow: \"column\",\n                        alignItems: \"center\"\n                      })}\n                    >\n                      <span>{selectedItem}</span>\n                    </div>\n                  </div>\n                ) : (\n                  <span\n                    {...css({\n                      color: \"#6c757d;\"\n                    })}\n                  >\n                    {placeholder}\n                  </span>\n                )}\n              </div>\n              <ControllerButton>\n                <ArrowIcon isOpen={isOpen} />\n              </ControllerButton>\n            </div>\n            <Menu {...getMenuProps({ isOpen })}>\n              {isOpen\n                ? items.map((item, index) => (\n                    <Item\n                      key={index}\n                      {...getItemProps({\n                        item,\n                        index,\n                        isActive: highlightedIndex === index,\n                        isSelected: selectedItem === item\n                      })}\n                    >\n                      {item}\n                    </Item>\n                  ))\n                : null}\n            </Menu>\n          </div>\n        )}\n      </Downshift>\n    );\n  }\n}\n","import React, { Component, Fragment } from \"react\";\n\nexport class Accordion extends Component {\n  state = {\n    open: false,\n    toggle: this.toggle.bind(this)\n  };\n\n  toggle() {\n    this.setState({ open: !this.state.open });\n  }\n\n  render() {\n    return <Fragment>{this.props.children(this.state)}</Fragment>;\n  }\n}\n","import React, { Fragment } from \"react\";\nimport { SingleDownshift } from \"../Common/SingleDownshift\";\nimport { LOADING, withApplication } from \"../ApplicationContext\";\nimport isEmpty from \"lodash/isEmpty\";\nimport { AsyncMultiDownshift } from \"../Common/AsyncMultiDownshift\";\nimport { Accordion } from \"../Common/Accordion\";\nimport { withUser } from \"../Login/UserContext\";\n\nconst defaultState = {\n  movie: {\n    title: \"\",\n    genre: [],\n    type: \"\",\n    productionYear: \"\",\n    summary: \"\"\n  },\n  allocine: {\n    movies: [],\n    tvshows: []\n  }\n};\n\nconst headers = user => ({\n  Accept: \"application/json\",\n  \"Content-Type\": \"application/json\",\n  Authorization: `Bearer ${user.token}`\n});\n\nconst handleResponse = response => {\n  if (response.ok) return response.json();\n  throw new Error(\"Fetch fail\");\n};\n\nclass MovieFormWithContext extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      movie: props.movie ? props.movie : defaultState.movie,\n      allocine: defaultState.allocine\n    };\n  }\n\n  componentDidMount() {\n    // eslint-disable-next-line no-undef\n    $(\"#movie-creator-updator\").on(\"hide.bs.modal\", this.props.onClose);\n  }\n\n  valid = () => {\n    return !isEmpty(this.state.movie.title) && this.state.movie.genre.length > 0 && !isEmpty(this.state.movie.type);\n  };\n\n  add = () => {\n    fetch(\"/api/movies\", {\n      method: \"POST\",\n      body: JSON.stringify(this.state.movie),\n      headers: headers(this.props.user)\n    })\n      .then(handleResponse)\n      .then(data => {\n        this.props.onAdd({ ...this.state.movie, ...data });\n        // eslint-disable-next-line no-undef\n        $(\"#movie-creator-updator\").modal(\"hide\");\n      });\n  };\n\n  update = () => {\n    fetch(`/api/movies/${this.props.movie._id}`, {\n      method: \"PUT\",\n      body: JSON.stringify(this.state.movie),\n      headers: headers(this.props.user)\n    })\n      .then(handleResponse)\n      .then(data => {\n        this.props.onUpdate({ ...this.state.movie, ...data });\n        // eslint-disable-next-line no-undef\n        $(\"#movie-creator-updator\").modal(\"hide\");\n      });\n  };\n\n  search = () => {\n    Promise.all([\n      fetch(`/api/allocine?type=Film&title=${this.state.movie.title}`, {\n        headers: headers(this.props.user)\n      }).then(handleResponse),\n      fetch(`/api/allocine?type=Srie&title=${this.state.movie.title}`, {\n        headers: headers(this.props.user)\n      }).then(handleResponse)\n    ]).then(([movies, tvshows]) => this.setState({ allocine: { movies, tvshows } }));\n  };\n\n  synchronizeMovieAllocine = idAllocine => {\n    // if click on the currently selected movie, unselect it\n    if (idAllocine === this.state.movie.idAllocine) {\n      this.setState({\n        movie: {\n          ...this.state.movie,\n          idAllocine: null\n        }\n      });\n    } else {\n      fetch(`/api/allocine/movie/${idAllocine}`, {\n        headers: headers(this.props.user)\n      })\n        .then(handleResponse)\n        .then(({ movie }) =>\n          this.setState({\n            movie: {\n              ...this.state.movie,\n              idAllocine,\n              title: movie.title,\n              genre: movie.genre.map(m => m.$).sort(),\n              type: \"Film\",\n              productionYear:\n                movie.release && movie.release.releaseDate\n                  ? new Date(movie.release.releaseDate).getFullYear()\n                  : movie.productionYear,\n              summary: movie.synopsis,\n              fileUrl: movie.poster ? movie.poster.href : \"\"\n            }\n          })\n        );\n    }\n  };\n\n  synchronizeTvShowAllocine = idAllocine => {\n    // if click on the currently selected movie, unselect it\n    if (idAllocine === this.state.movie.idAllocine) {\n      this.setState({\n        movie: {\n          ...this.state.movie,\n          idAllocine: null\n        }\n      });\n    } else {\n      fetch(`/api/allocine/serie/${idAllocine}`, {\n        headers: headers(this.props.user)\n      })\n        .then(handleResponse)\n        .then(({ tvseries }) =>\n          this.setState({\n            movie: {\n              ...this.state.movie,\n              idAllocine,\n              title: tvseries.title,\n              genre: tvseries.genre.map(m => m.$).sort(),\n              type: \"Srie\",\n              productionYear: tvseries.yearStart,\n              summary: tvseries.synopsis,\n              fileUrl: tvseries.poster ? tvseries.poster.href : \"\"\n            }\n          })\n        );\n    }\n  };\n\n  onInput = (field, transform = data => data) => {\n    return event =>\n      this.setState({\n        movie: { ...this.state.movie, [field]: transform(event.target.value) }\n      });\n  };\n\n  onSelect = field => {\n    return value => this.setState({ movie: { ...this.state.movie, [field]: value } });\n  };\n\n  render() {\n    const { movie } = this.state;\n    return (\n      <Fragment>\n        {this.props.application.status === LOADING ? (\n          <div>Loading...</div>\n        ) : (\n          <div\n            className=\"movie-modal modal fade movie-form\"\n            id=\"movie-creator-updator\"\n            tabIndex=\"-1\"\n            role=\"dialog\"\n            data-show=\"true\"\n          >\n            <div className=\"modal-dialog modal-dialog-centered\" role=\"document\">\n              <div className=\"modal-content\">\n                <div className=\"modal-header\">\n                  <h5 className=\"modal-title\">{(movie && movie.title) || \"New\"}</h5>\n                  <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                    <span aria-hidden=\"true\">&times;</span>\n                  </button>\n                </div>\n                <div className=\"modal-body\">\n                  <div className=\"form-row\">\n                    <div className=\"form-group col-11\">\n                      <label htmlFor=\"title\">Title</label>\n                      <input\n                        type=\"text\"\n                        className=\"form-control\"\n                        id=\"title\"\n                        aria-describedby=\"title\"\n                        placeholder=\"Enter title\"\n                        onChange={this.onInput(\"title\")}\n                        value={this.state.movie.title}\n                      />\n                    </div>\n                    <div className=\"form-group col-1 text-center\">\n                      <i\n                        className=\"fab fa-angular fa-2x\"\n                        style={{\n                          cursor: \"pointer\",\n                          color: \"#fecc00\",\n                          paddingTop: \"35px\"\n                        }}\n                        onClick={this.search}\n                      />\n                    </div>\n                  </div>\n                  {this.state.allocine.movies.length > 0 ? (\n                    <Accordion>\n                      {({ open, toggle }) => {\n                        return (\n                          <Fragment>\n                            <div onClick={toggle} style={{ cursor: \"pointer\" }}>\n                              {this.state.allocine.movies.length} movies\n                              {open ? <i className=\"fas fa-chevron-up\" /> : <i className=\"fas fa-chevron-down\" />}\n                            </div>\n                            <div\n                              className=\"row\"\n                              style={{\n                                overflowX: \"scroll\",\n                                display: open ? \"flex\" : \"none\",\n                                flexWrap: \"nowrap\"\n                              }}\n                            >\n                              {this.state.allocine.movies.map(movie => (\n                                <div\n                                  key={movie.code}\n                                  className={`col-2 allocine-movie ${\n                                    movie.code === this.state.movie.idAllocine ? \"selected\" : \"\"\n                                  }`}\n                                  onClick={() => this.synchronizeMovieAllocine(movie.code)}\n                                >\n                                  {movie.code === this.state.movie.idAllocine ? (\n                                    <i className=\"fas fa-check-circle selected-movie-icon fa-2x\" />\n                                  ) : null}\n                                  <div>\n                                    {movie.title} -{\" \"}\n                                    {movie.release && movie.release.releaseDate\n                                      ? new Date(movie.release.releaseDate).getFullYear()\n                                      : movie.productionYear}\n                                  </div>\n                                  <div>\n                                    {movie.poster ? (\n                                      <img src={movie.poster.href} alt=\"movie poster\" style={{ width: \"100%\" }} />\n                                    ) : null}\n                                  </div>\n                                </div>\n                              ))}\n                            </div>\n                          </Fragment>\n                        );\n                      }}\n                    </Accordion>\n                  ) : null}\n                  {this.state.allocine.tvshows.length > 0 ? (\n                    <Accordion>\n                      {({ open, toggle }) => {\n                        return (\n                          <Fragment>\n                            <div onClick={toggle} style={{ cursor: \"pointer\" }}>\n                              {this.state.allocine.tvshows.length} tv shows\n                              {open ? <i className=\"fas fa-chevron-up\" /> : <i className=\"fas fa-chevron-down\" />}\n                            </div>\n                            <div\n                              className=\"row\"\n                              style={{\n                                overflowX: \"scroll\",\n                                display: open ? \"flex\" : \"none\",\n                                flexWrap: \"nowrap\"\n                              }}\n                            >\n                              {this.state.allocine.tvshows.map(tvshow => (\n                                <div\n                                  key={tvshow.code}\n                                  className={`col-2 allocine-movie ${\n                                    tvshow.code === this.state.movie.idAllocine ? \"selected\" : \"\"\n                                  }`}\n                                  onClick={() => this.synchronizeTvShowAllocine(tvshow.code)}\n                                >\n                                  {tvshow.code === this.state.movie.idAllocine ? (\n                                    <i className=\"fas fa-check-circle selected-movie-icon fa-2x\" />\n                                  ) : null}\n                                  <div>\n                                    {tvshow.title} - {tvshow.yearStart}\n                                  </div>\n                                  <div>\n                                    {tvshow.poster ? (\n                                      <img src={tvshow.poster.href} alt=\"tvshow poster\" style={{ width: \"100%\" }} />\n                                    ) : null}\n                                  </div>\n                                </div>\n                              ))}\n                            </div>\n                          </Fragment>\n                        );\n                      }}\n                    </Accordion>\n                  ) : null}\n                  <div className=\"form-group\">\n                    <label>Genre</label>\n                    <AsyncMultiDownshift\n                      selectedItems={this.state.movie.genre}\n                      placeholder=\"Genre\"\n                      items={this.props.application.genres}\n                      handleChange={this.onSelect(\"genre\")}\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label>Type</label>\n                    <SingleDownshift\n                      selectedItem={this.state.movie.type}\n                      placeholder=\"Type\"\n                      items={this.props.application.types}\n                      onChange={this.onSelect(\"type\")}\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label htmlFor=\"production-year\">Production Year</label>\n                    <input\n                      type=\"number\"\n                      className=\"form-control\"\n                      id=\"production-year\"\n                      aria-describedby=\"production year\"\n                      placeholder=\"Enter production year\"\n                      onChange={this.onInput(\"productionYear\", data => parseInt(data, 10))}\n                      value={this.state.movie.productionYear}\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label htmlFor=\"summary\">Summary</label>\n                    <textarea\n                      className=\"form-control\"\n                      id=\"summary\"\n                      aria-describedby=\"summary\"\n                      placeholder=\"Enter summary\"\n                      onChange={this.onInput(\"summary\")}\n                      value={this.state.movie.summary}\n                    />\n                  </div>\n                </div>\n                <div className=\"modal-footer\">\n                  <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">\n                    Close\n                  </button>\n                  <button\n                    type=\"button\"\n                    disabled={!this.valid()}\n                    className=\"btn btn-primary\"\n                    onClick={this.state.movie._id ? this.update : this.add}\n                  >\n                    {movie._id ? \"Update\" : \"Save\"}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nexport const MovieForm = withApplication(withUser(MovieFormWithContext));\n","import React, { Fragment, useContext, useEffect, useState, useRef } from \"react\";\nimport { MovieCard } from \"./MovieCard\";\nimport isArray from \"lodash/isArray\";\nimport { ApplicationContext, LOADING } from \"../ApplicationContext\";\nimport { MoviesContext } from \"../Common/MoviesContext\";\nimport { MoviesFilter } from \"./MoviesFilter\";\nimport * as MovieAPI from \"../Common/MovieAPI\";\nimport { UserContext } from \"../Login/UserContext\";\nimport debounce from \"lodash/debounce\";\nimport { MovieForm } from \"./MovieForm\";\n\nconst newMovie = () => ({});\nconst getMovies = MovieAPI.getMovies(true);\n\nconst buildQuery = (filters, offset) => {\n  // can use lodash/partition to one line\n  const genres = filters.genres.filter(genre => genre[1]).map(genre => genre[0]);\n  const notGenres = filters.genres.filter(genre => !genre[1]).map(genre => genre[0]);\n  return Object.keys(filters)\n    .filter(key => key !== \"genres\") // handle genres manually)\n    .filter(\n      key =>\n        (!isArray(filters[key]) && filters[key] !== null && filters[key] !== \"\") ||\n        (isArray(filters[key]) && filters[key].length > 0)\n    )\n    .map(key => `${key}=${filters[key]}`)\n    .concat(\n      genres.length > 0 ? `genres=${genres.join(\",\")}` : \"\",\n      notGenres.length > 0 ? `notGenres=${notGenres.join(\",\")}` : \"\",\n      `offset=${offset}`\n    )\n    .filter(Boolean) // remove empty strings\n    .join(\"&\");\n};\n\nexport const List = () => {\n  // load contexts\n  const { status } = useContext(ApplicationContext);\n  const { state, dispatch } = useContext(MoviesContext);\n  const { movies, filters, count } = state;\n  const user = useContext(UserContext);\n\n  // create state\n  const [offset, setOffset] = useState(movies.length / filters.limit);\n  const [movie, setMovie] = useState(newMovie());\n  const [key, setKey] = useState(0);\n  // set to true otherwise when navigating back to the page, the loader is displayed\n  const [loaded, setLoaded] = useState(true);\n\n  //create actions\n  const loadMore = _ => {\n    setLoaded(false);\n    getMovies(buildQuery(filters, offset), user).then(movies => {\n      // invalidate if there is a new search\n      if (offset === 0) {\n        dispatch({ type: \"INVALIDATE\" });\n      }\n      setLoaded(true);\n      dispatch({ type: \"ADD_ALL\", payload: { movies: movies.data, count: movies.count } });\n    });\n  };\n  const showMovie = () => {\n    // ignore first trigger, needed for backward navigation\n    if (key > 0) {\n      // eslint-disable-next-line no-undef\n      $(\"#movie-creator-updator\").modal(\"show\");\n    }\n  };\n\n  // create effects\n  useEffect(\n    () => {\n      // useDebounce :)\n      const debouncedLoadMore = debounce(loadMore, 400, {\n        leading: false,\n        trailing: true\n      });\n      // no movies ? then automatically fetch some (note: every time a filter is updated, movies are cleaned up)\n      // the condition is needed in case of back navigation\n      if (count === 0) {\n        dispatch({ type: \"INVALIDATE\" }); // remove existing movies in case of backward navigation with initial load of movie\n        debouncedLoadMore();\n        setLoaded(false);\n      }\n      return () => debouncedLoadMore.cancel();\n    },\n    [filters]\n  );\n  useEffect(showMovie, [movie]);\n\n  const isFirstRun = useRef(true);\n  useEffect(\n    () => {\n      if (isFirstRun.current) {\n        isFirstRun.current = false;\n        return;\n      }\n      loadMore();\n    },\n    [offset]\n  );\n\n  // render\n  return (\n    <div>\n      {status === LOADING ? (\n        <h2 className=\"text-center mt-2\">\n          <i className=\"fas fa-spinner fa-spin fa-2x\" />\n        </h2>\n      ) : (\n        <Fragment>\n          <MovieForm\n            // force reinitialisation of movie form\n            key={movie._id || key}\n            movie={movie._id ? movie : null}\n            onAdd={movie => dispatch({ type: \"ADD\", payload: { movie } })}\n            onUpdate={movie => dispatch({ type: \"UPDATE\", payload: { movie, id: movie._id } })}\n          />\n          <i\n            onClick={() => {\n              setMovie(newMovie());\n              setKey(key + 1);\n            }}\n            className=\"fas fa-plus-circle fa-3x\"\n            style={{\n              top: \"22px\",\n              left: \"22px\",\n              position: \"absolute\",\n              color: \"#F1F7EE\",\n              cursor: \"pointer\"\n            }}\n            title=\"Add a movie or a tv show\"\n          />\n          <MoviesFilter />\n          <h2 className=\"text-center\">\n            {movies.length === count && count > 0 ? (\n              <span>{count} movies/tvshows</span>\n            ) : movies.length < count ? (\n              <span>\n                {movies.length} of {count} movies/tvshows\n              </span>\n            ) : loaded ? (\n              <span> No movies/tvshows</span>\n            ) : null}\n          </h2>\n          <div className=\"movies\">\n            {movies.map(movie => (\n              <MovieCard\n                key={movie._id}\n                movie={movie}\n                onChange={movie => dispatch({ type: \"UPDATE\", payload: { movie, id: movie._id } })}\n                onDelete={_ => dispatch({ type: \"UPDATE\", payload: { id: movie._id } })}\n                onEdit={() => {\n                  setMovie({\n                    ...movie // create a new movie to force the show effect to be displayed\n                  });\n                  setKey(key + 1); // mandatory otherwise first edit fail\n                }}\n              />\n            ))}\n          </div>\n          <h2 className=\"text-center mt-2\">\n            {!loaded ? (\n              <span>\n                <i className=\"fas fa-spinner fa-spin fa-2x\" />\n              </span>\n            ) : null}\n          </h2>\n          {movies.length < count && loaded ? (\n            <div className=\"text-center m-3\">\n              <button onClick={() => setOffset(offset + 1)} className=\"btn btn-primary btn-lg\">\n                Load more\n              </button>\n            </div>\n          ) : (\n            undefined\n          )}\n        </Fragment>\n      )}\n    </div>\n  );\n};\n","import React, { Fragment, useState, useRef } from \"react\";\nimport identity from \"lodash/identity\";\n\nconst EditableField = props => {\n  const [value, setValue] = useState(props.value || \"\");\n  const [edit, setEdit] = useState(!props.value);\n  const transform = props.transform || identity;\n  const lock = props.lock || false;\n\n  // handle props.value update\n  const lastInitialValue = useRef(props.value);\n  if (props.value !== lastInitialValue.current) {\n    setValue(props.value || \"\");\n    setEdit(!props.value);\n    lastInitialValue.current = props.value;\n  }\n\n  return (\n    <Fragment>\n      {!lock && edit ? (\n        <Fragment>\n          {props.renderFormField({\n            ...props,\n            value,\n            onChange: event => setValue(transform(event.target.value)),\n            submit: () => {\n              if (value) {\n                props.onChange(value);\n                setEdit(false);\n              }\n            }\n          })}\n          <button\n            className=\"btn btn-primary\"\n            draggable={true}\n            onDragStart={event => {\n              // disable drag and drop for this element\n              event.preventDefault();\n              event.stopPropagation();\n            }}\n            onClick={event => {\n              event.preventDefault();\n              event.stopPropagation();\n              if (value) {\n                props.onChange(value);\n                setEdit(false);\n              }\n            }}\n          >\n            OK\n          </button>\n        </Fragment>\n      ) : (\n        <Fragment>\n          {props.renderValue({\n            className: props.className,\n            value,\n            onClick: event => {\n              if (!lock) {\n                event.preventDefault();\n                event.stopPropagation();\n                setEdit(true);\n              }\n            }\n          })}\n        </Fragment>\n      )}\n    </Fragment>\n  );\n};\n\nexport const EditableInput = props => (\n  <EditableField\n    {...props}\n    renderFormField={fieldProps => (\n      <div className=\"form-inline d-inline-block\">\n        <input\n          className=\"form-control mr-1\"\n          placeholder={fieldProps.placeholder}\n          type={props.type || \"text\"}\n          value={fieldProps.value}\n          onKeyDown={event => {\n            if (event.key === \"Enter\") {\n              fieldProps.submit();\n            }\n          }}\n          draggable={true}\n          onDragStart={event => {\n            // disable drag and drop for this element\n            event.preventDefault();\n            event.stopPropagation();\n          }}\n          onChange={fieldProps.onChange}\n          onClick={event => {\n            event.preventDefault();\n            event.stopPropagation();\n          }}\n        />\n      </div>\n    )}\n    renderValue={valueProps => (\n      <span onClick={valueProps.onClick} className={valueProps.className}>\n        {valueProps.value}\n      </span>\n    )}\n  />\n);\n\nexport const EditableTextarea = props => (\n  <EditableField\n    {...props}\n    renderFormField={fieldProps => (\n      <textarea\n        className=\"form-control w-100\"\n        placeholder={fieldProps.placeholder}\n        style={fieldProps.style}\n        value={fieldProps.value}\n        rows={fieldProps.rows || 2}\n        onKeyDown={event => {\n          if (event.key === \"Enter\" && event.ctrlKey) {\n            fieldProps.submit();\n          }\n        }}\n        draggable={true}\n        onDragStart={event => {\n          // disable drag and drop for this element\n          event.preventDefault();\n          event.stopPropagation();\n        }}\n        onChange={fieldProps.onChange}\n        onClick={event => {\n          event.preventDefault();\n          event.stopPropagation();\n        }}\n      />\n    )}\n    renderValue={valueProps => (\n      <span onClick={valueProps.onClick} className={valueProps.className}>\n        {props.split ? (\n          valueProps.value.split(\"\\n\").map((item, key) => (\n            <Fragment key={key}>\n              {item}\n              <br />\n            </Fragment>\n          ))\n        ) : (\n          <Fragment>{valueProps.value}</Fragment>\n        )}\n      </span>\n    )}\n  />\n);\n","import React, { useReducer } from \"react\";\n\nexport const NotificationContext = React.createContext();\n\nconst reducer = (state = [], action) => {\n  switch (action.type) {\n    case \"ADD\":\n      return [...state, { ...action.payload, id: new Date().getTime() }];\n    case \"CLOSE\":\n      return state.filter(notification => notification.id !== action.payload.id);\n    default:\n      return state;\n  }\n};\n\nexport const NotificationProvider = props => {\n  const [state, dispatch] = useReducer(reducer, []);\n  return (\n    <NotificationContext.Provider value={{ notifications: state, dispatch }}>\n      {props.children}\n    </NotificationContext.Provider>\n  );\n};\n","import { EditableInput, EditableTextarea } from \"../../Common/EditableField\";\nimport React, { useContext, useState } from \"react\";\nimport { UserContext } from \"../../Login/UserContext\";\nimport { produce } from \"immer\";\nimport * as MovieAPI from \"../../Common/MovieAPI\";\nimport { MovieContext } from \"../Movie\";\nimport { SeasonContext } from \"./Season\";\nimport { NotificationContext } from \"../../Notifications/NotificationContext\";\nimport { MoviesContext } from \"../../Common/MoviesContext\";\nimport { createNotification, episodeTag, seasonTag } from \"../Movie.util\";\n\nexport const Episode = ({ episode, index, onDragStart, onDragOver, onDragEnd, dragging }) => {\n  // get contexts\n  const user = useContext(UserContext);\n  const { movie, lock } = useContext(MovieContext);\n  const { season, index: seasonIndex } = useContext(SeasonContext);\n  const { dispatch } = useContext(NotificationContext);\n  const { dispatch: moviesDispatch } = useContext(MoviesContext);\n\n  // local state\n  const [ellipsis, setEllipsis] = useState(\"ellipsis\");\n  const [style, setStyle] = useState({});\n\n  // actions\n  const transformEpisode = transform => {\n    moviesDispatch({\n      type: \"UPDATE_WITH_TRANSFORM\",\n      payload: {\n        id: movie._id,\n        transform\n      }\n    });\n  };\n  const updateSeason = transform => {\n    return MovieAPI.updateSeason(movie, produce(season, transform), user).then(season => {\n      transformEpisode(draft => {\n        draft.seasons[seasonIndex] = season;\n      });\n    });\n  };\n  const updateEpisode = transform => {\n    const transformedEpisode = produce(episode, transform); // optimistic update\n    transformEpisode(draft => {\n      draft.seasons[seasonIndex].episodes[index] = transformedEpisode;\n    });\n    return MovieAPI.updateEpisode(movie, season, transformedEpisode, user).catch(_ => {\n      //revert on error\n      transformEpisode(draft => {\n        draft.seasons[seasonIndex].episodes[index] = episode;\n      });\n    });\n  };\n\n  return (\n    <div\n      className=\"row episode mr-0 ml-0\"\n      draggable={!lock}\n      onDragStart={event => {\n        setStyle({\n          backgroundColor: \"var(--movie-secondary-lighter)\",\n          opacity: \"0.4\",\n          color: \"var(--movie-primary)\"\n        });\n        event.dataTransfer.dropEffect = \"move\";\n        event.stopPropagation();\n        onDragStart();\n      }}\n      onDragOver={() => {\n        dragging && onDragOver();\n      }}\n      onDragEnd={event => {\n        event.stopPropagation();\n        onDragEnd();\n        setStyle({});\n      }}\n      style={style}\n    >\n      <div className=\" col-md-12 col-xl-2 align-items-center d-flex p-0\">\n        {!lock && (\n          <i\n            className=\"fas fa-times delete-episode\"\n            onClick={event => {\n              event.preventDefault();\n              event.stopPropagation();\n              if (window.confirm(\"Delete episode ?\")) {\n                MovieAPI.deleteEpisode(movie, season, episode, user)\n                  .then(() =>\n                    transformEpisode(draft => {\n                      draft.seasons[seasonIndex].episodes = draft.seasons[seasonIndex].episodes.filter(\n                        e => e._id !== episode._id\n                      );\n                    })\n                  )\n                  .then(() => createNotification(dispatch, `${episodeTag(seasonIndex, index)} - Deleted`));\n              }\n            }}\n          />\n        )}\n        <div\n          className=\"text-center col-1\"\n          style={{\n            color: episode.seen ? \"var(--success)\" : \"\",\n            fontWeight: episode.seen ? \"bold\" : \"\",\n            cursor: \"pointer\"\n          }}\n          onClick={() =>\n            updateSeason(season => {\n              if (!season.episodes[index].seen) {\n                for (let i = 0; i <= index; i++) {\n                  season.episodes[i].seen = true;\n                }\n              } else {\n                season.episodes[index].seen = false;\n              }\n            }).then(() => createNotification(dispatch, `${seasonTag(seasonIndex)} - Seen updated`))\n          }\n        >\n          {index + 1}\n        </div>\n        <div className=\"text-center col-11\">\n          <EditableInput\n            lock={lock}\n            className={`font-weight-bold episode-title ${episode.seen ? \"seen\" : \"\"}`}\n            value={episode.title}\n            placeholder=\"Title\"\n            onChange={title =>\n              updateEpisode(episode => {\n                episode.title = title;\n              }).then(() => createNotification(dispatch, `${episodeTag(seasonIndex, index)} - Title updated`))\n            }\n          />\n        </div>\n      </div>\n      <div className=\"col-md-12 col-xl-10 align-items-center d-flex\">\n        <EditableTextarea\n          lock={lock}\n          style={{ width: \"100%\" }}\n          rows={4}\n          value={episode.summary}\n          placeholder=\"Summary\"\n          className={`${ellipsis} d-block episode-summary w-100 text-left`}\n          onChange={summary =>\n            updateEpisode(episode => {\n              episode.summary = summary;\n            }).then(() => createNotification(dispatch, `${episodeTag(seasonIndex, index)} - Summary updated`))\n          }\n        />\n        {ellipsis && (\n          <span style={{ cursor: \"pointer\" }} onClick={() => setEllipsis(\"\")}>\n            <i className=\"fas fa-question-circle\" />\n          </span>\n        )}\n      </div>\n    </div>\n  );\n};\n","import { useState } from \"react\";\n\nexport const useToggle = (initialValue = false) => {\n  const [value, setValue] = useState(initialValue);\n  const toggle = () => setValue(!value);\n  return [value, toggle];\n};\n\nexport const useInput = (initialValue = \"\") => {\n  const [value, setValue] = useState(initialValue);\n  return [\n    {\n      value,\n      onChange: event => setValue(event.target.value)\n    },\n    setValue\n  ];\n};\n","import React, { useContext, Fragment, useState } from \"react\";\nimport { EditableInput } from \"../../Common/EditableField\";\nimport * as MovieAPI from \"../../Common/MovieAPI\";\nimport { produce } from \"immer\";\nimport { UserContext } from \"../../Login/UserContext\";\nimport { MovieSeen } from \"../../Common/MovieSeen\";\nimport { Episode } from \"./Episode\";\nimport every from \"lodash/every\";\nimport some from \"lodash/some\";\nimport { useToggle } from \"../../Common/hooks\";\nimport { MovieContext } from \"../../Movie/Movie\";\nimport { NotificationContext } from \"../../Notifications/NotificationContext\";\nimport \"./Season.css\";\nimport { MoviesContext } from \"../../Common/MoviesContext\";\nimport { createNotification, episodeTag, seasonTag } from \"../Movie.util\";\n\nexport const SeasonContext = React.createContext({});\n\nexport const Season = ({ season, index, onDragStart, onDragOver, onDragEnd, dragging }) => {\n  // get contexts\n  const user = useContext(UserContext);\n  const { movie, lock } = useContext(MovieContext);\n  const { dispatch } = useContext(NotificationContext);\n  const { dispatch: moviesDispatch } = useContext(MoviesContext);\n\n  const [open, toggle] = useToggle();\n  const [episodes, setEpisodes] = useState(1);\n  const [opacity, setOpacity] = useState(\"1\");\n  const [drag, setDrag] = useState();\n\n  // actions\n  const transformSeason = transform => {\n    moviesDispatch({\n      type: \"UPDATE_WITH_TRANSFORM\",\n      payload: {\n        id: movie._id,\n        transform\n      }\n    });\n  };\n\n  const updateSeason = (transform = value => value) => {\n    return MovieAPI.updateSeason(movie, produce(season, transform), user).then(season =>\n      transformSeason(draft => {\n        draft.seasons[index] = season;\n      })\n    );\n  };\n\n  const seen = every(season.episodes, \"seen\") && season.episodes.length > 0;\n  const oneSeen = some(season.episodes, \"seen\") && season.episodes.length > 0;\n\n  return (\n    <div\n      className=\"season\"\n      draggable={!lock}\n      onDragStart={event => {\n        setOpacity(\"0.5\");\n        event.dataTransfer.dropEffect = \"move\";\n        event.stopPropagation();\n        onDragStart();\n      }}\n      onDragEnd={event => {\n        event.stopPropagation();\n        onDragEnd();\n        setOpacity(\"1.5\");\n      }}\n      onDragOver={() => {\n        dragging && onDragOver();\n      }}\n      style={{\n        opacity\n      }}\n    >\n      <div className=\"season-header\" onClick={toggle}>\n        <div>\n          <div\n            className=\"season-header-view\"\n            onClick={event => {\n              event.preventDefault();\n              event.stopPropagation();\n              updateSeason(season => {\n                season.seen = !seen;\n              }).then(() => createNotification(dispatch, `${seasonTag(index)} - Seen updated`));\n            }}\n          >\n            <MovieSeen seen={seen} partial={oneSeen} />\n          </div>\n          {!lock && (\n            <i\n              className=\"fas fa-times delete-season\"\n              onClick={event => {\n                event.preventDefault();\n                event.stopPropagation();\n                if (window.confirm(\"Delete season ?\")) {\n                  MovieAPI.deleteSeason(movie, season, user)\n                    .then(() =>\n                      transformSeason(draft => {\n                        draft.seasons = draft.seasons.filter(s => s._id !== season._id);\n                      })\n                    )\n                    .then(() => createNotification(dispatch, `${seasonTag(index)} - Deleted`));\n                }\n              }}\n            />\n          )}\n          &nbsp;Season {index + 1}\n          &nbsp;-&nbsp;\n          <EditableInput\n            lock={lock}\n            placeholder=\"YYYY\"\n            type=\"number\"\n            value={season.productionYear}\n            transform={value => parseInt(value, 10)}\n            onChange={productionYear =>\n              updateSeason(season => {\n                season.productionYear = productionYear;\n              }).then(() => createNotification(dispatch, `${seasonTag(index)} - Production year updated`))\n            }\n          />\n        </div>\n        <div className=\"season-header-arrow\">\n          {open ? <i className=\"fas fa-chevron-up\" /> : <i className=\"fas fa-chevron-down\" />}\n        </div>\n      </div>\n      <div className=\"episodes\">\n        <SeasonContext.Provider value={{ season, index }}>\n          {open &&\n            season.episodes.map((episode, episodeIndex) => (\n              <Episode\n                key={episode._id}\n                episode={episode}\n                index={episodeIndex}\n                dragging={drag !== undefined}\n                onDragStart={() => {\n                  setDrag(episodeIndex);\n                }}\n                onDragOver={() => {\n                  if (episodeIndex !== drag) {\n                    setDrag(episodeIndex);\n                    season.episodes = produce(season.episodes, draft => {\n                      const tmp = draft[episodeIndex];\n                      draft[episodeIndex] = draft[drag];\n                      draft[drag] = tmp;\n                    });\n                  }\n                }}\n                onDragEnd={() => {\n                  updateSeason().then(() =>\n                    createNotification(dispatch, `${episodeTag(index, episodeIndex)} - Reordered`)\n                  );\n                  setDrag();\n                }}\n              />\n            ))}\n        </SeasonContext.Provider>\n      </div>\n\n      {!lock ? (\n        <Fragment>\n          {open && (\n            <div\n              className=\"form-inline d-block mt-1 mb-1\"\n              draggable={true}\n              onDragStart={event => {\n                // disable drag and drop for this element\n                event.preventDefault();\n                event.stopPropagation();\n              }}\n            >\n              <input\n                type=\"number\"\n                className=\"form-control\"\n                style={{ width: \"80px\" }}\n                onChange={event => setEpisodes(parseInt(event.target.value, 10))}\n                value={episodes}\n              />\n              <button\n                className=\" ml-1 btn btn-primary\"\n                onClick={async () => {\n                  const times = episodes || 1;\n                  for (let i = 0; i < times; i++) {\n                    const newEpisode = await MovieAPI.addEpisode(movie, season, user);\n                    transformSeason(draft => {\n                      draft.seasons[index].episodes.push(newEpisode);\n                    });\n                  }\n                  createNotification(dispatch, `${seasonTag(index)} - Added ${times} episodes`);\n                  setEpisodes(1);\n                }}\n              >\n                <i className=\"fas fa-plus\" />\n                &nbsp;Add episode\n              </button>\n            </div>\n          )}\n        </Fragment>\n      ) : (\n        undefined\n      )}\n    </div>\n  );\n};\n","import React, { Fragment, useContext, useEffect, useState, useRef } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport * as MovieAPI from \"../Common/MovieAPI\";\nimport { UserContext } from \"../Login/UserContext\";\nimport { MovieSeen } from \"../Common/MovieSeen\";\nimport { MoviesContext } from \"../Common/MoviesContext\";\nimport { produce } from \"immer\";\nimport { Season } from \"./Season/Season\";\nimport { EditableInput, EditableTextarea } from \"../Common/EditableField\";\nimport { useToggle } from \"../Common/hooks\";\nimport \"./Movie.css\";\nimport { ApplicationContext } from \"../ApplicationContext\";\nimport { Tag } from \"../Admin/Tag\";\nimport find from \"lodash/find\";\nimport { NotificationContext } from \"../Notifications/NotificationContext\";\nimport { createNotification, seasonTag } from \"./Movie.util\";\n\nexport const MovieContext = React.createContext({});\n\nconst MovieTag = ({ tag, selected, onAdd, onDelete, lock }) =>\n  !lock ? (\n    <span onClick={selected ? onDelete : onAdd} className=\"mt-1\">\n      <Tag {...tag} className={`movie-tag mr-1 ${selected ? \"selected\" : \"\"}`} />\n    </span>\n  ) : selected ? (\n    <span className=\"mt-1\">\n      <Tag {...tag} className={`mr-1 selected`} />\n    </span>\n  ) : null;\n\nexport const Movie = withRouter(({ match, history }) => {\n  // get contexts\n  const user = useContext(UserContext);\n  const {\n    state: { movies },\n    dispatch: moviesDispatch\n  } = useContext(MoviesContext);\n  const [seasons, setSeasons] = useState(1);\n  const { tags } = useContext(ApplicationContext);\n  const { dispatch } = useContext(NotificationContext);\n  // create state\n  const [drag, setDrag] = useState();\n  const [lock, toggle] = useToggle(true);\n\n  const fileRef = useRef();\n\n  // create effects\n  let movie = find(movies, [\"_id\", match.params.id]);\n  useEffect(\n    () => {\n      if (!movie) {\n        MovieAPI.getMovie(match.params.id, user).then(movie => {\n          moviesDispatch({ type: \"ADD\", payload: { movie } });\n        });\n      }\n    },\n    [match.params.id]\n  );\n\n  // create actions\n  const updateMovie = (transform = value => value) => {\n    return MovieAPI.updateMovie(produce(movie, transform), user).then(movie => {\n      moviesDispatch({ type: \"UPDATE\", payload: { id: movie._id, movie } });\n    });\n  };\n  const handleFiles = files => {\n    if (files.length === 1) {\n      MovieAPI.updateMoviePoster(movie, files[0], user)\n        .then(movie => {\n          moviesDispatch({ type: \"UPDATE\", payload: { id: movie._id, movie } });\n        })\n        .then(() => createNotification(dispatch, `${movie.title} - Image uploaded`));\n    }\n  };\n\n  return (\n    <div className=\"container movie-container\">\n      {!movie ? (\n        <h2 className=\"text-center mt-2\">\n          <i className=\"fas fa-spinner fa-spin fa-2x\" />\n        </h2>\n      ) : (\n        <Fragment>\n          <i\n            onClick={() => history.goBack()}\n            className=\"fas fa-arrow-circle-left fa-3x\"\n            style={{\n              top: \"22px\",\n              left: \"22px\",\n              position: \"absolute\",\n              color: \"#F1F7EE\",\n              cursor: \"pointer\"\n            }}\n            title=\"Return to the list of movies\"\n          />\n          <div className=\"p-5 mt-3 single-movie-card\" style={{ position: \"relative\" }}>\n            <i\n              onClick={toggle}\n              className={`fas ${lock ? \"fa-lock\" : \"fa-lock-open\"} fa-2x`}\n              style={{\n                color: \"var(--movie-secondary)\",\n                position: \"absolute\",\n                top: \"5px\",\n                right: \"5px\",\n                cursor: \"pointer\"\n              }}\n              title={`Click to ${lock ? \"open\" : \"close\"} movie for modifications`}\n            />\n            <div className=\"d-flex\">\n              <div className=\"d-flex\" style={{ flex: \"0 0 250px\", flexDirection: \"column\" }}>\n                <input\n                  accept=\".jpg, .jpeg, .png\"\n                  type=\"file\"\n                  ref={fileRef}\n                  style={{ display: \"none\" }}\n                  onChange={event => handleFiles(event.target.files)}\n                />\n                <img\n                  src={movie.fileUrl ? movie.fileUrl.replace(\"http:\", \"https:\") : \"/no-image.png\"}\n                  style={{\n                    height: \"300px\",\n                    width: \"225px\",\n                    cursor: lock ? \"auto\" : \"pointer\"\n                  }}\n                  alt=\"movie poster\"\n                  onClick={() => !lock && fileRef.current.click()}\n                />\n                <div className=\"d-flex flex-wrap\">\n                  {tags.map(tag => (\n                    <MovieTag\n                      key={tag._id}\n                      tag={tag}\n                      lock={lock}\n                      selected={movie.tags.find(movieTag => movieTag === tag._id)}\n                      onAdd={() =>\n                        updateMovie(movie => {\n                          movie.tags.push(tag._id);\n                        }).then(() => createNotification(dispatch, `${movie.title} - Tag ${tag.label} added`))\n                      }\n                      onDelete={() =>\n                        updateMovie(movie => {\n                          movie.tags = movie.tags.filter(movieTag => movieTag !== tag._id);\n                        }).then(() => createNotification(dispatch, `${movie.title} - Tag ${tag.label} deleted`))\n                      }\n                    />\n                  ))}\n                </div>\n              </div>\n              <div className=\"pl-4 d-flex flex-column\" style={{ flexGrow: 1 }}>\n                <h1 className=\"text-center\">\n                  <EditableInput\n                    lock={lock}\n                    value={movie.title}\n                    placeholder=\"Title\"\n                    onChange={title =>\n                      updateMovie(movie => {\n                        movie.title = title;\n                      }).then(() => createNotification(dispatch, `${title} - Title updated`))\n                    }\n                  />{\" \"}\n                  -{\" \"}\n                  <EditableInput\n                    lock={lock}\n                    value={movie.productionYear}\n                    placeholder=\"YYYY\"\n                    type=\"number\"\n                    transform={value => parseInt(value, 10)}\n                    onChange={productionYear =>\n                      updateMovie(movie => {\n                        movie.productionYear = productionYear;\n                      }).then(() => createNotification(dispatch, `${movie.title} - Production year updated`))\n                    }\n                  />\n                </h1>\n                <h6 className=\"text-center single-movie-subtitle\">{movie.genre.join(\",\")}</h6>\n                <div>\n                  <EditableTextarea\n                    split={true}\n                    lock={lock}\n                    value={movie.summary}\n                    style={{ width: \"100%\" }}\n                    placeholder=\"Summary\"\n                    rows=\"7\"\n                    onChange={summary =>\n                      updateMovie(movie => {\n                        movie.summary = summary;\n                      }).then(() => createNotification(dispatch, `${movie.title} - Summary updated`))\n                    }\n                  />\n                </div>\n              </div>\n            </div>\n            <div>\n              {movie.type === \"Film\" ? (\n                <MovieSeen\n                  seen={movie.seen}\n                  onClick={() =>\n                    updateMovie(movie => {\n                      movie.seen = !movie.seen;\n                    }).then(() => createNotification(dispatch, `${movie.title} - Seen updated`))\n                  }\n                />\n              ) : (\n                undefined\n              )}\n            </div>\n            <div className=\"text-center\">\n              {movie.type !== \"Film\" ? (\n                <Fragment>\n                  <MovieContext.Provider value={{ lock, movie }}>\n                    <div>\n                      {movie.seasons.map((season, seasonIndex) => (\n                        <Season\n                          key={season._id}\n                          season={season}\n                          index={seasonIndex}\n                          dragging={drag !== undefined}\n                          onDragStart={() => setDrag(seasonIndex)}\n                          onDragOver={() => {\n                            if (seasonIndex !== drag) {\n                              setDrag(seasonIndex);\n                              movie.seasons = produce(movie.seasons, draft => {\n                                const tmp = draft[seasonIndex];\n                                draft[seasonIndex] = draft[drag];\n                                draft[drag] = tmp;\n                              });\n                            }\n                          }}\n                          onDragEnd={() => {\n                            updateMovie().then(() =>\n                              createNotification(dispatch, `${seasonTag(seasonIndex)} - Reordered`)\n                            );\n                            setDrag();\n                          }}\n                        />\n                      ))}\n                    </div>\n                  </MovieContext.Provider>\n                  {!lock ? (\n                    <div className=\"form-inline d-block mt-1 mb-1\">\n                      <input\n                        type=\"number\"\n                        className=\"form-control\"\n                        style={{ width: \"80px\" }}\n                        onChange={event => setSeasons(parseInt(event.target.value, 10))}\n                        value={seasons}\n                      />\n                      <button\n                        className=\" ml-1 btn btn-primary\"\n                        onClick={async () => {\n                          const times = seasons || 1;\n                          for (let i = 0; i < times; i++) {\n                            const newSeason = await MovieAPI.addSeason(movie, user);\n                            moviesDispatch({\n                              type: \"UPDATE_WITH_TRANSFORM\",\n                              payload: {\n                                id: movie._id,\n                                transform: draft => {\n                                  draft.seasons.push(newSeason);\n                                }\n                              }\n                            });\n                          }\n                          createNotification(dispatch, `${movie.title} - Added ${times} seasons`);\n                          setSeasons(1);\n                        }}\n                      >\n                        <i className=\"fas fa-plus\" />\n                        &nbsp;Add season\n                      </button>\n                    </div>\n                  ) : (\n                    undefined\n                  )}\n                </Fragment>\n              ) : (\n                undefined\n              )}\n            </div>\n          </div>\n        </Fragment>\n      )}\n    </div>\n  );\n});\n","import React, { Component, Fragment } from \"react\";\nimport debounce from \"lodash/debounce\";\nimport { withUser } from \"../Login/UserContext\";\n\nexport const LOADING = Symbol(\"LOADING\");\nexport const LOADED = Symbol(\"LOADED\");\n\nconst headers = user => ({\n  Accept: \"application/json\",\n  \"Content-Type\": \"application/json\",\n  Authorization: `Bearer ${user.token}`\n});\nconst handleResponse = response => {\n  if (response.ok) return response.json();\n  throw new Error(\"Fetch fail\");\n};\n\nclass FetchWithContext extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      status: LOADING,\n      data: undefined\n    };\n\n    // TODO probably not the best place to debounce\n    this.debounceFetch = debounce(this.fetch, this.props.debounce || 0, {\n      leading: false,\n      trailing: true\n    });\n  }\n\n  componentWillUnmount() {\n    this.debounceFetch.cancel();\n  }\n\n  fetch() {\n    return fetch(`${this.props.endpoint}`, {\n      headers: headers(this.props.user)\n    })\n      .then(handleResponse)\n      .then(data => {\n        this.setState({\n          status: LOADED,\n          data\n        });\n        this.props.onSuccess && this.props.onSuccess(data);\n      });\n  }\n\n  componentDidMount() {\n    this.debounceFetch();\n  }\n\n  render() {\n    return (\n      <Fragment>\n        {this.props.children({\n          status: this.state.status,\n          data: this.state.data\n        })}\n      </Fragment>\n    );\n  }\n}\n\n/**\n * - create a context that holds movies\n * - dont load if there is already sth in the context\n * - pass initial data to prevent fetch the api (if data, dont fetch on cDM)\n */\n\nexport const Fetch = withUser(FetchWithContext);\n","import { Fetch } from \"./Common/Fetch\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport const Header = () => {\n  return (\n    <div\n      className=\"text-center\"\n      style={{\n        backgroundColor: \"var(--movie-secondary)\",\n        color: \"var(--movie-primary)\",\n        padding: \"4px\"\n      }}\n    >\n      <h1 className=\"header\">\n        <Link to=\"/\">Cinematheque</Link>\n      </h1>\n      <Fetch endpoint=\"/api/movies?limit=0\">{({ data }) => <h6>{data ? data.count : 0} movies/tvshows</h6>}</Fetch>\n      <Link to=\"/stats\">\n        <i\n          className=\"fas fa-chart-bar fa-3x\"\n          style={{\n            top: \"22px\",\n            right: \"22px\",\n            position: \"absolute\",\n            color: \"#F1F7EE\",\n            cursor: \"pointer\"\n          }}\n          title=\"Show statistics\"\n        />\n      </Link>\n    </div>\n  );\n};\n","import React, { Fragment, useContext, useEffect, useState } from \"react\";\nimport { ApplicationContext } from \"../ApplicationContext\";\nimport * as MovieAPI from \"../Common/MovieAPI\";\nimport \"./Statistics.css\";\nimport { produce } from \"immer\";\nimport { UserContext } from \"../Login/UserContext\";\nimport orderBy from \"lodash/orderBy\";\nimport { Tag } from \"../Admin/Tag\";\nimport { MoviesContext } from \"../Common/MoviesContext\";\nimport { withRouter } from \"react-router-dom\";\n\nconst getMovies = MovieAPI.getMovies(false);\n\nconst initialState = (types, genres, tags) => {\n  return {\n    types: types.map(type => ({\n      name: type,\n      count: 0,\n      genres: genres.map(genre => ({\n        name: genre,\n        count: 0,\n        seen: 0,\n        unseen: 0\n      }))\n    })),\n    tags: tags.map(tag => ({\n      id: tag._id,\n      name: tag.label,\n      color: tag.color,\n      count: 0\n    }))\n  };\n};\n\nexport const Statistics = withRouter(({ history }) => {\n  // get contexts\n  const user = useContext(UserContext);\n  const { genres, types, tags } = useContext(ApplicationContext);\n  const { dispatch } = useContext(MoviesContext);\n  const [stats, setStats] = useState(initialState(types, genres, tags));\n\n  // actions\n  const fetchByTypes = (types, genres) => {\n    types.forEach(type =>\n      getMovies(`types=${type}&limit=0`, user)\n        .then(data => setStats(produce(draft => void (draft.types.find(t => type === t.name).count = data.count))))\n        .then(() =>\n          genres.forEach(genre => {\n            getMovies(`types=${type}&genres=${genre}&limit=0`, user).then(data =>\n              setStats(\n                produce(\n                  draft =>\n                    void (draft.types.find(t => type === t.name).genres.find(g => genre === g.name).count = data.count)\n                )\n              )\n            );\n            getMovies(`types=${type}&genres=${genre}&seen=true&limit=0`, user).then(data =>\n              setStats(\n                produce(\n                  draft =>\n                    void (draft.types.find(t => type === t.name).genres.find(g => genre === g.name).seen = data.count)\n                )\n              )\n            );\n            getMovies(`types=${type}&genres=${genre}&seen=false&limit=0`, user).then(data =>\n              setStats(\n                produce(\n                  draft =>\n                    void (draft.types.find(t => type === t.name).genres.find(g => genre === g.name).unseen = data.count)\n                )\n              )\n            );\n          })\n        )\n    );\n  };\n\n  const fetchByTags = tags => {\n    tags.forEach(tag =>\n      getMovies(`tags=${tag._id}&limit=0`, user).then(data =>\n        setStats(\n          produce(draft => {\n            draft.tags.find(t => tag._id === t.id).count += data.count;\n          })\n        )\n      )\n    );\n  };\n\n  // effects\n  useEffect(\n    () => {\n      setStats(initialState(types, genres, tags));\n      fetchByTypes(types, genres);\n      fetchByTags(tags);\n    },\n    [types, genres, tags]\n  );\n\n  return (\n    <div className=\"d-flex justify-content-around flex-wrap mb-4\">\n      {stats.types.map((type, index) => (\n        <div className=\"card stat-card\" key={index}>\n          <div className=\"card-body\">\n            <h5 className=\"card-title text-center\">\n              {type.count} {type.name}\n            </h5>\n            <div>\n              {orderBy(type.genres, [\"count\"], [\"desc\"]).map((genre, index) => (\n                <Fragment key={index}>\n                  <div>\n                    {\" \"}\n                    {genre.count} {genre.name} ( {genre.count ? ((genre.seen * 100) / genre.count).toFixed(2) : 0}%\n                    seen){\" \"}\n                  </div>\n                  <div className=\"movie-progress\">\n                    <div\n                      className=\"progress-bar unseen\"\n                      role=\"progressbar\"\n                      style={{\n                        width: `calc(20px + ${(genre.unseen * 100) /\n                          orderBy(type.genres, [\"count\"], [\"desc\"])[0].count}%)`\n                      }}\n                    >\n                      {genre.unseen}\n                    </div>\n                    {genre.count - genre.unseen - genre.seen ? (\n                      <div\n                        className=\"progress-bar pending\"\n                        role=\"progressbar\"\n                        style={{\n                          width: `calc(20px + ${((genre.count - genre.unseen - genre.seen) * 100) /\n                            orderBy(type.genres, [\"count\"], [\"desc\"])[0].count}%)`\n                        }}\n                      >\n                        {genre.count - genre.unseen - genre.seen}\n                      </div>\n                    ) : (\n                      undefined\n                    )}\n                    <div\n                      className=\"progress-bar seen\"\n                      role=\"progressbar\"\n                      style={{\n                        width: `calc(20px + ${(genre.seen * 100) /\n                          orderBy(type.genres, [\"count\"], [\"desc\"])[0].count}%)`\n                      }}\n                    >\n                      {genre.seen}\n                    </div>\n                  </div>\n                </Fragment>\n              ))}\n            </div>\n          </div>\n        </div>\n      ))}\n      <div className=\"card stat-card stat-tags-card\">\n        <div className=\"card-body align-content-center\">\n          {stats.tags.map((tag, index) => (\n            <h5\n              className=\"text-center stat-tags-card-card mt-1\"\n              style={{\n                cursor: \"pointer\"\n              }}\n              key={index}\n            >\n              <Tag\n                label={`${tag.count} ${tag.name}`}\n                color={tag.color}\n                onClick={() => {\n                  dispatch({ type: \"RESET_FILTERS\" });\n                  dispatch({ type: \"FILTERS_CHANGED\", payload: { name: \"tags\", value: [tag.id] } });\n                  history.push(\"/\");\n                }}\n              />\n            </h5>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n});\n","const random = max => {\n  return Math.floor(Math.random() * Math.floor(max));\n};\nexport const generateColor = () => {\n  return `#${random(256)\n    .toString(16)\n    .padStart(2, \"0\")}${random(256)\n    .toString(16)\n    .padStart(2, \"0\")}${random(256)\n    .toString(16)\n    .padStart(2, \"0\")}`;\n};\n","import React, { useContext, Fragment } from \"react\";\nimport \"./TagList.css\";\nimport { deleteTag, updateTag } from \"../Common/TagAPI\";\nimport { UserContext } from \"../Login/UserContext\";\nimport { Tag } from \"./Tag\";\nimport { useInput, useToggle } from \"../Common/hooks\";\nimport { generateColor } from \"./tag.utils\";\nimport { ApplicationContext } from \"../ApplicationContext\";\n\nexport const TagListElement = ({ tag, onDelete, onUpdate }) => {\n  const [edit, toggleEdit] = useToggle(false);\n  const [color, setColor] = useInput(tag.color || \"\");\n  const [label] = useInput(tag.label || \"\");\n  // get context\n  const user = useContext(UserContext);\n  const { tags } = useContext(ApplicationContext);\n\n  return (\n    <div\n      className=\"mt-2 mb-2 d-flex\"\n      style={{\n        overflow: \"hidden\" // Collapsing margins\n      }}\n    >\n      {/* avoid the tag element to fill up all the available height */}\n      {!edit ? (\n        <Fragment>\n          <div>\n            <Tag {...tag} big />\n          </div>\n          <button type=\"button\" className=\"btn btn-primary ml-2\" onClick={toggleEdit}>\n            <i className=\"fas fa-pencil-alt\" />\n          </button>\n          <button\n            type=\"button\"\n            className=\"btn btn-danger ml-2\"\n            onClick={_ => {\n              if (window.confirm(\"Delete tag ?\")) {\n                deleteTag(tag, user).then(onDelete);\n              }\n            }}\n          >\n            <i className=\"fas fa-times\" />\n          </button>\n        </Fragment>\n      ) : (\n        <form className=\"form-inline w-100\">\n          <input type=\"color\" className=\"form-control colorpicker\" {...color} />\n          <input type=\"text\" className=\"form-control ml-2\" placeholder=\"Label\" {...label} />\n          <button\n            type=\"button\"\n            className=\"btn btn-info btn-sm ml-2\"\n            onClick={() => {\n              setColor(generateColor());\n            }}\n          >\n            <i className=\"fas fa-sync-alt\" />\n          </button>\n          <button\n            type=\"button\"\n            className=\"btn btn-primary btn-sm ml-2\"\n            onClick={() => {\n              updateTag(\n                {\n                  _id: tag._id,\n                  color: color.value,\n                  label: label.value\n                },\n                user\n              )\n                .then(onUpdate)\n                .then(toggleEdit);\n            }}\n            disabled={!label.value || tags.find(tag => tag.label.toLowerCase() === label.value.toLowerCase())}\n          >\n            <i className=\"fas fa-check\" />\n          </button>\n          <Tag style={{ marginLeft: \"auto\" }} color={color.value} label={label.value || \"Label\"} />\n        </form>\n      )}\n    </div>\n  );\n};\n","import React, { useContext } from \"react\";\nimport \"./TagList.css\";\nimport { useInput } from \"../Common/hooks\";\nimport { createTag } from \"../Common/TagAPI\";\nimport { UserContext } from \"../Login/UserContext\";\nimport { Tag } from \"./Tag\";\nimport { ApplicationContext } from \"../ApplicationContext\";\nimport { TagListElement } from \"./TagListElement\";\nimport { generateColor } from \"./tag.utils\";\nimport { produce } from \"immer\";\n\nexport const TagList = () => {\n  // get context\n  const user = useContext(UserContext);\n  const { tags, set } = useContext(ApplicationContext);\n  const setTags = set(\"tags\");\n\n  // create state\n  const [color, setColor] = useInput(generateColor());\n  const [label, setLabel] = useInput(\"\");\n\n  return (\n    <div className=\"container tags-card\">\n      {tags.map((tag, index) => (\n        <TagListElement\n          key={tag._id}\n          tag={tag}\n          onDelete={() => setTags(tags => tags.filter(t => t._id !== tag._id))}\n          onUpdate={tag => {\n            setTags(tags =>\n              produce(tags, draft => {\n                draft[index] = tag;\n              })\n            );\n          }}\n        />\n      ))}\n      <form className=\"form-inline\">\n        <input type=\"color\" className=\"form-control colorpicker\" {...color} />\n        <input type=\"text\" className=\"form-control ml-2\" placeholder=\"Label\" {...label} />\n        <button\n          type=\"button\"\n          className=\"btn btn-info btn-sm ml-2\"\n          onClick={() => {\n            setColor(generateColor());\n          }}\n        >\n          <i className=\"fas fa-sync-alt\" />\n        </button>\n        <button\n          type=\"button\"\n          className=\"btn btn-primary btn-sm ml-2\"\n          onClick={() => {\n            createTag(\n              {\n                label: label.value,\n                color: color.value\n              },\n              user\n            )\n              .then(tag => setTags(tags => [...tags, tag]))\n              .then(_ => {\n                setColor(generateColor());\n                setLabel(\"\");\n              });\n          }}\n          disabled={!label.value || tags.find(tag => tag.label.toLowerCase() === label.value.toLowerCase())}\n        >\n          <i className=\"fas fa-check\" />\n        </button>\n        <Tag style={{ marginLeft: \"auto\" }} color={color.value} label={label.value || \"Label\"} />\n      </form>\n    </div>\n  );\n};\n","import React, { useContext, useState } from \"react\";\nimport \"./Notification.css\";\nimport { NotificationContext } from \"./NotificationContext\";\n\nexport const Notification = ({ index, notification }) => {\n  const [animateProgress, setAnimateProgress] = useState(false);\n  const [notificationOut, setNotificationOut] = useState(false);\n  const { dispatch } = useContext(NotificationContext);\n  return (\n    <div\n      className={`notification ${notification.type} ${notificationOut ? \"out\" : \"in\"}`}\n      onAnimationEnd={event => {\n        if (event.animationName === \"bounceIn\") {\n          setAnimateProgress(true);\n        } else if (event.animationName === \"bounceOut\") {\n          dispatch({ type: \"CLOSE\", payload: { id: notification.id } });\n        }\n      }}\n    >\n      <div className=\"notification-content\">{notification.content}</div>\n      <div\n        className={`notification-progress-bar progress-bar-striped ${animateProgress ? \"animate\" : \"\"}`}\n        style={notificationOut ? { width: \"0\" } : {}}\n        onAnimationEnd={() => setNotificationOut(true)}\n      />\n    </div>\n  );\n};\n","import React, { useContext } from \"react\";\nimport { NotificationContext } from \"./NotificationContext\";\nimport { Notification } from \"./Notification\";\nimport \"./NotificationList.css\";\n\nexport const NotificationsList = () => {\n  const { notifications } = useContext(NotificationContext);\n  return (\n    <div className=\"notification-list\">\n      {notifications.map((notification, index) => (\n        <Notification key={notification.id} index={index} notification={notification} />\n      ))}\n    </div>\n  );\n};\n","import React, { Component, Fragment } from \"react\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport \"./App.css\";\nimport { List } from \"./MovieList/List\";\nimport { Movie } from \"./Movie/Movie\";\nimport { Header } from \"./Header\";\nimport { Statistics } from \"./Statistics/Statistics\";\nimport { TagList } from \"./Admin/TagList\";\nimport { NotificationsList } from \"./Notifications/NotificationsList\";\n\nclass App extends Component {\n  render() {\n    return (\n      <Fragment>\n        <Router>\n          <Fragment>\n            <Header />\n            <NotificationsList />\n            <Route exact path=\"/\" component={List} />\n            <Route exact path=\"/movie/:id\" component={Movie} />\n            <Route exact path=\"/stats\" component={Statistics} />\n            <Route exact path=\"/admin\" component={TagList} />\n          </Fragment>\n        </Router>\n      </Fragment>\n    );\n  }\n}\n\nexport default App;\n","import React, { Component } from \"react\";\nimport { LOGIN_FAILED, withUser } from \"./UserContext\";\n\nclass LoginWithContext extends Component {\n  state = {\n    password: \"\"\n  };\n\n  render() {\n    return (\n      <div>\n        {this.props.user.status === LOGIN_FAILED ? (\n          <div className=\"alert alert-danger\" role=\"alert\">\n            Login failed\n          </div>\n        ) : (\n          undefined\n        )}\n        <div className=\"form-group\">\n          <label htmlFor=\"password\">Password</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            id=\"password\"\n            aria-describedby=\"password\"\n            placeholder=\"Enter password\"\n            value={this.state.password}\n            onChange={event => this.setState({ password: event.target.value })}\n            onKeyDown={event => {\n              if (event.key === \"Enter\") this.props.user.login(this.state.password);\n            }}\n          />\n        </div>\n        <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.props.user.login(this.state.password)}>\n          Submit\n        </button>\n      </div>\n    );\n  }\n}\n\nexport const Login = withUser(LoginWithContext);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { ApplicationProvider } from \"./ApplicationContext\";\nimport { UserProvider, UserContext } from \"./Login/UserContext\";\nimport { Login } from \"./Login/Login\";\nimport { MoviesProvider } from \"./Common/MoviesContext\";\nimport { NotificationProvider } from \"./Notifications/NotificationContext\";\n\nReactDOM.render(\n  <UserProvider>\n    <UserContext.Consumer>\n      {({ token }) =>\n        token ? (\n          <ApplicationProvider token={token}>\n            <MoviesProvider>\n              <NotificationProvider>\n                <App />\n              </NotificationProvider>\n            </MoviesProvider>\n          </ApplicationProvider>\n        ) : (\n          <Login />\n        )\n      }\n    </UserContext.Consumer>\n  </UserProvider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}