{"version":3,"sources":["Login/UserContext.js","Movie/MovieSeen.js","Movie/MovieAPI.js","Movie/MovieCard.jsx","ApplicationContext.js","Movie/MoviesContext.js","Common/MultiDownshift.jsx","shared.js","Common/MultiDownshiftWithReverse.jsx","Common/AsyncMultiDownshift.jsx","Movie/MoviesFilter.js","Common/SingleDownshift.jsx","Common/Accordion.jsx","Movie/MovieForm.jsx","Movie/List.js","Movie/MovieSeasonYear.js","Movie/Movie.js","Common/Fetch.jsx","Header.js","App.js","registerServiceWorker.js","Login/Login.js","index.js"],"names":["UserContext","React","createContext","withUser","Component","props","react_default","a","createElement","Consumer","user","Object","assign","LOGOUT","Symbol","LOGIN","LOGIN_FAILED","handleResponse","response","ok","json","Error","UserProvider","_React$Component","_getPrototypeOf2","_this","classCallCheck","this","_len","arguments","length","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","concat","state","token","status","login","bind","assertThisInitialized","inherits","createClass","key","value","_this2","localStorage","getItem","fetch","method","headers","Accept","Content-Type","Authorization","then","_ref","exp","Date","setState","password","_this3","body","JSON","stringify","_ref2","setItem","catch","Provider","children","MovieSeen","seen","onClick","className","style","color","cursor","updateMovie","movie","_id","MovieCard","onEdit","onChange","onDelete","update","field","objectSpread","defineProperty","title","season","subtitle","productionYear","genre","join","Link","to","position","top","right","netflix","type","MovieSeen_MovieSeen","undefined","finished","window","confirm","deleteMovie","src","fileUrl","alt","ApplicationContext","LOADING","LOADED","ApplicationProvider","genres","types","options","Promise","all","slicedToArray","MoviesContext","MoviesProvider","add","movies","toConsumableArray","id","index","findIndex","filter","Boolean","addAll","data","count","invalidate","name","filters","unseen","limit","MultiDownshift","selectedItems","stateReducer","changes","Downshift","stateChangeTypes","keyDownEnter","clickItem","highlightedIndex","isOpen","callOnChange","downshift","getStateAndHelpers","handleSelection","selectedItem","includes","removeItem","addSelectedItem","item","cb","i","getRemoveButtonProps","objectWithoutProperties","e","stopPropagation","prevProps","_ref3","_this$props","render","_this$props$children","downshift_esm","css","emoCSS","Item","styled","display","border","height","textAlign","borderTop","lineHeight","fontSize","textTransform","fontWeight","boxShadow","padding","whiteSpace","wordWrap","isActive","isSelected","styles","push","background","BaseMenu","marginTop","backgroundColor","width","maxHeight","overflowY","overflowX","outline","transition","borderRadius","borderColor","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","zIndex","Menu","forwardRef","ref","innerRef","ControllerButton","flexDirection","justifyContent","alignItems","ArrowIcon","viewBox","preserveAspectRatio","fill","stroke","strokeWidth","transform","d","MultiDownshiftWithReverse","clickOnItem","newSelectedItems","displayItem","displayBackground","_ref4","BaseMultiDownshift","BaseComponent","_Component","_class","input","createRef","handleChange","placeholder","items","getInputProps","getToggleButtonProps","getMenuProps","inputValue","getItemProps","toggleMenu","_ref$clickOnItem","_ref$displayItem","identity","_ref$displayBackgroun","margin","borderTopRadius","borderBottomRightRadius","borderBottomLeftRadius","paddingRight","current","focus","flexWrap","map","paddingTop","paddingBottom","paddingLeft","event","preventDefault","gridGap","gridAutoFlow","onKeyUp","marginLeft","flex","minHeight","AsyncMultiDownshift","AsyncMultiDownshiftwithReverse","fromEvent","target","forInput","from","MoviesFilter","_useContext","useContext","_useContext2","unnetflix","parseInt","max","maxWidth","SingleDownshift","getLabelProps","Accordion","open","toggle","react","defaultState","summary","allocine","tvshows","MovieFormWithContext","valid","isEmpty","onAdd","$","modal","onUpdate","search","synchronizeMovieAllocine","idAllocine","m","sort","release","releaseDate","getFullYear","synopsis","poster","href","synchronizeTvShowAllocine","tvseries","yearStart","seasonCount","onInput","onSelect","on","onClose","application","tabIndex","role","data-show","data-dismiss","aria-label","aria-hidden","htmlFor","aria-describedby","Accordion_Accordion","_ref5","code","_ref6","tvshow","SingleDownshift_SingleDownshift","disabled","MovieForm","List","_useState","useState","_useState2","offset","setOffset","_useState3","_useState4","setMovie","_useState5","_useState6","setKey","loadMore","getMovies","notGenres","keys","isArray","buildQuery","useEffect","debouncedLoadMore","debounce","leading","trailing","cancel","left","MoviesFilter_MoviesFilter","_","MovieSeasonYear","year","setYear","Movie","withRouter","match","history","editSeasonIndex","setEditSeasonIndex","getMovie","params","updatedMovie","goBack","MovieSeasonYear_MovieSeasonYear","slice","renderSeasons","Fetch","FetchWithContext","debounceFetch","endpoint","onSuccess","Header","App","Header_Header","BrowserRouter","Route","exact","path","component","isLocalhost","location","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","error","Login","onKeyDown","ReactDOM","UserContext_UserProvider","ApplicationContext_ApplicationProvider","MoviesContext_MoviesProvider","src_App_0","document","getElementById","URL","process","origin","addEventListener","get","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.f89e9041.chunk.js","sourcesContent":["import React from \"react\";\n\nexport const UserContext = React.createContext();\nexport const withUser = Component => props => (\n  <UserContext.Consumer>\n    {user => <Component {...props} user={user} />}\n  </UserContext.Consumer>\n);\n\nexport const LOGOUT = Symbol();\nexport const LOGIN = Symbol();\nexport const LOGIN_FAILED = Symbol();\n\nconst handleResponse = response => {\n  if (response.ok) return response.json();\n  throw new Error(\"Fetch fail\");\n};\n\nexport class UserProvider extends React.Component {\n  state = {\n    token: null,\n    status: LOGOUT,\n    login: this.login.bind(this)\n  };\n\n  componentDidMount() {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      fetch(\"/account\", {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`\n        }\n      })\n        .then(handleResponse)\n        .then(({ exp }) => {\n          if (new Date() < new Date(exp * 1000))\n            this.setState({ token, status: LOGIN });\n        });\n    }\n  }\n\n  login(password) {\n    fetch(\"/login\", {\n      method: \"POST\",\n      body: JSON.stringify({ password }),\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      }\n    })\n      .then(handleResponse)\n      .then(({ token }) => {\n        this.setState({ token, status: LOGIN });\n        localStorage.setItem(\"token\", token);\n      })\n      .catch(() => this.setState({ status: LOGIN_FAILED }));\n  }\n\n  render() {\n    return (\n      <UserContext.Provider value={this.state}>\n        {this.props.children}\n      </UserContext.Provider>\n    );\n  }\n}\n","import React from \"react\";\n\nexport const MovieSeen = ({ seen, onClick }) => (\n  <i\n    className=\"fas fa-eye\"\n    style={{\n      color: seen ? \"var(--success)\" : \"black\",\n      cursor: \"pointer\"\n    }}\n    onClick={onClick}\n  />\n);\n","const headers = user => ({\n  Accept: \"application/json\",\n  \"Content-Type\": \"application/json\",\n  Authorization: `Bearer ${user.token}`\n});\n\nconst handleResponse = response => {\n  if (response.ok) return response.json();\n  throw new Error(\"Fetch fail\");\n};\n\nexport const getMovie = (id, user) => {\n  return fetch(`/api/movies/${id}`, {\n    headers: headers(user)\n  }).then(handleResponse);\n};\n\nexport const getMovies = (search, user) => {\n  return fetch(`/api/movies?${search}`, {\n    headers: headers(user)\n  }).then(handleResponse);\n};\n\nexport const updateMovie = (movie, user) => {\n  return fetch(`/api/movies/${movie._id}`, {\n    method: \"PUT\",\n    body: JSON.stringify(movie),\n    headers: headers(user)\n  }).then(handleResponse);\n};\n\nexport const deleteMovie = (movie, user) => {\n  fetch(`/api/movies/${movie._id}`, {\n    method: \"DELETE\",\n    headers: headers(user)\n  }).then(handleResponse);\n};\n","import React from \"react\";\nimport \"./Movie.css\";\nimport { withUser } from \"../Login/UserContext\";\nimport { Link } from \"react-router-dom\";\nimport { MovieSeen } from \"./MovieSeen\";\nimport { deleteMovie, updateMovie } from \"./MovieAPI\";\n\nexport const MovieCard = withUser(\n  ({ movie, onEdit, user, onChange, onDelete }) => {\n    const update = (field, value) => () =>\n      updateMovie({ ...movie, [field]: value }, user).then(onChange);\n\n    const title = `${movie.title} ${\n      movie.season ? `- ${movie.season} saisons` : \"\"\n    }`;\n    const subtitle = `${\n      movie.productionYear.length\n        ? movie.productionYear[0]\n        : movie.productionYear\n    } - ${movie.genre.join(\",\")}`;\n\n    return (\n      <div className=\"card movie-card\">\n        <div className=\"card-body\">\n          <h5 className=\"card-title\">\n            <Link to={`movie/${movie._id}`}>\n              <div className=\"ellipsis\" title={title}>\n                {title}\n              </div>\n            </Link>\n          </h5>\n          <h6\n            className=\"card-subtitle mb-2 text-muted ellipsis\"\n            title={subtitle}\n          >\n            {subtitle}\n          </h6>\n          <div\n            className=\"movie-card-actions\"\n            style={{ position: \"absolute\", top: 2, right: 4 }}\n          >\n            <i\n              className=\"fab fa-neos\"\n              style={{\n                cursor: \"pointer\",\n                color: movie.netflix ? \"var(--danger)\" : \"black\"\n              }}\n              onClick={update(\"netflix\", !movie.netflix)}\n            />\n            {movie.type === \"Film\" ? (\n              <MovieSeen\n                seen={movie.seen}\n                onClick={update(\"seen\", !movie.seen)}\n              />\n            ) : (\n              undefined\n            )}\n            <i\n              className=\"fas fa-pencil-alt\"\n              onClick={onEdit}\n              style={{ cursor: \"pointer\" }}\n            />\n            <i\n              className=\"fas fa-ban\"\n              style={{\n                cursor: \"pointer\",\n                color: movie.finished ? \"#fecc00\" : \"black\"\n              }}\n              onClick={update(\"finished\", !movie.finished)}\n            />\n            <i\n              className=\"fas fa-trash\"\n              onClick={() => {\n                if (window.confirm()) {\n                  deleteMovie(movie, user).then(onDelete);\n                }\n              }}\n              style={{ cursor: \"pointer\" }}\n            />\n          </div>\n          <div className=\"poster text-center\">\n            <img src={movie.fileUrl} alt=\"movie poster\" />\n          </div>\n        </div>\n      </div>\n    );\n  }\n);\n","import React from \"react\";\n\nexport const ApplicationContext = React.createContext();\nexport const withApplication = Component => props => (\n  <ApplicationContext.Consumer>\n    {application => <Component {...props} application={application} />}\n  </ApplicationContext.Consumer>\n);\n\nexport const LOADING = Symbol();\nexport const LOADED = Symbol();\n\nexport class ApplicationProvider extends React.Component {\n  state = {\n    genres: [],\n    types: [],\n    status: LOADING\n  };\n\n  componentDidMount() {\n    const options = {\n      headers: {\n        Authorization: `Bearer ${this.props.token}`\n      }\n    };\n\n    const handleResponse = response => {\n      if (response.ok) return response.json();\n      throw new Error(\"Fetch fail\");\n    };\n    Promise.all([\n      fetch(\"/api/movies/genre\", options).then(handleResponse),\n      fetch(\"/api/movies/type\", options).then(handleResponse)\n    ]).then(([genres, types]) => {\n      this.setState({\n        genres,\n        types,\n        status: LOADED\n      });\n    });\n  }\n\n  render() {\n    return (\n      <ApplicationContext.Provider value={this.state}>\n        {this.props.children}\n      </ApplicationContext.Provider>\n    );\n  }\n}\n","import React from \"react\";\nimport findIndex from \"lodash/findIndex\";\n\nexport const MoviesContext = React.createContext();\n\nexport class MoviesProvider extends React.Component {\n  add = movie => {\n    this.setState({\n      movies: [movie, ...this.state.movies]\n    });\n  };\n\n  update = (id, movie) => {\n    const index = findIndex(this.state.movies, [\"_id\", id]);\n    const movies = [...this.state.movies];\n    movies[index] = movie;\n    this.setState({\n      movies: movies.filter(Boolean) // pass undefined as delete and then use filter te remove the element\n    });\n  };\n\n  addAll = ({ data, count }) => {\n    this.setState({ movies: [...this.state.movies, ...data], count });\n  };\n\n  invalidate = () => {\n    this.setState({ movies: [] });\n  };\n\n  onChange = name => value => {\n    this.invalidate(); // hmmm :)\n    this.setState(({ filters }) => ({\n      filters: { ...filters, [name]: value || \"\" }\n    }));\n  };\n\n  state = {\n    movies: [],\n    count: 0,\n    filters: {\n      productionYear: \"\",\n      title: \"\",\n      genres: [],\n      types: [],\n      seen: false,\n      unseen: false,\n      limit: 30\n    },\n    onChange: this.onChange,\n    addAll: this.addAll,\n    update: this.update,\n    add: this.add,\n    invalidate: this.invalidate\n  };\n\n  render() {\n    return (\n      <MoviesContext.Provider value={this.state}>\n        {this.props.children}\n      </MoviesContext.Provider>\n    );\n  }\n}\n","import React from \"react\";\nimport Downshift from \"downshift\";\n\nexport class MultiDownshift extends React.Component {\n  state = { selectedItems: this.props.selectedItems || [] };\n\n  componentDidUpdate(prevProps) {\n    if (\n      prevProps.selectedItems !== this.props.selectedItems &&\n      this.props.selectedItems !== this.state.selectedItems\n    ) {\n      this.setState({ selectedItems: this.props.selectedItems || [] });\n    }\n  }\n  stateReducer = (state, changes) => {\n    switch (changes.type) {\n      case Downshift.stateChangeTypes.keyDownEnter:\n      case Downshift.stateChangeTypes.clickItem:\n        return {\n          ...changes,\n          highlightedIndex: state.highlightedIndex,\n          isOpen: true\n        };\n      default:\n        return changes;\n    }\n  };\n\n  callOnChange = downshift => () => {\n    if (this.props.onChange) {\n      this.props.onChange(\n        this.state.selectedItems,\n        this.getStateAndHelpers(downshift)\n      );\n    }\n  };\n\n  handleSelection = (selectedItem, downshift) => {\n    if (this.state.selectedItems.includes(selectedItem)) {\n      this.removeItem(selectedItem, this.callOnChange(downshift));\n    } else {\n      this.addSelectedItem(selectedItem, this.callOnChange(downshift));\n    }\n  };\n\n  removeItem = (item, cb) => {\n    this.setState(({ selectedItems }) => {\n      return {\n        selectedItems: selectedItems.filter(i => i !== item)\n      };\n    }, cb);\n  };\n  addSelectedItem(item, cb) {\n    this.setState(\n      ({ selectedItems }) => ({\n        selectedItems: [...selectedItems, item]\n      }),\n      cb\n    );\n  }\n\n  getRemoveButtonProps = downshift => ({ onClick, item, ...props } = {}) => {\n    return {\n      onClick: e => {\n        // TODO: use something like downshift's composeEventHandlers utility instead\n        onClick && onClick(e);\n        e.stopPropagation();\n        this.removeItem(item, this.callOnChange(downshift));\n      },\n      ...props\n    };\n  };\n\n  getStateAndHelpers(downshift) {\n    const { selectedItems } = this.state;\n    const { getRemoveButtonProps, removeItem } = this;\n    return {\n      getRemoveButtonProps: getRemoveButtonProps(downshift),\n      removeItem,\n      selectedItems,\n      ...downshift\n    };\n  }\n  render() {\n    const { render, children = render, ...props } = this.props;\n    // TODO: compose together props (rather than overwriting them) like downshift does\n    return (\n      <Downshift\n        {...props}\n        stateReducer={this.stateReducer}\n        onChange={this.handleSelection}\n        selectedItem={null}\n      >\n        {downshift => children(this.getStateAndHelpers(downshift))}\n      </Downshift>\n    );\n  }\n}\n","import React from \"react\";\nimport { css as emoCSS } from \"emotion\";\nimport styled from \"react-emotion\";\n\n// TODO copy paste from downshift example :)\n\nconst css = (...args) => ({ className: emoCSS(...args) });\n\nconst Item = styled(\"li\")(\n  {\n    position: \"relative\",\n    cursor: \"pointer\",\n    display: \"block\",\n    border: \"none\",\n    height: \"auto\",\n    textAlign: \"left\",\n    borderTop: \"none\",\n    lineHeight: \"1em\",\n    color: \"rgba(0,0,0,.87)\",\n    fontSize: \"1rem\",\n    textTransform: \"none\",\n    fontWeight: \"400\",\n    boxShadow: \"none\",\n    padding: \".8rem 1.1rem\",\n    whiteSpace: \"normal\",\n    wordWrap: \"normal\"\n  },\n  ({ isActive, isSelected }) => {\n    const styles = [];\n    if (isActive) {\n      styles.push({\n        color: \"rgba(0,0,0,.95)\",\n        background: \"rgba(0,0,0,.03)\"\n      });\n    }\n    if (isSelected) {\n      styles.push({\n        color: \"rgba(0,0,0,.95)\",\n        fontWeight: \"700\"\n      });\n    }\n    return styles;\n  }\n);\n\nconst BaseMenu = styled(\"ul\")(\n  {\n    padding: 0,\n    marginTop: 0,\n    position: \"absolute\",\n    backgroundColor: \"white\",\n    width: \"100%\",\n    maxHeight: \"20rem\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    outline: \"0\",\n    transition: \"opacity .1s ease\",\n    borderRadius: \"0 0 .28571429rem .28571429rem\",\n    boxShadow: \"0 2px 3px 0 rgba(34,36,38,.15)\",\n    borderColor: \"#96c8da\",\n    borderTopWidth: \"0\",\n    borderRightWidth: 1,\n    borderBottomWidth: 1,\n    borderLeftWidth: 1,\n    borderStyle: \"solid\",\n    zIndex: 10\n  },\n  ({ isOpen }) => ({\n    border: isOpen ? null : \"none\"\n  })\n);\n\nconst Menu = React.forwardRef((props, ref) => (\n  <BaseMenu innerRef={ref} {...props} />\n));\n\nconst ControllerButton = styled(\"button\")({\n  backgroundColor: \"transparent\",\n  border: \"none\",\n  position: \"absolute\",\n  right: 0,\n  top: 0,\n  cursor: \"pointer\",\n  width: 47,\n  display: \"flex\",\n  flexDirection: \"column\",\n  height: \"100%\",\n  justifyContent: \"center\",\n  alignItems: \"center\"\n});\n\nfunction ArrowIcon({ isOpen }) {\n  return (\n    <svg\n      viewBox=\"0 0 20 20\"\n      preserveAspectRatio=\"none\"\n      width={16}\n      fill=\"transparent\"\n      stroke=\"#979797\"\n      strokeWidth=\"1.1px\"\n      transform={isOpen ? \"rotate(180)\" : null}\n    >\n      <path d=\"M1,6 L10,15 L19,6\" />\n    </svg>\n  );\n}\nexport { Menu, ControllerButton, Item, ArrowIcon, css };\n","import React from \"react\";\nimport Downshift from \"downshift\";\n\nexport class MultiDownshiftWithReverse extends React.Component {\n  state = { selectedItems: this.props.selectedItems || [] };\n  stateReducer = (state, changes) => {\n    switch (changes.type) {\n      case Downshift.stateChangeTypes.keyDownEnter:\n      case Downshift.stateChangeTypes.clickItem:\n        return {\n          ...changes,\n          highlightedIndex: state.highlightedIndex,\n          isOpen: true\n        };\n      default:\n        return changes;\n    }\n  };\n\n  callOnChange = downshift => () => {\n    if (this.props.onChange) {\n      this.props.onChange(\n        this.state.selectedItems,\n        this.getStateAndHelpers(downshift)\n      );\n    }\n  };\n\n  handleSelection = (selectedItem, downshift) => {\n    if (\n      this.state.selectedItems.filter(item => selectedItem === item[0]).length >\n      0\n    ) {\n      this.removeItem([selectedItem], this.callOnChange(downshift));\n    } else {\n      this.addSelectedItem(selectedItem, this.callOnChange(downshift));\n    }\n  };\n\n  removeItem = (item, cb) => {\n    this.setState(({ selectedItems }) => {\n      return {\n        selectedItems: selectedItems.filter(i => i[0] !== item[0])\n      };\n    }, cb);\n  };\n  addSelectedItem(item, cb) {\n    this.setState(\n      ({ selectedItems }) => ({\n        selectedItems: [...selectedItems, [item, true]]\n      }),\n      cb\n    );\n  }\n\n  getRemoveButtonProps = downshift => ({ onClick, item, ...props } = {}) => {\n    return {\n      onClick: e => {\n        // TODO: use something like downshift's composeEventHandlers utility instead\n        onClick && onClick(e);\n        e.stopPropagation();\n        this.removeItem(item, this.callOnChange(downshift));\n      },\n      ...props\n    };\n  };\n\n  clickOnItem = downshift => (item, index) => {\n    this.setState(({ selectedItems }) => {\n      const newSelectedItems = selectedItems;\n      newSelectedItems[index] = [item[0], !item[1]];\n      return {\n        selectedItems: newSelectedItems.filter(i => i !== item[0])\n      };\n    }, this.callOnChange(downshift));\n  };\n  displayItem = item => {\n    return item[0];\n  };\n  displayBackground = item => {\n    return item[1] ? \"#ccc\" : \"tomato\";\n  };\n\n  getStateAndHelpers(downshift) {\n    const { selectedItems } = this.state;\n    const {\n      getRemoveButtonProps,\n      removeItem,\n      clickOnItem,\n      displayItem,\n      displayBackground\n    } = this;\n    return {\n      getRemoveButtonProps: getRemoveButtonProps(downshift),\n      removeItem,\n      selectedItems,\n      clickOnItem: clickOnItem(downshift),\n      displayItem,\n      displayBackground,\n      ...downshift\n    };\n  }\n  render() {\n    const { render, children = render, ...props } = this.props;\n    // TODO: compose together props (rather than overwriting them) like downshift does\n    return (\n      <Downshift\n        {...props}\n        stateReducer={this.stateReducer}\n        onChange={this.handleSelection}\n        selectedItem={null}\n      >\n        {downshift => children(this.getStateAndHelpers(downshift))}\n      </Downshift>\n    );\n  }\n}\n","import { MultiDownshift } from \"./MultiDownshift\";\nimport { ArrowIcon, ControllerButton, css, Item, Menu } from \"../shared\";\nimport React, { Component } from \"react\";\nimport identity from \"lodash/identity\";\nimport { MultiDownshiftWithReverse } from \"./MultiDownshiftWithReverse\";\n\nconst BaseMultiDownshift = BaseComponent =>\n  class extends Component {\n    constructor(props) {\n      super(props);\n      this.input = React.createRef();\n    }\n\n    render() {\n      const { handleChange, placeholder, items, selectedItems } = this.props;\n      return (\n        <BaseComponent onChange={handleChange} selectedItems={selectedItems}>\n          {({\n            getInputProps,\n            getToggleButtonProps,\n            getMenuProps,\n            getRemoveButtonProps,\n            removeItem,\n            isOpen,\n            inputValue,\n            selectedItems,\n            getItemProps,\n            highlightedIndex,\n            toggleMenu,\n            clickOnItem = () => void 0,\n            displayItem = identity,\n            displayBackground = () => \"#ccc\"\n          }) => (\n            <div style={{ margin: \"auto\", position: \"relative\" }}>\n              <div\n                {...css({\n                  cursor: \"pointer\",\n                  position: \"relative\",\n                  borderRadius: \"6px\",\n                  borderTopRadius: 6,\n                  borderBottomRightRadius: isOpen ? 0 : 6,\n                  borderBottomLeftRadius: isOpen ? 0 : 6,\n                  padding: 10,\n                  paddingRight: 50,\n                  boxShadow: \"0 2px 3px 0 rgba(34,36,38,.15)\",\n                  borderColor: \"#96c8da\",\n                  borderTopWidth: \"1\",\n                  borderRightWidth: 1,\n                  borderBottomWidth: 1,\n                  borderLeftWidth: 1,\n                  borderStyle: \"solid\"\n                })}\n                onClick={() => {\n                  toggleMenu();\n                  !isOpen && this.input.current.focus();\n                }}\n              >\n                <div\n                  {...css({\n                    display: \"flex\",\n                    flexWrap: \"wrap\",\n                    alignItems: \"center\"\n                  })}\n                >\n                  {selectedItems.length > 0\n                    ? selectedItems.map((item, index) => (\n                        <div\n                          key={index}\n                          {...css({\n                            margin: 2,\n                            paddingTop: 2,\n                            paddingBottom: 2,\n                            paddingLeft: 8,\n                            paddingRight: 8,\n                            display: \"inline-block\",\n                            wordWrap: \"none\",\n                            backgroundColor: displayBackground(item),\n                            borderRadius: 2\n                          })}\n                          onClick={event => {\n                            event.preventDefault();\n                            event.stopPropagation();\n                            clickOnItem(item, index);\n                          }}\n                        >\n                          <div\n                            {...css({\n                              display: \"grid\",\n                              gridGap: 6,\n                              gridAutoFlow: \"column\",\n                              alignItems: \"center\"\n                            })}\n                          >\n                            <span>{displayItem(item)}</span>\n                            <button\n                              {...getRemoveButtonProps({ item })}\n                              {...css({\n                                cursor: \"pointer\",\n                                lineHeight: 0.8,\n                                border: \"none\",\n                                backgroundColor: \"transparent\",\n                                padding: \"0\",\n                                fontSize: \"16px\"\n                              })}\n                              type=\"button\"\n                            >\n                              𝘅\n                            </button>\n                          </div>\n                        </div>\n                      ))\n                    : placeholder}\n                  <input\n                    {...getInputProps({\n                      ref: this.input,\n                      onKeyUp(event) {\n                        if (event.key === \"Backspace\" && !inputValue) {\n                          removeItem(selectedItems[selectedItems.length - 1]);\n                        }\n                      },\n                      ...css({\n                        border: \"none\",\n                        marginLeft: 6,\n                        flex: 1,\n                        fontSize: 14,\n                        minHeight: 27\n                      })\n                    })}\n                  />\n                </div>\n                <ControllerButton\n                  {...getToggleButtonProps({\n                    // prevents the menu from immediately toggling\n                    // closed (due to our custom click handler above).\n                    onClick(event) {\n                      event.stopPropagation();\n                    }\n                  })}\n                >\n                  <ArrowIcon isOpen={isOpen} />\n                </ControllerButton>\n              </div>\n              <Menu {...getMenuProps({ isOpen })}>\n                {isOpen\n                  ? items.map((item, index) => (\n                      <Item\n                        key={index}\n                        {...getItemProps({\n                          item,\n                          index,\n                          isActive: highlightedIndex === index,\n                          isSelected: selectedItems.includes(item)\n                        })}\n                      >\n                        {item}\n                      </Item>\n                    ))\n                  : null}\n              </Menu>\n            </div>\n          )}\n        </BaseComponent>\n      );\n    }\n  };\n\nexport const AsyncMultiDownshift = BaseMultiDownshift(MultiDownshift);\nexport const AsyncMultiDownshiftwithReverse = BaseMultiDownshift(\n  MultiDownshiftWithReverse\n);\n","import React, { useContext } from \"react\";\nimport identity from \"lodash/identity\";\nimport { MoviesContext } from \"./MoviesContext\";\nimport {\n  AsyncMultiDownshift,\n  AsyncMultiDownshiftwithReverse\n} from \"../Common/AsyncMultiDownshift\";\nimport { ApplicationContext } from \"../ApplicationContext\";\n\nconst fromEvent = event => event.target.value;\n\nconst forInput = (\n  { filters, onChange },\n  name,\n  transform = identity,\n  from = fromEvent\n) => {\n  return {\n    value: filters[name],\n    onChange: value => onChange(name)(transform(from(value)))\n  };\n};\n\nexport const MoviesFilter = () => {\n  const { filters, onChange } = useContext(MoviesContext);\n  const { genres, types } = useContext(ApplicationContext);\n  const { seen, unseen, netflix, unnetflix } = filters;\n\n  return (\n    <form className=\"form-inline movies-filter\">\n      <div className=\"form-group mx-sm-3\">\n        <input\n          {...forInput({ filters, onChange }, \"productionYear\", value =>\n            parseInt(value, 10)\n          )}\n          type=\"number\"\n          max={2200}\n          placeholder=\"YYYY\"\n          className=\"form-control\"\n          style={{ width: \"90px\" }}\n        />\n      </div>\n      <div className=\"form-group mx-sm-3\">\n        <input\n          type=\"text\"\n          {...forInput({ filters, onChange }, \"title\")}\n          placeholder=\"Title\"\n          className=\"form-control\"\n        />\n      </div>\n      <div className=\"form-group mx-sm-3\" style={{ maxWidth: \"300px\" }}>\n        <AsyncMultiDownshiftwithReverse\n          placeholder=\"Genre\"\n          handleChange={\n            forInput({ filters, onChange }, \"genres\", identity, identity)\n              .onChange\n          }\n          items={genres}\n        />\n      </div>\n      <div className=\"form-group mx-sm-3\" style={{ maxWidth: \"300px\" }}>\n        <AsyncMultiDownshift\n          placeholder=\"Type\"\n          handleChange={\n            forInput({ filters, onChange }, \"types\", identity, identity)\n              .onChange\n          }\n          items={types}\n        />\n      </div>\n      <div className=\"form-group mx-sm-3\">\n        <i\n          className=\"fas fa-eye\"\n          style={{\n            color: seen ? \"var(--success)\" : \"\",\n            cursor: \"pointer\"\n          }}\n          onClick={() => onChange(\"seen\")(!seen)}\n        />\n        <i\n          className=\"fas fa-eye-slash\"\n          style={{\n            color: unseen ? \"var(--success)\" : \"\",\n            cursor: \"pointer\"\n          }}\n          onClick={() => onChange(\"unseen\")(!unseen)}\n        />\n      </div>\n      <div className=\"form-group mx-sm-3\">\n        <span\n          className=\"fa-stack fa-1g\"\n          onClick={() => onChange(\"netflix\")(!netflix)}\n          style={{\n            cursor: \"pointer\"\n          }}\n        >\n          <i\n            className=\"far fa-circle fa-stack-2x\"\n            style={{\n              color: netflix ? \"var(--danger)\" : \"black\"\n            }}\n          />\n          <i className=\"fab fa-neos fa-stack-1x\" />\n        </span>\n        <span\n          className=\"fa-stack fa-1g\"\n          onClick={() => onChange(\"unnetflix\")(!unnetflix)}\n          style={{\n            cursor: \"pointer\"\n          }}\n        >\n          <i\n            className=\"fas fa-ban fa-stack-2x\"\n            style={{\n              color: unnetflix ? \"var(--danger)\" : \"black\"\n            }}\n          />\n          <i className=\"fab fa-neos fa-stack-1x\" />\n        </span>\n      </div>\n    </form>\n  );\n};\n","import React from \"react\";\nimport Downshift from \"downshift\";\nimport { ArrowIcon, ControllerButton, css, Item, Menu } from \"../shared\";\n\nexport class SingleDownshift extends React.Component {\n  render() {\n    const { onChange, placeholder, items, selectedItem } = this.props;\n    return (\n      <Downshift onChange={onChange} selectedItem={selectedItem}>\n        {({\n          getInputProps,\n          getItemProps,\n          getLabelProps,\n          getMenuProps,\n          isOpen,\n          inputValue,\n          highlightedIndex,\n          selectedItem,\n          toggleMenu\n        }) => (\n          <div style={{ margin: \"auto\", position: \"relative\" }}>\n            <div\n              {...css({\n                cursor: \"pointer\",\n                position: \"relative\",\n                borderRadius: \"6px\",\n                borderTopRadius: 6,\n                borderBottomRightRadius: isOpen ? 0 : 6,\n                borderBottomLeftRadius: isOpen ? 0 : 6,\n                padding: 10,\n                paddingRight: 50,\n                boxShadow: \"0 2px 3px 0 rgba(34,36,38,.15)\",\n                borderColor: \"#96c8da\",\n                borderTopWidth: \"1\",\n                borderRightWidth: 1,\n                borderBottomWidth: 1,\n                borderLeftWidth: 1,\n                borderStyle: \"solid\"\n              })}\n              onClick={() => {\n                toggleMenu();\n              }}\n            >\n              <div\n                {...css({\n                  display: \"flex\",\n                  flexWrap: \"wrap\",\n                  alignItems: \"center\"\n                })}\n              >\n                {selectedItem ? (\n                  <div\n                    {...css({\n                      margin: 2,\n                      paddingTop: 2,\n                      paddingBottom: 2,\n                      paddingLeft: 8,\n                      paddingRight: 8,\n                      display: \"inline-block\",\n                      wordWrap: \"none\",\n                      backgroundColor: \"#ccc\",\n                      borderRadius: 2\n                    })}\n                  >\n                    <div\n                      {...css({\n                        display: \"grid\",\n                        gridGap: 6,\n                        gridAutoFlow: \"column\",\n                        alignItems: \"center\"\n                      })}\n                    >\n                      <span>{selectedItem}</span>\n                    </div>\n                  </div>\n                ) : (\n                  placeholder\n                )}\n              </div>\n              <ControllerButton>\n                <ArrowIcon isOpen={isOpen} />\n              </ControllerButton>\n            </div>\n            <Menu {...getMenuProps({ isOpen })}>\n              {isOpen\n                ? items.map((item, index) => (\n                    <Item\n                      key={index}\n                      {...getItemProps({\n                        item,\n                        index,\n                        isActive: highlightedIndex === index,\n                        isSelected: selectedItem === item\n                      })}\n                    >\n                      {item}\n                    </Item>\n                  ))\n                : null}\n            </Menu>\n          </div>\n        )}\n      </Downshift>\n    );\n  }\n}\n","import React, { Component, Fragment } from \"react\";\n\nexport class Accordion extends Component {\n  state = {\n    open: false,\n    toggle: this.toggle.bind(this)\n  };\n\n  toggle() {\n    this.setState({ open: !this.state.open });\n  }\n\n  render() {\n    return <Fragment>{this.props.children(this.state)}</Fragment>;\n  }\n}\n","import React, { Fragment } from \"react\";\nimport { SingleDownshift } from \"../Common/SingleDownshift\";\nimport { LOADING, withApplication } from \"../ApplicationContext\";\nimport isEmpty from \"lodash/isEmpty\";\nimport { AsyncMultiDownshift } from \"../Common/AsyncMultiDownshift\";\nimport { Accordion } from \"../Common/Accordion\";\nimport { withUser } from \"../Login/UserContext\";\n\nconst defaultState = {\n  movie: {\n    title: \"\",\n    genre: [],\n    type: \"\",\n    season: \"\",\n    productionYear: \"\",\n    summary: \"\"\n  },\n  allocine: {\n    movies: [],\n    tvshows: []\n  }\n};\n\nconst headers = user => ({\n  Accept: \"application/json\",\n  \"Content-Type\": \"application/json\",\n  Authorization: `Bearer ${user.token}`\n});\n\nconst handleResponse = response => {\n  if (response.ok) return response.json();\n  throw new Error(\"Fetch fail\");\n};\n\nclass MovieFormWithContext extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      movie: props.movie ? props.movie : defaultState.movie,\n      allocine: defaultState.allocine\n    };\n  }\n\n  componentDidMount() {\n    // eslint-disable-next-line no-undef\n    $(\"#movie-creator-updator\").on(\"hide.bs.modal\", this.props.onClose);\n  }\n\n  valid = () => {\n    return (\n      !isEmpty(this.state.movie.title) &&\n      this.state.movie.genre.length > 0 &&\n      !isEmpty(this.state.movie.type) &&\n      (this.state.movie.type !== \"Série\" ||\n        (this.state.movie.type === \"Série\" && this.state.movie.season > 0))\n    );\n  };\n\n  add = () => {\n    fetch(\"/api/movies\", {\n      method: \"POST\",\n      body: JSON.stringify(this.state.movie),\n      headers: headers(this.props.user)\n    })\n      .then(handleResponse)\n      .then(data => {\n        this.props.onAdd({ ...this.state.movie, ...data });\n        // eslint-disable-next-line no-undef\n        $(\"#movie-creator-updator\").modal(\"hide\");\n      });\n  };\n\n  update = () => {\n    fetch(`/api/movies/${this.props.movie._id}`, {\n      method: \"PUT\",\n      body: JSON.stringify(this.state.movie),\n      headers: headers(this.props.user)\n    })\n      .then(handleResponse)\n      .then(data => {\n        this.props.onUpdate({ ...this.state.movie, ...data });\n        // eslint-disable-next-line no-undef\n        $(\"#movie-creator-updator\").modal(\"hide\");\n      });\n  };\n\n  search = () => {\n    Promise.all([\n      fetch(`/api/allocine?type=Film&title=${this.state.movie.title}`, {\n        headers: headers(this.props.user)\n      }).then(handleResponse),\n      fetch(`/api/allocine?type=Série&title=${this.state.movie.title}`, {\n        headers: headers(this.props.user)\n      }).then(handleResponse)\n    ]).then(([movies, tvshows]) =>\n      this.setState({ allocine: { movies, tvshows } })\n    );\n  };\n\n  synchronizeMovieAllocine = idAllocine => {\n    // if click on the currently selected movie, unselect it\n    if (idAllocine === this.state.movie.idAllocine) {\n      this.setState({\n        movie: {\n          ...this.state.movie,\n          idAllocine: null\n        }\n      });\n    } else {\n      fetch(`/api/allocine/movie/${idAllocine}`, {\n        headers: headers(this.props.user)\n      })\n        .then(handleResponse)\n        .then(({ movie }) =>\n          this.setState({\n            movie: {\n              ...this.state.movie,\n              idAllocine,\n              title: movie.title,\n              genre: movie.genre.map(m => m.$).sort(),\n              type: \"Film\",\n              productionYear:\n                movie.release && movie.release.releaseDate\n                  ? new Date(movie.release.releaseDate).getFullYear()\n                  : movie.productionYear,\n              summary: movie.synopsis,\n              fileUrl: movie.poster ? movie.poster.href : \"\",\n              season: null\n            }\n          })\n        );\n    }\n  };\n\n  synchronizeTvShowAllocine = idAllocine => {\n    // if click on the currently selected movie, unselect it\n    if (idAllocine === this.state.movie.idAllocine) {\n      this.setState({\n        movie: {\n          ...this.state.movie,\n          idAllocine: null\n        }\n      });\n    } else {\n      fetch(`/api/allocine/serie/${idAllocine}`, {\n        headers: headers(this.props.user)\n      })\n        .then(handleResponse)\n        .then(({ tvseries }) =>\n          this.setState({\n            movie: {\n              ...this.state.movie,\n              idAllocine,\n              title: tvseries.title,\n              genre: tvseries.genre.map(m => m.$).sort(),\n              type: \"Série\",\n              productionYear: tvseries.yearStart,\n              season: tvseries.seasonCount,\n              summary: tvseries.synopsis,\n              fileUrl: tvseries.poster ? tvseries.poster.href : \"\"\n            }\n          })\n        );\n    }\n  };\n\n  onInput = (field, transform = data => data) => {\n    return event =>\n      this.setState({\n        movie: { ...this.state.movie, [field]: transform(event.target.value) }\n      });\n  };\n\n  onSelect = field => {\n    return value =>\n      this.setState({ movie: { ...this.state.movie, [field]: value } });\n  };\n\n  render() {\n    const { movie } = this.state;\n    return (\n      <Fragment>\n        {this.props.application.status === LOADING ? (\n          <div>Loading...</div>\n        ) : (\n          <div\n            className=\"movie-modal modal fade movie-form\"\n            id=\"movie-creator-updator\"\n            tabIndex=\"-1\"\n            role=\"dialog\"\n            data-show=\"true\"\n          >\n            <div className=\"modal-dialog modal-dialog-centered\" role=\"document\">\n              <div className=\"modal-content\">\n                <div className=\"modal-header\">\n                  <h5 className=\"modal-title\">\n                    {(movie && movie.title) || \"New\"}\n                  </h5>\n                  <button\n                    type=\"button\"\n                    className=\"close\"\n                    data-dismiss=\"modal\"\n                    aria-label=\"Close\"\n                  >\n                    <span aria-hidden=\"true\">&times;</span>\n                  </button>\n                </div>\n                <div className=\"modal-body\">\n                  <div className=\"form-row\">\n                    <div className=\"form-group col-11\">\n                      <label htmlFor=\"title\">Title</label>\n                      <input\n                        type=\"text\"\n                        className=\"form-control\"\n                        id=\"title\"\n                        aria-describedby=\"title\"\n                        placeholder=\"Enter title\"\n                        onChange={this.onInput(\"title\")}\n                        value={this.state.movie.title}\n                      />\n                    </div>\n                    <div className=\"form-group col-1 text-center\">\n                      <i\n                        className=\"fab fa-angular fa-2x\"\n                        style={{\n                          cursor: \"pointer\",\n                          color: \"#fecc00\",\n                          paddingTop: \"35px\"\n                        }}\n                        onClick={this.search}\n                      />\n                    </div>\n                  </div>\n                  {this.state.allocine.movies.length > 0 ? (\n                    <Accordion>\n                      {({ open, toggle }) => {\n                        return (\n                          <Fragment>\n                            <div onClick={toggle} style={{ cursor: \"pointer\" }}>\n                              {this.state.allocine.movies.length} movies\n                              {open ? (\n                                <i className=\"fas fa-chevron-up\" />\n                              ) : (\n                                <i className=\"fas fa-chevron-down\" />\n                              )}\n                            </div>\n                            <div\n                              className=\"row\"\n                              style={{\n                                overflowX: \"scroll\",\n                                display: open ? \"flex\" : \"none\",\n                                flexWrap: \"nowrap\"\n                              }}\n                            >\n                              {this.state.allocine.movies.map(movie => (\n                                <div\n                                  key={movie.code}\n                                  className={`col-2 allocine-movie ${\n                                    movie.code === this.state.movie.idAllocine\n                                      ? \"selected\"\n                                      : \"\"\n                                  }`}\n                                  onClick={() =>\n                                    this.synchronizeMovieAllocine(movie.code)\n                                  }\n                                >\n                                  {movie.code ===\n                                  this.state.movie.idAllocine ? (\n                                    <i className=\"fas fa-check-circle selected-movie-icon fa-2x\" />\n                                  ) : null}\n                                  <div>\n                                    {movie.title} -{\" \"}\n                                    {movie.release && movie.release.releaseDate\n                                      ? new Date(\n                                          movie.release.releaseDate\n                                        ).getFullYear()\n                                      : movie.productionYear}\n                                  </div>\n                                  <div>\n                                    {movie.poster ? (\n                                      <img\n                                        src={movie.poster.href}\n                                        alt=\"movie poster\"\n                                        style={{ width: \"100%\" }}\n                                      />\n                                    ) : null}\n                                  </div>\n                                </div>\n                              ))}\n                            </div>\n                          </Fragment>\n                        );\n                      }}\n                    </Accordion>\n                  ) : null}\n                  {this.state.allocine.tvshows.length > 0 ? (\n                    <Accordion>\n                      {({ open, toggle }) => {\n                        return (\n                          <Fragment>\n                            <div onClick={toggle} style={{ cursor: \"pointer\" }}>\n                              {this.state.allocine.tvshows.length} tv shows\n                              {open ? (\n                                <i className=\"fas fa-chevron-up\" />\n                              ) : (\n                                <i className=\"fas fa-chevron-down\" />\n                              )}\n                            </div>\n                            <div\n                              className=\"row\"\n                              style={{\n                                overflowX: \"scroll\",\n                                display: open ? \"flex\" : \"none\",\n                                flexWrap: \"nowrap\"\n                              }}\n                            >\n                              {this.state.allocine.tvshows.map(tvshow => (\n                                <div\n                                  key={tvshow.code}\n                                  className={`col-2 allocine-movie ${\n                                    tvshow.code === this.state.movie.idAllocine\n                                      ? \"selected\"\n                                      : \"\"\n                                  }`}\n                                  onClick={() =>\n                                    this.synchronizeTvShowAllocine(tvshow.code)\n                                  }\n                                >\n                                  {tvshow.code ===\n                                  this.state.movie.idAllocine ? (\n                                    <i className=\"fas fa-check-circle selected-movie-icon fa-2x\" />\n                                  ) : null}\n                                  <div>\n                                    {tvshow.title} - {tvshow.yearStart}\n                                  </div>\n                                  <div>\n                                    {tvshow.poster ? (\n                                      <img\n                                        src={tvshow.poster.href}\n                                        alt=\"tvshow poster\"\n                                        style={{ width: \"100%\" }}\n                                      />\n                                    ) : null}\n                                  </div>\n                                </div>\n                              ))}\n                            </div>\n                          </Fragment>\n                        );\n                      }}\n                    </Accordion>\n                  ) : null}\n                  <div className=\"form-group\">\n                    <label>Genre</label>\n                    <AsyncMultiDownshift\n                      selectedItems={this.state.movie.genre}\n                      placeholder=\"Genre\"\n                      items={this.props.application.genres}\n                      handleChange={this.onSelect(\"genre\")}\n                    />\n                  </div>\n                  <div className=\"form-row\">\n                    <div\n                      className={`form-group ${\n                        this.state.movie.type === \"Série\"\n                          ? \"col-md-8\"\n                          : \"col-md-12\"\n                      }`}\n                    >\n                      <label>Type</label>\n                      <SingleDownshift\n                        selectedItem={this.state.movie.type}\n                        placeholder=\"Type\"\n                        items={this.props.application.types}\n                        onChange={this.onSelect(\"type\")}\n                      />\n                    </div>\n                    {this.state.movie.type === \"Série\" ? (\n                      <div className=\"form-group col-md-4\">\n                        <label htmlFor=\"season\">Season</label>\n                        <input\n                          type=\"number\"\n                          className=\"form-control\"\n                          id=\"season\"\n                          aria-describedby=\"season\"\n                          placeholder=\"Enter season\"\n                          onChange={this.onInput(\"season\")}\n                          value={this.state.movie.season}\n                        />\n                      </div>\n                    ) : (\n                      undefined\n                    )}\n                  </div>\n                  <div className=\"form-group\">\n                    <label htmlFor=\"production-year\">Production Year</label>\n                    <input\n                      type=\"number\"\n                      className=\"form-control\"\n                      id=\"production-year\"\n                      aria-describedby=\"production year\"\n                      placeholder=\"Enter production year\"\n                      onChange={this.onInput(\"productionYear\", data =>\n                        parseInt(data, 10)\n                      )}\n                      value={this.state.movie.productionYear}\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label htmlFor=\"summary\">Summary</label>\n                    <textarea\n                      className=\"form-control\"\n                      id=\"summary\"\n                      aria-describedby=\"summary\"\n                      placeholder=\"Enter summary\"\n                      onChange={this.onInput(\"summary\")}\n                      value={this.state.movie.summary}\n                    />\n                  </div>\n                </div>\n                <div className=\"modal-footer\">\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-secondary\"\n                    data-dismiss=\"modal\"\n                  >\n                    Close\n                  </button>\n                  <button\n                    type=\"button\"\n                    disabled={!this.valid()}\n                    className=\"btn btn-primary\"\n                    onClick={this.state.movie._id ? this.update : this.add}\n                  >\n                    {movie._id ? \"Update\" : \"Save\"}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nexport const MovieForm = withApplication(withUser(MovieFormWithContext));\n","import React, { Fragment, useContext, useEffect, useState } from \"react\";\nimport { MovieCard } from \"./MovieCard\";\nimport isArray from \"lodash/isArray\";\nimport { ApplicationContext, LOADING } from \"../ApplicationContext\";\nimport { MoviesContext } from \"./MoviesContext\";\nimport { MoviesFilter } from \"./MoviesFilter\";\nimport { getMovies } from \"./MovieAPI\";\nimport { UserContext } from \"../Login/UserContext\";\nimport debounce from \"lodash/debounce\";\nimport { MovieForm } from \"./MovieForm\";\n\nconst newMovie = () => ({});\n\nconst buildQuery = (filters, offset) => {\n  // can use lodash/partition to one line\n  const genres = filters.genres\n    .filter(genre => genre[1])\n    .map(genre => genre[0]);\n  const notGenres = filters.genres\n    .filter(genre => !genre[1])\n    .map(genre => genre[0]);\n  return Object.keys(filters)\n    .filter(key => key !== \"genres\") // handle genres manually)\n    .filter(\n      key =>\n        (!isArray(filters[key]) && filters[key]) ||\n        (isArray(filters[key]) && filters[key].length > 0)\n    )\n    .map(key => `${key}=${filters[key]}`)\n    .concat(\n      genres.length > 0 ? `genres=${genres.join(\",\")}` : \"\",\n      notGenres.length > 0 ? `notGenres=${notGenres.join(\",\")}` : \"\",\n      `offset=${offset}`\n    )\n    .filter(Boolean) // remove empty strings\n    .join(\"&\");\n};\n\nexport const List = () => {\n  // load contexts\n  const { status } = useContext(ApplicationContext);\n  const { movies, count, addAll, filters, add, update } = useContext(\n    MoviesContext\n  );\n  const user = useContext(UserContext);\n\n  // create state\n  const [offset, setOffset] = useState(movies.length / filters.limit);\n  const [movie, setMovie] = useState(newMovie());\n  const [key, setKey] = useState(0);\n\n  //create actions\n  const loadMore = offset => {\n    getMovies(buildQuery(filters, offset), user)\n      .then(addAll)\n      .then(() => setOffset(offset + 1)); // useInc\n  };\n  const showMovie = () => {\n    // ignore first trigger, needed for backward navigation\n    if (key > 0) {\n      // eslint-disable-next-line no-undef\n      $(\"#movie-creator-updator\").modal(\"show\");\n    }\n  };\n\n  // create effects\n  useEffect(\n    () => {\n      // useDebounce :)\n      const debouncedLoadMore = debounce(loadMore, 400, {\n        leading: false,\n        trailing: true\n      });\n      // no movies ? then automatically fetch some (note: every time a filter is updated, movies are cleaned up)\n      if (movies.length === 0) {\n        debouncedLoadMore(0);\n      }\n      return () => debouncedLoadMore.cancel();\n    },\n    [filters]\n  );\n  useEffect(showMovie, [movie]);\n\n  // render\n  return (\n    <div>\n      {status === LOADING ? (\n        <div>Loading ....</div>\n      ) : (\n        <Fragment>\n          <MovieForm\n            // force reinitialisation of movie form\n            key={movie._id || key}\n            movie={movie._id ? movie : null}\n            onAdd={movie => add(movie)}\n            onUpdate={movie => update(movie._id, movie)}\n          />\n          <div>\n            Display {movies.length} of {count} found movies/tvshows\n          </div>\n          <i\n            onClick={() => {\n              setMovie(newMovie());\n              setKey(key + 1);\n            }}\n            className=\"fas fa-plus-circle fa-3x\"\n            style={{\n              top: \"22px\",\n              left: \"22px\",\n              position: \"absolute\",\n              color: \"#F1F7EE\",\n              cursor: \"pointer\"\n            }}\n            title=\"Add a movie or a tv show\"\n          />\n          <MoviesFilter />\n          <div className=\"movies\">\n            {movies.map(movie => (\n              <MovieCard\n                key={movie._id}\n                movie={movie}\n                onChange={movie => update(movie._id, movie)}\n                onDelete={_ => update(movie._id, undefined)}\n                onEdit={() => {\n                  setMovie({\n                    ...movie // create a new movie to force the show effect to be displayed\n                  });\n                  setKey(key + 1); // mandatory otherwise first edit fail\n                }}\n              />\n            ))}\n          </div>\n          <div className=\"text-center m-3\">\n            <button\n              onClick={() => loadMore(offset)}\n              className=\"btn btn-primary btn-lg\"\n            >\n              Load more\n            </button>\n          </div>\n        </Fragment>\n      )}\n    </div>\n  );\n};\n","import { Fragment, useState } from \"react\";\nimport React from \"react\";\n\nexport const MovieSeasonYear = props => {\n  // useInput :)\n  const [year, setYear] = useState(props.year || \"\");\n  return (\n    <Fragment>\n      <input\n        value={year}\n        onChange={event => setYear(event.target.value)}\n        type=\"number\"\n        max={2200}\n        placeholder=\"YYYY\"\n        className=\"form-control d-inline\"\n        style={{ width: \"90px\" }}\n      />\n      <button\n        type=\"button\"\n        className=\"btn btn-primary\"\n        onClick={() => props.onChange(year)}\n      >\n        Ok\n      </button>\n    </Fragment>\n  );\n};\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { getMovie, updateMovie } from \"./MovieAPI\";\nimport { UserContext } from \"../Login/UserContext\";\nimport { MovieSeen } from \"./MovieSeen\";\nimport { MoviesContext } from \"./MoviesContext\";\nimport { MovieSeasonYear } from \"./MovieSeasonYear\";\n\nexport const Movie = withRouter(({ match, history }) => {\n  // get contexts\n  const user = useContext(UserContext);\n  const movies = useContext(MoviesContext);\n\n  // create state\n  const [movie, setMovie] = useState();\n  const [editSeasonIndex, setEditSeasonIndex] = useState(); // index to save the current editable season\n\n  // crate effects\n  useEffect(() => getMovie(match.params.id, user).then(setMovie), [\n    match.params.id\n  ]);\n\n  // create actions\n  const update = (field, value) => () => {\n    updateMovie({ ...movie, [field]: value }, user).then(updatedMovie => {\n      setMovie(updatedMovie);\n      movies.update(updatedMovie._id, updatedMovie);\n    });\n  };\n\n  const renderSeasons = ({ type, seen, season, productionYear }) => {\n    // tmp while some season may not have years;\n    return Array(season)\n      .fill(0)\n      .map((_, season) => (\n        <div key={season}>\n          {productionYear[season] && season !== editSeasonIndex ? (\n            <span onClick={() => setEditSeasonIndex(season)}>\n              {productionYear[season]} -{\" \"}\n            </span>\n          ) : (\n            <MovieSeasonYear\n              year={productionYear[season]}\n              onChange={value => {\n                update(\"productionYear\", [\n                  ...productionYear.slice(0, season),\n                  parseInt(value, 10),\n                  ...productionYear.slice(season + 1)\n                ])();\n                setEditSeasonIndex(null);\n              }}\n            />\n          )}\n          <span>Season {season + 1} &nbsp;</span>\n          <MovieSeen\n            seen={seen[season]}\n            onClick={update(\"seen\", [\n              ...seen.slice(0, season),\n              !seen[season],\n              ...seen.slice(season + 1)\n            ])}\n          />\n        </div>\n      ));\n  };\n\n  return (\n    <div className=\"p-2\">\n      {!movie ? (\n        <span>Loading ....</span>\n      ) : (\n        <div>\n          <i\n            onClick={() => history.goBack()}\n            className=\"fas fa-arrow-circle-left fa-3x\"\n            style={{\n              top: \"22px\",\n              left: \"22px\",\n              position: \"absolute\",\n              color: \"#F1F7EE\",\n              cursor: \"pointer\"\n            }}\n            title=\"Return to the list of movies\"\n          />\n          <h1>\n            {movie.title} - {movie.productionYear}\n          </h1>\n          <div className=\"d-flex\">\n            <div className=\"pr-2\">\n              <img\n                src={movie.fileUrl}\n                style={{ maxHeight: \"300px\" }}\n                alt=\"movie poster\"\n              />\n            </div>\n            <div className=\"pl-2\">{movie.summary}</div>\n          </div>\n          <div>\n            {movie.type === \"Film\" ? (\n              <MovieSeen\n                seen={movie.seen}\n                onClick={update(\"seen\", !movie.seen)}\n              />\n            ) : (\n              renderSeasons(movie)\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n});\n","import React, { Component, Fragment } from \"react\";\nimport debounce from \"lodash/debounce\";\nimport { withUser } from \"../Login/UserContext\";\n\nexport const LOADING = Symbol(\"LOADING\");\nexport const LOADED = Symbol(\"LOADED\");\n\nconst headers = user => ({\n  Accept: \"application/json\",\n  \"Content-Type\": \"application/json\",\n  Authorization: `Bearer ${user.token}`\n});\nconst handleResponse = response => {\n  if (response.ok) return response.json();\n  throw new Error(\"Fetch fail\");\n};\n\nclass FetchWithContext extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      status: LOADING,\n      data: undefined\n    };\n\n    // TODO probably not the best place to debounce\n    this.debounceFetch = debounce(this.fetch, this.props.debounce || 0, {\n      leading: false,\n      trailing: true\n    });\n  }\n\n  componentWillUnmount() {\n    this.debounceFetch.cancel();\n  }\n\n  fetch() {\n    return fetch(`${this.props.endpoint}`, {\n      headers: headers(this.props.user)\n    })\n      .then(handleResponse)\n      .then(data => {\n        this.setState({\n          status: LOADED,\n          data\n        });\n        this.props.onSuccess && this.props.onSuccess(data);\n      });\n  }\n\n  componentDidMount() {\n    this.debounceFetch();\n  }\n\n  render() {\n    return (\n      <Fragment>\n        {this.props.children({\n          status: this.state.status,\n          data: this.state.data\n        })}\n      </Fragment>\n    );\n  }\n}\n\n/**\n * - create a context that holds movies\n * - dont load if there is already sth in the context\n * - pass initial data to prevent fetch the api (if data, dont fetch on cDM)\n */\n\nexport const Fetch = withUser(FetchWithContext);\n","import { Fetch } from \"./Common/Fetch\";\nimport React from \"react\";\n\nexport const Header = () => {\n  return (\n    <div\n      className=\"text-center\"\n      style={{\n        backgroundColor: \"var(--movie-secondary)\",\n        color: \"var(--movie-primary)\",\n        padding: \"4px\"\n      }}\n    >\n      <h1>Cinematheque</h1>\n      <Fetch endpoint=\"/api/movies?limit=0\">\n        {({ data }) =>\n          data ? <h6>{data.count} movies/tvshows</h6> : undefined\n        }\n      </Fetch>\n    </div>\n  );\n};\n","import React, { Component, Fragment } from \"react\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport \"./App.css\";\nimport { List } from \"./Movie/List\";\nimport { Movie } from \"./Movie/Movie\";\nimport { Header } from \"./Header\";\n\nclass App extends Component {\n  render() {\n    return (\n      <Fragment>\n        <Header />\n        <Router>\n          <Fragment>\n            <Route exact path=\"/\" component={List} />\n            <Route exact path=\"/movie/:id\" component={Movie} />\n          </Fragment>\n        </Router>\n      </Fragment>\n    );\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://goo.gl/SC7cgQ\"\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log(\"New content is available; please refresh.\");\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get(\"content-type\").indexOf(\"javascript\") === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React, { Component } from \"react\";\nimport { LOGIN_FAILED, withUser } from \"./UserContext\";\n\nclass LoginWithContext extends Component {\n  state = {\n    password: \"\"\n  };\n\n  render() {\n    return (\n      <div>\n        {this.props.user.status === LOGIN_FAILED ? (\n          <div className=\"alert alert-danger\" role=\"alert\">\n            Login failed\n          </div>\n        ) : (\n          undefined\n        )}\n        <div className=\"form-group\">\n          <label htmlFor=\"password\">Password</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            id=\"password\"\n            aria-describedby=\"password\"\n            placeholder=\"Enter password\"\n            value={this.state.password}\n            onChange={event => this.setState({ password: event.target.value })}\n            onKeyDown={event => {\n              if (event.key === \"Enter\")\n                this.props.user.login(this.state.password);\n            }}\n          />\n        </div>\n        <button\n          type=\"button\"\n          className=\"btn btn-primary\"\n          onClick={() => this.props.user.login(this.state.password)}\n        >\n          Submit\n        </button>\n      </div>\n    );\n  }\n}\n\nexport const Login = withUser(LoginWithContext);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport registerServiceWorker from \"./registerServiceWorker\";\nimport { ApplicationProvider } from \"./ApplicationContext\";\nimport { UserProvider, UserContext } from \"./Login/UserContext\";\nimport { Login } from \"./Login/Login\";\nimport { MoviesProvider } from \"./Movie/MoviesContext\";\n\nReactDOM.render(\n  <UserProvider>\n    <UserContext.Consumer>\n      {({ token }) =>\n        token ? (\n          <ApplicationProvider token={token}>\n            <MoviesProvider>\n              <App />\n            </MoviesProvider>\n          </ApplicationProvider>\n        ) : (\n          <Login />\n        )\n      }\n    </UserContext.Consumer>\n  </UserProvider>,\n  document.getElementById(\"root\")\n);\nregisterServiceWorker();\n"],"sourceRoot":""}