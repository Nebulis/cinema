{"version":3,"sources":["Login/UserContext.js","Movie/MovieSeen.js","Movie/MovieAPI.js","Movie/MovieCard.jsx","ApplicationContext.js","Movie/MoviesContext.js","Common/MultiDownshift.jsx","shared.js","Common/MultiDownshiftWithReverse.jsx","Common/AsyncMultiDownshift.jsx","Movie/MoviesFilter.js","Common/SingleDownshift.jsx","Common/Accordion.jsx","Movie/MovieForm.jsx","Movie/List.js","Common/EditableField.js","Movie/Season/Episode.js","Common/hooks.js","Movie/Season/Season.js","Movie/Movie.js","Common/Fetch.jsx","Header.js","Statistics/Statistics.js","App.js","Login/Login.js","index.js"],"names":["UserContext","React","createContext","withUser","Component","props","react_default","a","createElement","Consumer","user","Object","assign","LOGOUT","Symbol","LOGIN","LOGIN_FAILED","handleResponse","response","ok","json","Error","UserProvider","_React$Component","_getPrototypeOf2","_this","classCallCheck","this","_len","arguments","length","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","concat","state","token","status","login","bind","assertThisInitialized","inherits","createClass","key","value","_this2","localStorage","getItem","fetch","method","headers","Accept","Content-Type","Authorization","then","_ref","exp","Date","setState","password","_this3","body","JSON","stringify","_ref2","setItem","catch","Provider","children","MovieSeen","seen","onClick","className","style","color","cursor","getMovies","search","updateMovie","movie","_id","updateSeason","season","MovieCard","onEdit","onChange","onDelete","update","field","objectSpread","defineProperty","title","subtitle","productionYear","genre","join","Link","to","position","top","right","type","finished","netflix","MovieSeen_MovieSeen","every","seasons","map","episodes","window","confirm","deleteMovie","src","fileUrl","alt","ApplicationContext","LOADING","LOADED","ApplicationProvider","genres","types","options","Promise","all","slicedToArray","MoviesContext","MoviesProvider","add","movies","toConsumableArray","id","index","findIndex","filter","Boolean","addAll","data","count","invalidate","name","undefined","filters","limit","MultiDownshift","selectedItems","stateReducer","changes","Downshift","stateChangeTypes","keyDownEnter","clickItem","highlightedIndex","isOpen","callOnChange","downshift","getStateAndHelpers","handleSelection","selectedItem","includes","removeItem","addSelectedItem","item","cb","i","getRemoveButtonProps","objectWithoutProperties","e","stopPropagation","prevProps","_ref3","_this$props","render","_this$props$children","downshift_esm","css","emoCSS","Item","styled","display","border","height","textAlign","borderTop","lineHeight","fontSize","textTransform","fontWeight","boxShadow","padding","whiteSpace","wordWrap","isActive","isSelected","styles","push","background","BaseMenu","marginTop","backgroundColor","width","maxHeight","overflowY","overflowX","outline","transition","borderRadius","borderColor","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","zIndex","Menu","forwardRef","ref","innerRef","ControllerButton","flexDirection","justifyContent","alignItems","ArrowIcon","viewBox","preserveAspectRatio","fill","stroke","strokeWidth","transform","d","MultiDownshiftWithReverse","clickOnItem","newSelectedItems","displayItem","displayBackground","itemToFind","find","_ref4","BaseMultiDownshift","BaseComponent","_Component","_class","handleChange","placeholder","items","getToggleButtonProps","getMenuProps","getItemProps","toggleMenu","_ref$clickOnItem","_ref$displayItem","identity","_ref$displayBackgroun","_ref$isSelected","margin","paddingRight","flexWrap","paddingLeft","event","preventDefault","gridGap","gridAutoFlow","AsyncMultiDownshift","AsyncMultiDownshiftwithReverse","fromEvent","target","forInput","from","MoviesFilter","_useContext","useContext","_useContext2","parseInt","max","minWidth","icon","renderSeen","renderNetflix","renderFinished","SingleDownshift","getInputProps","getLabelProps","inputValue","Accordion","open","toggle","react","defaultState","summary","allocine","tvshows","MovieFormWithContext","valid","isEmpty","onAdd","$","modal","onUpdate","synchronizeMovieAllocine","idAllocine","m","sort","release","releaseDate","getFullYear","synopsis","poster","href","synchronizeTvShowAllocine","tvseries","yearStart","onInput","onSelect","on","onClose","application","tabIndex","role","data-show","data-dismiss","aria-label","aria-hidden","htmlFor","aria-describedby","paddingTop","Accordion_Accordion","_ref5","code","_ref6","tvshow","SingleDownshift_SingleDownshift","disabled","MovieForm","List","_useState","useState","_useState2","offset","setOffset","_useState3","_useState4","setMovie","_useState5","_useState6","setKey","loadMore","notGenres","keys","isArray","buildQuery","useEffect","debouncedLoadMore","debounce","leading","trailing","cancel","left","MoviesFilter_MoviesFilter","_","EditableField","setValue","edit","setEdit","lock","renderFormField","renderValue","EditableInput","EditableField_EditableField","fieldProps","valueProps","EditableTextarea","rows","split","Episode","episode","onEpisodeChanged","MovieContext","seasonIndex","SeasonContext","ellipsis","setEllipsis","updateEpisode","newMovie","produce","MovieAPI","EditableField_EditableInput","EditableField_EditableTextarea","useToggle","initialValue","Season","onMovieChanged","_useToggle","_useToggle2","episodeIndex","Episode_Episode","Movie","withRouter","match","history","params","mergeContext","updatedMovie","goBack","flexGrow","Season_Season_Season","Fetch","FetchWithContext","debounceFetch","endpoint","onSuccess","Header","initialState","unseen","Statistics","stats","setStats","forEach","draft","t","g","fetchByTypes","orderBy","toFixed","App","BrowserRouter","Route","exact","path","component","Login","onKeyDown","ReactDOM","UserContext_UserProvider","ApplicationContext_ApplicationProvider","MoviesContext_MoviesProvider","src_App_0","document","getElementById"],"mappings":"6RAEaA,EAAcC,IAAMC,gBACpBC,EAAW,SAAAC,GAAS,OAAI,SAAAC,GAAK,OACxCC,EAAAC,EAAAC,cAACR,EAAYS,SAAb,KACG,SAAAC,GAAI,OAAIJ,EAAAC,EAAAC,cAACJ,EAADO,OAAAC,OAAA,GAAeP,EAAf,CAAsBK,KAAMA,SAI5BG,EAASC,SACTC,EAAQD,SACRE,EAAeF,SAEtBG,EAAiB,SAAAC,GACrB,GAAIA,EAASC,GAAI,OAAOD,EAASE,OACjC,MAAM,IAAIC,MAAM,eAGLC,EAAb,SAAAC,GAAA,SAAAD,IAAA,IAAAE,EAAAC,EAAAd,OAAAe,EAAA,EAAAf,CAAAgB,KAAAL,GAAA,QAAAM,EAAAC,UAAAC,OAAAC,EAAA,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAAF,EAAAE,GAAAJ,UAAAI,GAAA,OAAAR,EAAAd,OAAAuB,EAAA,EAAAvB,CAAAgB,MAAAH,EAAAb,OAAAwB,EAAA,EAAAxB,CAAAW,IAAAc,KAAAC,MAAAb,EAAA,CAAAG,MAAAW,OAAAP,MACEQ,MAAQ,CACNC,MAAO,KACPC,OAAQ5B,EACR6B,MAAOjB,EAAKiB,MAAMC,KAAXhC,OAAAiC,EAAA,EAAAjC,QAAAiC,EAAA,EAAAjC,CAAAc,MAJXA,EAAA,OAAAd,OAAAkC,EAAA,EAAAlC,CAAAW,EAAAC,GAAAZ,OAAAmC,EAAA,EAAAnC,CAAAW,EAAA,EAAAyB,IAAA,oBAAAC,MAAA,WAOsB,IAAAC,EAAAtB,KACZa,EAAQU,aAAaC,QAAQ,SAC/BX,GACFY,MAAM,WAAY,CAChBC,OAAQ,OACRC,QAAS,CACPC,OAAQ,mBACRC,eAAgB,mBAChBC,cAAa,UAAAnB,OAAYE,MAG1BkB,KAAKzC,GACLyC,KAAK,SAAAC,GAAa,IAAVC,EAAUD,EAAVC,IACH,IAAIC,KAAS,IAAIA,KAAW,IAAND,IACxBX,EAAKa,SAAS,CAAEtB,QAAOC,OAAQ1B,QArB3C,CAAAgC,IAAA,QAAAC,MAAA,SA0BQe,GAAU,IAAAC,EAAArC,KACdyB,MAAM,SAAU,CACdC,OAAQ,OACRY,KAAMC,KAAKC,UAAU,CAAEJ,aACvBT,QAAS,CACPC,OAAQ,mBACRC,eAAgB,sBAGjBE,KAAKzC,GACLyC,KAAK,SAAAU,GAAe,IAAZ5B,EAAY4B,EAAZ5B,MACPwB,EAAKF,SAAS,CAAEtB,QAAOC,OAAQ1B,IAC/BmC,aAAamB,QAAQ,QAAS7B,KAE/B8B,MAAM,kBAAMN,EAAKF,SAAS,CAAErB,OAAQzB,QAxC3C,CAAA+B,IAAA,SAAAC,MAAA,WA4CI,OACE1C,EAAAC,EAAAC,cAACR,EAAYuE,SAAb,CAAsBvB,MAAOrB,KAAKY,OAC/BZ,KAAKtB,MAAMmE,cA9CpBlD,EAAA,CAAkCrB,IAAMG,oBChB3BqE,EAAY,SAAAd,GAAA,IAAGe,EAAHf,EAAGe,KAAMC,EAAThB,EAASgB,QAAT,OACvBrE,EAAAC,EAAAC,cAAA,KACEoE,UAAU,aACVC,MAAO,CACLC,MAAOJ,EAAO,iBAAmB,GACjCK,OAAQ,WAEVJ,QAASA,KCTPrB,EAAU,SAAA5C,GAAI,MAAK,CACvB6C,OAAQ,mBACRC,eAAgB,mBAChBC,cAAa,UAAAnB,OAAY5B,EAAK8B,SAG1BvB,EAAiB,SAAAC,GACrB,GAAIA,EAASC,GAAI,OAAOD,EAASE,OACjC,MAAM,IAAIC,MAAM,eASL2D,EAAY,SAACC,EAAQvE,GAChC,OAAO0C,MAAK,eAAAd,OAAgB2C,GAAU,CACpC3B,QAASA,EAAQ5C,KAChBgD,KAAKzC,IAGGiE,EAAc,SAACC,EAAOzE,GACjC,OAAO0C,MAAK,eAAAd,OAAgB6C,EAAMC,KAAO,CACvC/B,OAAQ,MACRY,KAAMC,KAAKC,UAAUgB,GACrB7B,QAASA,EAAQ5C,KAChBgD,KAAKzC,IAkBGoE,EAAe,SAACF,EAAOG,EAAQ5E,GAC1C,OAAO0C,MAAK,eAAAd,OAAgB6C,EAAMC,IAAtB,aAAA9C,OAAqCgD,EAAOF,KAAO,CAC7D/B,OAAQ,MACRY,KAAMC,KAAKC,UAAUmB,GACrBhC,QAASA,EAAQ5C,KAChBgD,KAAKzC,qBC3CGsE,EAAYpF,EACvB,SAAAwD,GAAiD,IAA9CwB,EAA8CxB,EAA9CwB,MAAOK,EAAuC7B,EAAvC6B,OAAQ9E,EAA+BiD,EAA/BjD,KAAM+E,EAAyB9B,EAAzB8B,SAAUC,EAAe/B,EAAf+B,SAC1BC,EAAS,SAACC,EAAO5C,GAAR,OAAkB,kBAC/BkC,EAAYvE,OAAAkF,EAAA,EAAAlF,CAAA,GAAKwE,EAANxE,OAAAmF,EAAA,EAAAnF,CAAA,GAAciF,EAAQ5C,IAAStC,GAAMgD,KAAK+B,KAEjDM,EAAK,GAAAzD,OAAM6C,EAAMY,OACjBC,EAAQ,GAAA1D,OAAM6C,EAAMc,eAAZ,OAAA3D,OAAgC6C,EAAMe,MAAMC,KAAK,MAE/D,OACE7F,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,mBACbtE,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,aACbtE,EAAAC,EAAAC,cAAA,MAAIoE,UAAU,cACZtE,EAAAC,EAAAC,cAAC4F,EAAA,EAAD,CAAMC,GAAE,SAAA/D,OAAW6C,EAAMC,MACvB9E,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,WAAWmB,MAAOA,GAC9BA,KAIPzF,EAAAC,EAAAC,cAAA,MACEoE,UAAU,yCACVmB,MAAOC,GAENA,GAEH1F,EAAAC,EAAAC,cAAA,OACEoE,UAAU,qBACVC,MAAO,CAAEyB,SAAU,WAAYC,IAAK,EAAGC,MAAO,IAE9B,SAAfrB,EAAMsB,MACLnG,EAAAC,EAAAC,cAAA,KACEoE,UAAU,aACVC,MAAO,CACLE,OAAQ,UACRD,MAAOK,EAAMuB,SAAW,gBAAkB,SAE5C/B,QAASgB,EAAO,YAAaR,EAAMuB,YAGvCpG,EAAAC,EAAAC,cAAA,QACEoE,UAAU,gBACVC,MAAO,CACLC,MAAOK,EAAMwB,QAAU,gBAAkB,SAE3ChC,QAASgB,EAAO,WAAYR,EAAMwB,UALpC,KASgB,SAAfxB,EAAMsB,KACLnG,EAAAC,EAAAC,cAACoG,EAAD,CACElC,KAAMS,EAAMT,KACZC,QAASgB,EAAO,QAASR,EAAMT,QAGjCpE,EAAAC,EAAAC,cAACoG,EAAD,CACElC,KACEmC,IACE1B,EAAM2B,QAAQC,IACZ,SAAAzB,GAAM,OACJuB,IAAMvB,EAAO0B,SAAU,SACvB1B,EAAO0B,SAASlF,OAAS,MAE1BqD,EAAM2B,QAAQhF,OAAS,IAIlCxB,EAAAC,EAAAC,cAAA,KACEoE,UAAU,oBACVD,QAASa,EACTX,MAAO,CAAEE,OAAQ,aAEnBzE,EAAAC,EAAAC,cAAA,KACEoE,UAAU,eACVD,QAAS,WACHsC,OAAOC,WDlDA,SAAC/B,EAAOzE,GACjC,OAAO0C,MAAK,eAAAd,OAAgB6C,EAAMC,KAAO,CACvC/B,OAAQ,SACRC,QAASA,EAAQ5C,KAChBgD,KAAKzC,GC+CQkG,CAAYhC,EAAOzE,GAAMgD,KAAKgC,IAGlCb,MAAO,CAAEE,OAAQ,cAGrBzE,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,sBACbtE,EAAAC,EAAAC,cAAA,OAAK4G,IAAKjC,EAAMkC,QAASC,IAAI,uCCvF5BC,EAAqBtH,IAAMC,gBAO3BsH,EAAU1G,SACV2G,EAAS3G,SAET4G,EAAb,SAAAnG,GAAA,SAAAmG,IAAA,IAAAlG,EAAAC,EAAAd,OAAAe,EAAA,EAAAf,CAAAgB,KAAA+F,GAAA,QAAA9F,EAAAC,UAAAC,OAAAC,EAAA,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAAF,EAAAE,GAAAJ,UAAAI,GAAA,OAAAR,EAAAd,OAAAuB,EAAA,EAAAvB,CAAAgB,MAAAH,EAAAb,OAAAwB,EAAA,EAAAxB,CAAA+G,IAAAtF,KAAAC,MAAAb,EAAA,CAAAG,MAAAW,OAAAP,MACEQ,MAAQ,CACNoF,OAAQ,GACRC,MAAO,GACPnF,OAAQ+E,GAJZ/F,EAAA,OAAAd,OAAAkC,EAAA,EAAAlC,CAAA+G,EAAAnG,GAAAZ,OAAAmC,EAAA,EAAAnC,CAAA+G,EAAA,EAAA3E,IAAA,oBAAAC,MAAA,WAOsB,IAAAC,EAAAtB,KACZkG,EAAU,CACdvE,QAAS,CACPG,cAAa,UAAAnB,OAAYX,KAAKtB,MAAMmC,SAIlCvB,EAAiB,SAAAC,GACrB,GAAIA,EAASC,GAAI,OAAOD,EAASE,OACjC,MAAM,IAAIC,MAAM,eAElByG,QAAQC,IAAI,CACV3E,MAAM,oBAAqByE,GAASnE,KAAKzC,GACzCmC,MAAM,mBAAoByE,GAASnE,KAAKzC,KACvCyC,KAAK,SAAAC,GAAqB,IAAAS,EAAAzD,OAAAqH,EAAA,EAAArH,CAAAgD,EAAA,GAAnBgE,EAAmBvD,EAAA,GAAXwD,EAAWxD,EAAA,GAC3BnB,EAAKa,SAAS,CACZ6D,SACAC,QACAnF,OAAQgF,QAzBhB,CAAA1E,IAAA,SAAAC,MAAA,WA+BI,OACE1C,EAAAC,EAAAC,cAAC+G,EAAmBhD,SAApB,CAA6BvB,MAAOrB,KAAKY,OACtCZ,KAAKtB,MAAMmE,cAjCpBkD,EAAA,CAAyCzH,IAAMG,oCCTlC6H,EAAgBhI,IAAMC,gBAEtBgI,EAAb,SAAA3G,GAAA,SAAA2G,IAAA,IAAA1G,EAAAC,EAAAd,OAAAe,EAAA,EAAAf,CAAAgB,KAAAuG,GAAA,QAAAtG,EAAAC,UAAAC,OAAAC,EAAA,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAAF,EAAAE,GAAAJ,UAAAI,GAAA,OAAAR,EAAAd,OAAAuB,EAAA,EAAAvB,CAAAgB,MAAAH,EAAAb,OAAAwB,EAAA,EAAAxB,CAAAuH,IAAA9F,KAAAC,MAAAb,EAAA,CAAAG,MAAAW,OAAAP,MACEoG,IAAM,SAAAhD,GACJ1D,EAAKqC,SAAS,CACZsE,OAAM,CAAGjD,GAAH7C,OAAA3B,OAAA0H,EAAA,EAAA1H,CAAac,EAAKc,MAAM6F,YAHpC3G,EAOEkE,OAAS,SAAC2C,EAAInD,GACZ,IAAMoD,EAAQC,IAAU/G,EAAKc,MAAM6F,OAAQ,CAAC,MAAOE,IAC7CF,EAAMzH,OAAA0H,EAAA,EAAA1H,CAAOc,EAAKc,MAAM6F,QAC9BA,EAAOG,GAASpD,EAChB1D,EAAKqC,SAAS,CACZsE,OAAQA,EAAOK,OAAOC,YAZ5BjH,EAgBEkH,OAAS,SAAAhF,GAAqB,IAAlBiF,EAAkBjF,EAAlBiF,KAAMC,EAAYlF,EAAZkF,MAChBpH,EAAKqC,SAAS,CAAEsE,OAAOzH,OAAA0H,EAAA,EAAA1H,CAAKc,EAAKc,MAAM6F,QAAjB9F,OAAA3B,OAAA0H,EAAA,EAAA1H,CAA4BiI,IAAOC,WAjB7DpH,EAoBEqH,WAAa,WACXrH,EAAKqC,SAAS,CAAEsE,OAAQ,MArB5B3G,EAwBEgE,SAAW,SAAAsD,GAAI,OAAI,WAAgB,IAAf/F,EAAenB,UAAAC,OAAA,QAAAkH,IAAAnH,UAAA,GAAAA,UAAA,GAAP,GAC1BJ,EAAKqH,aACLrH,EAAKqC,SAAS,SAAAM,GAAA,IAAG6E,EAAH7E,EAAG6E,QAAH,MAAkB,CAC9BA,QAAQtI,OAAAkF,EAAA,EAAAlF,CAAA,GAAMsI,EAAPtI,OAAAmF,EAAA,EAAAnF,CAAA,GAAiBoI,EAAO/F,SA3BrCvB,EA+BEc,MAAQ,CACN6F,OAAQ,GACRS,MAAO,EACPI,QAAS,CACPhD,eAAgB,GAChBF,MAAO,GACP4B,OAAQ,GACRC,MAAO,GACPlD,KAAM,KACNiC,QAAS,KACTD,SAAU,KACVwC,MAAO,IAETzD,SAAUhE,EAAKgE,SACfkD,OAAQlH,EAAKkH,OACbhD,OAAQlE,EAAKkE,OACbwC,IAAK1G,EAAK0G,IACVW,WAAYrH,EAAKqH,YAhDrBrH,EAAA,OAAAd,OAAAkC,EAAA,EAAAlC,CAAAuH,EAAA3G,GAAAZ,OAAAmC,EAAA,EAAAnC,CAAAuH,EAAA,EAAAnF,IAAA,SAAAC,MAAA,WAoDI,OACE1C,EAAAC,EAAAC,cAACyH,EAAc1D,SAAf,CAAwBvB,MAAOrB,KAAKY,OACjCZ,KAAKtB,MAAMmE,cAtDpB0D,EAAA,CAAoCjI,IAAMG,4CCF7B+I,EAAb,SAAA5H,GAAA,SAAA4H,IAAA,IAAA3H,EAAAC,EAAAd,OAAAe,EAAA,EAAAf,CAAAgB,KAAAwH,GAAA,QAAAvH,EAAAC,UAAAC,OAAAC,EAAA,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAAF,EAAAE,GAAAJ,UAAAI,GAAA,OAAAR,EAAAd,OAAAuB,EAAA,EAAAvB,CAAAgB,MAAAH,EAAAb,OAAAwB,EAAA,EAAAxB,CAAAwI,IAAA/G,KAAAC,MAAAb,EAAA,CAAAG,MAAAW,OAAAP,MACEQ,MAAQ,CAAE6G,cAAe3H,EAAKpB,MAAM+I,eAAiB,IADvD3H,EAWE4H,aAAe,SAAC9G,EAAO+G,GACrB,OAAQA,EAAQ7C,MACd,KAAK8C,IAAUC,iBAAiBC,aAChC,KAAKF,IAAUC,iBAAiBE,UAC9B,OAAO/I,OAAAkF,EAAA,EAAAlF,CAAA,GACF2I,EADL,CAEEK,iBAAkBpH,EAAMoH,iBACxBC,QAAQ,IAEZ,QACE,OAAON,IArBf7H,EAyBEoI,aAAe,SAAAC,GAAS,OAAI,WACtBrI,EAAKpB,MAAMoF,UACbhE,EAAKpB,MAAMoF,SACThE,EAAKc,MAAM6G,cACX3H,EAAKsI,mBAAmBD,MA7BhCrI,EAkCEuI,gBAAkB,SAACC,EAAcH,GAC3BrI,EAAKc,MAAM6G,cAAcc,SAASD,GACpCxI,EAAK0I,WAAWF,EAAcxI,EAAKoI,aAAaC,IAEhDrI,EAAK2I,gBAAgBH,EAAcxI,EAAKoI,aAAaC,KAtC3DrI,EA0CE0I,WAAa,SAACE,EAAMC,GAClB7I,EAAKqC,SAAS,SAAAH,GACZ,MAAO,CACLyF,cAFiCzF,EAApByF,cAEgBX,OAAO,SAAA8B,GAAC,OAAIA,IAAMF,MAEhDC,IA/CP7I,EA0DE+I,qBAAuB,SAAAV,GAAS,OAAI,WAAsC,IAAA1F,EAAAvC,UAAAC,OAAA,QAAAkH,IAAAnH,UAAA,GAAAA,UAAA,GAAP,GAA5B8C,EAAmCP,EAAnCO,QAAS0F,EAA0BjG,EAA1BiG,KAAShK,EAAiBM,OAAA8J,EAAA,EAAA9J,CAAAyD,EAAA,oBACxE,OAAOzD,OAAAkF,EAAA,EAAAlF,CAAA,CACLgE,QAAS,SAAA+F,GAEP/F,GAAWA,EAAQ+F,GACnBA,EAAEC,kBACFlJ,EAAK0I,WAAWE,EAAM5I,EAAKoI,aAAaC,MAEvCzJ,KAlEToB,EAAA,OAAAd,OAAAkC,EAAA,EAAAlC,CAAAwI,EAAA5H,GAAAZ,OAAAmC,EAAA,EAAAnC,CAAAwI,EAAA,EAAApG,IAAA,qBAAAC,MAAA,SAGqB4H,GAEfA,EAAUxB,gBAAkBzH,KAAKtB,MAAM+I,eACvCzH,KAAKtB,MAAM+I,gBAAkBzH,KAAKY,MAAM6G,eAExCzH,KAAKmC,SAAS,CAAEsF,cAAezH,KAAKtB,MAAM+I,eAAiB,OARjE,CAAArG,IAAA,kBAAAC,MAAA,SAiDkBqH,EAAMC,GACpB3I,KAAKmC,SACH,SAAA+G,GAAA,IAAGzB,EAAHyB,EAAGzB,cAAH,MAAwB,CACtBA,cAAczI,OAAA0H,EAAA,EAAA1H,CAAKyI,GAAN9G,OAAA,CAAqB+H,MAEpCC,KAtDN,CAAAvH,IAAA,qBAAAC,MAAA,SAsEqB8G,GAAW,IACpBV,EAAkBzH,KAAKY,MAAvB6G,cACAoB,EAAqC7I,KAArC6I,qBAAsBL,EAAexI,KAAfwI,WAC9B,OAAOxJ,OAAAkF,EAAA,EAAAlF,CAAA,CACL6J,qBAAsBA,EAAqBV,GAC3CK,aACAf,iBACGU,KA7ET,CAAA/G,IAAA,SAAAC,MAAA,WAgFW,IAAAC,EAAAtB,KAAAmJ,EACyCnJ,KAAKtB,MAA7C0K,EADDD,EACCC,OADDC,EAAAF,EACStG,gBADT,IAAAwG,EACoBD,EADpBC,EAC+B3K,EAD/BM,OAAA8J,EAAA,EAAA9J,CAAAmK,EAAA,uBAGP,OACExK,EAAAC,EAAAC,cAACyK,EAAA,EAADtK,OAAAC,OAAA,GACMP,EADN,CAEEgJ,aAAc1H,KAAK0H,aACnB5D,SAAU9D,KAAKqI,gBACfC,aAAc,OAEb,SAAAH,GAAS,OAAItF,EAASvB,EAAK8G,mBAAmBD,UA1FvDX,EAAA,CAAoClJ,IAAMG,2BCGpC8K,GAAM,iBAAc,CAAEtG,UAAWuG,MAAM9I,WAAN,EAAAR,aAEjCuJ,GAAOC,YAAO,KAAPA,CACX,CACE/E,SAAU,WACVvB,OAAQ,UACRuG,QAAS,QACTC,OAAQ,OACRC,OAAQ,OACRC,UAAW,OACXC,UAAW,OACXC,WAAY,MACZ7G,MAAO,kBACP8G,SAAU,OACVC,cAAe,OACfC,WAAY,MACZC,UAAW,OACXC,QAAS,eACTC,WAAY,SACZC,SAAU,UAEZ,SAAAvI,GAA8B,IAA3BwI,EAA2BxI,EAA3BwI,SAAUC,EAAiBzI,EAAjByI,WACLC,EAAS,GAaf,OAZIF,GACFE,EAAOC,KAAK,CACVxH,MAAO,kBACPyH,WAAY,oBAGZH,GACFC,EAAOC,KAAK,CACVxH,MAAO,kBACPgH,WAAY,QAGTO,IAILG,GAAWnB,YAAO,KAAPA,CACf,CACEW,QAAS,EACTS,UAAW,EACXnG,SAAU,WACVoG,gBAAiB,QACjBC,MAAO,OACPC,UAAW,QACXC,UAAW,OACXC,UAAW,SACXC,QAAS,IACTC,WAAY,mBACZC,aAAc,gCACdlB,UAAW,iCACXmB,YAAa,UACbC,eAAgB,IAChBC,iBAAkB,EAClBC,kBAAmB,EACnBC,gBAAiB,EACjBC,YAAa,QACbC,OAAQ,IAEV,SAAApJ,GAAA,MAAiB,CACfmH,OADFnH,EAAGwF,OACgB,KAAO,UAItB6D,GAAOxN,IAAMyN,WAAW,SAACrN,EAAOsN,GAAR,OAC5BrN,EAAAC,EAAAC,cAACgM,GAAD7L,OAAAC,OAAA,CAAUgN,SAAUD,GAAStN,MAGzBwN,GAAmBxC,YAAO,SAAPA,CAAiB,CACxCqB,gBAAiB,cACjBnB,OAAQ,OACRjF,SAAU,WACVE,MAAO,EACPD,IAAK,EACLxB,OAAQ,UACR4H,MAAO,GACPrB,QAAS,OACTwC,cAAe,SACftC,OAAQ,OACRuC,eAAgB,SAChBC,WAAY,WAGd,SAASC,GAATpD,GAA+B,IAAVjB,EAAUiB,EAAVjB,OACnB,OACEtJ,EAAAC,EAAAC,cAAA,OACE0N,QAAQ,YACRC,oBAAoB,OACpBxB,MAAO,GACPyB,KAAK,cACLC,OAAO,UACPC,YAAY,QACZC,UAAW3E,EAAS,cAAgB,MAEpCtJ,EAAAC,EAAAC,cAAA,QAAMgO,EAAE,uBCnGP,IJAwBpO,GIAlBqO,GAAb,SAAAlN,GAAA,SAAAkN,IAAA,IAAAjN,EAAAC,EAAAd,OAAAe,EAAA,EAAAf,CAAAgB,KAAA8M,GAAA,QAAA7M,EAAAC,UAAAC,OAAAC,EAAA,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAAF,EAAAE,GAAAJ,UAAAI,GAAA,OAAAR,EAAAd,OAAAuB,EAAA,EAAAvB,CAAAgB,MAAAH,EAAAb,OAAAwB,EAAA,EAAAxB,CAAA8N,IAAArM,KAAAC,MAAAb,EAAA,CAAAG,MAAAW,OAAAP,MACEQ,MAAQ,CAAE6G,cAAe3H,EAAKpB,MAAM+I,eAAiB,IADvD3H,EAEE4H,aAAe,SAAC9G,EAAO+G,GACrB,OAAQA,EAAQ7C,MACd,KAAK8C,IAAUC,iBAAiBC,aAChC,KAAKF,IAAUC,iBAAiBE,UAC9B,OAAO/I,OAAAkF,EAAA,EAAAlF,CAAA,GACF2I,EADL,CAEEK,iBAAkBpH,EAAMoH,iBACxBC,QAAQ,IAEZ,QACE,OAAON,IAZf7H,EAgBEoI,aAAe,SAAAC,GAAS,OAAI,WACtBrI,EAAKpB,MAAMoF,UACbhE,EAAKpB,MAAMoF,SACThE,EAAKc,MAAM6G,cACX3H,EAAKsI,mBAAmBD,MApBhCrI,EAyBEuI,gBAAkB,SAACC,EAAcH,GAE7BrI,EAAKc,MAAM6G,cAAcX,OAAO,SAAA4B,GAAI,OAAIJ,IAAiBI,EAAK,KAAIvI,OAClE,EAEAL,EAAK0I,WAAW,CAACF,GAAexI,EAAKoI,aAAaC,IAElDrI,EAAK2I,gBAAgBH,EAAcxI,EAAKoI,aAAaC,KAhC3DrI,EAoCE0I,WAAa,SAACE,EAAMC,GAClB7I,EAAKqC,SAAS,SAAAH,GACZ,MAAO,CACLyF,cAFiCzF,EAApByF,cAEgBX,OAAO,SAAA8B,GAAC,OAAIA,EAAE,KAAOF,EAAK,OAExDC,IAzCP7I,EAoDE+I,qBAAuB,SAAAV,GAAS,OAAI,WAAsC,IAAA1F,EAAAvC,UAAAC,OAAA,QAAAkH,IAAAnH,UAAA,GAAAA,UAAA,GAAP,GAA5B8C,EAAmCP,EAAnCO,QAAS0F,EAA0BjG,EAA1BiG,KAAShK,EAAiBM,OAAA8J,EAAA,EAAA9J,CAAAyD,EAAA,oBACxE,OAAOzD,OAAAkF,EAAA,EAAAlF,CAAA,CACLgE,QAAS,SAAA+F,GAEP/F,GAAWA,EAAQ+F,GACnBA,EAAEC,kBACFlJ,EAAK0I,WAAWE,EAAM5I,EAAKoI,aAAaC,MAEvCzJ,KA5DToB,EAgEEiN,YAAc,SAAA5E,GAAS,OAAI,SAACO,EAAM9B,GAChC9G,EAAKqC,SAAS,SAAA+G,GAAuB,IAC7B8D,EAD6B9D,EAApBzB,cAGf,OADAuF,EAAiBpG,GAAS,CAAC8B,EAAK,IAAKA,EAAK,IACnC,CACLjB,cAAeuF,EAAiBlG,OAAO,SAAA8B,GAAC,OAAIA,IAAMF,EAAK,OAExD5I,EAAKoI,aAAaC,MAvEzBrI,EAyEEmN,YAAc,SAAAvE,GACZ,OAAOA,EAAK,IA1EhB5I,EA4EEoN,kBAAoB,SAAAxE,GAClB,OAAOA,EAAK,GAAK,OAAS,UA7E9B5I,EA+EE2K,WAAa,SAAA0C,GACX,OAAOrN,EAAKc,MAAM6G,cAAc2F,KAAK,SAAA1E,GAAI,OAAIA,EAAK,KAAOyE,KAhF7DrN,EAAA,OAAAd,OAAAkC,EAAA,EAAAlC,CAAA8N,EAAAlN,GAAAZ,OAAAmC,EAAA,EAAAnC,CAAA8N,EAAA,EAAA1L,IAAA,kBAAAC,MAAA,SA2CkBqH,EAAMC,GACpB3I,KAAKmC,SACH,SAAAkL,GAAA,IAAG5F,EAAH4F,EAAG5F,cAAH,MAAwB,CACtBA,cAAczI,OAAA0H,EAAA,EAAA1H,CAAKyI,GAAN9G,OAAA,CAAqB,CAAC+H,GAAM,OAE3CC,KAhDN,CAAAvH,IAAA,qBAAAC,MAAA,SAmFqB8G,GAAW,IACpBV,EAAkBzH,KAAKY,MAAvB6G,cAENoB,EAME7I,KANF6I,qBACAL,EAKExI,KALFwI,WACAuE,EAIE/M,KAJF+M,YACAE,EAGEjN,KAHFiN,YACAC,EAEElN,KAFFkN,kBACAzC,EACEzK,KADFyK,WAEF,OAAOzL,OAAAkF,EAAA,EAAAlF,CAAA,CACL6J,qBAAsBA,EAAqBV,GAC3CK,aACAf,gBACAsF,YAAaA,EAAY5E,GACzB8E,cACAC,oBACAzC,cACGtC,KArGT,CAAA/G,IAAA,SAAAC,MAAA,WAwGW,IAAAC,EAAAtB,KAAAmJ,EACyCnJ,KAAKtB,MAA7C0K,EADDD,EACCC,OADDC,EAAAF,EACStG,gBADT,IAAAwG,EACoBD,EADpBC,EAC+B3K,EAD/BM,OAAA8J,EAAA,EAAA9J,CAAAmK,EAAA,uBAGP,OACExK,EAAAC,EAAAC,cAACyK,EAAA,EAADtK,OAAAC,OAAA,GACMP,EADN,CAEEgJ,aAAc1H,KAAK0H,aACnB5D,SAAU9D,KAAKqI,gBACfC,aAAc,OAEb,SAAAH,GAAS,OAAItF,EAASvB,EAAK8G,mBAAmBD,UAlHvD2E,EAAA,CAA+CxO,IAAMG,WCG/C6O,GAAqB,SAAAC,GAAa,gBAAAC,GAAA,SAAAC,IAAA,OAAAzO,OAAAe,EAAA,EAAAf,CAAAgB,KAAAyN,GAAAzO,OAAAuB,EAAA,EAAAvB,CAAAgB,KAAAhB,OAAAwB,EAAA,EAAAxB,CAAAyO,GAAA/M,MAAAV,KAAAE,YAAA,OAAAlB,OAAAkC,EAAA,EAAAlC,CAAAyO,EAAAD,GAAAxO,OAAAmC,EAAA,EAAAnC,CAAAyO,EAAA,EAAArM,IAAA,SAAAC,MAAA,WAE3B,IAAA8H,EACqDnJ,KAAKtB,MAAzDgP,EADDvE,EACCuE,aAAcC,EADfxE,EACewE,YAAaC,EAD5BzE,EAC4ByE,MAAOnG,EADnC0B,EACmC1B,cAC1C,OACE9I,EAAAC,EAAAC,cAAC0O,EAAD,CACEzJ,SAAU4J,EACVjG,cAAeA,EACfkG,YAAaA,GAEZ,SAAA3L,GAAA,IACC6L,EADD7L,EACC6L,qBACAC,EAFD9L,EAEC8L,aACAjF,EAHD7G,EAGC6G,qBAEAZ,GALDjG,EAICwG,WAJDxG,EAKCiG,QACAR,EANDzF,EAMCyF,cACAsG,EAPD/L,EAOC+L,aACA/F,EARDhG,EAQCgG,iBACAgG,EATDhM,EASCgM,WATDC,EAAAjM,EAUC+K,mBAVD,IAAAkB,EAUe,aAVfA,EAAAC,EAAAlM,EAWCiL,mBAXD,IAAAiB,EAWeC,IAXfD,EAAAE,EAAApM,EAYCkL,yBAZD,IAAAkB,EAYqB,iBAAM,QAZ3BA,EAAAC,EAAArM,EAaCyI,kBAbD,IAAA4D,EAac,SAAA3F,GAAI,OAAIjB,EAAcc,SAASG,IAb7C2F,EAAA,OAeC1P,EAAAC,EAAAC,cAAA,OACEqE,MAAO,CACLoL,OAAQ,OACR3J,SAAU,WACVqG,MAAO,SAGTrM,EAAAC,EAAAC,cAAA,MAAAG,OAAAC,OAAA,GACMsK,GAAI,CACNnG,OAAQ,UACRuB,SAAU,WACV0F,QAAS,iBACTkE,aAAc,GACd3E,OAAQ,oBACR0B,aAAc,SACdP,gBAAiB,UARrB,CAUE/H,QAAS,WACPgL,OAGFrP,EAAAC,EAAAC,cAAA,MACM0K,GAAI,CACNI,QAAS,OACT6E,SAAU,OACVnC,WAAY,WAGb5E,EAActH,OAAS,EACtBsH,EAAcrC,IAAI,SAACsD,EAAM9B,GAAP,OAChBjI,EAAAC,EAAAC,cAAA,MAAAG,OAAAC,OAAA,CACEmC,IAAKwF,GACD2C,GAAI,CACN+E,OAAQ,QACRG,YAAa,EACbF,aAAc,EACd5E,QAAS,eACTY,SAAU,OACVQ,gBAAiBmC,EAAkBxE,GACnC4C,aAAc,IATlB,CAWEtI,QAAS,SAAA0L,GACPA,EAAMC,iBACND,EAAM1F,kBACN+D,EAAYrE,EAAM9B,MAGpBjI,EAAAC,EAAAC,cAAA,MACM0K,GAAI,CACNI,QAAS,OACTiF,QAAS,EACTC,aAAc,SACdxC,WAAY,WAGd1N,EAAAC,EAAAC,cAAA,YAAOoO,EAAYvE,IACnB/J,EAAAC,EAAAC,cAAA,SAAAG,OAAAC,OAAA,GACM4J,EAAqB,CAAEH,SACvBa,GAAI,CACNnG,OAAQ,UACR4G,WAAY,GACZJ,OAAQ,OACRmB,gBAAiB,cACjBV,QAAS,IACTJ,SAAU,SARd,CAUEnF,KAAK,WAVP,oBAkBNnG,EAAAC,EAAAC,cAAA,OACM0K,GAAI,CACNpG,MAAO,aAGRwK,IAIPhP,EAAAC,EAAAC,cAACqN,GACK2B,EAAqB,CAGvB7K,QAHuB,SAGf0L,GACNA,EAAM1F,qBAIVrK,EAAAC,EAAAC,cAACyN,GAAD,CAAWrE,OAAQA,MAGvBtJ,EAAAC,EAAAC,cAACiN,GAASgC,EAAa,CAAE7F,WACtBA,EACG2F,EAAMxI,IAAI,SAACsD,EAAM9B,GAAP,OACRjI,EAAAC,EAAAC,cAAC4K,GAADzK,OAAAC,OAAA,CACEmC,IAAKwF,GACDmH,EAAa,CACfrF,OACA9B,QACA4D,SAAUxC,IAAqBpB,EAC/B6D,WAAYA,EAAW/B,MAGxBA,KAGL,aAvIoB+E,EAAA,CACxBhP,cA+IHqQ,GAAsBxB,GAAmB9F,GACzCuH,GAAiCzB,GAC5CR,IC/IIkC,GAAY,SAAAN,GAAK,OAAIA,EAAMO,OAAO5N,OAElC6N,GAAW,SAAAlN,EAEfoF,GAGG,IAJDE,EAICtF,EAJDsF,QAASxD,EAIR9B,EAJQ8B,SAEX8I,EAEG1M,UAAAC,OAAA,QAAAkH,IAAAnH,UAAA,GAAAA,UAAA,GAFSiO,IACZgB,EACGjP,UAAAC,OAAA,QAAAkH,IAAAnH,UAAA,GAAAA,UAAA,GADI8O,GAEP,MAAO,CACL3N,MAAOiG,EAAQF,GACftD,SAAU,SAAAzC,GAAK,OAAIyC,EAASsD,EAATtD,CAAe8I,EAAUuC,EAAK9N,QAIxC+N,GAAe,WAAM,IAAAC,EACFC,qBAAWhJ,GAAjCgB,EADwB+H,EACxB/H,QAASxD,EADeuL,EACfvL,SADeyL,EAEND,qBAAW1J,GAA7BI,EAFwBuJ,EAExBvJ,OAAQC,EAFgBsJ,EAEhBtJ,MACRlD,EAA4BuE,EAA5BvE,KAAMiC,EAAsBsC,EAAtBtC,QAASD,EAAauC,EAAbvC,SA4DvB,OACEpG,EAAAC,EAAAC,cAAA,QAAMoE,UAAU,4CACdtE,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,cACbtE,EAAAC,EAAAC,cAAA,QAAAG,OAAAC,OAAA,GACMiQ,GAAS,CAAE5H,UAASxD,YAAY,iBAAkB,SAAAzC,GAAK,OACzDmO,SAASnO,EAAO,MAFpB,CAIEyD,KAAK,SACL2K,IAAK,KACL9B,YAAY,OACZ1K,UAAU,eACVC,MAAO,CAAE8H,MAAO,YAGpBrM,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,sBACbtE,EAAAC,EAAAC,cAAA,QAAAG,OAAAC,OAAA,CACE6F,KAAK,QACDoK,GAAS,CAAE5H,UAASxD,YAAY,SAFtC,CAGE6J,YAAY,QACZ1K,UAAU,mBAGdtE,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,aAAaC,MAAO,CAAEwM,SAAU,UAC7C/Q,EAAAC,EAAAC,cAACkQ,GAAD,CACEpB,YAAY,QACZD,aACEwB,GAAS,CAAE5H,UAASxD,YAAY,SAAUqK,IAAUA,KACjDrK,SAEL8J,MAAO5H,EACPyB,cAAeH,EAAQtB,UAG3BrH,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,qBAAqBC,MAAO,CAAE8H,MAAO,UAClDrM,EAAAC,EAAAC,cAACiQ,GAAD,CACEnB,YAAY,OACZD,aACEwB,GAAS,CAAE5H,UAASxD,YAAY,QAASqK,IAAUA,KAChDrK,SAEL8J,MAAO3H,EACPwB,cAAeH,EAAQrB,SAG3BtH,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,cAtGA,WACjB,IAAIE,EAAQ,GACVwM,EAAO,SACP3M,EAAU,kBAAMc,EAAS,OAATA,EAAiB,IASnC,OARa,IAATf,GACFI,EAAQ,iBACRH,EAAU,kBAAMc,EAAS,OAATA,EAAiB,MACf,IAATf,IACTI,EAAQ,gBACRwM,EAAO,eACP3M,EAAU,kBAAMc,EAAS,OAATA,CAAiB,QAGjCnF,EAAAC,EAAAC,cAAA,KACEoE,UAAS,OAAAtC,OAASgP,GAClBzM,MAAO,CACLC,QACAC,OAAQ,WAEVJ,QAASA,IAmFkB4M,IAC7BjR,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,sBA/EG,WACpB,IAAIE,EAAQ,QACVH,EAAU,kBAAMc,EAAS,UAATA,EAAoB,IAMtC,OALgB,IAAZkB,IACF7B,EAAQ,gBACRH,EAAU,kBAAMc,EAAS,UAATA,CAAoB,QAIpCnF,EAAAC,EAAAC,cAAA,QAAMmE,QAASA,EAASC,UAAU,UAAUC,MAAO,CAAEC,UAArD,KAsEqC0M,IACrClR,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,cAjEI,WACrB,IAAIE,EAAQ,GACVH,EAAU,kBAAMc,EAAS,WAATA,EAAqB,IAKvC,OAJiB,IAAbiB,IACF5B,EAAQ,gBACRH,EAAU,kBAAMc,EAAS,WAATA,CAAqB,QAGrCnF,EAAAC,EAAAC,cAAA,KACEoE,UAAS,aACTC,MAAO,CACLC,QACAC,OAAQ,WAEVJ,QAASA,IAmDkB8M,0BChItBC,GAAb,SAAAnQ,GAAA,SAAAmQ,IAAA,OAAA/Q,OAAAe,EAAA,EAAAf,CAAAgB,KAAA+P,GAAA/Q,OAAAuB,EAAA,EAAAvB,CAAAgB,KAAAhB,OAAAwB,EAAA,EAAAxB,CAAA+Q,GAAArP,MAAAV,KAAAE,YAAA,OAAAlB,OAAAkC,EAAA,EAAAlC,CAAA+Q,EAAAnQ,GAAAZ,OAAAmC,EAAA,EAAAnC,CAAA+Q,EAAA,EAAA3O,IAAA,SAAAC,MAAA,WACW,IAAA8H,EACgDnJ,KAAKtB,MAApDoF,EADDqF,EACCrF,SAAU6J,EADXxE,EACWwE,YAAaC,EADxBzE,EACwByE,MAAOtF,EAD/Ba,EAC+Bb,aACtC,OACE3J,EAAAC,EAAAC,cAACyK,EAAA,EAAD,CAAWxF,SAAUA,EAAUwE,aAAcA,GAC1C,SAAAtG,KACCgO,cADD,IAECjC,EAFD/L,EAEC+L,aAEAD,GAJD9L,EAGCiO,cAHDjO,EAIC8L,cACA7F,EALDjG,EAKCiG,OAEAD,GAPDhG,EAMCkO,WANDlO,EAOCgG,kBACAM,EARDtG,EAQCsG,aACA0F,EATDhM,EASCgM,WATD,OAWCrP,EAAAC,EAAAC,cAAA,OACEqE,MAAO,CACLoL,OAAQ,OACR3J,SAAU,WACVqG,MAAO,SAGTrM,EAAAC,EAAAC,cAAA,MAAAG,OAAAC,OAAA,GACMsK,GAAI,CACNnG,OAAQ,UACRuB,SAAU,WACV0F,QAAS,iBACTkE,aAAc,GACd3E,OAAQ,oBACR0B,aAAc,SACdP,gBAAiB,UARrB,CAUE/H,QAAS,WACPgL,OAGFrP,EAAAC,EAAAC,cAAA,MACM0K,GAAI,CACNI,QAAS,OACT6E,SAAU,OACVnC,WAAY,WAGb/D,EACC3J,EAAAC,EAAAC,cAAA,MACM0K,GAAI,CACN+E,OAAQ,QACRG,YAAa,EACbF,aAAc,EACd5E,QAAS,eACTY,SAAU,OACVQ,gBAAiB,OACjBO,aAAc,IAGhB3M,EAAAC,EAAAC,cAAA,MACM0K,GAAI,CACNI,QAAS,OACTiF,QAAS,EACTC,aAAc,SACdxC,WAAY,WAGd1N,EAAAC,EAAAC,cAAA,YAAOyJ,KAIX3J,EAAAC,EAAAC,cAAA,OACM0K,GAAI,CACNpG,MAAO,aAGRwK,IAIPhP,EAAAC,EAAAC,cAACqN,GAAD,KACEvN,EAAAC,EAAAC,cAACyN,GAAD,CAAWrE,OAAQA,MAGvBtJ,EAAAC,EAAAC,cAACiN,GAASgC,EAAa,CAAE7F,WACtBA,EACG2F,EAAMxI,IAAI,SAACsD,EAAM9B,GAAP,OACRjI,EAAAC,EAAAC,cAAC4K,GAADzK,OAAAC,OAAA,CACEmC,IAAKwF,GACDmH,EAAa,CACfrF,OACA9B,QACA4D,SAAUxC,IAAqBpB,EAC/B6D,WAAYnC,IAAiBI,KAG9BA,KAGL,aAhGlBqH,EAAA,CAAqCzR,IAAMG,+BCF9B0R,GAAb,SAAA3C,GAAA,SAAA2C,IAAA,IAAAtQ,EAAAC,EAAAd,OAAAe,EAAA,EAAAf,CAAAgB,KAAAmQ,GAAA,QAAAlQ,EAAAC,UAAAC,OAAAC,EAAA,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAAF,EAAAE,GAAAJ,UAAAI,GAAA,OAAAR,EAAAd,OAAAuB,EAAA,EAAAvB,CAAAgB,MAAAH,EAAAb,OAAAwB,EAAA,EAAAxB,CAAAmR,IAAA1P,KAAAC,MAAAb,EAAA,CAAAG,MAAAW,OAAAP,MACEQ,MAAQ,CACNwP,MAAM,EACNC,OAAQvQ,EAAKuQ,OAAOrP,KAAZhC,OAAAiC,EAAA,EAAAjC,QAAAiC,EAAA,EAAAjC,CAAAc,MAHZA,EAAA,OAAAd,OAAAkC,EAAA,EAAAlC,CAAAmR,EAAA3C,GAAAxO,OAAAmC,EAAA,EAAAnC,CAAAmR,EAAA,EAAA/O,IAAA,SAAAC,MAAA,WAOIrB,KAAKmC,SAAS,CAAEiO,MAAOpQ,KAAKY,MAAMwP,SAPtC,CAAAhP,IAAA,SAAAC,MAAA,WAWI,OAAO1C,EAAAC,EAAAC,cAACyR,EAAA,SAAD,KAAWtQ,KAAKtB,MAAMmE,SAAS7C,KAAKY,YAX/CuP,EAAA,CAA+B1R,aCMzB8R,GAAe,CACnB/M,MAAO,CACLY,MAAO,GACPG,MAAO,GACPO,KAAM,GACNR,eAAgB,GAChBkM,QAAS,IAEXC,SAAU,CACRhK,OAAQ,GACRiK,QAAS,KAIP/O,GAAU,SAAA5C,GAAI,MAAK,CACvB6C,OAAQ,mBACRC,eAAgB,mBAChBC,cAAa,UAAAnB,OAAY5B,EAAK8B,SAG1BvB,GAAiB,SAAAC,GACrB,GAAIA,EAASC,GAAI,OAAOD,EAASE,OACjC,MAAM,IAAIC,MAAM,eAGZiR,eACJ,SAAAA,EAAYjS,GAAO,IAAAoB,EAAA,OAAAd,OAAAe,EAAA,EAAAf,CAAAgB,KAAA2Q,IACjB7Q,EAAAd,OAAAuB,EAAA,EAAAvB,CAAAgB,KAAAhB,OAAAwB,EAAA,EAAAxB,CAAA2R,GAAAlQ,KAAAT,KAAMtB,KAYRkS,MAAQ,WACN,OACGC,KAAQ/Q,EAAKc,MAAM4C,MAAMY,QAC1BtE,EAAKc,MAAM4C,MAAMe,MAAMpE,OAAS,IAC/B0Q,KAAQ/Q,EAAKc,MAAM4C,MAAMsB,OAjBXhF,EAqBnB0G,IAAM,WACJ/E,MAAM,cAAe,CACnBC,OAAQ,OACRY,KAAMC,KAAKC,UAAU1C,EAAKc,MAAM4C,OAChC7B,QAASA,GAAQ7B,EAAKpB,MAAMK,QAE3BgD,KAAKzC,IACLyC,KAAK,SAAAkF,GACJnH,EAAKpB,MAAMoS,MAAX9R,OAAAkF,EAAA,EAAAlF,CAAA,GAAsBc,EAAKc,MAAM4C,MAAUyD,IAE3C8J,EAAE,0BAA0BC,MAAM,WA/BrBlR,EAmCnBkE,OAAS,WACPvC,MAAK,eAAAd,OAAgBb,EAAKpB,MAAM8E,MAAMC,KAAO,CAC3C/B,OAAQ,MACRY,KAAMC,KAAKC,UAAU1C,EAAKc,MAAM4C,OAChC7B,QAASA,GAAQ7B,EAAKpB,MAAMK,QAE3BgD,KAAKzC,IACLyC,KAAK,SAAAkF,GACJnH,EAAKpB,MAAMuS,SAAXjS,OAAAkF,EAAA,EAAAlF,CAAA,GAAyBc,EAAKc,MAAM4C,MAAUyD,IAE9C8J,EAAE,0BAA0BC,MAAM,WA7CrBlR,EAiDnBwD,OAAS,WACP6C,QAAQC,IAAI,CACV3E,MAAK,iCAAAd,OAAkCb,EAAKc,MAAM4C,MAAMY,OAAS,CAC/DzC,QAASA,GAAQ7B,EAAKpB,MAAMK,QAC3BgD,KAAKzC,IACRmC,MAAK,qCAAAd,OAAmCb,EAAKc,MAAM4C,MAAMY,OAAS,CAChEzC,QAASA,GAAQ7B,EAAKpB,MAAMK,QAC3BgD,KAAKzC,MACPyC,KAAK,SAAAC,GAAA,IAAAS,EAAAzD,OAAAqH,EAAA,EAAArH,CAAAgD,EAAA,GAAEyE,EAAFhE,EAAA,GAAUiO,EAAVjO,EAAA,UACN3C,EAAKqC,SAAS,CAAEsO,SAAU,CAAEhK,SAAQiK,gBA1DrB5Q,EA8DnBoR,yBAA2B,SAAAC,GAErBA,IAAerR,EAAKc,MAAM4C,MAAM2N,WAClCrR,EAAKqC,SAAS,CACZqB,MAAMxE,OAAAkF,EAAA,EAAAlF,CAAA,GACDc,EAAKc,MAAM4C,MADX,CAEH2N,WAAY,SAIhB1P,MAAK,uBAAAd,OAAwBwQ,GAAc,CACzCxP,QAASA,GAAQ7B,EAAKpB,MAAMK,QAE3BgD,KAAKzC,IACLyC,KAAK,SAAAmH,GAAA,IAAG1F,EAAH0F,EAAG1F,MAAH,OACJ1D,EAAKqC,SAAS,CACZqB,MAAMxE,OAAAkF,EAAA,EAAAlF,CAAA,GACDc,EAAKc,MAAM4C,MADX,CAEH2N,aACA/M,MAAOZ,EAAMY,MACbG,MAAOf,EAAMe,MAAMa,IAAI,SAAAgM,GAAC,OAAIA,EAAEL,IAAGM,OACjCvM,KAAM,OACNR,eACEd,EAAM8N,SAAW9N,EAAM8N,QAAQC,YAC3B,IAAIrP,KAAKsB,EAAM8N,QAAQC,aAAaC,cACpChO,EAAMc,eACZkM,QAAShN,EAAMiO,SACf/L,QAASlC,EAAMkO,OAASlO,EAAMkO,OAAOC,KAAO,UAzFrC7R,EAgGnB8R,0BAA4B,SAAAT,GAEtBA,IAAerR,EAAKc,MAAM4C,MAAM2N,WAClCrR,EAAKqC,SAAS,CACZqB,MAAMxE,OAAAkF,EAAA,EAAAlF,CAAA,GACDc,EAAKc,MAAM4C,MADX,CAEH2N,WAAY,SAIhB1P,MAAK,uBAAAd,OAAwBwQ,GAAc,CACzCxP,QAASA,GAAQ7B,EAAKpB,MAAMK,QAE3BgD,KAAKzC,IACLyC,KAAK,SAAAsL,GAAA,IAAGwE,EAAHxE,EAAGwE,SAAH,OACJ/R,EAAKqC,SAAS,CACZqB,MAAMxE,OAAAkF,EAAA,EAAAlF,CAAA,GACDc,EAAKc,MAAM4C,MADX,CAEH2N,aACA/M,MAAOyN,EAASzN,MAChBG,MAAOsN,EAAStN,MAAMa,IAAI,SAAAgM,GAAC,OAAIA,EAAEL,IAAGM,OACpCvM,KAAM,WACNR,eAAgBuN,EAASC,UACzBtB,QAASqB,EAASJ,SAClB/L,QAASmM,EAASH,OAASG,EAASH,OAAOC,KAAO,UAxH3C7R,EA+HnBiS,QAAU,SAAC9N,GAAoC,IAA7B2I,EAA6B1M,UAAAC,OAAA,QAAAkH,IAAAnH,UAAA,GAAAA,UAAA,GAAjB,SAAA+G,GAAI,OAAIA,GACpC,OAAO,SAAAyH,GAAK,OACV5O,EAAKqC,SAAS,CACZqB,MAAMxE,OAAAkF,EAAA,EAAAlF,CAAA,GAAMc,EAAKc,MAAM4C,MAAlBxE,OAAAmF,EAAA,EAAAnF,CAAA,GAA0BiF,EAAQ2I,EAAU8B,EAAMO,OAAO5N,aAlIjDvB,EAsInBkS,SAAW,SAAA/N,GACT,OAAO,SAAA5C,GAAK,OACVvB,EAAKqC,SAAS,CAAEqB,MAAMxE,OAAAkF,EAAA,EAAAlF,CAAA,GAAMc,EAAKc,MAAM4C,MAAlBxE,OAAAmF,EAAA,EAAAnF,CAAA,GAA0BiF,EAAQ5C,QAtIzDvB,EAAKc,MAAQ,CACX4C,MAAO9E,EAAM8E,MAAQ9E,EAAM8E,MAAQ+M,GAAa/M,MAChDiN,SAAUF,GAAaE,UAJR3Q,mFAUjBiR,EAAE,0BAA0BkB,GAAG,gBAAiBjS,KAAKtB,MAAMwT,0CAiIpD,IAAA5Q,EAAAtB,KACCwD,EAAUxD,KAAKY,MAAf4C,MACR,OACE7E,EAAAC,EAAAC,cAACyR,EAAA,SAAD,KACGtQ,KAAKtB,MAAMyT,YAAYrR,SAAW+E,EACjClH,EAAAC,EAAAC,cAAA,yBAEAF,EAAAC,EAAAC,cAAA,OACEoE,UAAU,oCACV0D,GAAG,wBACHyL,SAAS,KACTC,KAAK,SACLC,YAAU,QAEV3T,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,qCAAqCoP,KAAK,YACvD1T,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,iBACbtE,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,gBACbtE,EAAAC,EAAAC,cAAA,MAAIoE,UAAU,eACVO,GAASA,EAAMY,OAAU,OAE7BzF,EAAAC,EAAAC,cAAA,UACEiG,KAAK,SACL7B,UAAU,QACVsP,eAAa,QACbC,aAAW,SAEX7T,EAAAC,EAAAC,cAAA,QAAM4T,cAAY,QAAlB,UAGJ9T,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,cACbtE,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,YACbtE,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,qBACbtE,EAAAC,EAAAC,cAAA,SAAO6T,QAAQ,SAAf,SACA/T,EAAAC,EAAAC,cAAA,SACEiG,KAAK,OACL7B,UAAU,eACV0D,GAAG,QACHgM,mBAAiB,QACjBhF,YAAY,cACZ7J,SAAU9D,KAAK+R,QAAQ,SACvB1Q,MAAOrB,KAAKY,MAAM4C,MAAMY,SAG5BzF,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,gCACbtE,EAAAC,EAAAC,cAAA,KACEoE,UAAU,uBACVC,MAAO,CACLE,OAAQ,UACRD,MAAO,UACPyP,WAAY,QAEd5P,QAAShD,KAAKsD,WAInBtD,KAAKY,MAAM6P,SAAShK,OAAOtG,OAAS,EACnCxB,EAAAC,EAAAC,cAACgU,GAAD,KACG,SAAAC,GAAsB,IAAnB1C,EAAmB0C,EAAnB1C,KAAMC,EAAayC,EAAbzC,OACR,OACE1R,EAAAC,EAAAC,cAACyR,EAAA,SAAD,KACE3R,EAAAC,EAAAC,cAAA,OAAKmE,QAASqN,EAAQnN,MAAO,CAAEE,OAAQ,YACpC9B,EAAKV,MAAM6P,SAAShK,OAAOtG,OAD9B,UAEGiQ,EACCzR,EAAAC,EAAAC,cAAA,KAAGoE,UAAU,sBAEbtE,EAAAC,EAAAC,cAAA,KAAGoE,UAAU,yBAGjBtE,EAAAC,EAAAC,cAAA,OACEoE,UAAU,MACVC,MAAO,CACLiI,UAAW,SACXxB,QAASyG,EAAO,OAAS,OACzB5B,SAAU,WAGXlN,EAAKV,MAAM6P,SAAShK,OAAOrB,IAAI,SAAA5B,GAAK,OACnC7E,EAAAC,EAAAC,cAAA,OACEuC,IAAKoC,EAAMuP,KACX9P,UAAS,wBAAAtC,OACP6C,EAAMuP,OAASzR,EAAKV,MAAM4C,MAAM2N,WAC5B,WACA,IAENnO,QAAS,kBACP1B,EAAK4P,yBAAyB1N,EAAMuP,QAGrCvP,EAAMuP,OACPzR,EAAKV,MAAM4C,MAAM2N,WACfxS,EAAAC,EAAAC,cAAA,KAAGoE,UAAU,kDACX,KACJtE,EAAAC,EAAAC,cAAA,WACG2E,EAAMY,MADT,KACkB,IACfZ,EAAM8N,SAAW9N,EAAM8N,QAAQC,YAC5B,IAAIrP,KACFsB,EAAM8N,QAAQC,aACdC,cACFhO,EAAMc,gBAEZ3F,EAAAC,EAAAC,cAAA,WACG2E,EAAMkO,OACL/S,EAAAC,EAAAC,cAAA,OACE4G,IAAKjC,EAAMkO,OAAOC,KAClBhM,IAAI,eACJzC,MAAO,CAAE8H,MAAO,UAEhB,aASlB,KACHhL,KAAKY,MAAM6P,SAASC,QAAQvQ,OAAS,EACpCxB,EAAAC,EAAAC,cAACgU,GAAD,KACG,SAAAG,GAAsB,IAAnB5C,EAAmB4C,EAAnB5C,KAAMC,EAAa2C,EAAb3C,OACR,OACE1R,EAAAC,EAAAC,cAACyR,EAAA,SAAD,KACE3R,EAAAC,EAAAC,cAAA,OAAKmE,QAASqN,EAAQnN,MAAO,CAAEE,OAAQ,YACpC9B,EAAKV,MAAM6P,SAASC,QAAQvQ,OAD/B,YAEGiQ,EACCzR,EAAAC,EAAAC,cAAA,KAAGoE,UAAU,sBAEbtE,EAAAC,EAAAC,cAAA,KAAGoE,UAAU,yBAGjBtE,EAAAC,EAAAC,cAAA,OACEoE,UAAU,MACVC,MAAO,CACLiI,UAAW,SACXxB,QAASyG,EAAO,OAAS,OACzB5B,SAAU,WAGXlN,EAAKV,MAAM6P,SAASC,QAAQtL,IAAI,SAAA6N,GAAM,OACrCtU,EAAAC,EAAAC,cAAA,OACEuC,IAAK6R,EAAOF,KACZ9P,UAAS,wBAAAtC,OACPsS,EAAOF,OAASzR,EAAKV,MAAM4C,MAAM2N,WAC7B,WACA,IAENnO,QAAS,kBACP1B,EAAKsQ,0BAA0BqB,EAAOF,QAGvCE,EAAOF,OACRzR,EAAKV,MAAM4C,MAAM2N,WACfxS,EAAAC,EAAAC,cAAA,KAAGoE,UAAU,kDACX,KACJtE,EAAAC,EAAAC,cAAA,WACGoU,EAAO7O,MADV,MACoB6O,EAAOnB,WAE3BnT,EAAAC,EAAAC,cAAA,WACGoU,EAAOvB,OACN/S,EAAAC,EAAAC,cAAA,OACE4G,IAAKwN,EAAOvB,OAAOC,KACnBhM,IAAI,gBACJzC,MAAO,CAAE8H,MAAO,UAEhB,aASlB,KACJrM,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,cACbtE,EAAAC,EAAAC,cAAA,sBACAF,EAAAC,EAAAC,cAACiQ,GAAD,CACErH,cAAezH,KAAKY,MAAM4C,MAAMe,MAChCoJ,YAAY,QACZC,MAAO5N,KAAKtB,MAAMyT,YAAYnM,OAC9B0H,aAAc1N,KAAKgS,SAAS,YAGhCrT,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,cACbtE,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAACqU,GAAD,CACE5K,aAActI,KAAKY,MAAM4C,MAAMsB,KAC/B6I,YAAY,OACZC,MAAO5N,KAAKtB,MAAMyT,YAAYlM,MAC9BnC,SAAU9D,KAAKgS,SAAS,WAG5BrT,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,cACbtE,EAAAC,EAAAC,cAAA,SAAO6T,QAAQ,mBAAf,mBACA/T,EAAAC,EAAAC,cAAA,SACEiG,KAAK,SACL7B,UAAU,eACV0D,GAAG,kBACHgM,mBAAiB,kBACjBhF,YAAY,wBACZ7J,SAAU9D,KAAK+R,QAAQ,iBAAkB,SAAA9K,GAAI,OAC3CuI,SAASvI,EAAM,MAEjB5F,MAAOrB,KAAKY,MAAM4C,MAAMc,kBAG5B3F,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,cACbtE,EAAAC,EAAAC,cAAA,SAAO6T,QAAQ,WAAf,WACA/T,EAAAC,EAAAC,cAAA,YACEoE,UAAU,eACV0D,GAAG,UACHgM,mBAAiB,UACjBhF,YAAY,gBACZ7J,SAAU9D,KAAK+R,QAAQ,WACvB1Q,MAAOrB,KAAKY,MAAM4C,MAAMgN,YAI9B7R,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,gBACbtE,EAAAC,EAAAC,cAAA,UACEiG,KAAK,SACL7B,UAAU,oBACVsP,eAAa,SAHf,SAOA5T,EAAAC,EAAAC,cAAA,UACEiG,KAAK,SACLqO,UAAWnT,KAAK4Q,QAChB3N,UAAU,kBACVD,QAAShD,KAAKY,MAAM4C,MAAMC,IAAMzD,KAAKgE,OAAShE,KAAKwG,KAElDhD,EAAMC,IAAM,SAAW,oBApXTnF,IAAMG,WAgY5B2U,IT9ZkB3U,GS8ZUD,EAASmS,IT9ZN,SAAAjS,GAAK,OAC/CC,EAAAC,EAAAC,cAAC+G,EAAmB9G,SAApB,KACG,SAAAqT,GAAW,OAAIxT,EAAAC,EAAAC,cAACJ,GAADO,OAAAC,OAAA,GAAeP,EAAf,CAAsByT,YAAaA,SUmC1CkB,GAAO,WAAM,IAEhBvS,EAAWwO,qBAAW1J,GAAtB9E,OAFgByO,EAGgCD,qBACtDhJ,GADMG,EAHgB8I,EAGhB9I,OAAQS,EAHQqI,EAGRrI,MAAOF,EAHCuI,EAGDvI,OAAQM,EAHPiI,EAGOjI,QAASd,EAHhB+I,EAGgB/I,IAAKxC,EAHrBuL,EAGqBvL,OAGvCjF,EAAOuQ,qBAAWjR,GANAiV,EASIC,mBAAS9M,EAAOtG,OAASmH,EAAQC,OATrCiM,EAAAxU,OAAAqH,EAAA,EAAArH,CAAAsU,EAAA,GASjBG,EATiBD,EAAA,GASTE,EATSF,EAAA,GAAAG,EAUEJ,mBAvCJ,IA6BEK,EAAA5U,OAAAqH,EAAA,EAAArH,CAAA2U,EAAA,GAUjBnQ,EAViBoQ,EAAA,GAUVC,EAVUD,EAAA,GAAAE,EAWFP,mBAAS,GAXPQ,EAAA/U,OAAAqH,EAAA,EAAArH,CAAA8U,EAAA,GAWjB1S,EAXiB2S,EAAA,GAWZC,EAXYD,EAAA,GAclBE,EAAW,SAAAR,GACfpQ,EA1Ce,SAACiE,EAASmM,GAE3B,IAAMzN,EAASsB,EAAQtB,OACpBc,OAAO,SAAAvC,GAAK,OAAIA,EAAM,KACtBa,IAAI,SAAAb,GAAK,OAAIA,EAAM,KAChB2P,EAAY5M,EAAQtB,OACvBc,OAAO,SAAAvC,GAAK,OAAKA,EAAM,KACvBa,IAAI,SAAAb,GAAK,OAAIA,EAAM,KACtB,OAAOvF,OAAOmV,KAAK7M,GAChBR,OAAO,SAAA1F,GAAG,MAAY,WAARA,IACd0F,OACC,SAAA1F,GAAG,OACCgT,IAAQ9M,EAAQlG,KACC,OAAjBkG,EAAQlG,IACS,KAAjBkG,EAAQlG,IACTgT,IAAQ9M,EAAQlG,KAASkG,EAAQlG,GAAKjB,OAAS,IAEnDiF,IAAI,SAAAhE,GAAG,SAAAT,OAAOS,EAAP,KAAAT,OAAc2G,EAAQlG,MAC7BT,OACCqF,EAAO7F,OAAS,EAAhB,UAAAQ,OAA8BqF,EAAOxB,KAAK,MAAS,GACnD0P,EAAU/T,OAAS,EAAnB,aAAAQ,OAAoCuT,EAAU1P,KAAK,MAAS,GAZzD,UAAA7D,OAaO8S,IAEX3M,OAAOC,SACPvC,KAAK,KAkBI6P,CAAW/M,EAASmM,GAAS1U,GACpCgD,KAAKiF,GACLjF,KAAK,kBAAM2R,EAAUD,EAAS,MA6BnC,OAlBAa,oBACE,WAEE,IAAMC,EAAoBC,KAASP,EAAU,IAAK,CAChDQ,SAAS,EACTC,UAAU,IAMZ,OAHsB,IAAlBjO,EAAOtG,QACToU,EAAkB,GAEb,kBAAMA,EAAkBI,WAEjC,CAACrN,IAEHgN,oBAxBkB,WAEZlT,EAAM,GAER2P,EAAE,0BAA0BC,MAAM,SAoBjB,CAACxN,IAIpB7E,EAAAC,EAAAC,cAAA,WACGiC,IAAW+E,EACVlH,EAAAC,EAAAC,cAAA,2BAEAF,EAAAC,EAAAC,cAACyR,EAAA,SAAD,KACE3R,EAAAC,EAAAC,cAACuU,GAAD,CAEEhS,IAAKoC,EAAMC,KAAOrC,EAClBoC,MAAOA,EAAMC,IAAMD,EAAQ,KAC3BsN,MAAO,SAAAtN,GAAK,OAAIgD,EAAIhD,IACpByN,SAAU,SAAAzN,GAAK,OAAIQ,EAAOR,EAAMC,IAAKD,MAEvC7E,EAAAC,EAAAC,cAAA,KACEmE,QAAS,WACP6Q,EA1FU,IA2FVG,EAAO5S,EAAM,IAEf6B,UAAU,2BACVC,MAAO,CACL0B,IAAK,OACLgQ,KAAM,OACNjQ,SAAU,WACVxB,MAAO,UACPC,OAAQ,WAEVgB,MAAM,6BAERzF,EAAAC,EAAAC,cAACgW,GAAD,MACAlW,EAAAC,EAAAC,cAAA,MAAIoE,UAAU,eACXwD,EAAOtG,OADV,OACsB+G,EADtB,yBAGAvI,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,UACZwD,EAAOrB,IAAI,SAAA5B,GAAK,OACf7E,EAAAC,EAAAC,cAAC+E,EAAD,CACExC,IAAKoC,EAAMC,IACXD,MAAOA,EACPM,SAAU,SAAAN,GAAK,OAAIQ,EAAOR,EAAMC,IAAKD,IACrCO,SAAU,SAAA+Q,GAAC,OAAI9Q,EAAOR,EAAMC,SAAK4D,IACjCxD,OAAQ,WACNgQ,EAAS7U,OAAAkF,EAAA,EAAAlF,CAAA,GACJwE,IAELwQ,EAAO5S,EAAM,SAKrBzC,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,mBACbtE,EAAAC,EAAAC,cAAA,UACEmE,QAAS,kBAAMiR,EAASR,IACxBxQ,UAAU,0BAFZ,oCCpIN8R,GAAgB,SAAArW,GAAS,IAAA4U,EACHC,mBAAS7U,EAAM2C,OAAS,IADrBmS,EAAAxU,OAAAqH,EAAA,EAAArH,CAAAsU,EAAA,GACtBjS,EADsBmS,EAAA,GACfwB,EADexB,EAAA,GAAAG,EAELJ,oBAAU7U,EAAM2C,OAFXuS,EAAA5U,OAAAqH,EAAA,EAAArH,CAAA2U,EAAA,GAEtBsB,EAFsBrB,EAAA,GAEhBsB,EAFgBtB,EAAA,GAGvBhH,EAAYlO,EAAMkO,WAAauB,IAC/BgH,EAAOzW,EAAMyW,OAAQ,EAC3B,OACExW,EAAAC,EAAAC,cAACyR,EAAA,SAAD,MACI6E,GAAQF,EACRtW,EAAAC,EAAAC,cAACyR,EAAA,SAAD,KACG5R,EAAM0W,gBAANpW,OAAAkF,EAAA,EAAAlF,CAAA,GACIN,EADJ,CAEC2C,QACAyC,SAAU,SAAA4K,GAAK,OAAIsG,EAASpI,EAAU8B,EAAMO,OAAO5N,YAErD1C,EAAAC,EAAAC,cAAA,UACEoE,UAAU,kBACVD,QAAS,SAAA0L,GACPA,EAAMC,iBACND,EAAM1F,kBACNtK,EAAMoF,SAASzC,GACf6T,GAAQ,KANZ,MAWC7T,EACC1C,EAAAC,EAAAC,cAAA,UACEoE,UAAU,iBACVD,QAAS,SAAA0L,GACPA,EAAMC,iBACND,EAAM1F,kBACNkM,GAAQ,KALZ,eAWA7N,GAIJ1I,EAAAC,EAAAC,cAACyR,EAAA,SAAD,KACG5R,EAAM2W,YAAY,CACjBpS,UAAWvE,EAAMuE,UACjB5B,QACA2B,QAAS,SAAA0L,GACFyG,IACHzG,EAAMC,iBACND,EAAM1F,kBACNkM,GAAQ,UAUXI,GAAgB,SAAA5W,GAAK,OAChCC,EAAAC,EAAAC,cAAC0W,GAADvW,OAAAC,OAAA,GACMP,EADN,CAEE0W,gBAAiB,SAAAI,GAAU,OACzB7W,EAAAC,EAAAC,cAAA,SACE8O,YAAa6H,EAAW7H,YACxB7I,KAAK,OACLzD,MAAOmU,EAAWnU,MAClByC,SAAU0R,EAAW1R,SACrBd,QAAS,SAAA0L,GACPA,EAAMC,iBACND,EAAM1F,sBAIZqM,YAAa,SAAAI,GAAU,OACrB9W,EAAAC,EAAAC,cAAA,QAAMmE,QAASyS,EAAWzS,QAASC,UAAWwS,EAAWxS,WACtDwS,EAAWpU,YAMPqU,GAAmB,SAAAhX,GAAK,OACnCC,EAAAC,EAAAC,cAAC0W,GAADvW,OAAAC,OAAA,GACMP,EADN,CAEE0W,gBAAiB,SAAAI,GAAU,OACzB7W,EAAAC,EAAAC,cAAA,YACE8O,YAAa6H,EAAW7H,YACxBzK,MAAOsS,EAAWtS,MAClB7B,MAAOmU,EAAWnU,MAClBsU,KAAMH,EAAWG,MAAQ,EACzB7R,SAAU0R,EAAW1R,SACrBd,QAAS,SAAA0L,GACPA,EAAMC,iBACND,EAAM1F,sBAIZqM,YAAa,SAAAI,GAAU,OACrB9W,EAAAC,EAAAC,cAAA,QAAMmE,QAASyS,EAAWzS,QAASC,UAAWwS,EAAWxS,WACtDwS,EAAWpU,MAAMuU,MAAM,MAAMxQ,IAAI,SAACsD,EAAMtH,GAAP,OAChCzC,EAAAC,EAAAC,cAACyR,EAAA,SAAD,CAAUlP,IAAKA,GACZsH,EACD/J,EAAAC,EAAAC,cAAA,oBClGCgX,WAAU,SAAA7T,GAA0C,IAAvC8T,EAAuC9T,EAAvC8T,QAASlP,EAA8B5E,EAA9B4E,MAAOmP,EAAuB/T,EAAvB+T,iBAElChX,EAAOuQ,qBAAWjR,GAFuCgR,EAGvCC,qBAAW0G,IAA3BxS,EAHuD6L,EAGvD7L,MAAO2R,EAHgD9F,EAGhD8F,KACAc,EAAgB3G,qBAAW4G,IAAlCtP,MAJuD0M,EAK/BC,mBAAS,YALsBC,EAAAxU,OAAAqH,EAAA,EAAArH,CAAAsU,EAAA,GAKxD6C,EALwD3C,EAAA,GAK9C4C,EAL8C5C,EAAA,GAczD6C,EAAgB,SAAAzJ,GACpB,IAAM0J,EAAWC,aAAQ/S,EAAOoJ,GAC1BjJ,EAAS2S,EAASnR,QAAQ8Q,IdsCP,SAACzS,EAAOG,EAAQmS,EAAS/W,GACpD,OAAO0C,MAAK,eAAAd,OACK6C,EAAMC,IADX,aAAA9C,OAC0BgD,EAAOF,IADjC,cAAA9C,OACiDmV,EAAQrS,KACnE,CACE/B,OAAQ,MACRY,KAAMC,KAAKC,UAAUsT,GACrBnU,QAASA,EAAQ5C,KAEnBgD,KAAKzC,Ic5CLkX,CAAuBF,EAAU3S,EADjBA,EAAO0B,SAASuB,GACkB7H,GAAMgD,KACtDgU,IAIJ,OACEpX,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,yBACbtE,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,qDACbtE,EAAAC,EAAAC,cAAA,OACEoE,UAAU,oBACVC,MAAO,CACLC,MAAO2S,EAAQ/S,KAAO,iBAAmB,GACzCoH,WAAY2L,EAAQ/S,KAAO,OAAS,GACpCK,OAAQ,WAEVJ,QAAS,kBAzBI,SAAA4J,GACnB,IAAM0J,EAAWC,aAAQ/S,EAAOoJ,GAC1BjJ,EAAS2S,EAASnR,QAAQ8Q,GAEhCO,EAAsBF,EAAU3S,EAAQ5E,GAAMgD,KAAKgU,GAsB3CrS,CAAa,SAAAF,GACX,GAAKA,EAAM2B,QAAQ8Q,GAAa5Q,SAASuB,GAAO7D,KAM9C,IAAK,IAAI6F,EAAIhC,EAAOgC,EAAIpF,EAAM2B,QAAQ8Q,GAAa5Q,SAASlF,OAAQyI,IAClEpF,EAAM2B,QAAQ8Q,GAAa5Q,SAASuD,GAAG7F,MAAO,OANhD,IAAK,IAAI6F,EAAI,EAAGA,GAAKhC,EAAOgC,IAC1BpF,EAAM2B,QAAQ8Q,GAAa5Q,SAASuD,GAAG7F,MAAO,MAWrD6D,EAAQ,GAEXjI,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,sBACbtE,EAAAC,EAAAC,cAAC4X,GAAD,CACEtB,KAAMA,EACNlS,UAAS,kCAAAtC,OACPmV,EAAQ/S,KAAO,OAAS,IAE1B1B,MAAOyU,EAAQ1R,MACfuJ,YAAY,QACZ7J,SAAU,SAAAM,GAAK,OACbiS,EAAc,SAAA7S,GACZA,EAAM2B,QAAQ8Q,GAAa5Q,SAASuB,GAAOxC,MAAQA,SAM7DzF,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,iDACbtE,EAAAC,EAAAC,cAAC6X,GAAD,CACEvB,KAAMA,EACNjS,MAAO,CAAE8H,MAAO,QAChB2K,KAAM,EACNtU,MAAOyU,EAAQtF,QACf7C,YAAY,UACZ1K,UAAS,GAAAtC,OAAKwV,EAAL,4CACTrS,SAAU,SAAA0M,GAAO,OACf6F,EAAc,SAAA7S,GACZA,EAAM2B,QAAQ8Q,GAAa5Q,SAASuB,GAAO4J,QAAUA,OAI1D2F,GACCxX,EAAAC,EAAAC,cAAA,QAAMqE,MAAO,CAAEE,OAAQ,WAAaJ,QAAS,kBAAMoT,EAAY,MAC7DzX,EAAAC,EAAAC,cAAA,KAAGoE,UAAU,gCCxFZ0T,GAAY,WAA0B,IAAzBC,EAAyB1W,UAAAC,OAAA,QAAAkH,IAAAnH,UAAA,IAAAA,UAAA,GAAAoT,EACvBC,mBAASqD,GADcpD,EAAAxU,OAAAqH,EAAA,EAAArH,CAAAsU,EAAA,GAC1CjS,EAD0CmS,EAAA,GACnCwB,EADmCxB,EAAA,GAGjD,MAAO,CAACnS,EADO,kBAAM2T,GAAU3T,MCSpB6U,GAAgB5X,IAAMC,cAAc,IAEpCsY,GAAS,SAAA7U,GAAuC,IAApC2B,EAAoC3B,EAApC2B,OAAQiD,EAA4B5E,EAA5B4E,MAAOkQ,EAAqB9U,EAArB8U,eAEhC/X,EAAOuQ,qBAAWjR,GAFmCgR,EAGnCC,qBAAW0G,IAA3BxS,EAHmD6L,EAGnD7L,MAAO2R,EAH4C9F,EAG5C8F,KAH4C4B,EAIpCJ,KAJoCK,EAAAhY,OAAAqH,EAAA,EAAArH,CAAA+X,EAAA,GAIpD3G,EAJoD4G,EAAA,GAI9C3G,EAJ8C2G,EAAA,GAOrDtT,EAAe,SAAAkJ,GACnB,IAAM0J,EAAWC,aAAQ/S,EAAOoJ,GAC1BjJ,EAAS2S,EAASnR,QAAQyB,GAChC4P,EAAsBF,EAAU3S,EAAQ5E,GAAMgD,KAAK+U,IAG/C/T,EAAOmC,IAAMvB,EAAO0B,SAAU,SAAW1B,EAAO0B,SAASlF,OAAS,EAExE,OACExB,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,UACbtE,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,gBAAgBD,QAASqN,GACtC1R,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OACEoE,UAAU,qBACVD,QAAS,SAAA0L,GACPA,EAAMC,iBACND,EAAM1F,kBACNtF,EAAa,SAAAF,GACXA,EAAM2B,QAAQyB,GAAO7D,MAAQA,MAIjCpE,EAAAC,EAAAC,cAACoG,EAAD,CAAWlC,KAAMA,KAXrB,UAaU6D,EAAQ,EAblB,YAeEjI,EAAAC,EAAAC,cAAC4X,GAAD,CACEtB,KAAMA,EACNxH,YAAY,OACZtM,MAAOsC,EAAOW,eACdsI,UAAW,SAAAvL,GAAK,OAAImO,SAASnO,EAAO,KACpCyC,SAAU,SAAAQ,GAAc,OACtBZ,EAAa,SAAAF,GACXA,EAAM2B,QAAQyB,GAAOtC,eAAiBA,QAK9C3F,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,uBACZmN,EACCzR,EAAAC,EAAAC,cAAA,KAAGoE,UAAU,sBAEbtE,EAAAC,EAAAC,cAAA,KAAGoE,UAAU,0BAInBtE,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,YACbtE,EAAAC,EAAAC,cAACqX,GAActT,SAAf,CAAwBvB,MAAO,CAAEsC,SAAQiD,UACtCwJ,GACCzM,EAAO0B,SAASD,IAAI,SAAC0Q,EAASmB,GAAV,OAClBtY,EAAAC,EAAAC,cAACqY,GAAD,CACE9V,IAAK0U,EAAQrS,IACbqS,QAASA,EACTlP,MAAOqQ,EACPlB,iBAAkBe,QAM1B3B,OAeA9N,EAdA1I,EAAAC,EAAAC,cAACyR,EAAA,SAAD,KACGF,GACCzR,EAAAC,EAAAC,cAAA,UACEoE,UAAU,kBACVD,QAAS,kBhBjCG,SAACQ,EAAOG,EAAQ5E,GACxC,OAAO0C,MAAK,eAAAd,OAAgB6C,EAAMC,IAAtB,aAAA9C,OAAqCgD,EAAOF,IAA5C,aAA4D,CACtE/B,OAAQ,OACRY,KAAMC,KAAKC,UAAUmB,GACrBhC,QAASA,EAAQ5C,KAChBgD,KAAKzC,GgB6BMkX,CAAoBhT,EAAOG,EAAQ5E,GAAMgD,KAAK+U,KAGhDnY,EAAAC,EAAAC,cAAA,KAAGoE,UAAU,gBANf,sBC1EC+S,GAAe1X,IAAMC,cAAc,IAEnC4Y,GAAQC,aAAW,SAAApV,GAAwB,IAArBqV,EAAqBrV,EAArBqV,MAAOC,EAActV,EAAdsV,QAElCvY,EAAOuQ,qBAAWjR,GAClBoI,EAAS6I,qBAAWhJ,GAH4BgN,EAK5BC,qBAL4BC,EAAAxU,OAAAqH,EAAA,EAAArH,CAAAsU,EAAA,GAK/C9P,EAL+CgQ,EAAA,GAKxCK,EALwCL,EAAA,GAAAuD,EAM/BJ,IAAU,GANqBK,EAAAhY,OAAAqH,EAAA,EAAArH,CAAA+X,EAAA,GAM/C5B,EAN+C6B,EAAA,GAMzC3G,EANyC2G,EAAA,GAStD1C,oBAAU,kBjBXY,SAAC3N,EAAI5H,GAC3B,OAAO0C,MAAK,eAAAd,OAAgBgG,GAAM,CAChChF,QAASA,EAAQ5C,KAChBgD,KAAKzC,GiBQQkX,CAAkBa,EAAME,OAAO5Q,GAAI5H,GAAMgD,KAAK8R,IAAW,CACvEwD,EAAME,OAAO5Q,KAIf,IAAMpD,EAAc,SAAAqJ,GAAS,OAAI,WAC/B4J,EAAqBD,aAAQ/S,EAAOoJ,GAAY7N,GAAMgD,KAAKyV,KAIvDA,EAAe,SAAAC,GACnB5D,EAAS4D,GACThR,EAAOzC,OAAOyT,EAAahU,IAAKgU,IAGlC,OACE9Y,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,6BACXO,EAGA7E,EAAAC,EAAAC,cAACyR,EAAA,SAAD,KACE3R,EAAAC,EAAAC,cAAA,KACEmE,QAAS,kBAAMsU,EAAQI,UACvBzU,UAAU,iCACVC,MAAO,CACL0B,IAAK,OACLgQ,KAAM,OACNjQ,SAAU,WACVxB,MAAO,UACPC,OAAQ,WAEVgB,MAAM,iCAERzF,EAAAC,EAAAC,cAAA,OACEoE,UAAU,6BACVC,MAAO,CAAEyB,SAAU,aAEnBhG,EAAAC,EAAAC,cAAA,KACEmE,QAASqN,EACTpN,UAAS,OAAAtC,OAASwU,EAAO,UAAY,eAA5B,UACTjS,MAAO,CACLC,MAAO,yBACPwB,SAAU,WACVC,IAAK,MACLC,MAAO,MACPzB,OAAQ,WAEVgB,MAAK,YAAAzD,OACHwU,EAAO,OAAS,QADb,8BAIPxW,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,iCACbtE,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OACE4G,IAAKjC,EAAMkC,QACXxC,MAAO,CAAE+H,UAAW,SACpBtF,IAAI,kBAGRhH,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,0BAA0BC,MAAO,CAAEyU,SAAU,IAC1DhZ,EAAAC,EAAAC,cAAA,MAAIoE,UAAU,eACXO,EAAMY,MADT,MACmBZ,EAAMc,gBAEzB3F,EAAAC,EAAAC,cAAA,MAAIoE,UAAU,qCACXO,EAAMe,MAAMC,KAAK,MAEpB7F,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC6X,GAAD,CACEvB,KAAMA,EACN9T,MAAOmC,EAAMgN,QACbtN,MAAO,CAAE8H,MAAO,QAChB2C,YAAY,UACZgI,KAAK,IACL7R,SAAU,SAAA0M,GAAO,OACfjN,EAAY,SAAAC,GACVA,EAAMgN,QAAUA,GADlBjN,SAQV5E,EAAAC,EAAAC,cAAA,WACkB,SAAf2E,EAAMsB,KACLnG,EAAAC,EAAAC,cAACoG,EAAD,CACElC,KAAMS,EAAMT,KACZC,QAASO,EAAY,SAAAC,GACnBA,EAAMT,MAAQS,EAAMT,cAIxBsE,GAGJ1I,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,eACG,SAAfO,EAAMsB,KACLnG,EAAAC,EAAAC,cAACyR,EAAA,SAAD,KACE3R,EAAAC,EAAAC,cAACmX,GAAapT,SAAd,CAAuBvB,MAAO,CAAE8T,OAAM3R,UACpC7E,EAAAC,EAAAC,cAAA,WACG2E,EAAM2B,QAAQC,IAAI,SAACzB,EAAQsS,GAAT,OACjBtX,EAAAC,EAAAC,cAAC+Y,GAAD,CACExW,IAAK6U,EACLtS,OAAQA,EACRiD,MAAOqP,EACPa,eAAgBU,QAKtBrC,OAWA9N,EAVA1I,EAAAC,EAAAC,cAAA,UACEoE,UAAU,kBACVD,QAAS,kBjBhGN,SAACQ,EAAOzE,GAC/B,OAAO0C,MAAK,eAAAd,OAAgB6C,EAAMC,IAAtB,YAAqC,CAC/C/B,OAAQ,OACRY,KAAMC,KAAKC,UAAUgB,GACrB7B,QAASA,EAAQ5C,KAChBgD,KAAKzC,GiB4FckX,CAAmBhT,EAAOzE,GAAMgD,KAAKyV,KAGvC7Y,EAAAC,EAAAC,cAAA,KAAGoE,UAAU,gBANf,wBAcJoE,KA1GR1I,EAAAC,EAAAC,cAAA,+BCpCKgH,GAAU1G,OAAO,WACjB2G,GAAS3G,OAAO,UAOvBG,GAAiB,SAAAC,GACrB,GAAIA,EAASC,GAAI,OAAOD,EAASE,OACjC,MAAM,IAAIC,MAAM,eA0DLmY,GAAQrZ,cAtDnB,SAAAsZ,EAAYpZ,GAAO,IAAAoB,EAAA,OAAAd,OAAAe,EAAA,EAAAf,CAAAgB,KAAA8X,IACjBhY,EAAAd,OAAAuB,EAAA,EAAAvB,CAAAgB,KAAAhB,OAAAwB,EAAA,EAAAxB,CAAA8Y,GAAArX,KAAAT,KAAMtB,KACDkC,MAAQ,CACXE,OAAQ+E,GACRoB,UAAMI,GAIRvH,EAAKiY,cAAgBvD,KAAS1U,EAAK2B,MAAO3B,EAAKpB,MAAM8V,UAAY,EAAG,CAClEC,SAAS,EACTC,UAAU,IAVK5U,sFAejBE,KAAK+X,cAAcpD,sJAGb,IA7BM5V,EA6BNuC,EAAAtB,KACN,OAAOyB,MAAK,GAAAd,OAAIX,KAAKtB,MAAMsZ,UAAY,CACrCrW,SA/BU5C,EA+BOiB,KAAKtB,MAAMK,KA/BT,CACvB6C,OAAQ,mBACRC,eAAgB,mBAChBC,cAAa,UAAAnB,OAAY5B,EAAK8B,WA8BzBkB,KAAKzC,IACLyC,KAAK,SAAAkF,GACJ3F,EAAKa,SAAS,CACZrB,OAAQgF,GACRmB,SAEF3F,EAAK5C,MAAMuZ,WAAa3W,EAAK5C,MAAMuZ,UAAUhR,kDAKjDjH,KAAK+X,iDAIL,OACEpZ,EAAAC,EAAAC,cAACyR,EAAA,SAAD,KACGtQ,KAAKtB,MAAMmE,SAAS,CACnB/B,OAAQd,KAAKY,MAAME,OACnBmG,KAAMjH,KAAKY,MAAMqG,eA1CIxI,cCblByZ,GAASd,aAAW,SAAApV,GAAiB,IAAdsV,EAActV,EAAdsV,QAClC,OACE3Y,EAAAC,EAAAC,cAAA,OACEoE,UAAU,cACVC,MAAO,CACL6H,gBAAiB,yBACjB5H,MAAO,uBACPkH,QAAS,QAGX1L,EAAAC,EAAAC,cAAA,MACEmE,QAAS,kBAAMsU,EAAQ3M,KAAK,MAC5BzH,MAAO,CACLE,OAAQ,YAHZ,gBAQAzE,EAAAC,EAAAC,cAACgZ,GAAD,CAAOG,SAAS,uBACb,SAAAvV,GAAA,IAAGwE,EAAHxE,EAAGwE,KAAH,OACCA,EAAOtI,EAAAC,EAAAC,cAAA,UAAKoI,EAAKC,MAAV,wBAAuCG,IAGlD1I,EAAAC,EAAAC,cAAA,KACEmE,QAAS,kBAAMsU,EAAQ3M,KAAK,WAC5B1H,UAAU,yBACVC,MAAO,CACL0B,IAAK,OACLC,MAAO,OACPF,SAAU,WACVxB,MAAO,UACPC,OAAQ,WAEVgB,MAAM,oDC7BR+T,GAAe,SAAClS,EAAOD,GAC3B,OAAOC,EAAMb,IAAI,SAAAN,GAAI,MAAK,CACxBsC,KAAMtC,EACNoC,MAAO,EACPlB,OAAQA,EAAOZ,IAAI,SAAAb,GAAK,MAAK,CAC3B6C,KAAM7C,EACN2C,MAAO,EACPnE,KAAM,EACNqV,OAAQ,SAKDC,GAAa,WAExB,IAAMtZ,EAAOuQ,qBAAWjR,GAFMgR,EAGJC,qBAAW1J,GAA7BI,EAHsBqJ,EAGtBrJ,OAAQC,EAHcoJ,EAGdpJ,MAHcqN,EAIJC,mBAAS4E,GAAalS,EAAOD,IAJzBwN,EAAAxU,OAAAqH,EAAA,EAAArH,CAAAsU,EAAA,GAIvBgF,EAJuB9E,EAAA,GAIhB+E,EAJgB/E,EAAA,GAyE9B,OARAc,oBACE,WACEiE,EAASJ,GAAalS,EAAOD,IA5DZ,SAACC,EAAOD,GAC3BC,EAAMuS,QAAQ,SAAA1T,GAAI,OAChB0R,EAAA,SAAA7V,OAA4BmE,EAA5B,YAA4C/F,GACzCgD,KAAK,SAAAkF,GAAI,OACRsR,EACEhC,aACE,SAAAkC,GACQA,EAAMrL,KAAK,SAAAsL,GAAC,OAAI5T,IAAS4T,EAAEtR,OAAMF,MAAQD,EAAKC,WAI3DnF,KAAK,kBACJiE,EAAOwS,QAAQ,SAAAjU,GACbiS,EAAA,SAAA7V,OACWmE,EADX,YAAAnE,OAC0B4D,EAD1B,YAEExF,GACAgD,KAAK,SAAAkF,GAAI,OACTsR,EACEhC,aACE,SAAAkC,GACQA,EACHrL,KAAK,SAAAsL,GAAC,OAAI5T,IAAS4T,EAAEtR,OACrBpB,OAAOoH,KAAK,SAAAuL,GAAC,OAAIpU,IAAUoU,EAAEvR,OAAMF,MAAQD,EAAKC,WAI3DsP,EAAA,SAAA7V,OACWmE,EADX,YAAAnE,OAC0B4D,EAD1B,sBAEExF,GACAgD,KAAK,SAAAkF,GAAI,OACTsR,EACEhC,aACE,SAAAkC,GACQA,EACHrL,KAAK,SAAAsL,GAAC,OAAI5T,IAAS4T,EAAEtR,OACrBpB,OAAOoH,KAAK,SAAAuL,GAAC,OAAIpU,IAAUoU,EAAEvR,OAAMrE,KAAOkE,EAAKC,WAI1DsP,EAAA,SAAA7V,OACWmE,EADX,YAAAnE,OAC0B4D,EAD1B,uBAEExF,GACAgD,KAAK,SAAAkF,GAAI,OACTsR,EACEhC,aACE,SAAAkC,GACQA,EACHrL,KAAK,SAAAsL,GAAC,OAAI5T,IAAS4T,EAAEtR,OACrBpB,OAAOoH,KAAK,SAAAuL,GAAC,OAAIpU,IAAUoU,EAAEvR,OAAMgR,OAASnR,EAAKC,iBAalE0R,CAAa3S,EAAOD,IAEtB,CAACC,EAAOD,IAIRrH,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,iCACZqV,EAAMlT,IAAI,SAACN,EAAM8B,GAAP,OACTjI,EAAAC,EAAAC,cAAA,OAAKqE,MAAO,CAAE8H,MAAO,SAAW5J,IAAKwF,GACnCjI,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,kBACbtE,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,aACbtE,EAAAC,EAAAC,cAAA,MAAIoE,UAAU,cACX6B,EAAKoC,MADR,IACgBpC,EAAKsC,MAErBzI,EAAAC,EAAAC,cAAA,WACGga,KAAQ/T,EAAKkB,OAAQ,CAAC,SAAU,CAAC,SAASZ,IACzC,SAACb,EAAOqC,GAAR,OACEjI,EAAAC,EAAAC,cAACyR,EAAA,SAAD,KACE3R,EAAAC,EAAAC,cAAA,WACG,IACA0F,EAAM2C,MAFT,IAEiB3C,EAAM6C,KAFvB,KAE+B,IAC5B7C,EAAM2C,OACY,IAAb3C,EAAMxB,KAAcwB,EAAM2C,OAAO4R,QAAQ,GAC3C,EALN,UAMU,KAEVna,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,iBAAiB7B,IAAKwF,GACnCjI,EAAAC,EAAAC,cAAA,OACEoE,UAAU,sBACVoP,KAAK,cACLnP,MAAO,CACL8H,MAAK,eAAArK,OAAiC,IAAf4D,EAAM6T,OAC3BS,KAAQ/T,EAAKkB,OAAQ,CAAC,SAAU,CAAC,SAAS,GACvCkB,MAFA,QAKN3C,EAAM6T,QAER7T,EAAM2C,MAAQ3C,EAAM6T,OAAS7T,EAAMxB,KAClCpE,EAAAC,EAAAC,cAAA,OACEoE,UAAU,uBACVoP,KAAK,cACLnP,MAAO,CACL8H,MAAK,eAAArK,OAGH,KAHsB4D,EAAM2C,MAC5B3C,EAAM6T,OACN7T,EAAMxB,MAEN8V,KAAQ/T,EAAKkB,OAAQ,CAAC,SAAU,CAAC,SAAS,GACvCkB,MALA,QAQN3C,EAAM2C,MAAQ3C,EAAM6T,OAAS7T,EAAMxB,WAGtCsE,EAEF1I,EAAAC,EAAAC,cAAA,OACEoE,UAAU,oBACVoP,KAAK,cACLnP,MAAO,CACL8H,MAAK,eAAArK,OAA+B,IAAb4D,EAAMxB,KAC3B8V,KAAQ/T,EAAKkB,OAAQ,CAAC,SAAU,CAAC,SAAS,GACvCkB,MAFA,QAKN3C,EAAMxB,mBClIpBgW,oLAfX,OACEpa,EAAAC,EAAAC,cAACyR,EAAA,SAAD,KACE3R,EAAAC,EAAAC,cAACma,EAAA,EAAD,KACEra,EAAAC,EAAAC,cAACyR,EAAA,SAAD,KACE3R,EAAAC,EAAAC,cAACqZ,GAAD,MACAvZ,EAAAC,EAAAC,cAACoa,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,IAAIC,UAAW/F,KACjC1U,EAAAC,EAAAC,cAACoa,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,aAAaC,UAAWjC,KAC1CxY,EAAAC,EAAAC,cAACoa,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,SAASC,UAAWf,eAThC5Z,aCsCL4a,GAAQ7a,6MA1CnBoC,MAAQ,CACNwB,SAAU,4EAGH,IAAAd,EAAAtB,KACP,OACErB,EAAAC,EAAAC,cAAA,WACGmB,KAAKtB,MAAMK,KAAK+B,SAAWzB,EAC1BV,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,qBAAqBoP,KAAK,SAAzC,qBAIAhL,EAEF1I,EAAAC,EAAAC,cAAA,OAAKoE,UAAU,cACbtE,EAAAC,EAAAC,cAAA,SAAO6T,QAAQ,YAAf,YACA/T,EAAAC,EAAAC,cAAA,SACEiG,KAAK,OACL7B,UAAU,eACV0D,GAAG,WACHgM,mBAAiB,WACjBhF,YAAY,iBACZtM,MAAOrB,KAAKY,MAAMwB,SAClB0B,SAAU,SAAA4K,GAAK,OAAIpN,EAAKa,SAAS,CAAEC,SAAUsM,EAAMO,OAAO5N,SAC1DiY,UAAW,SAAA5K,GACS,UAAdA,EAAMtN,KACRE,EAAK5C,MAAMK,KAAKgC,MAAMO,EAAKV,MAAMwB,cAIzCzD,EAAAC,EAAAC,cAAA,UACEiG,KAAK,SACL7B,UAAU,kBACVD,QAAS,kBAAM1B,EAAK5C,MAAMK,KAAKgC,MAAMO,EAAKV,MAAMwB,YAHlD,kBA/BuB3D,cCM/B8a,IAASnQ,OACPzK,EAAAC,EAAAC,cAAC2a,EAAD,KACE7a,EAAAC,EAAAC,cAACR,EAAYS,SAAb,KACG,SAAAkD,GAAA,IAAGnB,EAAHmB,EAAGnB,MAAH,OACCA,EACElC,EAAAC,EAAAC,cAAC4a,EAAD,CAAqB5Y,MAAOA,GAC1BlC,EAAAC,EAAAC,cAAC6a,EAAD,KACE/a,EAAAC,EAAAC,cAAC8a,GAAD,QAIJhb,EAAAC,EAAAC,cAACwa,GAAD,SAKRO,SAASC,eAAe","file":"static/js/main.1cd420f2.chunk.js","sourcesContent":["import React from \"react\";\n\nexport const UserContext = React.createContext();\nexport const withUser = Component => props => (\n  <UserContext.Consumer>\n    {user => <Component {...props} user={user} />}\n  </UserContext.Consumer>\n);\n\nexport const LOGOUT = Symbol();\nexport const LOGIN = Symbol();\nexport const LOGIN_FAILED = Symbol();\n\nconst handleResponse = response => {\n  if (response.ok) return response.json();\n  throw new Error(\"Fetch fail\");\n};\n\nexport class UserProvider extends React.Component {\n  state = {\n    token: null,\n    status: LOGOUT,\n    login: this.login.bind(this)\n  };\n\n  componentDidMount() {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      fetch(\"/account\", {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`\n        }\n      })\n        .then(handleResponse)\n        .then(({ exp }) => {\n          if (new Date() < new Date(exp * 1000))\n            this.setState({ token, status: LOGIN });\n        });\n    }\n  }\n\n  login(password) {\n    fetch(\"/login\", {\n      method: \"POST\",\n      body: JSON.stringify({ password }),\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      }\n    })\n      .then(handleResponse)\n      .then(({ token }) => {\n        this.setState({ token, status: LOGIN });\n        localStorage.setItem(\"token\", token);\n      })\n      .catch(() => this.setState({ status: LOGIN_FAILED }));\n  }\n\n  render() {\n    return (\n      <UserContext.Provider value={this.state}>\n        {this.props.children}\n      </UserContext.Provider>\n    );\n  }\n}\n","import React from \"react\";\n\nexport const MovieSeen = ({ seen, onClick }) => (\n  <i\n    className=\"fas fa-eye\"\n    style={{\n      color: seen ? \"var(--success)\" : \"\",\n      cursor: \"pointer\"\n    }}\n    onClick={onClick}\n  />\n);\n","const headers = user => ({\n  Accept: \"application/json\",\n  \"Content-Type\": \"application/json\",\n  Authorization: `Bearer ${user.token}`\n});\n\nconst handleResponse = response => {\n  if (response.ok) return response.json();\n  throw new Error(\"Fetch fail\");\n};\n\nexport const getMovie = (id, user) => {\n  return fetch(`/api/movies/${id}`, {\n    headers: headers(user)\n  }).then(handleResponse);\n};\n\nexport const getMovies = (search, user) => {\n  return fetch(`/api/movies?${search}`, {\n    headers: headers(user)\n  }).then(handleResponse);\n};\n\nexport const updateMovie = (movie, user) => {\n  return fetch(`/api/movies/${movie._id}`, {\n    method: \"PUT\",\n    body: JSON.stringify(movie),\n    headers: headers(user)\n  }).then(handleResponse);\n};\n\nexport const deleteMovie = (movie, user) => {\n  return fetch(`/api/movies/${movie._id}`, {\n    method: \"DELETE\",\n    headers: headers(user)\n  }).then(handleResponse);\n};\n\nexport const addSeason = (movie, user) => {\n  return fetch(`/api/movies/${movie._id}/seasons`, {\n    method: \"POST\",\n    body: JSON.stringify(movie),\n    headers: headers(user)\n  }).then(handleResponse);\n};\n\nexport const updateSeason = (movie, season, user) => {\n  return fetch(`/api/movies/${movie._id}/seasons/${season._id}`, {\n    method: \"PUT\",\n    body: JSON.stringify(season),\n    headers: headers(user)\n  }).then(handleResponse);\n};\n\nexport const addEpisode = (movie, season, user) => {\n  return fetch(`/api/movies/${movie._id}/seasons/${season._id}/episodes`, {\n    method: \"POST\",\n    body: JSON.stringify(season),\n    headers: headers(user)\n  }).then(handleResponse);\n};\n\nexport const updateEpisode = (movie, season, episode, user) => {\n  return fetch(\n    `/api/movies/${movie._id}/seasons/${season._id}/episodes/${episode._id}`,\n    {\n      method: \"PUT\",\n      body: JSON.stringify(episode),\n      headers: headers(user)\n    }\n  ).then(handleResponse);\n};\n","import React from \"react\";\nimport \"./Movie.css\";\nimport { withUser } from \"../Login/UserContext\";\nimport { Link } from \"react-router-dom\";\nimport { MovieSeen } from \"./MovieSeen\";\nimport { deleteMovie, updateMovie } from \"./MovieAPI\";\nimport every from \"lodash/every\";\n\nexport const MovieCard = withUser(\n  ({ movie, onEdit, user, onChange, onDelete }) => {\n    const update = (field, value) => () =>\n      updateMovie({ ...movie, [field]: value }, user).then(onChange);\n\n    const title = `${movie.title}`;\n    const subtitle = `${movie.productionYear} - ${movie.genre.join(\",\")}`;\n\n    return (\n      <div className=\"card movie-card\">\n        <div className=\"card-body\">\n          <h5 className=\"card-title\">\n            <Link to={`movie/${movie._id}`}>\n              <div className=\"ellipsis\" title={title}>\n                {title}\n              </div>\n            </Link>\n          </h5>\n          <h6\n            className=\"card-subtitle mb-2 text-muted ellipsis\"\n            title={subtitle}\n          >\n            {subtitle}\n          </h6>\n          <div\n            className=\"movie-card-actions\"\n            style={{ position: \"absolute\", top: 2, right: 4 }}\n          >\n            {movie.type !== \"Film\" && (\n              <i\n                className=\"fas fa-ban\"\n                style={{\n                  cursor: \"pointer\",\n                  color: movie.finished ? \"var(--danger)\" : \"black\"\n                }}\n                onClick={update(\"finished\", !movie.finished)}\n              />\n            )}\n            <span\n              className=\"netflix-small\"\n              style={{\n                color: movie.netflix ? \"var(--danger)\" : \"black\"\n              }}\n              onClick={update(\"netflix\", !movie.netflix)}\n            >\n              N\n            </span>\n            {movie.type === \"Film\" ? (\n              <MovieSeen\n                seen={movie.seen}\n                onClick={update(\"seen\", !movie.seen)}\n              />\n            ) : (\n              <MovieSeen\n                seen={\n                  every(\n                    movie.seasons.map(\n                      season =>\n                        every(season.episodes, \"seen\") &&\n                        season.episodes.length > 0\n                    )\n                  ) && movie.seasons.length > 0\n                }\n              />\n            )}\n            <i\n              className=\"fas fa-pencil-alt\"\n              onClick={onEdit}\n              style={{ cursor: \"pointer\" }}\n            />\n            <i\n              className=\"fas fa-trash\"\n              onClick={() => {\n                if (window.confirm()) {\n                  deleteMovie(movie, user).then(onDelete);\n                }\n              }}\n              style={{ cursor: \"pointer\" }}\n            />\n          </div>\n          <div className=\"poster text-center\">\n            <img src={movie.fileUrl} alt=\"movie poster\" />\n          </div>\n        </div>\n      </div>\n    );\n  }\n);\n","import React from \"react\";\n\nexport const ApplicationContext = React.createContext();\nexport const withApplication = Component => props => (\n  <ApplicationContext.Consumer>\n    {application => <Component {...props} application={application} />}\n  </ApplicationContext.Consumer>\n);\n\nexport const LOADING = Symbol();\nexport const LOADED = Symbol();\n\nexport class ApplicationProvider extends React.Component {\n  state = {\n    genres: [],\n    types: [],\n    status: LOADING\n  };\n\n  componentDidMount() {\n    const options = {\n      headers: {\n        Authorization: `Bearer ${this.props.token}`\n      }\n    };\n\n    const handleResponse = response => {\n      if (response.ok) return response.json();\n      throw new Error(\"Fetch fail\");\n    };\n    Promise.all([\n      fetch(\"/api/movies/genre\", options).then(handleResponse),\n      fetch(\"/api/movies/type\", options).then(handleResponse)\n    ]).then(([genres, types]) => {\n      this.setState({\n        genres,\n        types,\n        status: LOADED\n      });\n    });\n  }\n\n  render() {\n    return (\n      <ApplicationContext.Provider value={this.state}>\n        {this.props.children}\n      </ApplicationContext.Provider>\n    );\n  }\n}\n","import React from \"react\";\nimport findIndex from \"lodash/findIndex\";\n\nexport const MoviesContext = React.createContext();\n\nexport class MoviesProvider extends React.Component {\n  add = movie => {\n    this.setState({\n      movies: [movie, ...this.state.movies]\n    });\n  };\n\n  update = (id, movie) => {\n    const index = findIndex(this.state.movies, [\"_id\", id]);\n    const movies = [...this.state.movies];\n    movies[index] = movie;\n    this.setState({\n      movies: movies.filter(Boolean) // pass undefined as delete and then use filter te remove the element\n    });\n  };\n\n  addAll = ({ data, count }) => {\n    this.setState({ movies: [...this.state.movies, ...data], count });\n  };\n\n  invalidate = () => {\n    this.setState({ movies: [] });\n  };\n\n  onChange = name => (value = \"\") => {\n    this.invalidate(); // hmmm :)\n    this.setState(({ filters }) => ({\n      filters: { ...filters, [name]: value }\n    }));\n  };\n\n  state = {\n    movies: [],\n    count: 0,\n    filters: {\n      productionYear: \"\",\n      title: \"\",\n      genres: [],\n      types: [],\n      seen: null, // null = dont care, true = have seen, false = have not seen\n      netflix: null, // null = dont care, true = on netflix\n      finished: null, // null = dont care, true = finished\n      limit: 30\n    },\n    onChange: this.onChange,\n    addAll: this.addAll,\n    update: this.update,\n    add: this.add,\n    invalidate: this.invalidate\n  };\n\n  render() {\n    return (\n      <MoviesContext.Provider value={this.state}>\n        {this.props.children}\n      </MoviesContext.Provider>\n    );\n  }\n}\n","import React from \"react\";\nimport Downshift from \"downshift\";\n\nexport class MultiDownshift extends React.Component {\n  state = { selectedItems: this.props.selectedItems || [] };\n\n  componentDidUpdate(prevProps) {\n    if (\n      prevProps.selectedItems !== this.props.selectedItems &&\n      this.props.selectedItems !== this.state.selectedItems\n    ) {\n      this.setState({ selectedItems: this.props.selectedItems || [] });\n    }\n  }\n  stateReducer = (state, changes) => {\n    switch (changes.type) {\n      case Downshift.stateChangeTypes.keyDownEnter:\n      case Downshift.stateChangeTypes.clickItem:\n        return {\n          ...changes,\n          highlightedIndex: state.highlightedIndex,\n          isOpen: true\n        };\n      default:\n        return changes;\n    }\n  };\n\n  callOnChange = downshift => () => {\n    if (this.props.onChange) {\n      this.props.onChange(\n        this.state.selectedItems,\n        this.getStateAndHelpers(downshift)\n      );\n    }\n  };\n\n  handleSelection = (selectedItem, downshift) => {\n    if (this.state.selectedItems.includes(selectedItem)) {\n      this.removeItem(selectedItem, this.callOnChange(downshift));\n    } else {\n      this.addSelectedItem(selectedItem, this.callOnChange(downshift));\n    }\n  };\n\n  removeItem = (item, cb) => {\n    this.setState(({ selectedItems }) => {\n      return {\n        selectedItems: selectedItems.filter(i => i !== item)\n      };\n    }, cb);\n  };\n  addSelectedItem(item, cb) {\n    this.setState(\n      ({ selectedItems }) => ({\n        selectedItems: [...selectedItems, item]\n      }),\n      cb\n    );\n  }\n\n  getRemoveButtonProps = downshift => ({ onClick, item, ...props } = {}) => {\n    return {\n      onClick: e => {\n        // TODO: use something like downshift's composeEventHandlers utility instead\n        onClick && onClick(e);\n        e.stopPropagation();\n        this.removeItem(item, this.callOnChange(downshift));\n      },\n      ...props\n    };\n  };\n\n  getStateAndHelpers(downshift) {\n    const { selectedItems } = this.state;\n    const { getRemoveButtonProps, removeItem } = this;\n    return {\n      getRemoveButtonProps: getRemoveButtonProps(downshift),\n      removeItem,\n      selectedItems,\n      ...downshift\n    };\n  }\n  render() {\n    const { render, children = render, ...props } = this.props;\n    // TODO: compose together props (rather than overwriting them) like downshift does\n    return (\n      <Downshift\n        {...props}\n        stateReducer={this.stateReducer}\n        onChange={this.handleSelection}\n        selectedItem={null}\n      >\n        {downshift => children(this.getStateAndHelpers(downshift))}\n      </Downshift>\n    );\n  }\n}\n","import React from \"react\";\nimport { css as emoCSS } from \"emotion\";\nimport styled from \"react-emotion\";\n\n// TODO copy paste from downshift example :)\n\nconst css = (...args) => ({ className: emoCSS(...args) });\n\nconst Item = styled(\"li\")(\n  {\n    position: \"relative\",\n    cursor: \"pointer\",\n    display: \"block\",\n    border: \"none\",\n    height: \"auto\",\n    textAlign: \"left\",\n    borderTop: \"none\",\n    lineHeight: \"1em\",\n    color: \"rgba(0,0,0,.87)\",\n    fontSize: \"1rem\",\n    textTransform: \"none\",\n    fontWeight: \"400\",\n    boxShadow: \"none\",\n    padding: \".8rem 1.1rem\",\n    whiteSpace: \"normal\",\n    wordWrap: \"normal\"\n  },\n  ({ isActive, isSelected }) => {\n    const styles = [];\n    if (isActive) {\n      styles.push({\n        color: \"rgba(0,0,0,.95)\",\n        background: \"rgba(0,0,0,.03)\"\n      });\n    }\n    if (isSelected) {\n      styles.push({\n        color: \"rgba(0,0,0,.95)\",\n        fontWeight: \"700\"\n      });\n    }\n    return styles;\n  }\n);\n\nconst BaseMenu = styled(\"ul\")(\n  {\n    padding: 0,\n    marginTop: 0,\n    position: \"absolute\",\n    backgroundColor: \"white\",\n    width: \"100%\",\n    maxHeight: \"20rem\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    outline: \"0\",\n    transition: \"opacity .1s ease\",\n    borderRadius: \"0 0 .28571429rem .28571429rem\",\n    boxShadow: \"0 2px 3px 0 rgba(34,36,38,.15)\",\n    borderColor: \"#96c8da\",\n    borderTopWidth: \"0\",\n    borderRightWidth: 1,\n    borderBottomWidth: 1,\n    borderLeftWidth: 1,\n    borderStyle: \"solid\",\n    zIndex: 10\n  },\n  ({ isOpen }) => ({\n    border: isOpen ? null : \"none\"\n  })\n);\n\nconst Menu = React.forwardRef((props, ref) => (\n  <BaseMenu innerRef={ref} {...props} />\n));\n\nconst ControllerButton = styled(\"button\")({\n  backgroundColor: \"transparent\",\n  border: \"none\",\n  position: \"absolute\",\n  right: 0,\n  top: 0,\n  cursor: \"pointer\",\n  width: 47,\n  display: \"flex\",\n  flexDirection: \"column\",\n  height: \"100%\",\n  justifyContent: \"center\",\n  alignItems: \"center\"\n});\n\nfunction ArrowIcon({ isOpen }) {\n  return (\n    <svg\n      viewBox=\"0 0 20 20\"\n      preserveAspectRatio=\"none\"\n      width={16}\n      fill=\"transparent\"\n      stroke=\"#979797\"\n      strokeWidth=\"1.1px\"\n      transform={isOpen ? \"rotate(180)\" : null}\n    >\n      <path d=\"M1,6 L10,15 L19,6\" />\n    </svg>\n  );\n}\nexport { Menu, ControllerButton, Item, ArrowIcon, css };\n","import React from \"react\";\nimport Downshift from \"downshift\";\n\nexport class MultiDownshiftWithReverse extends React.Component {\n  state = { selectedItems: this.props.selectedItems || [] };\n  stateReducer = (state, changes) => {\n    switch (changes.type) {\n      case Downshift.stateChangeTypes.keyDownEnter:\n      case Downshift.stateChangeTypes.clickItem:\n        return {\n          ...changes,\n          highlightedIndex: state.highlightedIndex,\n          isOpen: true\n        };\n      default:\n        return changes;\n    }\n  };\n\n  callOnChange = downshift => () => {\n    if (this.props.onChange) {\n      this.props.onChange(\n        this.state.selectedItems,\n        this.getStateAndHelpers(downshift)\n      );\n    }\n  };\n\n  handleSelection = (selectedItem, downshift) => {\n    if (\n      this.state.selectedItems.filter(item => selectedItem === item[0]).length >\n      0\n    ) {\n      this.removeItem([selectedItem], this.callOnChange(downshift));\n    } else {\n      this.addSelectedItem(selectedItem, this.callOnChange(downshift));\n    }\n  };\n\n  removeItem = (item, cb) => {\n    this.setState(({ selectedItems }) => {\n      return {\n        selectedItems: selectedItems.filter(i => i[0] !== item[0])\n      };\n    }, cb);\n  };\n  addSelectedItem(item, cb) {\n    this.setState(\n      ({ selectedItems }) => ({\n        selectedItems: [...selectedItems, [item, true]]\n      }),\n      cb\n    );\n  }\n\n  getRemoveButtonProps = downshift => ({ onClick, item, ...props } = {}) => {\n    return {\n      onClick: e => {\n        // TODO: use something like downshift's composeEventHandlers utility instead\n        onClick && onClick(e);\n        e.stopPropagation();\n        this.removeItem(item, this.callOnChange(downshift));\n      },\n      ...props\n    };\n  };\n\n  clickOnItem = downshift => (item, index) => {\n    this.setState(({ selectedItems }) => {\n      const newSelectedItems = selectedItems;\n      newSelectedItems[index] = [item[0], !item[1]];\n      return {\n        selectedItems: newSelectedItems.filter(i => i !== item[0])\n      };\n    }, this.callOnChange(downshift));\n  };\n  displayItem = item => {\n    return item[0];\n  };\n  displayBackground = item => {\n    return item[1] ? \"#ccc\" : \"tomato\";\n  };\n  isSelected = itemToFind => {\n    return this.state.selectedItems.find(item => item[0] === itemToFind);\n  };\n\n  getStateAndHelpers(downshift) {\n    const { selectedItems } = this.state;\n    const {\n      getRemoveButtonProps,\n      removeItem,\n      clickOnItem,\n      displayItem,\n      displayBackground,\n      isSelected\n    } = this;\n    return {\n      getRemoveButtonProps: getRemoveButtonProps(downshift),\n      removeItem,\n      selectedItems,\n      clickOnItem: clickOnItem(downshift),\n      displayItem,\n      displayBackground,\n      isSelected,\n      ...downshift\n    };\n  }\n  render() {\n    const { render, children = render, ...props } = this.props;\n    // TODO: compose together props (rather than overwriting them) like downshift does\n    return (\n      <Downshift\n        {...props}\n        stateReducer={this.stateReducer}\n        onChange={this.handleSelection}\n        selectedItem={null}\n      >\n        {downshift => children(this.getStateAndHelpers(downshift))}\n      </Downshift>\n    );\n  }\n}\n","import { MultiDownshift } from \"./MultiDownshift\";\nimport { ArrowIcon, ControllerButton, css, Item, Menu } from \"../shared\";\nimport React, { Component } from \"react\";\nimport identity from \"lodash/identity\";\nimport { MultiDownshiftWithReverse } from \"./MultiDownshiftWithReverse\";\n\nconst BaseMultiDownshift = BaseComponent =>\n  class extends Component {\n    render() {\n      const { handleChange, placeholder, items, selectedItems } = this.props;\n      return (\n        <BaseComponent\n          onChange={handleChange}\n          selectedItems={selectedItems}\n          placeholder={placeholder}\n        >\n          {({\n            getToggleButtonProps,\n            getMenuProps,\n            getRemoveButtonProps,\n            removeItem,\n            isOpen,\n            selectedItems,\n            getItemProps,\n            highlightedIndex,\n            toggleMenu,\n            clickOnItem = () => void 0,\n            displayItem = identity,\n            displayBackground = () => \"#ccc\",\n            isSelected = item => selectedItems.includes(item)\n          }) => (\n            <div\n              style={{\n                margin: \"auto\",\n                position: \"relative\",\n                width: \"100%\"\n              }}\n            >\n              <div\n                {...css({\n                  cursor: \"pointer\",\n                  position: \"relative\",\n                  padding: \".375rem .75rem\",\n                  paddingRight: 50,\n                  border: \"1px solid #ced4da\",\n                  borderRadius: \".25rem\",\n                  backgroundColor: \"white\"\n                })}\n                onClick={() => {\n                  toggleMenu();\n                }}\n              >\n                <div\n                  {...css({\n                    display: \"flex\",\n                    flexWrap: \"wrap\",\n                    alignItems: \"center\"\n                  })}\n                >\n                  {selectedItems.length > 0 ? (\n                    selectedItems.map((item, index) => (\n                      <div\n                        key={index}\n                        {...css({\n                          margin: \"0 2px\",\n                          paddingLeft: 8,\n                          paddingRight: 8,\n                          display: \"inline-block\",\n                          wordWrap: \"none\",\n                          backgroundColor: displayBackground(item),\n                          borderRadius: 2\n                        })}\n                        onClick={event => {\n                          event.preventDefault();\n                          event.stopPropagation();\n                          clickOnItem(item, index);\n                        }}\n                      >\n                        <div\n                          {...css({\n                            display: \"grid\",\n                            gridGap: 6,\n                            gridAutoFlow: \"column\",\n                            alignItems: \"center\"\n                          })}\n                        >\n                          <span>{displayItem(item)}</span>\n                          <button\n                            {...getRemoveButtonProps({ item })}\n                            {...css({\n                              cursor: \"pointer\",\n                              lineHeight: 0.8,\n                              border: \"none\",\n                              backgroundColor: \"transparent\",\n                              padding: \"0\",\n                              fontSize: \"16px\"\n                            })}\n                            type=\"button\"\n                          >\n                            𝘅\n                          </button>\n                        </div>\n                      </div>\n                    ))\n                  ) : (\n                    <span\n                      {...css({\n                        color: \"#6c757d;\"\n                      })}\n                    >\n                      {placeholder}\n                    </span>\n                  )}\n                </div>\n                <ControllerButton\n                  {...getToggleButtonProps({\n                    // prevents the menu from immediately toggling\n                    // closed (due to our custom click handler above).\n                    onClick(event) {\n                      event.stopPropagation();\n                    }\n                  })}\n                >\n                  <ArrowIcon isOpen={isOpen} />\n                </ControllerButton>\n              </div>\n              <Menu {...getMenuProps({ isOpen })}>\n                {isOpen\n                  ? items.map((item, index) => (\n                      <Item\n                        key={index}\n                        {...getItemProps({\n                          item,\n                          index,\n                          isActive: highlightedIndex === index,\n                          isSelected: isSelected(item)\n                        })}\n                      >\n                        {item}\n                      </Item>\n                    ))\n                  : null}\n              </Menu>\n            </div>\n          )}\n        </BaseComponent>\n      );\n    }\n  };\n\nexport const AsyncMultiDownshift = BaseMultiDownshift(MultiDownshift);\nexport const AsyncMultiDownshiftwithReverse = BaseMultiDownshift(\n  MultiDownshiftWithReverse\n);\n","import React, { useContext } from \"react\";\nimport identity from \"lodash/identity\";\nimport { MoviesContext } from \"./MoviesContext\";\nimport {\n  AsyncMultiDownshift,\n  AsyncMultiDownshiftwithReverse\n} from \"../Common/AsyncMultiDownshift\";\nimport { ApplicationContext } from \"../ApplicationContext\";\n\nconst fromEvent = event => event.target.value;\n\nconst forInput = (\n  { filters, onChange },\n  name,\n  transform = identity,\n  from = fromEvent\n) => {\n  return {\n    value: filters[name],\n    onChange: value => onChange(name)(transform(from(value)))\n  };\n};\n\nexport const MoviesFilter = () => {\n  const { filters, onChange } = useContext(MoviesContext);\n  const { genres, types } = useContext(ApplicationContext);\n  const { seen, netflix, finished } = filters;\n\n  const renderSeen = () => {\n    let color = \"\",\n      icon = \"fa-eye\",\n      onClick = () => onChange(\"seen\")(true);\n    if (seen === true) {\n      color = \"var(--success)\";\n      onClick = () => onChange(\"seen\")(false);\n    } else if (seen === false) {\n      color = \"var(--danger)\";\n      icon = \"fa-eye-slash\";\n      onClick = () => onChange(\"seen\")(null);\n    }\n    return (\n      <i\n        className={`fas ${icon}`}\n        style={{\n          color,\n          cursor: \"pointer\"\n        }}\n        onClick={onClick}\n      />\n    );\n  };\n\n  const renderNetflix = () => {\n    let color = \"black\",\n      onClick = () => onChange(\"netflix\")(true);\n    if (netflix === true) {\n      color = \"var(--danger)\";\n      onClick = () => onChange(\"netflix\")(null);\n    }\n\n    return (\n      <span onClick={onClick} className=\"netflix\" style={{ color }}>\n        N\n      </span>\n    );\n  };\n\n  const renderFinished = () => {\n    let color = \"\",\n      onClick = () => onChange(\"finished\")(true);\n    if (finished === true) {\n      color = \"var(--danger)\";\n      onClick = () => onChange(\"finished\")(null);\n    }\n    return (\n      <i\n        className={`fas fa-ban`}\n        style={{\n          color,\n          cursor: \"pointer\"\n        }}\n        onClick={onClick}\n      />\n    );\n  };\n\n  return (\n    <form className=\"form-inline movies-filter mt-4 mb-4 ml-3\">\n      <div className=\"form-group\">\n        <input\n          {...forInput({ filters, onChange }, \"productionYear\", value =>\n            parseInt(value, 10)\n          )}\n          type=\"number\"\n          max={2200}\n          placeholder=\"YYYY\"\n          className=\"form-control\"\n          style={{ width: \"90px\" }}\n        />\n      </div>\n      <div className=\"form-group mx-sm-3\">\n        <input\n          type=\"text\"\n          {...forInput({ filters, onChange }, \"title\")}\n          placeholder=\"Title\"\n          className=\"form-control\"\n        />\n      </div>\n      <div className=\"form-group\" style={{ minWidth: \"220px\" }}>\n        <AsyncMultiDownshiftwithReverse\n          placeholder=\"Genre\"\n          handleChange={\n            forInput({ filters, onChange }, \"genres\", identity, identity)\n              .onChange\n          }\n          items={genres}\n          selectedItems={filters.genres}\n        />\n      </div>\n      <div className=\"form-group mx-sm-3\" style={{ width: \"220px\" }}>\n        <AsyncMultiDownshift\n          placeholder=\"Type\"\n          handleChange={\n            forInput({ filters, onChange }, \"types\", identity, identity)\n              .onChange\n          }\n          items={types}\n          selectedItems={filters.types}\n        />\n      </div>\n      <div className=\"form-group\">{renderSeen()}</div>\n      <div className=\"form-group mx-sm-3\">{renderNetflix()}</div>\n      <div className=\"form-group\">{renderFinished()}</div>\n    </form>\n  );\n};\n","import React from \"react\";\nimport Downshift from \"downshift\";\nimport { ArrowIcon, ControllerButton, css, Item, Menu } from \"../shared\";\n\nexport class SingleDownshift extends React.Component {\n  render() {\n    const { onChange, placeholder, items, selectedItem } = this.props;\n    return (\n      <Downshift onChange={onChange} selectedItem={selectedItem}>\n        {({\n          getInputProps,\n          getItemProps,\n          getLabelProps,\n          getMenuProps,\n          isOpen,\n          inputValue,\n          highlightedIndex,\n          selectedItem,\n          toggleMenu\n        }) => (\n          <div\n            style={{\n              margin: \"auto\",\n              position: \"relative\",\n              width: \"100%\"\n            }}\n          >\n            <div\n              {...css({\n                cursor: \"pointer\",\n                position: \"relative\",\n                padding: \".375rem .75rem\",\n                paddingRight: 50,\n                border: \"1px solid #ced4da\",\n                borderRadius: \".25rem\",\n                backgroundColor: \"white\"\n              })}\n              onClick={() => {\n                toggleMenu();\n              }}\n            >\n              <div\n                {...css({\n                  display: \"flex\",\n                  flexWrap: \"wrap\",\n                  alignItems: \"center\"\n                })}\n              >\n                {selectedItem ? (\n                  <div\n                    {...css({\n                      margin: \"0 2px\",\n                      paddingLeft: 8,\n                      paddingRight: 8,\n                      display: \"inline-block\",\n                      wordWrap: \"none\",\n                      backgroundColor: \"#ccc\",\n                      borderRadius: 2\n                    })}\n                  >\n                    <div\n                      {...css({\n                        display: \"grid\",\n                        gridGap: 6,\n                        gridAutoFlow: \"column\",\n                        alignItems: \"center\"\n                      })}\n                    >\n                      <span>{selectedItem}</span>\n                    </div>\n                  </div>\n                ) : (\n                  <span\n                    {...css({\n                      color: \"#6c757d;\"\n                    })}\n                  >\n                    {placeholder}\n                  </span>\n                )}\n              </div>\n              <ControllerButton>\n                <ArrowIcon isOpen={isOpen} />\n              </ControllerButton>\n            </div>\n            <Menu {...getMenuProps({ isOpen })}>\n              {isOpen\n                ? items.map((item, index) => (\n                    <Item\n                      key={index}\n                      {...getItemProps({\n                        item,\n                        index,\n                        isActive: highlightedIndex === index,\n                        isSelected: selectedItem === item\n                      })}\n                    >\n                      {item}\n                    </Item>\n                  ))\n                : null}\n            </Menu>\n          </div>\n        )}\n      </Downshift>\n    );\n  }\n}\n","import React, { Component, Fragment } from \"react\";\n\nexport class Accordion extends Component {\n  state = {\n    open: false,\n    toggle: this.toggle.bind(this)\n  };\n\n  toggle() {\n    this.setState({ open: !this.state.open });\n  }\n\n  render() {\n    return <Fragment>{this.props.children(this.state)}</Fragment>;\n  }\n}\n","import React, { Fragment } from \"react\";\nimport { SingleDownshift } from \"../Common/SingleDownshift\";\nimport { LOADING, withApplication } from \"../ApplicationContext\";\nimport isEmpty from \"lodash/isEmpty\";\nimport { AsyncMultiDownshift } from \"../Common/AsyncMultiDownshift\";\nimport { Accordion } from \"../Common/Accordion\";\nimport { withUser } from \"../Login/UserContext\";\n\nconst defaultState = {\n  movie: {\n    title: \"\",\n    genre: [],\n    type: \"\",\n    productionYear: \"\",\n    summary: \"\"\n  },\n  allocine: {\n    movies: [],\n    tvshows: []\n  }\n};\n\nconst headers = user => ({\n  Accept: \"application/json\",\n  \"Content-Type\": \"application/json\",\n  Authorization: `Bearer ${user.token}`\n});\n\nconst handleResponse = response => {\n  if (response.ok) return response.json();\n  throw new Error(\"Fetch fail\");\n};\n\nclass MovieFormWithContext extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      movie: props.movie ? props.movie : defaultState.movie,\n      allocine: defaultState.allocine\n    };\n  }\n\n  componentDidMount() {\n    // eslint-disable-next-line no-undef\n    $(\"#movie-creator-updator\").on(\"hide.bs.modal\", this.props.onClose);\n  }\n\n  valid = () => {\n    return (\n      !isEmpty(this.state.movie.title) &&\n      this.state.movie.genre.length > 0 &&\n      !isEmpty(this.state.movie.type)\n    );\n  };\n\n  add = () => {\n    fetch(\"/api/movies\", {\n      method: \"POST\",\n      body: JSON.stringify(this.state.movie),\n      headers: headers(this.props.user)\n    })\n      .then(handleResponse)\n      .then(data => {\n        this.props.onAdd({ ...this.state.movie, ...data });\n        // eslint-disable-next-line no-undef\n        $(\"#movie-creator-updator\").modal(\"hide\");\n      });\n  };\n\n  update = () => {\n    fetch(`/api/movies/${this.props.movie._id}`, {\n      method: \"PUT\",\n      body: JSON.stringify(this.state.movie),\n      headers: headers(this.props.user)\n    })\n      .then(handleResponse)\n      .then(data => {\n        this.props.onUpdate({ ...this.state.movie, ...data });\n        // eslint-disable-next-line no-undef\n        $(\"#movie-creator-updator\").modal(\"hide\");\n      });\n  };\n\n  search = () => {\n    Promise.all([\n      fetch(`/api/allocine?type=Film&title=${this.state.movie.title}`, {\n        headers: headers(this.props.user)\n      }).then(handleResponse),\n      fetch(`/api/allocine?type=Série&title=${this.state.movie.title}`, {\n        headers: headers(this.props.user)\n      }).then(handleResponse)\n    ]).then(([movies, tvshows]) =>\n      this.setState({ allocine: { movies, tvshows } })\n    );\n  };\n\n  synchronizeMovieAllocine = idAllocine => {\n    // if click on the currently selected movie, unselect it\n    if (idAllocine === this.state.movie.idAllocine) {\n      this.setState({\n        movie: {\n          ...this.state.movie,\n          idAllocine: null\n        }\n      });\n    } else {\n      fetch(`/api/allocine/movie/${idAllocine}`, {\n        headers: headers(this.props.user)\n      })\n        .then(handleResponse)\n        .then(({ movie }) =>\n          this.setState({\n            movie: {\n              ...this.state.movie,\n              idAllocine,\n              title: movie.title,\n              genre: movie.genre.map(m => m.$).sort(),\n              type: \"Film\",\n              productionYear:\n                movie.release && movie.release.releaseDate\n                  ? new Date(movie.release.releaseDate).getFullYear()\n                  : movie.productionYear,\n              summary: movie.synopsis,\n              fileUrl: movie.poster ? movie.poster.href : \"\"\n            }\n          })\n        );\n    }\n  };\n\n  synchronizeTvShowAllocine = idAllocine => {\n    // if click on the currently selected movie, unselect it\n    if (idAllocine === this.state.movie.idAllocine) {\n      this.setState({\n        movie: {\n          ...this.state.movie,\n          idAllocine: null\n        }\n      });\n    } else {\n      fetch(`/api/allocine/serie/${idAllocine}`, {\n        headers: headers(this.props.user)\n      })\n        .then(handleResponse)\n        .then(({ tvseries }) =>\n          this.setState({\n            movie: {\n              ...this.state.movie,\n              idAllocine,\n              title: tvseries.title,\n              genre: tvseries.genre.map(m => m.$).sort(),\n              type: \"Série\",\n              productionYear: tvseries.yearStart,\n              summary: tvseries.synopsis,\n              fileUrl: tvseries.poster ? tvseries.poster.href : \"\"\n            }\n          })\n        );\n    }\n  };\n\n  onInput = (field, transform = data => data) => {\n    return event =>\n      this.setState({\n        movie: { ...this.state.movie, [field]: transform(event.target.value) }\n      });\n  };\n\n  onSelect = field => {\n    return value =>\n      this.setState({ movie: { ...this.state.movie, [field]: value } });\n  };\n\n  render() {\n    const { movie } = this.state;\n    return (\n      <Fragment>\n        {this.props.application.status === LOADING ? (\n          <div>Loading...</div>\n        ) : (\n          <div\n            className=\"movie-modal modal fade movie-form\"\n            id=\"movie-creator-updator\"\n            tabIndex=\"-1\"\n            role=\"dialog\"\n            data-show=\"true\"\n          >\n            <div className=\"modal-dialog modal-dialog-centered\" role=\"document\">\n              <div className=\"modal-content\">\n                <div className=\"modal-header\">\n                  <h5 className=\"modal-title\">\n                    {(movie && movie.title) || \"New\"}\n                  </h5>\n                  <button\n                    type=\"button\"\n                    className=\"close\"\n                    data-dismiss=\"modal\"\n                    aria-label=\"Close\"\n                  >\n                    <span aria-hidden=\"true\">&times;</span>\n                  </button>\n                </div>\n                <div className=\"modal-body\">\n                  <div className=\"form-row\">\n                    <div className=\"form-group col-11\">\n                      <label htmlFor=\"title\">Title</label>\n                      <input\n                        type=\"text\"\n                        className=\"form-control\"\n                        id=\"title\"\n                        aria-describedby=\"title\"\n                        placeholder=\"Enter title\"\n                        onChange={this.onInput(\"title\")}\n                        value={this.state.movie.title}\n                      />\n                    </div>\n                    <div className=\"form-group col-1 text-center\">\n                      <i\n                        className=\"fab fa-angular fa-2x\"\n                        style={{\n                          cursor: \"pointer\",\n                          color: \"#fecc00\",\n                          paddingTop: \"35px\"\n                        }}\n                        onClick={this.search}\n                      />\n                    </div>\n                  </div>\n                  {this.state.allocine.movies.length > 0 ? (\n                    <Accordion>\n                      {({ open, toggle }) => {\n                        return (\n                          <Fragment>\n                            <div onClick={toggle} style={{ cursor: \"pointer\" }}>\n                              {this.state.allocine.movies.length} movies\n                              {open ? (\n                                <i className=\"fas fa-chevron-up\" />\n                              ) : (\n                                <i className=\"fas fa-chevron-down\" />\n                              )}\n                            </div>\n                            <div\n                              className=\"row\"\n                              style={{\n                                overflowX: \"scroll\",\n                                display: open ? \"flex\" : \"none\",\n                                flexWrap: \"nowrap\"\n                              }}\n                            >\n                              {this.state.allocine.movies.map(movie => (\n                                <div\n                                  key={movie.code}\n                                  className={`col-2 allocine-movie ${\n                                    movie.code === this.state.movie.idAllocine\n                                      ? \"selected\"\n                                      : \"\"\n                                  }`}\n                                  onClick={() =>\n                                    this.synchronizeMovieAllocine(movie.code)\n                                  }\n                                >\n                                  {movie.code ===\n                                  this.state.movie.idAllocine ? (\n                                    <i className=\"fas fa-check-circle selected-movie-icon fa-2x\" />\n                                  ) : null}\n                                  <div>\n                                    {movie.title} -{\" \"}\n                                    {movie.release && movie.release.releaseDate\n                                      ? new Date(\n                                          movie.release.releaseDate\n                                        ).getFullYear()\n                                      : movie.productionYear}\n                                  </div>\n                                  <div>\n                                    {movie.poster ? (\n                                      <img\n                                        src={movie.poster.href}\n                                        alt=\"movie poster\"\n                                        style={{ width: \"100%\" }}\n                                      />\n                                    ) : null}\n                                  </div>\n                                </div>\n                              ))}\n                            </div>\n                          </Fragment>\n                        );\n                      }}\n                    </Accordion>\n                  ) : null}\n                  {this.state.allocine.tvshows.length > 0 ? (\n                    <Accordion>\n                      {({ open, toggle }) => {\n                        return (\n                          <Fragment>\n                            <div onClick={toggle} style={{ cursor: \"pointer\" }}>\n                              {this.state.allocine.tvshows.length} tv shows\n                              {open ? (\n                                <i className=\"fas fa-chevron-up\" />\n                              ) : (\n                                <i className=\"fas fa-chevron-down\" />\n                              )}\n                            </div>\n                            <div\n                              className=\"row\"\n                              style={{\n                                overflowX: \"scroll\",\n                                display: open ? \"flex\" : \"none\",\n                                flexWrap: \"nowrap\"\n                              }}\n                            >\n                              {this.state.allocine.tvshows.map(tvshow => (\n                                <div\n                                  key={tvshow.code}\n                                  className={`col-2 allocine-movie ${\n                                    tvshow.code === this.state.movie.idAllocine\n                                      ? \"selected\"\n                                      : \"\"\n                                  }`}\n                                  onClick={() =>\n                                    this.synchronizeTvShowAllocine(tvshow.code)\n                                  }\n                                >\n                                  {tvshow.code ===\n                                  this.state.movie.idAllocine ? (\n                                    <i className=\"fas fa-check-circle selected-movie-icon fa-2x\" />\n                                  ) : null}\n                                  <div>\n                                    {tvshow.title} - {tvshow.yearStart}\n                                  </div>\n                                  <div>\n                                    {tvshow.poster ? (\n                                      <img\n                                        src={tvshow.poster.href}\n                                        alt=\"tvshow poster\"\n                                        style={{ width: \"100%\" }}\n                                      />\n                                    ) : null}\n                                  </div>\n                                </div>\n                              ))}\n                            </div>\n                          </Fragment>\n                        );\n                      }}\n                    </Accordion>\n                  ) : null}\n                  <div className=\"form-group\">\n                    <label>Genre</label>\n                    <AsyncMultiDownshift\n                      selectedItems={this.state.movie.genre}\n                      placeholder=\"Genre\"\n                      items={this.props.application.genres}\n                      handleChange={this.onSelect(\"genre\")}\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label>Type</label>\n                    <SingleDownshift\n                      selectedItem={this.state.movie.type}\n                      placeholder=\"Type\"\n                      items={this.props.application.types}\n                      onChange={this.onSelect(\"type\")}\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label htmlFor=\"production-year\">Production Year</label>\n                    <input\n                      type=\"number\"\n                      className=\"form-control\"\n                      id=\"production-year\"\n                      aria-describedby=\"production year\"\n                      placeholder=\"Enter production year\"\n                      onChange={this.onInput(\"productionYear\", data =>\n                        parseInt(data, 10)\n                      )}\n                      value={this.state.movie.productionYear}\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label htmlFor=\"summary\">Summary</label>\n                    <textarea\n                      className=\"form-control\"\n                      id=\"summary\"\n                      aria-describedby=\"summary\"\n                      placeholder=\"Enter summary\"\n                      onChange={this.onInput(\"summary\")}\n                      value={this.state.movie.summary}\n                    />\n                  </div>\n                </div>\n                <div className=\"modal-footer\">\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-secondary\"\n                    data-dismiss=\"modal\"\n                  >\n                    Close\n                  </button>\n                  <button\n                    type=\"button\"\n                    disabled={!this.valid()}\n                    className=\"btn btn-primary\"\n                    onClick={this.state.movie._id ? this.update : this.add}\n                  >\n                    {movie._id ? \"Update\" : \"Save\"}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nexport const MovieForm = withApplication(withUser(MovieFormWithContext));\n","import React, { Fragment, useContext, useEffect, useState } from \"react\";\nimport { MovieCard } from \"./MovieCard\";\nimport isArray from \"lodash/isArray\";\nimport { ApplicationContext, LOADING } from \"../ApplicationContext\";\nimport { MoviesContext } from \"./MoviesContext\";\nimport { MoviesFilter } from \"./MoviesFilter\";\nimport { getMovies } from \"./MovieAPI\";\nimport { UserContext } from \"../Login/UserContext\";\nimport debounce from \"lodash/debounce\";\nimport { MovieForm } from \"./MovieForm\";\n\nconst newMovie = () => ({});\n\nconst buildQuery = (filters, offset) => {\n  // can use lodash/partition to one line\n  const genres = filters.genres\n    .filter(genre => genre[1])\n    .map(genre => genre[0]);\n  const notGenres = filters.genres\n    .filter(genre => !genre[1])\n    .map(genre => genre[0]);\n  return Object.keys(filters)\n    .filter(key => key !== \"genres\") // handle genres manually)\n    .filter(\n      key =>\n        (!isArray(filters[key]) &&\n          filters[key] !== null &&\n          filters[key] !== \"\") ||\n        (isArray(filters[key]) && filters[key].length > 0)\n    )\n    .map(key => `${key}=${filters[key]}`)\n    .concat(\n      genres.length > 0 ? `genres=${genres.join(\",\")}` : \"\",\n      notGenres.length > 0 ? `notGenres=${notGenres.join(\",\")}` : \"\",\n      `offset=${offset}`\n    )\n    .filter(Boolean) // remove empty strings\n    .join(\"&\");\n};\n\nexport const List = () => {\n  // load contexts\n  const { status } = useContext(ApplicationContext);\n  const { movies, count, addAll, filters, add, update } = useContext(\n    MoviesContext\n  );\n  const user = useContext(UserContext);\n\n  // create state\n  const [offset, setOffset] = useState(movies.length / filters.limit);\n  const [movie, setMovie] = useState(newMovie());\n  const [key, setKey] = useState(0);\n\n  //create actions\n  const loadMore = offset => {\n    getMovies(buildQuery(filters, offset), user)\n      .then(addAll)\n      .then(() => setOffset(offset + 1)); // useInc\n  };\n  const showMovie = () => {\n    // ignore first trigger, needed for backward navigation\n    if (key > 0) {\n      // eslint-disable-next-line no-undef\n      $(\"#movie-creator-updator\").modal(\"show\");\n    }\n  };\n\n  // create effects\n  useEffect(\n    () => {\n      // useDebounce :)\n      const debouncedLoadMore = debounce(loadMore, 400, {\n        leading: false,\n        trailing: true\n      });\n      // no movies ? then automatically fetch some (note: every time a filter is updated, movies are cleaned up)\n      if (movies.length === 0) {\n        debouncedLoadMore(0);\n      }\n      return () => debouncedLoadMore.cancel();\n    },\n    [filters]\n  );\n  useEffect(showMovie, [movie]);\n\n  // render\n  return (\n    <div>\n      {status === LOADING ? (\n        <div>Loading ....</div>\n      ) : (\n        <Fragment>\n          <MovieForm\n            // force reinitialisation of movie form\n            key={movie._id || key}\n            movie={movie._id ? movie : null}\n            onAdd={movie => add(movie)}\n            onUpdate={movie => update(movie._id, movie)}\n          />\n          <i\n            onClick={() => {\n              setMovie(newMovie());\n              setKey(key + 1);\n            }}\n            className=\"fas fa-plus-circle fa-3x\"\n            style={{\n              top: \"22px\",\n              left: \"22px\",\n              position: \"absolute\",\n              color: \"#F1F7EE\",\n              cursor: \"pointer\"\n            }}\n            title=\"Add a movie or a tv show\"\n          />\n          <MoviesFilter />\n          <h2 className=\"text-center\">\n            {movies.length} of {count} found movies/tvshows\n          </h2>\n          <div className=\"movies\">\n            {movies.map(movie => (\n              <MovieCard\n                key={movie._id}\n                movie={movie}\n                onChange={movie => update(movie._id, movie)}\n                onDelete={_ => update(movie._id, undefined)}\n                onEdit={() => {\n                  setMovie({\n                    ...movie // create a new movie to force the show effect to be displayed\n                  });\n                  setKey(key + 1); // mandatory otherwise first edit fail\n                }}\n              />\n            ))}\n          </div>\n          <div className=\"text-center m-3\">\n            <button\n              onClick={() => loadMore(offset)}\n              className=\"btn btn-primary btn-lg\"\n            >\n              Load more\n            </button>\n          </div>\n        </Fragment>\n      )}\n    </div>\n  );\n};\n","import React, { Fragment, useState } from \"react\";\nimport identity from \"lodash/identity\";\n\nconst EditableField = props => {\n  const [value, setValue] = useState(props.value || \"\");\n  const [edit, setEdit] = useState(!props.value);\n  const transform = props.transform || identity;\n  const lock = props.lock || false;\n  return (\n    <Fragment>\n      {!lock && edit ? (\n        <Fragment>\n          {props.renderFormField({\n            ...props,\n            value,\n            onChange: event => setValue(transform(event.target.value))\n          })}\n          <button\n            className=\"btn btn-primary\"\n            onClick={event => {\n              event.preventDefault();\n              event.stopPropagation();\n              props.onChange(value);\n              setEdit(false);\n            }}\n          >\n            OK\n          </button>\n          {value ? (\n            <button\n              className=\"btn btn-danger\"\n              onClick={event => {\n                event.preventDefault();\n                event.stopPropagation();\n                setEdit(false);\n              }}\n            >\n              Cancel\n            </button>\n          ) : (\n            undefined\n          )}\n        </Fragment>\n      ) : (\n        <Fragment>\n          {props.renderValue({\n            className: props.className,\n            value,\n            onClick: event => {\n              if (!lock) {\n                event.preventDefault();\n                event.stopPropagation();\n                setEdit(true);\n              }\n            }\n          })}\n        </Fragment>\n      )}\n    </Fragment>\n  );\n};\n\nexport const EditableInput = props => (\n  <EditableField\n    {...props}\n    renderFormField={fieldProps => (\n      <input\n        placeholder={fieldProps.placeholder}\n        type=\"text\"\n        value={fieldProps.value}\n        onChange={fieldProps.onChange}\n        onClick={event => {\n          event.preventDefault();\n          event.stopPropagation();\n        }}\n      />\n    )}\n    renderValue={valueProps => (\n      <span onClick={valueProps.onClick} className={valueProps.className}>\n        {valueProps.value}\n      </span>\n    )}\n  />\n);\n\nexport const EditableTextarea = props => (\n  <EditableField\n    {...props}\n    renderFormField={fieldProps => (\n      <textarea\n        placeholder={fieldProps.placeholder}\n        style={fieldProps.style}\n        value={fieldProps.value}\n        rows={fieldProps.rows || 2}\n        onChange={fieldProps.onChange}\n        onClick={event => {\n          event.preventDefault();\n          event.stopPropagation();\n        }}\n      />\n    )}\n    renderValue={valueProps => (\n      <span onClick={valueProps.onClick} className={valueProps.className}>\n        {valueProps.value.split(\"\\n\").map((item, key) => (\n          <Fragment key={key}>\n            {item}\n            <br />\n          </Fragment>\n        ))}\n      </span>\n    )}\n  />\n);\n","import { EditableInput, EditableTextarea } from \"../../Common/EditableField\";\nimport React, { useContext, useState } from \"react\";\nimport { UserContext } from \"../../Login/UserContext\";\nimport { produce } from \"immer\";\nimport * as MovieAPI from \"../MovieAPI\";\nimport { MovieContext } from \"../Movie\";\nimport { SeasonContext } from \"./Season\";\n\nexport const Episode = ({ episode, index, onEpisodeChanged }) => {\n  // get contexts\n  const user = useContext(UserContext);\n  const { movie, lock } = useContext(MovieContext);\n  const { index: seasonIndex } = useContext(SeasonContext);\n  const [ellipsis, setEllipsis] = useState(\"ellipsis\");\n\n  // actions\n  const updateSeason = transform => {\n    const newMovie = produce(movie, transform);\n    const season = newMovie.seasons[seasonIndex];\n    // onEpisodeChanged(newMovie);\n    MovieAPI.updateSeason(newMovie, season, user).then(onEpisodeChanged);\n  };\n  const updateEpisode = transform => {\n    const newMovie = produce(movie, transform);\n    const season = newMovie.seasons[seasonIndex];\n    const episode = season.episodes[index];\n    MovieAPI.updateEpisode(newMovie, season, episode, user).then(\n      onEpisodeChanged\n    );\n  };\n\n  return (\n    <div className=\"row episode mr-0 ml-0\">\n      <div className=\" col-md-12 col-xl-2 align-items-center d-flex p-0\">\n        <div\n          className=\"text-center col-1\"\n          style={{\n            color: episode.seen ? \"var(--success)\" : \"\",\n            fontWeight: episode.seen ? \"bold\" : \"\",\n            cursor: \"pointer\"\n          }}\n          onClick={() =>\n            updateSeason(movie => {\n              if (!movie.seasons[seasonIndex].episodes[index].seen) {\n                for (let i = 0; i <= index; i++) {\n                  movie.seasons[seasonIndex].episodes[i].seen = true;\n                }\n              } else {\n                // eslint-disable-next-line prettier/prettier\n                for (let i = index; i < movie.seasons[seasonIndex].episodes.length; i++) {\n                  movie.seasons[seasonIndex].episodes[i].seen = false;\n                }\n              }\n            })\n          }\n        >\n          {index + 1}\n        </div>\n        <div className=\"text-center col-11\">\n          <EditableInput\n            lock={lock}\n            className={`font-weight-bold episode-title ${\n              episode.seen ? \"seen\" : \"\"\n            }`}\n            value={episode.title}\n            placeholder=\"Title\"\n            onChange={title =>\n              updateEpisode(movie => {\n                movie.seasons[seasonIndex].episodes[index].title = title;\n              })\n            }\n          />\n        </div>\n      </div>\n      <div className=\"col-md-12 col-xl-10 align-items-center d-flex\">\n        <EditableTextarea\n          lock={lock}\n          style={{ width: \"100%\" }}\n          rows={4}\n          value={episode.summary}\n          placeholder=\"Summary\"\n          className={`${ellipsis} d-block episode-summary w-100 text-left`}\n          onChange={summary =>\n            updateEpisode(movie => {\n              movie.seasons[seasonIndex].episodes[index].summary = summary;\n            })\n          }\n        />\n        {ellipsis && (\n          <span style={{ cursor: \"pointer\" }} onClick={() => setEllipsis(\"\")}>\n            <i className=\"fas fa-question-circle\" />\n          </span>\n        )}\n      </div>\n    </div>\n  );\n};\n","import { useState } from \"react\";\n\nexport const useToggle = (initialValue = false) => {\n  const [value, setValue] = useState(initialValue);\n  const toggle = () => setValue(!value);\n  return [value, toggle];\n};\n","import { useContext, Fragment } from \"react\";\nimport { EditableInput } from \"../../Common/EditableField\";\nimport * as MovieAPI from \"../MovieAPI\";\nimport React from \"react\";\nimport { produce } from \"immer\";\nimport { UserContext } from \"../../Login/UserContext\";\nimport \"./Season.css\";\nimport { MovieSeen } from \"../MovieSeen\";\nimport { Episode } from \"./Episode\";\nimport every from \"lodash/every\";\nimport { useToggle } from \"../../Common/hooks\";\nimport { MovieContext } from \"../Movie\";\n\nexport const SeasonContext = React.createContext({});\n\nexport const Season = ({ season, index, onMovieChanged }) => {\n  // get contexts\n  const user = useContext(UserContext);\n  const { movie, lock } = useContext(MovieContext);\n  const [open, toggle] = useToggle();\n\n  // actions\n  const updateSeason = transform => {\n    const newMovie = produce(movie, transform);\n    const season = newMovie.seasons[index];\n    MovieAPI.updateSeason(newMovie, season, user).then(onMovieChanged);\n  };\n\n  const seen = every(season.episodes, \"seen\") && season.episodes.length > 0;\n\n  return (\n    <div className=\"season\">\n      <div className=\"season-header\" onClick={toggle}>\n        <div>\n          <div\n            className=\"season-header-view\"\n            onClick={event => {\n              event.preventDefault();\n              event.stopPropagation();\n              updateSeason(movie => {\n                movie.seasons[index].seen = !seen;\n              });\n            }}\n          >\n            <MovieSeen seen={seen} />\n          </div>\n          Season {index + 1}\n          &nbsp;-&nbsp;\n          <EditableInput\n            lock={lock}\n            placeholder=\"YYYY\"\n            value={season.productionYear}\n            transform={value => parseInt(value, 10)}\n            onChange={productionYear =>\n              updateSeason(movie => {\n                movie.seasons[index].productionYear = productionYear;\n              })\n            }\n          />\n        </div>\n        <div className=\"season-header-arrow\">\n          {open ? (\n            <i className=\"fas fa-chevron-up\" />\n          ) : (\n            <i className=\"fas fa-chevron-down\" />\n          )}\n        </div>\n      </div>\n      <div className=\"episodes\">\n        <SeasonContext.Provider value={{ season, index }}>\n          {open &&\n            season.episodes.map((episode, episodeIndex) => (\n              <Episode\n                key={episode._id}\n                episode={episode}\n                index={episodeIndex}\n                onEpisodeChanged={onMovieChanged}\n              />\n            ))}\n        </SeasonContext.Provider>\n      </div>\n\n      {!lock ? (\n        <Fragment>\n          {open && (\n            <button\n              className=\"btn btn-primary\"\n              onClick={() =>\n                MovieAPI.addEpisode(movie, season, user).then(onMovieChanged)\n              }\n            >\n              <i className=\"fas fa-plus\" />\n              &nbsp;Add episode\n            </button>\n          )}\n        </Fragment>\n      ) : (\n        undefined\n      )}\n    </div>\n  );\n};\n","import React, { Fragment, useContext, useEffect, useState } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport * as MovieAPI from \"./MovieAPI\";\nimport { UserContext } from \"../Login/UserContext\";\nimport { MovieSeen } from \"./MovieSeen\";\nimport { MoviesContext } from \"./MoviesContext\";\nimport { produce } from \"immer\";\nimport { Season } from \"./Season/Season\";\nimport { EditableTextarea } from \"../Common/EditableField\";\nimport { useToggle } from \"../Common/hooks\";\n\nexport const MovieContext = React.createContext({});\n\nexport const Movie = withRouter(({ match, history }) => {\n  // get contexts\n  const user = useContext(UserContext);\n  const movies = useContext(MoviesContext);\n  // create state\n  const [movie, setMovie] = useState();\n  const [lock, toggle] = useToggle(true);\n\n  // create effects\n  useEffect(() => MovieAPI.getMovie(match.params.id, user).then(setMovie), [\n    match.params.id\n  ]);\n\n  // create actions\n  const updateMovie = transform => () => {\n    MovieAPI.updateMovie(produce(movie, transform), user).then(mergeContext);\n  };\n\n  // helper\n  const mergeContext = updatedMovie => {\n    setMovie(updatedMovie);\n    movies.update(updatedMovie._id, updatedMovie);\n  };\n\n  return (\n    <div className=\"container movie-container\">\n      {!movie ? (\n        <span>Loading ....</span>\n      ) : (\n        <Fragment>\n          <i\n            onClick={() => history.goBack()}\n            className=\"fas fa-arrow-circle-left fa-3x\"\n            style={{\n              top: \"22px\",\n              left: \"22px\",\n              position: \"absolute\",\n              color: \"#F1F7EE\",\n              cursor: \"pointer\"\n            }}\n            title=\"Return to the list of movies\"\n          />\n          <div\n            className=\"p-5 mt-3 single-movie-card\"\n            style={{ position: \"relative\" }}\n          >\n            <i\n              onClick={toggle}\n              className={`fas ${lock ? \"fa-lock\" : \"fa-lock-open\"} fa-2x`}\n              style={{\n                color: \"var(--movie-secondary)\",\n                position: \"absolute\",\n                top: \"5px\",\n                right: \"5px\",\n                cursor: \"pointer\"\n              }}\n              title={`Click to ${\n                lock ? \"open\" : \"close\"\n              } movie for modifications`}\n            />\n            <div className=\"d-flex justify-content-center\">\n              <div>\n                <img\n                  src={movie.fileUrl}\n                  style={{ maxHeight: \"300px\" }}\n                  alt=\"movie poster\"\n                />\n              </div>\n              <div className=\"pl-2 d-flex flex-column\" style={{ flexGrow: 1 }}>\n                <h1 className=\"text-center\">\n                  {movie.title} - {movie.productionYear}\n                </h1>\n                <h6 className=\"text-center single-movie-subtitle\">\n                  {movie.genre.join(\",\")}\n                </h6>\n                <div>\n                  <EditableTextarea\n                    lock={lock}\n                    value={movie.summary}\n                    style={{ width: \"100%\" }}\n                    placeholder=\"Summary\"\n                    rows=\"7\"\n                    onChange={summary =>\n                      updateMovie(movie => {\n                        movie.summary = summary;\n                      })()\n                    }\n                  />\n                </div>\n              </div>\n            </div>\n            <div>\n              {movie.type === \"Film\" ? (\n                <MovieSeen\n                  seen={movie.seen}\n                  onClick={updateMovie(movie => {\n                    movie.seen = !movie.seen;\n                  })}\n                />\n              ) : (\n                undefined\n              )}\n            </div>\n            <div className=\"text-center\">\n              {movie.type !== \"Film\" ? (\n                <Fragment>\n                  <MovieContext.Provider value={{ lock, movie }}>\n                    <div>\n                      {movie.seasons.map((season, seasonIndex) => (\n                        <Season\n                          key={seasonIndex}\n                          season={season}\n                          index={seasonIndex}\n                          onMovieChanged={mergeContext}\n                        />\n                      ))}\n                    </div>\n                  </MovieContext.Provider>\n                  {!lock ? (\n                    <button\n                      className=\"btn btn-primary\"\n                      onClick={() =>\n                        MovieAPI.addSeason(movie, user).then(mergeContext)\n                      }\n                    >\n                      <i className=\"fas fa-plus\" />\n                      &nbsp;Add season\n                    </button>\n                  ) : (\n                    undefined\n                  )}\n                </Fragment>\n              ) : (\n                undefined\n              )}\n            </div>\n          </div>\n        </Fragment>\n      )}\n    </div>\n  );\n});\n","import React, { Component, Fragment } from \"react\";\nimport debounce from \"lodash/debounce\";\nimport { withUser } from \"../Login/UserContext\";\n\nexport const LOADING = Symbol(\"LOADING\");\nexport const LOADED = Symbol(\"LOADED\");\n\nconst headers = user => ({\n  Accept: \"application/json\",\n  \"Content-Type\": \"application/json\",\n  Authorization: `Bearer ${user.token}`\n});\nconst handleResponse = response => {\n  if (response.ok) return response.json();\n  throw new Error(\"Fetch fail\");\n};\n\nclass FetchWithContext extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      status: LOADING,\n      data: undefined\n    };\n\n    // TODO probably not the best place to debounce\n    this.debounceFetch = debounce(this.fetch, this.props.debounce || 0, {\n      leading: false,\n      trailing: true\n    });\n  }\n\n  componentWillUnmount() {\n    this.debounceFetch.cancel();\n  }\n\n  fetch() {\n    return fetch(`${this.props.endpoint}`, {\n      headers: headers(this.props.user)\n    })\n      .then(handleResponse)\n      .then(data => {\n        this.setState({\n          status: LOADED,\n          data\n        });\n        this.props.onSuccess && this.props.onSuccess(data);\n      });\n  }\n\n  componentDidMount() {\n    this.debounceFetch();\n  }\n\n  render() {\n    return (\n      <Fragment>\n        {this.props.children({\n          status: this.state.status,\n          data: this.state.data\n        })}\n      </Fragment>\n    );\n  }\n}\n\n/**\n * - create a context that holds movies\n * - dont load if there is already sth in the context\n * - pass initial data to prevent fetch the api (if data, dont fetch on cDM)\n */\n\nexport const Fetch = withUser(FetchWithContext);\n","import { Fetch } from \"./Common/Fetch\";\nimport React from \"react\";\nimport { withRouter } from \"react-router-dom\";\n\nexport const Header = withRouter(({ history }) => {\n  return (\n    <div\n      className=\"text-center\"\n      style={{\n        backgroundColor: \"var(--movie-secondary)\",\n        color: \"var(--movie-primary)\",\n        padding: \"4px\"\n      }}\n    >\n      <h1\n        onClick={() => history.push(\"/\")}\n        style={{\n          cursor: \"pointer\"\n        }}\n      >\n        Cinematheque\n      </h1>\n      <Fetch endpoint=\"/api/movies?limit=0\">\n        {({ data }) =>\n          data ? <h6>{data.count} movies/tvshows</h6> : undefined\n        }\n      </Fetch>\n      <i\n        onClick={() => history.push(\"/stats\")}\n        className=\"fas fa-chart-bar fa-3x\"\n        style={{\n          top: \"22px\",\n          right: \"22px\",\n          position: \"absolute\",\n          color: \"#F1F7EE\",\n          cursor: \"pointer\"\n        }}\n        title=\"Show statistics\"\n      />\n    </div>\n  );\n});\n","import React, { Fragment, useContext, useEffect, useState } from \"react\";\nimport { ApplicationContext } from \"../ApplicationContext\";\nimport * as MovieAPI from \"../Movie/MovieAPI\";\nimport \"./Statistics.css\";\nimport { produce } from \"immer\";\nimport { UserContext } from \"../Login/UserContext\";\nimport orderBy from \"lodash/orderBy\";\n\nconst initialState = (types, genres) => {\n  return types.map(type => ({\n    name: type,\n    count: 0,\n    genres: genres.map(genre => ({\n      name: genre,\n      count: 0,\n      seen: 0,\n      unseen: 0\n    }))\n  }));\n};\n\nexport const Statistics = () => {\n  // get contexts\n  const user = useContext(UserContext);\n  const { genres, types } = useContext(ApplicationContext);\n  const [stats, setStats] = useState(initialState(types, genres));\n\n  // actions\n  const fetchByTypes = (types, genres) => {\n    types.forEach(type =>\n      MovieAPI.getMovies(`types=${type}&limit=0`, user)\n        .then(data =>\n          setStats(\n            produce(\n              draft =>\n                void (draft.find(t => type === t.name).count = data.count)\n            )\n          )\n        )\n        .then(() =>\n          genres.forEach(genre => {\n            MovieAPI.getMovies(\n              `types=${type}&genres=${genre}&limit=0`,\n              user\n            ).then(data =>\n              setStats(\n                produce(\n                  draft =>\n                    void (draft\n                      .find(t => type === t.name)\n                      .genres.find(g => genre === g.name).count = data.count)\n                )\n              )\n            );\n            MovieAPI.getMovies(\n              `types=${type}&genres=${genre}&seen=true&limit=0`,\n              user\n            ).then(data =>\n              setStats(\n                produce(\n                  draft =>\n                    void (draft\n                      .find(t => type === t.name)\n                      .genres.find(g => genre === g.name).seen = data.count)\n                )\n              )\n            );\n            MovieAPI.getMovies(\n              `types=${type}&genres=${genre}&seen=false&limit=0`,\n              user\n            ).then(data =>\n              setStats(\n                produce(\n                  draft =>\n                    void (draft\n                      .find(t => type === t.name)\n                      .genres.find(g => genre === g.name).unseen = data.count)\n                )\n              )\n            );\n          })\n        )\n    );\n  };\n\n  // effects\n  useEffect(\n    () => {\n      setStats(initialState(types, genres));\n      fetchByTypes(types, genres);\n    },\n    [types, genres]\n  );\n\n  return (\n    <div>\n      <div className=\"d-flex justify-content-around\">\n        {stats.map((type, index) => (\n          <div style={{ width: \"500px\" }} key={index}>\n            <div className=\"card stat-card\">\n              <div className=\"card-body\">\n                <h5 className=\"card-title\">\n                  {type.count} {type.name}\n                </h5>\n                <div>\n                  {orderBy(type.genres, [\"count\"], [\"desc\"]).map(\n                    (genre, index) => (\n                      <Fragment>\n                        <div>\n                          {\" \"}\n                          {genre.count} {genre.name} ({\" \"}\n                          {genre.count\n                            ? ((genre.seen * 100) / genre.count).toFixed(2)\n                            : 0}\n                          % seen){\" \"}\n                        </div>\n                        <div className=\"movie-progress\" key={index}>\n                          <div\n                            className=\"progress-bar unseen\"\n                            role=\"progressbar\"\n                            style={{\n                              width: `calc(20px + ${(genre.unseen * 100) /\n                                orderBy(type.genres, [\"count\"], [\"desc\"])[0]\n                                  .count}%)`\n                            }}\n                          >\n                            {genre.unseen}\n                          </div>\n                          {genre.count - genre.unseen - genre.seen ? (\n                            <div\n                              className=\"progress-bar pending\"\n                              role=\"progressbar\"\n                              style={{\n                                width: `calc(20px + ${((genre.count -\n                                  genre.unseen -\n                                  genre.seen) *\n                                  100) /\n                                  orderBy(type.genres, [\"count\"], [\"desc\"])[0]\n                                    .count}%)`\n                              }}\n                            >\n                              {genre.count - genre.unseen - genre.seen}\n                            </div>\n                          ) : (\n                            undefined\n                          )}\n                          <div\n                            className=\"progress-bar seen\"\n                            role=\"progressbar\"\n                            style={{\n                              width: `calc(20px + ${(genre.seen * 100) /\n                                orderBy(type.genres, [\"count\"], [\"desc\"])[0]\n                                  .count}%)`\n                            }}\n                          >\n                            {genre.seen}\n                          </div>\n                        </div>\n                      </Fragment>\n                    )\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n","import React, { Component, Fragment } from \"react\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport \"./App.css\";\nimport { List } from \"./Movie/List\";\nimport { Movie } from \"./Movie/Movie\";\nimport { Header } from \"./Header\";\nimport { Statistics } from \"./Statistics/Statistics\";\n\nclass App extends Component {\n  render() {\n    return (\n      <Fragment>\n        <Router>\n          <Fragment>\n            <Header />\n            <Route exact path=\"/\" component={List} />\n            <Route exact path=\"/movie/:id\" component={Movie} />\n            <Route exact path=\"/stats\" component={Statistics} />\n          </Fragment>\n        </Router>\n      </Fragment>\n    );\n  }\n}\n\nexport default App;\n","import React, { Component } from \"react\";\nimport { LOGIN_FAILED, withUser } from \"./UserContext\";\n\nclass LoginWithContext extends Component {\n  state = {\n    password: \"\"\n  };\n\n  render() {\n    return (\n      <div>\n        {this.props.user.status === LOGIN_FAILED ? (\n          <div className=\"alert alert-danger\" role=\"alert\">\n            Login failed\n          </div>\n        ) : (\n          undefined\n        )}\n        <div className=\"form-group\">\n          <label htmlFor=\"password\">Password</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            id=\"password\"\n            aria-describedby=\"password\"\n            placeholder=\"Enter password\"\n            value={this.state.password}\n            onChange={event => this.setState({ password: event.target.value })}\n            onKeyDown={event => {\n              if (event.key === \"Enter\")\n                this.props.user.login(this.state.password);\n            }}\n          />\n        </div>\n        <button\n          type=\"button\"\n          className=\"btn btn-primary\"\n          onClick={() => this.props.user.login(this.state.password)}\n        >\n          Submit\n        </button>\n      </div>\n    );\n  }\n}\n\nexport const Login = withUser(LoginWithContext);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { ApplicationProvider } from \"./ApplicationContext\";\nimport { UserProvider, UserContext } from \"./Login/UserContext\";\nimport { Login } from \"./Login/Login\";\nimport { MoviesProvider } from \"./Movie/MoviesContext\";\n\nReactDOM.render(\n  <UserProvider>\n    <UserContext.Consumer>\n      {({ token }) =>\n        token ? (\n          <ApplicationProvider token={token}>\n            <MoviesProvider>\n              <App />\n            </MoviesProvider>\n          </ApplicationProvider>\n        ) : (\n          <Login />\n        )\n      }\n    </UserContext.Consumer>\n  </UserProvider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}