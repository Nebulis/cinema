(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{176:function(e,t,n){},187:function(e,t,n){},188:function(e,t,n){},189:function(e,t,n){},191:function(e,t,n){},193:function(e,t,n){},199:function(e,t,n){},200:function(e,t,n){},201:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),c=n(85),i=n.n(c),s=(n(94),n(5)),l=n(6),u=n(9),m=n(7),d=n(8),p=n(204),f=n(203),h=(n(95),n(3)),v=n(2),b=n(16),g=(n(96),n(202)),y=function(e){var t=e.seen,n=e.onClick,a=e.partial,r=void 0!==a&&a;return o.a.createElement("i",{className:"fas fa-eye",style:{color:r&&!t?"var(--warning)":t?"var(--success)":"",cursor:"pointer"},onClick:n,title:t?"Mark as not seen":"Mark as seen"})},E=function(e){return{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e.token)}},O=function(e){if(e.ok)return e.json();throw new Error("Fetch fail")},j=function(e){return function(t,n){return e&&a&&a.abort(),a=new AbortController,fetch("/api/movies?".concat(t),{headers:E(n),signal:a.signal}).then(O).then(function(e){return a=null,e})}},k=function(e,t){return fetch("/api/movies/".concat(e._id),{method:"PUT",body:JSON.stringify(e),headers:E(t)}).then(O)},x=function(e,t){return fetch("/api/movies/".concat(e._id,"/seasons"),{method:"POST",body:JSON.stringify(e),headers:E(t)}).then(O)},C=function(e,t,n){return fetch("/api/movies/".concat(e._id,"/seasons/").concat(t._id),{method:"PUT",body:JSON.stringify(t),headers:E(n)}).then(O)},N=function(e,t,n){return fetch("/api/movies/".concat(e._id,"/seasons/").concat(t._id,"/episodes"),{method:"POST",body:JSON.stringify(t),headers:E(n)}).then(O)},w=function(e,t,n,a){return fetch("/api/movies/".concat(e._id,"/seasons/").concat(t._id,"/episodes/").concat(n._id),{method:"PUT",body:JSON.stringify(n),headers:E(a)}).then(O)},S=n(34),D=n.n(S),I=n(35),A=n.n(I),_=n(23),T=o.a.createContext(),F=function(e){return function(t){return o.a.createElement(T.Consumer,null,function(n){return o.a.createElement(e,Object.assign({},t,{user:n}))})}},P=Symbol(),R=Symbol(),Y=Symbol(),L=function(e){if(e.ok)return e.json();throw new Error("Fetch fail")},U=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={token:null,status:P,login:n.login.bind(Object(_.a)(Object(_.a)(n)))},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");t&&fetch("/account",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then(L).then(function(n){var a=n.exp;new Date<new Date(1e3*a)&&e.setState({token:t,status:R})})}},{key:"login",value:function(e){var t=this;fetch("/login",{method:"POST",body:JSON.stringify({password:e}),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(L).then(function(e){var n=e.token;t.setState({token:n,status:R}),localStorage.setItem("token",n)}).catch(function(){return t.setState({status:Y})})}},{key:"render",value:function(){return o.a.createElement(T.Provider,{value:this.state},this.props.children)}}]),t}(o.a.Component),M=function(e){return{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e.token)}},B=function(e){if(e.ok)return e.json();throw new Error("Fetch fail")},H=o.a.createContext(),z=Symbol(),W=Symbol(),J=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).set=function(e){return function(t){n.setState(function(n){return Object(h.a)({},n,Object(b.a)({},e,t(n[e])))})}},n.state={genres:[],types:[],tags:[],years:[],status:z,set:n.set},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e,t=this,n={headers:{Authorization:"Bearer ".concat(this.props.token)}},a=function(e){if(e.ok)return e.json();throw new Error("Fetch fail")};Promise.all([fetch("/api/movies/genre",n).then(a),fetch("/api/movies/type",n).then(a),(e=this.props,fetch("/api/tags",{headers:M(e)}).then(B)),fetch("/api/movies/years",n).then(a)]).then(function(e){var n=Object(v.a)(e,4),a=n[0],r=n[1],o=n[2],c=n[3];t.setState({genres:a,types:r,tags:o,years:c,status:W})})}},{key:"render",value:function(){return o.a.createElement(H.Provider,{value:this.state},this.props.children)}}]),t}(o.a.Component),G=(n(176),function(e){var t,n=e.color,a=e.label,r=e.big,c=e.className,i=void 0===c?"":c,s=e.style,l=void 0===s?{}:s,u=e.onClick,m=void 0===u?function(){}:u;return o.a.createElement("span",{className:"tag ".concat(r?"big":""," ").concat(i),style:Object(h.a)({backgroundColor:n,color:"".concat((t=n,0===t.indexOf("#")&&(t=t.slice(1)),.299*parseInt(t.slice(0,2),16)+.587*parseInt(t.slice(2,4),16)+.114*parseInt(t.slice(4,6),16)>186?"#000000":"#FFFFFF"))},l),onClick:m},a)}),V=function(e){var t=e.movie,n=e.onEdit,a=e.onChange,c=e.onDelete,i=Object(r.useContext)(T),s=Object(r.useContext)(H).tags,l=function(e,n){return function(){return k(Object(h.a)({},t,Object(b.a)({},e,n)),i).then(a)}},u="".concat(t.title),m="".concat(t.productionYear," - ").concat(t.genre.join(","));return o.a.createElement("div",{className:"card movie-card"},o.a.createElement("div",{className:"card-body"},o.a.createElement("h5",{className:"card-title"},o.a.createElement(g.a,{to:"movie/".concat(t._id)},o.a.createElement("div",{className:"ellipsis",title:u},u))),o.a.createElement("h6",{className:"card-subtitle mb-2 text-muted ellipsis",title:m},m),o.a.createElement("div",{className:"movie-card-actions",style:{position:"absolute",top:2,right:4}},"Film"!==t.type&&o.a.createElement("i",{className:"fas fa-ban",style:{cursor:"pointer",color:t.finished?"var(--danger)":"black"},onClick:l("finished",!t.finished),title:t.finished?"Mark tv show as in progress":"Mark tv show as finished"}),"Film"===t.type?o.a.createElement(y,{seen:t.seen,onClick:l("seen",!t.seen)}):o.a.createElement(y,{seen:D()(t.seasons.map(function(e){return D()(e.episodes,"seen")&&e.episodes.length>0}))&&t.seasons.length>0,partial:A()(t.seasons.map(function(e){return A()(e.episodes,"seen")&&e.episodes.length>0}))&&t.seasons.length>0}),o.a.createElement("i",{title:"Edit",className:"fas fa-pencil-alt",onClick:n,style:{cursor:"pointer"}}),o.a.createElement("i",{className:"fas fa-trash",onClick:function(){window.confirm()&&function(e,t){return fetch("/api/movies/".concat(e._id),{method:"DELETE",headers:E(t)}).then(O)}(t,i).then(c)},style:{cursor:"pointer"},title:"Delete"})),o.a.createElement("div",{className:"poster text-center"},o.a.createElement("img",{src:t.fileUrl?t.fileUrl.replace("http:","https:"):"/no-image.png",alt:"movie poster"})),o.a.createElement("div",{className:"mt-2 text-center"},t.tags.map(function(e){return o.a.createElement(G,Object.assign({key:e},s.find(function(t){return t._id===e}),{className:"mr-2",onClick:function(){var n=s.find(function(t){return t._id===e});n&&"netflix"===n.label.toLowerCase()&&window.open("https://www.netflix.com/search?q=".concat(t.title),"_blank")}}))}))))},K=n(14),q=n.n(K),X=n(12),Q=n(46),Z=n.n(Q),ee=n(10),te=o.a.createContext(),ne=[{id:"1",label:"Titre ascendant",field:"title",value:"1"},{id:"2",label:"Titre descendant",field:"title",value:"-1"},{id:"3",label:"Date de sortie ascendant",field:"productionYear",value:"1"},{id:"4",label:"Date de sortie descendant",field:"productionYear",value:"-1"}],ae={movies:[],count:0,filters:{productionYear:"-1",title:"",genres:[],types:[],tags:[],seen:null,finished:null,limit:30,sort:ne[0]}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(console.log(e,n,a),n){case"ADD":return Object(h.a)({},e,{movies:[a.movie].concat(Object(X.a)(e.movies)),count:e.count+1});case"UPDATE":var r=Z()(e.movies,["_id",a.id]),o=Object(X.a)(e.movies),c=a.movie?e.count:e.count-1;return o[r]=a.movie,Object(h.a)({},e,{movies:o.filter(Boolean),count:c});case"UPDATE_WITH_TRANSFORM":var i=Z()(e.movies,["_id",a.id]),s=Object(X.a)(e.movies);return s[i]=Object(ee.a)(s[i],a.transform),Object(h.a)({},e,{movies:s.filter(Boolean)});case"ADD_ALL":return Object(h.a)({},e,{movies:Object(X.a)(e.movies).concat(Object(X.a)(a.movies)),count:a.count});case"SET_MOVIES":return Object(h.a)({},e,{movies:a.movies||[],count:a.count||0});case"RESET_FILTERS":return Object(h.a)({},e,{filters:Object(h.a)({},ae.filters)});case"FILTERS_CHANGED":return Object(h.a)({},e,{movies:[],count:0,filters:Object(h.a)({},e.filters,Object(b.a)({},a.name,a.value))});default:return e}},oe=function(e){var t=Object(r.useReducer)(re,ae),n=Object(v.a)(t,2),a=n[0],c=n[1];return o.a.createElement(te.Provider,{value:{state:a,dispatch:c}},e.children)},ce=n(15),ie=n.n(ce),se=n(24),le=n(29),ue=n(20),me=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={selectedItems:n.props.selectedItems||[]},n.stateReducer=function(e,t){switch(t.type){case ue.a.stateChangeTypes.keyDownEnter:case ue.a.stateChangeTypes.clickItem:return Object(h.a)({},t,{highlightedIndex:e.highlightedIndex,isOpen:!0});default:return t}},n.callOnChange=function(e){return function(){n.props.onChange&&n.props.onChange(n.state.selectedItems,n.getStateAndHelpers(e))}},n.handleSelection=function(e,t){n.state.selectedItems.includes(e)?n.removeItem(e,n.callOnChange(t)):n.addSelectedItem(e,n.callOnChange(t))},n.removeItem=function(e,t){n.setState(function(t){return{selectedItems:t.selectedItems.filter(function(t){return t!==e})}},t)},n.getRemoveButtonProps=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.onClick,r=t.item,o=Object(le.a)(t,["onClick","item"]);return Object(h.a)({onClick:function(t){a&&a(t),t.stopPropagation(),n.removeItem(r,n.callOnChange(e))}},o)}},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){e.selectedItems!==this.props.selectedItems&&this.props.selectedItems!==this.state.selectedItems&&this.setState({selectedItems:this.props.selectedItems||[]})}},{key:"addSelectedItem",value:function(e,t){this.setState(function(t){var n=t.selectedItems;return{selectedItems:Object(X.a)(n).concat([e])}},t)}},{key:"getStateAndHelpers",value:function(e){var t=this.state.selectedItems,n=this.getRemoveButtonProps,a=this.removeItem;return Object(h.a)({getRemoveButtonProps:n(e),removeItem:a,selectedItems:t},e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.render,a=t.children,r=void 0===a?n:a,c=Object(le.a)(t,["render","children"]);return o.a.createElement(ue.a,Object.assign({},c,{stateReducer:this.stateReducer,onChange:this.handleSelection,selectedItem:null}),function(t){return r(e.getStateAndHelpers(t))})}}]),t}(o.a.Component),de=n(51),pe=Object(de.a)("li",{target:"ea4ther0"})("position:relative;cursor:pointer;display:block;border:none;height:auto;text-align:left;border-top:none;line-height:1em;color:rgba(0,0,0,.87);font-size:1rem;text-transform:none;font-weight:400;box-shadow:none;padding:.8rem 1.1rem;white-space:normal;word-wrap:normal;",function(e){var t=e.isActive,n=e.isSelected,a=[];return t&&a.push({color:"rgba(0,0,0,.95)",background:"rgba(0,0,0,.03)"}),n&&a.push({color:"rgba(0,0,0,.95)",fontWeight:"700"}),a},""),fe=Object(de.a)("ul",{target:"ea4ther1"})("padding:0;margin-top:0;position:absolute;background-color:white;width:100%;max-height:20rem;overflow-y:auto;overflow-x:hidden;outline:0;transition:opacity .1s ease;border-radius:0 0 .28571429rem .28571429rem;box-shadow:0 2px 3px 0 rgba(34,36,38,.15);border-color:#96c8da;border-top-width:0;border-right-width:1px;border-bottom-width:1px;border-left-width:1px;border-style:solid;z-index:10;",function(e){return{border:e.isOpen?null:"none"}},""),he=o.a.forwardRef(function(e,t){return o.a.createElement(fe,Object.assign({ref:t},e))}),ve=Object(de.a)("button",{target:"ea4ther2"})({name:"1jn69zd",styles:"background-color:transparent;border:none;position:absolute;right:0;top:0;cursor:pointer;width:47px;display:flex;flex-direction:column;height:100%;justify-content:center;align-items:center;"});function be(e){var t=e.isOpen;return o.a.createElement("svg",{viewBox:"0 0 20 20",preserveAspectRatio:"none",width:16,fill:"transparent",stroke:"#979797",strokeWidth:"1.1px",transform:t?"rotate(180)":null},o.a.createElement("path",{d:"M1,6 L10,15 L19,6"}))}var ge,ye=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={selectedItems:n.props.selectedItems||[]},n.stateReducer=function(e,t){switch(t.type){case ue.a.stateChangeTypes.keyDownEnter:case ue.a.stateChangeTypes.clickItem:return Object(h.a)({},t,{highlightedIndex:e.highlightedIndex,isOpen:!0});default:return t}},n.callOnChange=function(e){return function(){n.props.onChange&&n.props.onChange(n.state.selectedItems,n.getStateAndHelpers(e))}},n.handleSelection=function(e,t){n.state.selectedItems.filter(function(t){return e===t[0]}).length>0?n.removeItem([e],n.callOnChange(t)):n.addSelectedItem(e,n.callOnChange(t))},n.removeItem=function(e,t){n.setState(function(t){return{selectedItems:t.selectedItems.filter(function(t){return t[0]!==e[0]})}},t)},n.getRemoveButtonProps=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.onClick,r=t.item,o=Object(le.a)(t,["onClick","item"]);return Object(h.a)({onClick:function(t){a&&a(t),t.stopPropagation(),n.removeItem(r,n.callOnChange(e))}},o)}},n.clickOnItem=function(e){return function(t,a){n.setState(function(e){var n=e.selectedItems;return n[a]=[t[0],!t[1]],{selectedItems:n.filter(function(e){return e!==t[0]})}},n.callOnChange(e))}},n.displayItem=function(e){return e[0]},n.displayBackground=function(e){return e[1]?"#ccc":"tomato"},n.isSelected=function(e){return n.state.selectedItems.find(function(t){return t[0]===e})},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"addSelectedItem",value:function(e,t){this.setState(function(t){var n=t.selectedItems;return{selectedItems:Object(X.a)(n).concat([[e,!0]])}},t)}},{key:"getStateAndHelpers",value:function(e){var t=this.state.selectedItems,n=this.getRemoveButtonProps,a=this.removeItem,r=this.clickOnItem,o=this.displayItem,c=this.displayBackground,i=this.isSelected;return Object(h.a)({getRemoveButtonProps:n(e),removeItem:a,selectedItems:t,clickOnItem:r(e),displayItem:o,displayBackground:c,isSelected:i},e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.render,a=t.children,r=void 0===a?n:a,c=Object(le.a)(t,["render","children"]);return o.a.createElement(ue.a,Object.assign({},c,{stateReducer:this.stateReducer,onChange:this.handleSelection,selectedItem:null}),function(t){return r(e.getStateAndHelpers(t))})}}]),t}(o.a.Component),Ee=n(4),Oe={name:"jr0in3",styles:"cursor:pointer;position:relative;padding:.375rem .75rem;padding-right:50px;border:1px solid #ced4da;border-radius:.25rem;background-color:white;"},je={name:"xxdqwu",styles:"display:flex;flex-wrap:wrap;align-items:center;"},ke={name:"xdkicx",styles:"display:grid;grid-gap:6px;grid-auto-flow:column;align-items:center;"},xe={name:"1mnx8h9",styles:"cursor:pointer;line-height:0.8;border:none;background-color:transparent;padding:0;font-size:16px;"},Ce={name:"1fxrtym",styles:"color:#6c757d;"},Ne=function(e){return function(t){function n(){return Object(s.a)(this,n),Object(u.a)(this,Object(m.a)(n).apply(this,arguments))}return Object(d.a)(n,t),Object(l.a)(n,[{key:"render",value:function(){var t=this.props,n=t.handleChange,a=t.placeholder,r=t.items,o=t.selectedItems;return Object(Ee.b)(e,{onChange:n,selectedItems:o,placeholder:a},function(e){var t=e.getToggleButtonProps,n=e.getMenuProps,o=e.getRemoveButtonProps,c=(e.removeItem,e.isOpen),i=e.selectedItems,s=e.getItemProps,l=e.highlightedIndex,u=e.toggleMenu,m=e.clickOnItem,d=void 0===m?function(){}:m,p=e.displayItem,f=void 0===p?ie.a:p,h=e.displayBackground,v=void 0===h?function(){return"#ccc"}:h,b=e.isSelected,g=void 0===b?function(e){return i.includes(e)}:b;return Object(Ee.b)("div",{style:{margin:"auto",position:"relative",width:"100%"}},Object(Ee.b)("div",{css:Oe,onClick:function(){u()}},Object(Ee.b)("div",{css:je},i.length>0?i.map(function(e,t){return Object(Ee.b)("div",{key:t,css:Object(se.a)({margin:"0 2px",paddingLeft:8,paddingRight:8,display:"inline-block",wordWrap:"none",backgroundColor:v(e),borderRadius:2},""),onClick:function(n){n.preventDefault(),n.stopPropagation(),d(e,t)}},Object(Ee.b)("div",{css:ke},Object(Ee.b)("span",null,f(e)),Object(Ee.b)("button",Object.assign({},o({item:e}),{css:xe,type:"button"}),"\ud835\ude05")))}):Object(Ee.b)("span",{css:Ce},a)),Object(Ee.b)(ve,t({onClick:function(e){e.stopPropagation()}}),Object(Ee.b)(be,{isOpen:c}))),Object(Ee.b)(he,n({isOpen:c}),c?r.map(function(e,t){return Object(Ee.b)(pe,Object.assign({key:t},s({item:e,index:t,isActive:l===t,isSelected:g(e)})),e)}):null))})}}]),n}(r.Component)},we=Ne(me),Se=Ne(ye),De=function(e){return e.target.value},Ie=function(e,t){var n=e.filters,a=e.onChange,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ie.a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:De;return{value:n[t],onChange:function(e){return a(t)(r(o(e)))}}},Ae=function(e){var t=e.tag,n=e.selected,a=e.onAdd,r=e.onDelete;return o.a.createElement("span",{onClick:n?r:a},o.a.createElement(G,Object.assign({},t,{className:"filter-tag mr-2 ".concat(n?"selected":"")})))},_e=function(){var e=Object(r.useContext)(te),t=e.state.filters,n=e.dispatch,a=Object(r.useContext)(H),c=a.genres,i=a.types,s=a.tags,l=a.years,u=t.seen,m=t.finished,d=function(e){return function(t){n({type:"FILTERS_CHANGED",payload:{name:e,value:t}})}};return o.a.createElement("form",{className:"form-inline movies-filter mt-4 ml-3"},o.a.createElement("div",{className:"form-group mr-2"},o.a.createElement("select",Object.assign({className:"form-control"},Ie({filters:t,onChange:d},"productionYear")),o.a.createElement("option",{value:"-1"},"YYYY"),l.map(function(e){return o.a.createElement("option",{value:e,key:e},e)}))),o.a.createElement("div",{className:"form-group mr-2"},o.a.createElement("input",Object.assign({type:"text"},Ie({filters:t,onChange:d},"title"),{placeholder:"Title",className:"form-control"}))),o.a.createElement("div",{className:"form-group mr-2",style:{minWidth:"220px"}},o.a.createElement(Se,{placeholder:"Genre",handleChange:Ie({filters:t,onChange:d},"genres",ie.a,ie.a).onChange,items:c,selectedItems:t.genres})),o.a.createElement("div",{className:"form-group mr-2",style:{width:"220px"}},o.a.createElement(we,{placeholder:"Type",handleChange:Ie({filters:t,onChange:d},"types",ie.a,ie.a).onChange,items:i,selectedItems:t.types})),o.a.createElement("div",{className:"form-group mr-2"},function(){var e="",t="fa-eye",n=function(){return d("seen")("true")};return"true"===u?(e="var(--success)",n=function(){return d("seen")("partial")}):"partial"===u?(e="var(--warning)",n=function(){return d("seen")("false")}):"false"===u&&(e="var(--danger)",t="fa-eye-slash",n=function(){return d("seen")(null)}),o.a.createElement("i",{className:"fas ".concat(t),style:{color:e,cursor:"pointer"},onClick:n})}()),o.a.createElement("div",{className:"form-group mr-2"},function(){var e="",t=function(){return d("finished")(!0)};return!0===m&&(e="var(--danger)",t=function(){return d("finished")(null)}),o.a.createElement("i",{className:"fas fa-ban",style:{color:e,cursor:"pointer"},onClick:t})}()),o.a.createElement("div",null,s.map(function(e){return o.a.createElement(Ae,{key:e._id,tag:e,selected:t.tags.find(function(t){return t===e._id}),onAdd:function(){return d("tags")(Object(X.a)(t.tags).concat([e._id]))},onDelete:function(){return d("tags")(t.tags.filter(function(t){return t!==e._id}))}})})),o.a.createElement("div",null,o.a.createElement("select",{className:"form-control",value:t.sort.id,onChange:function(e){return d("sort")(ne.find(function(t){return t.id===e.target.value}))}},ne.map(function(e){return o.a.createElement("option",{value:e.id,key:e.id},e.label)}))))},Te=n(48),Fe=n.n(Te),Pe={name:"jr0in3",styles:"cursor:pointer;position:relative;padding:.375rem .75rem;padding-right:50px;border:1px solid #ced4da;border-radius:.25rem;background-color:white;"},Re={name:"xxdqwu",styles:"display:flex;flex-wrap:wrap;align-items:center;"},Ye={name:"1wkh9kr",styles:"margin:0 2px;padding-left:8px;padding-right:8px;display:inline-block;word-wrap:none;background-color:#ccc;border-radius:2px;"},Le={name:"xdkicx",styles:"display:grid;grid-gap:6px;grid-auto-flow:column;align-items:center;"},Ue={name:"1fxrtym",styles:"color:#6c757d;"},Me=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onChange,n=e.placeholder,a=e.items,r=e.selectedItem;return Object(Ee.b)(ue.a,{onChange:t,selectedItem:r},function(e){e.getInputProps;var t=e.getItemProps,r=(e.getLabelProps,e.getMenuProps),o=e.isOpen,c=(e.inputValue,e.highlightedIndex),i=e.selectedItem,s=e.toggleMenu;return Object(Ee.b)("div",{style:{margin:"auto",position:"relative",width:"100%"}},Object(Ee.b)("div",{css:Pe,onClick:function(){s()}},Object(Ee.b)("div",{css:Re},i?Object(Ee.b)("div",{css:Ye},Object(Ee.b)("div",{css:Le},Object(Ee.b)("span",null,i))):Object(Ee.b)("span",{css:Ue},n)),Object(Ee.b)(ve,null,Object(Ee.b)(be,{isOpen:o}))),Object(Ee.b)(he,r({isOpen:o}),o?a.map(function(e,n){return Object(Ee.b)(pe,Object.assign({key:n},t({item:e,index:n,isActive:c===n,isSelected:i===e})),e)}):null))})}}]),t}(o.a.Component),Be=n(63),He=n.n(Be),ze=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,toggle:n.toggle.bind(Object(_.a)(Object(_.a)(n)))},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"toggle",value:function(){this.setState({open:!this.state.open})}},{key:"render",value:function(){return o.a.createElement(r.Fragment,null,this.props.children(this.state))}}]),t}(r.Component),We={movie:{title:"",genre:[],type:"",productionYear:"",summary:""},allocine:{movies:[],tvshows:[]}},Je=function(e){return{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e.token)}},Ge=function(e){if(e.ok)return e.json();throw new Error("Fetch fail")},Ve=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).valid=function(){return!He()(n.state.movie.title)&&n.state.movie.genre.length>0&&!He()(n.state.movie.type)},n.add=function(){fetch("/api/movies",{method:"POST",body:JSON.stringify(n.state.movie),headers:Je(n.props.user)}).then(Ge).then(function(e){n.props.onAdd(Object(h.a)({},n.state.movie,e)),$("#movie-creator-updator").modal("hide")})},n.update=function(){fetch("/api/movies/".concat(n.props.movie._id),{method:"PUT",body:JSON.stringify(n.state.movie),headers:Je(n.props.user)}).then(Ge).then(function(e){n.props.onUpdate(Object(h.a)({},n.state.movie,e)),$("#movie-creator-updator").modal("hide")})},n.search=function(){Promise.all([fetch("/api/allocine?type=Film&title=".concat(n.state.movie.title),{headers:Je(n.props.user)}).then(Ge),fetch("/api/allocine?type=S\xe9rie&title=".concat(n.state.movie.title),{headers:Je(n.props.user)}).then(Ge)]).then(function(e){var t=Object(v.a)(e,2),a=t[0],r=t[1];return n.setState({allocine:{movies:a,tvshows:r}})})},n.synchronizeMovieAllocine=function(e){e===n.state.movie.idAllocine?n.setState({movie:Object(h.a)({},n.state.movie,{idAllocine:null})}):fetch("/api/allocine/movie/".concat(e),{headers:Je(n.props.user)}).then(Ge).then(function(t){var a=t.movie;return n.setState({movie:Object(h.a)({},n.state.movie,{idAllocine:e,title:a.title,genre:a.genre.map(function(e){return e.$}).sort(),type:"Film",productionYear:a.release&&a.release.releaseDate?new Date(a.release.releaseDate).getFullYear():a.productionYear,summary:a.synopsisShort||a.synopsis,fileUrl:a.poster?a.poster.href:""})})})},n.synchronizeTvShowAllocine=function(e){e===n.state.movie.idAllocine?n.setState({movie:Object(h.a)({},n.state.movie,{idAllocine:null})}):fetch("/api/allocine/serie/".concat(e),{headers:Je(n.props.user)}).then(Ge).then(function(t){var a=t.tvseries;return n.setState({movie:Object(h.a)({},n.state.movie,{idAllocine:e,title:a.title,genre:a.genre.map(function(e){return e.$}).sort(),type:"S\xe9rie",productionYear:a.yearStart,summary:a.synopsisShort||a.synopsis,fileUrl:a.poster?a.poster.href:""})})})},n.onInput=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return function(a){return n.setState({movie:Object(h.a)({},n.state.movie,Object(b.a)({},e,t(a.target.value)))})}},n.onSelect=function(e){return function(t){return n.setState({movie:Object(h.a)({},n.state.movie,Object(b.a)({},e,t))})}},n.state={movie:e.movie?e.movie:We.movie,allocine:We.allocine},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){$("#movie-creator-updator").on("hide.bs.modal",this.props.onClose)}},{key:"render",value:function(){var e=this,t=this.state.movie;return o.a.createElement(r.Fragment,null,this.props.application.status===z?o.a.createElement("div",null,"Loading..."):o.a.createElement("div",{className:"movie-modal modal fade movie-form",id:"movie-creator-updator",tabIndex:"-1",role:"dialog","data-show":"true"},o.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h5",{className:"modal-title"},t&&t.title||"New"),o.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),o.a.createElement("div",{className:"modal-body"},o.a.createElement("div",{className:"form-row"},o.a.createElement("div",{className:"form-group col-11"},o.a.createElement("label",{htmlFor:"title"},"Title"),o.a.createElement("input",{type:"text",className:"form-control",id:"title","aria-describedby":"title",placeholder:"Enter title",onChange:this.onInput("title"),value:this.state.movie.title})),o.a.createElement("div",{className:"form-group col-1 text-center"},o.a.createElement("i",{title:"Search in allocine",className:"fab fa-angular fa-2x",style:{cursor:"pointer",color:"#fecc00",paddingTop:"35px"},onClick:this.search}))),this.state.allocine.movies.length>0?o.a.createElement(ze,null,function(t){var n=t.open,a=t.toggle;return o.a.createElement(r.Fragment,null,o.a.createElement("div",{onClick:a,style:{cursor:"pointer"}},e.state.allocine.movies.length," movies",n?o.a.createElement("i",{className:"fas fa-chevron-up",title:"Hide"}):o.a.createElement("i",{className:"fas fa-chevron-down",title:"Show"})),o.a.createElement("div",{className:"row",style:{overflowX:"scroll",display:n?"flex":"none",flexWrap:"nowrap"}},e.state.allocine.movies.map(function(t){return o.a.createElement("div",{key:t.code,className:"col-2 allocine-movie ".concat(t.code===e.state.movie.idAllocine?"selected":""),onClick:function(){return e.synchronizeMovieAllocine(t.code)}},t.code===e.state.movie.idAllocine?o.a.createElement("i",{className:"fas fa-check-circle selected-movie-icon fa-2x",title:"Movie selected"}):null,o.a.createElement("div",null,t.title," -"," ",t.release&&t.release.releaseDate?new Date(t.release.releaseDate).getFullYear():t.productionYear),o.a.createElement("div",null,t.poster?o.a.createElement("img",{src:t.poster.href,alt:"movie poster",style:{width:"100%"}}):null))})))}):null,this.state.allocine.tvshows.length>0?o.a.createElement(ze,null,function(t){var n=t.open,a=t.toggle;return o.a.createElement(r.Fragment,null,o.a.createElement("div",{onClick:a,style:{cursor:"pointer"}},e.state.allocine.tvshows.length," tv shows",n?o.a.createElement("i",{className:"fas fa-chevron-up",title:"Hide"}):o.a.createElement("i",{className:"fas fa-chevron-down",title:"Show"})),o.a.createElement("div",{className:"row",style:{overflowX:"scroll",display:n?"flex":"none",flexWrap:"nowrap"}},e.state.allocine.tvshows.map(function(t){return o.a.createElement("div",{key:t.code,className:"col-2 allocine-movie ".concat(t.code===e.state.movie.idAllocine?"selected":""),onClick:function(){return e.synchronizeTvShowAllocine(t.code)}},t.code===e.state.movie.idAllocine?o.a.createElement("i",{className:"fas fa-check-circle selected-movie-icon fa-2x",title:"Tv show selected"}):null,o.a.createElement("div",null,t.title," - ",t.yearStart),o.a.createElement("div",null,t.poster?o.a.createElement("img",{src:t.poster.href,alt:"tvshow poster",style:{width:"100%"}}):null))})))}):null,o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Genre"),o.a.createElement(we,{selectedItems:this.state.movie.genre,placeholder:"Genre",items:this.props.application.genres,handleChange:this.onSelect("genre")})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Type"),o.a.createElement(Me,{selectedItem:this.state.movie.type,placeholder:"Type",items:this.props.application.types,onChange:this.onSelect("type")})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"production-year"},"Production Year"),o.a.createElement("input",{type:"number",className:"form-control",id:"production-year","aria-describedby":"production year",placeholder:"Enter production year",onChange:this.onInput("productionYear",function(e){return parseInt(e,10)}),value:this.state.movie.productionYear})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"summary"},"Summary"),o.a.createElement("textarea",{className:"form-control",id:"summary","aria-describedby":"summary",placeholder:"Enter summary",onChange:this.onInput("summary"),value:this.state.movie.summary}))),o.a.createElement("div",{className:"modal-footer"},o.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close"),o.a.createElement("button",{type:"button",disabled:!this.valid(),className:"btn btn-primary",onClick:this.state.movie._id?this.update:this.add},t._id?"Update":"Save"))))))}}]),t}(o.a.Component),Ke=(ge=F(Ve),function(e){return o.a.createElement(H.Consumer,null,function(t){return o.a.createElement(ge,Object.assign({},e,{application:t}))})}),$e=j(!0),qe=function(){var e=Object(r.useContext)(H).status,t=Object(r.useContext)(te),n=t.state,a=t.dispatch,c=n.movies,i=n.filters,s=n.count,l=Object(r.useContext)(T),u=Object(r.useState)(c.length?function(e,t){return Math.ceil(e/t)-1}(c.length,i.limit):0),m=Object(v.a)(u,2),d=m[0],p=m[1],f=Object(r.useState)({}),b=Object(v.a)(f,2),g=b[0],y=b[1],E=Object(r.useState)(0),O=Object(v.a)(E,2),j=O[0],k=O[1],x=Object(r.useState)(!0),C=Object(v.a)(x,2),N=C[0],w=C[1],S=function(e){w(!1),$e(function(e,t){var n=e.genres.filter(function(e){return e[1]}).map(function(e){return e[0]}),a=e.genres.filter(function(e){return!e[1]}).map(function(e){return e[0]});return Object.keys(e).filter(function(e){return"genres"!==e}).filter(function(e){return"sort"!==e}).filter(function(t){return"productionYear"!==t||"productionYear"===t&&"-1"!==e[t]}).filter(function(t){return!q()(e[t])&&null!==e[t]&&""!==e[t]||q()(e[t])&&e[t].length>0}).map(function(t){return"".concat(t,"=").concat(e[t])}).concat(n.length>0?"genres=".concat(n.join(",")):"",a.length>0?"notGenres=".concat(a.join(",")):"","offset=".concat(t)).concat("sortField=".concat(e.sort.field),"sortOrder=".concat(e.sort.value)).filter(Boolean).join("&")}(i,d),l).then(function(e){a(0===d?{type:"SET_MOVIES",payload:{movies:e.data,count:e.count}}:{type:"ADD_ALL",payload:{movies:e.data,count:e.count}}),w(!0)})};Object(r.useEffect)(function(){var e=Fe()(S,400,{leading:!1,trailing:!0});return 0===s&&(w(!1),p(0),a({type:"SET_MOVIES",payload:{}}),e()),function(){return e.cancel()}},[i]),Object(r.useEffect)(function(){j>0&&$("#movie-creator-updator").modal("show")},[g]);var D=Object(r.useRef)(!0);return Object(r.useEffect)(function(){D.current?D.current=!1:S()},[d]),o.a.createElement("div",null,e===z?o.a.createElement("h2",{className:"text-center mt-2"},o.a.createElement("i",{className:"fas fa-spinner fa-spin fa-2x"})):o.a.createElement(r.Fragment,null,o.a.createElement(Ke,{key:g._id||j,movie:g._id?g:null,onAdd:function(e){return a({type:"ADD",payload:{movie:e}})},onUpdate:function(e){return a({type:"UPDATE",payload:{movie:e,id:e._id}})}}),o.a.createElement("i",{onClick:function(){y({}),k(j+1)},className:"fas fa-plus-circle fa-3x",style:{top:"22px",left:"22px",position:"absolute",color:"#F1F7EE",cursor:"pointer"},title:"Add a movie or a tv show"}),o.a.createElement(_e,null),o.a.createElement("h2",{className:"text-center"},c.length===s&&s>0?o.a.createElement("span",null,s," movies/tvshows"):c.length<s?o.a.createElement("span",null,c.length," of ",s," movies/tvshows"):N?o.a.createElement("span",null," No movies/tvshows"):null),o.a.createElement("div",{className:"movies"},c.map(function(e){return o.a.createElement(V,{key:e._id,movie:e,onChange:function(e){return a({type:"UPDATE",payload:{movie:e,id:e._id}})},onDelete:function(t){return a({type:"UPDATE",payload:{id:e._id}})},onEdit:function(){y(Object(h.a)({},e)),k(j+1)}})})),o.a.createElement("h2",{className:"text-center mt-2"},N?null:o.a.createElement("span",null,o.a.createElement("i",{className:"fas fa-spinner fa-spin fa-2x"}))),c.length<s&&N?o.a.createElement("div",{className:"text-center m-3"},o.a.createElement("button",{onClick:function(){return p(d+1)},className:"btn btn-primary btn-lg"},"Load more")):void 0))},Xe=n(13),Qe=n.n(Xe),Ze=n(25),et=n(205),tt=(n(187),{onClick:function(e){e.preventDefault(),e.stopPropagation()}}),nt={draggable:!0,onDragStart:function(e){e.preventDefault(),e.stopPropagation()}},at=function(e){var t=Object(r.useState)(e.value||""),n=Object(v.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(!e.value),s=Object(v.a)(i,2),l=s[0],u=s[1],m=e.transform||ie.a,d=e.lock||!1,p=Object(r.useRef)(e.value);return e.value!==p.current&&(c(e.value||""),u(!e.value),p.current=e.value),o.a.createElement(r.Fragment,null,!d&&l?o.a.createElement(r.Fragment,null,e.renderFormField(Object(h.a)({},e,{value:a,onChange:function(e){return c(m(e.target?e.target.value:e))},submit:function(){a&&(e.onChange(a),u(!1))}})),o.a.createElement("button",Object.assign({className:"btn btn-primary"},nt,{onClick:function(t){t.preventDefault(),t.stopPropagation(),a&&(e.onChange(a),u(!1))}}),"OK")):o.a.createElement(r.Fragment,null,e.renderValue({className:"".concat(e.className||""," ").concat(d?"":"editable-field"),value:a,onClick:function(e){d||(e.preventDefault(),e.stopPropagation(),u(!0))}})))},rt=function(e){return o.a.createElement(at,Object.assign({},e,{renderFormField:function(t){return o.a.createElement("div",{className:"form-inline d-inline-block"},o.a.createElement("input",Object.assign({className:"form-control mr-1",placeholder:t.placeholder,type:e.type||"text",value:t.value,onKeyDown:function(e){"Enter"===e.key&&t.submit()},onChange:t.onChange},nt,tt)))},renderValue:function(e){return o.a.createElement("span",{onClick:e.onClick,className:e.className},e.value)}}))},ot=function(e){return o.a.createElement(at,Object.assign({},e,{renderFormField:function(e){return o.a.createElement("textarea",Object.assign({className:"form-control w-100",placeholder:e.placeholder,style:e.style,value:e.value,rows:e.rows||2,onKeyDown:function(t){"Enter"===t.key&&t.ctrlKey&&e.submit()},onChange:e.onChange},nt,tt))},renderValue:function(t){return o.a.createElement("span",{onClick:t.onClick,className:"".concat(t.className," w-100")},e.split?t.value.split("\n").map(function(e,t){return o.a.createElement(r.Fragment,{key:t},e,o.a.createElement("br",null))}):o.a.createElement(r.Fragment,null,t.value))}}))},ct=function(e){return o.a.createElement(at,Object.assign({},e,{renderFormField:function(e){return o.a.createElement("div",{className:"form-inline d-inline-block",style:{minWidth:"220px"}},o.a.createElement(we,{placeholder:e.placeholder,handleChange:e.onChange,items:e.items,selectedItems:e.value,className:"form-group"}))},renderValue:function(e){return o.a.createElement("span",{onClick:e.onClick,className:e.className},e.value.join(","))}}))},it=o.a.createContext(),st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD":return Object(X.a)(e).concat([Object(h.a)({},t.payload,{id:(new Date).getTime()})]);case"CLOSE":return e.filter(function(e){return e.id!==t.payload.id});default:return e}},lt=function(e){var t=Object(r.useReducer)(st,[]),n=Object(v.a)(t,2),a=n[0],c=n[1];return o.a.createElement(it.Provider,{value:{notifications:a,dispatch:c}},e.children)},ut=function(e){return"S".concat((e+1).toString().padStart(2,"0"))},mt=function(e,t){return"".concat(ut(e),"E").concat((t+1).toString().padStart(2,"0"))},dt=function(e){return function(t){throw pt(e,t.message,"error"),t}},pt=function(e,t){e({type:"ADD",payload:{content:t,type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"success"}})},ft=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(r.useState)(e),n=Object(v.a)(t,2),a=n[0],o=n[1];return[a,function(){return o(!a)}]},ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(r.useState)(e),n=Object(v.a)(t,2),a=n[0],o=n[1];return[{value:a,onChange:function(e){return o(e.target.value)}},o]},vt=function(e){var t=e.episode,n=e.index,a=e.onDragStart,c=e.onDragOver,i=e.onDragEnd,s=e.dragging,l=e.onSeen,u=Object(r.useContext)(T),m=Object(r.useContext)(jt),d=m.movie,p=m.lock,f=Object(r.useContext)(bt),h=f.season,b=f.index,g=Object(r.useContext)(it).dispatch,y=Object(r.useContext)(te).dispatch,O=ft(!0),j=Object(v.a)(O,2),k=j[0],x=j[1],C=Object(r.useState)({}),N=Object(v.a)(C,2),S=N[0],D=N[1],I=function(e){y({type:"UPDATE_WITH_TRANSFORM",payload:{id:d._id,transform:e}})},A=function(e){var a=Object(ee.a)(t,e);return I(function(e){e.seasons[b].episodes[n]=a}),w(d,h,a,u).catch(function(e){I(function(e){e.seasons[b].episodes[n]=t}),dt(g)(e)})};return o.a.createElement("div",{className:"row episode mr-0 ml-0",draggable:!p,onDragStart:function(e){D({backgroundColor:"var(--movie-secondary-lighter)",opacity:"0.4",color:"var(--movie-primary)"}),e.dataTransfer.dropEffect="move",e.stopPropagation(),a()},onDragOver:function(){s&&c()},onDragEnd:function(e){e.stopPropagation(),i(),D({})},style:S},o.a.createElement("div",{className:" col-md-12 col-xl-2 align-items-center d-flex p-0 mb-1 mt-1"},!p&&o.a.createElement("i",{className:"fas fa-times delete-episode",title:"Delete episode ".concat(n+1),onClick:function(e){e.preventDefault(),e.stopPropagation(),window.confirm("Delete episode ?")&&function(e,t,n,a){return fetch("/api/movies/".concat(e._id,"/seasons/").concat(t._id,"/episodes/").concat(n._id),{method:"DELETE",headers:E(a)}).then(function(e){if(!e.ok)throw new Error("Fetch fail")})}(d,h,t,u).then(function(){return I(function(e){e.seasons[b].episodes=e.seasons[b].episodes.filter(function(e){return e._id!==t._id})})}).then(function(){return pt(g,"".concat(mt(b,n)," - Deleted"))}).catch(dt(g))}}),o.a.createElement("div",{className:"text-center col-1",style:{color:t.seen?"var(--success)":"",fontWeight:t.seen?"bold":"",cursor:"pointer"},onClick:function(){return l(!t.seen)}},n+1),o.a.createElement("div",{className:"text-center col-11"},o.a.createElement(rt,{lock:p,className:"font-weight-bold episode-title ".concat(t.seen?"seen":""),value:t.title,placeholder:"Title",onChange:function(e){return A(function(t){t.title=e}).then(function(){return pt(g,"".concat(mt(b,n)," - Title updated"))})}}))),o.a.createElement("div",{className:"col-md-12 col-xl-10 align-items-center d-flex mb-1 mt-1"},o.a.createElement(ot,{lock:p,style:{width:"100%"},rows:4,value:t.summary,placeholder:"Summary",className:"".concat(k?"ellipsis":""," d-block episode-summary w-100 text-left"),onChange:function(e){return A(function(t){t.summary=e}).then(function(){return pt(g,"".concat(mt(b,n)," - Summary updated"))})}}),p&&o.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return x()}},o.a.createElement("i",{className:"fas fa-question-circle",title:k?"Display summary":"Hide summary"}))))},bt=(n(188),o.a.createContext({})),gt=function(e){var t=e.season,n=e.index,a=e.onDragStart,c=e.onDragOver,i=e.onDragEnd,s=e.dragging,l=e.onProductionYearUpdate,u=Object(r.useContext)(T),m=Object(r.useContext)(jt),d=m.movie,p=m.lock,f=Object(r.useContext)(it).dispatch,h=Object(r.useContext)(te).dispatch,b=ft(),g=Object(v.a)(b,2),O=g[0],j=g[1],k=Object(r.useState)(1),x=Object(v.a)(k,2),S=x[0],I=x[1],_=Object(r.useState)("1"),F=Object(v.a)(_,2),P=F[0],R=F[1],Y=Object(r.useState)(),L=Object(v.a)(Y,2),U=L[0],M=L[1],B=function(e){h({type:"UPDATE_WITH_TRANSFORM",payload:{id:d._id,transform:e}})},H=function(e,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},o=Object(ee.a)(e,r);return B(function(e){e.seasons[n].episodes[a]=o}),w(d,t,o,u).catch(function(t){B(function(t){t.seasons[n].episodes[a]=e}),dt(f)(t)})},z=function(){var e=Object(Ze.a)(Qe.a.mark(function e(){var a,r,o;return Qe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=S||1,r=Qe.a.mark(function e(a){var r;return Qe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(d,t,u).catch(dt(f));case 2:r=e.sent,B(function(e){e.seasons[n].episodes.push(r)});case 4:case"end":return e.stop()}},e,this)}),o=0;case 3:if(!(o<a)){e.next=8;break}return e.delegateYield(r(o),"t0",5);case 5:o++,e.next=3;break;case 8:pt(f,"".concat(ut(n)," - Added ").concat(a," episodes")),I(1);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),W=D()(t.episodes,"seen")&&t.episodes.length>0,J=A()(t.episodes,"seen")&&t.episodes.length>0;return o.a.createElement("div",{className:"season",draggable:!p,onDragStart:function(e){R("0.5"),e.dataTransfer.dropEffect="move",e.stopPropagation(),a()},onDragEnd:function(e){e.stopPropagation(),i(),R("1.5")},onDragOver:function(){s&&c()},style:{opacity:P}},o.a.createElement("div",{className:"season-header",onClick:j},o.a.createElement("div",null,o.a.createElement(y,{seen:W,partial:J,onClick:function(){var e=Object(Ze.a)(Qe.a.mark(function e(a){var r,o;return Qe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(a.preventDefault(),a.stopPropagation(),r=[],o=0;o<t.episodes.length;o++)t.episodes[o].seen!==!W&&r.push(H(t.episodes[o],o,function(e){e.seen=!W}));return e.next=6,Promise.all(r);case 6:pt(f,"".concat(ut(n)," - ").concat(W?"unseen":"seen"));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()})),o.a.createElement("div",null,!p&&o.a.createElement("i",{title:"Delete season ".concat(n+1),className:"fas fa-times delete-season",onClick:function(e){e.preventDefault(),e.stopPropagation(),window.confirm("Delete season ?")&&function(e,t,n){return fetch("/api/movies/".concat(e._id,"/seasons/").concat(t._id),{method:"DELETE",headers:E(n)}).then(function(e){if(!e.ok)throw new Error("Fetch fail")})}(d,t,u).then(function(){return B(function(e){e.seasons=e.seasons.filter(function(e){return e._id!==t._id})})}).then(function(){return pt(f,"".concat(ut(n)," - Deleted"))}).catch(dt(f))}}),"\xa0Season ",n+1,"\xa0-\xa0",o.a.createElement(rt,{lock:p,placeholder:"YYYY",type:"number",value:t.productionYear,transform:function(e){return parseInt(e,10)},onChange:function(e){return l(e)}})),o.a.createElement("div",{className:"season-header-arrow"},O?o.a.createElement("i",{className:"fas fa-chevron-up",title:"Hide"}):o.a.createElement("i",{className:"fas fa-chevron-down",title:"Show"}))),o.a.createElement("div",{className:"episodes"},o.a.createElement(bt.Provider,{value:{season:t,index:n}},O&&t.episodes.map(function(e,a){return o.a.createElement(vt,{key:e._id,episode:e,index:a,dragging:void 0!==U,onDragStart:function(){M(a)},onDragOver:function(){a!==U&&(M(a),t.episodes=Object(ee.a)(t.episodes,function(e){var t=e[a];e[a]=e[U],e[U]=t}))},onDragEnd:function(){(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return C(d,Object(ee.a)(t,e),u).then(function(e){return B(function(t){t.seasons[n]=e})}).catch(dt(f))})().then(function(){return pt(f,"".concat(mt(n,a)," - Reordered"))}),M()},onSeen:function(){var e=Object(Ze.a)(Qe.a.mark(function e(n){var r,o;return Qe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],n)for(o=0;o<=a;o++)t.episodes[o].seen||r.push(H(t.episodes[o],o,function(e){e.seen=!0}));else r.push(H(t.episodes[a],a,function(e){e.seen=!1}));return e.next=4,Promise.all(r);case 4:pt(f,"Episodes set to ".concat(n?"seen":"unseen"));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()})}))),p?void 0:o.a.createElement(r.Fragment,null,O&&o.a.createElement("div",{className:"form-inline d-block mt-1 mb-1",draggable:!0,onDragStart:function(e){e.preventDefault(),e.stopPropagation()}},o.a.createElement("input",{type:"number",className:"form-control",style:{width:"80px"},onChange:function(e){return I(parseInt(e.target.value,10))},onKeyDown:function(e){"Enter"===e.key&&z()},value:S}),o.a.createElement("button",{className:" ml-1 btn btn-primary",onClick:z},o.a.createElement("i",{className:"fas fa-plus",title:"Add episode"}),"\xa0Add episode"))))},yt=(n(189),n(86)),Et=n.n(yt),Ot=(n(191),function(){return o.a.createElement("div",{className:"loader d-flex"},o.a.createElement("i",{className:"fas fa-spinner fa-spin fa-5x"}))}),jt=o.a.createContext({}),kt=function(e){var t=e.tag,n=e.selected,a=e.onAdd,r=e.onDelete;return e.lock?n?o.a.createElement("div",{className:"movie-tag selected"},o.a.createElement(G,Object.assign({},t,{className:"d-inline-block"}))):null:o.a.createElement("div",{onClick:n?r:a,className:"movie-tag ".concat(n?"selected":"")},o.a.createElement(G,Object.assign({},t,{className:"d-inline-block"})))},xt=Object(et.a)(function(e){var t=e.match,n=e.history,a=Object(r.useContext)(T),c=Object(r.useContext)(te),i=c.state.movies,s=c.dispatch,l=Object(r.useState)(1),u=Object(v.a)(l,2),m=u[0],d=u[1],p=Object(r.useContext)(H),f=p.tags,h=p.genres,b=Object(r.useContext)(it).dispatch,g=Object(r.useState)(),j=Object(v.a)(g,2),N=j[0],w=j[1],S=ft(!0),D=Object(v.a)(S,2),I=D[0],A=D[1],_=Object(r.useState)(!1),F=Object(v.a)(_,2),P=F[0],R=F[1],Y=Object(r.useRef)(),L=Et()(i,["_id",t.params.id]);Object(r.useEffect)(function(){L||function(e,t){return fetch("/api/movies/".concat(e),{headers:E(t)}).then(O)}(t.params.id,a).then(function(e){s({type:"ADD",payload:{movie:e}})}).catch(dt(b))},[t.params.id]);var U=function(e){s({type:"UPDATE_WITH_TRANSFORM",payload:{id:L._id,transform:e}})},M=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return C(L,Object(ee.a)(e,n),a).then(function(e){return U(function(n){n.seasons[t]=e})}).catch(dt(b))},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return k(Object(ee.a)(L,e),a).then(function(e){s({type:"UPDATE",payload:{id:e._id,movie:e}})}).catch(dt(b))},z=function(e){1===e.length&&(R(!0),function(e,t,n){var a=new FormData;return a.append("file",t),fetch("/api/movies/".concat(e._id,"/poster"),{method:"POST",body:a,headers:{Accept:"application/json",Authorization:"Bearer ".concat(n.token)}}).then(O)}(L,e[0],a).then(function(e){Y.current.value="",s({type:"UPDATE",payload:{id:e._id,movie:e}}),pt(b,"".concat(e.title," - Image uploaded")),R(!1)}).catch(function(e){Y.current.value="",dt(b)(e),R(!1)}))},W=function(){var e=Object(Ze.a)(Qe.a.mark(function e(){var t,n,r;return Qe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=m||1,n=Qe.a.mark(function e(t){var n;return Qe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(L,a).catch(dt(b));case 2:n=e.sent,U(function(e){e.seasons.push(n)});case 4:case"end":return e.stop()}},e,this)}),r=0;case 3:if(!(r<t)){e.next=8;break}return e.delegateYield(n(r),"t0",5);case 5:r++,e.next=3;break;case 8:pt(b,"".concat(L.title," - Added ").concat(t," seasons")),d(1);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();return o.a.createElement("div",{className:"container movie-container"},L?o.a.createElement(r.Fragment,null,o.a.createElement("i",{onClick:function(){return n.goBack()},className:"fas fa-arrow-circle-left fa-3x",style:{top:"22px",left:"22px",position:"absolute",color:"#F1F7EE",cursor:"pointer"},title:"Return to the list of movies"}),o.a.createElement("div",{className:"p-5 mt-3 single-movie-card",style:{position:"relative"}},o.a.createElement("i",{onClick:A,className:"fas ".concat(I?"fa-lock":"fa-lock-open"," fa-2x"),style:{color:"var(--movie-secondary)",position:"absolute",top:"5px",right:"5px",cursor:"pointer"},title:"Click to ".concat(I?"open":"close"," movie for modifications")}),o.a.createElement("div",{className:"d-flex"},o.a.createElement("div",{className:"d-flex",style:{flex:"0 0 250px",flexDirection:"column"}},o.a.createElement("input",{accept:".jpg, .jpeg, .png",type:"file",ref:Y,style:{display:"none"},onChange:function(e){return z(e.target.files)}}),o.a.createElement("div",null,o.a.createElement("span",{className:"d-inline-block ".concat(I?"":"editable-field"),onClick:function(){return!I&&Y.current.click()},style:{position:"relative"}},P?o.a.createElement(Ot,null):null,o.a.createElement("img",{src:L.fileUrl?L.fileUrl.replace("http:","https:"):"/no-image.png",style:{height:"300px",width:"225px",cursor:I?"auto":"pointer",opacity:I?1:.3},alt:"movie poster"}),!I&&L.fileUrl&&o.a.createElement("i",{className:"fas fa-times delete-poster",title:"Delete movie poster",onClick:function(e){e.preventDefault(),e.stopPropagation(),window.confirm("Delete poster ?")&&B(function(e){e.fileUrl=""}).then(function(){return pt(b,"".concat(L.title," - Poster deleted"))})}}))),o.a.createElement("div",{className:"d-flex flex-wrap mt-1 mb-1"},f.map(function(e){return o.a.createElement(kt,{key:e._id,tag:e,lock:I,selected:L.tags.find(function(t){return t===e._id}),onAdd:function(){return B(function(t){t.tags.push(e._id)}).then(function(){return pt(b,"".concat(L.title," - Tag ").concat(e.label," added"))})},onDelete:function(){return B(function(t){t.tags=t.tags.filter(function(t){return t!==e._id})}).then(function(){return pt(b,"".concat(L.title," - Tag ").concat(e.label," deleted"))})}})}))),o.a.createElement("div",{className:"pl-4 d-flex flex-column",style:{flexGrow:1}},o.a.createElement("h1",{className:"text-center"},o.a.createElement(rt,{lock:I,value:L.title,placeholder:"Title",onChange:function(e){return B(function(t){t.title=e}).then(function(){return pt(b,"".concat(e," - Title updated"))})}})," ","-"," ",o.a.createElement(rt,{lock:I,value:L.productionYear,placeholder:"YYYY",type:"number",transform:function(e){return parseInt(e,10)},onChange:function(e){return B(function(t){t.productionYear=e}).then(function(){return pt(b,"".concat(L.title," - Production year updated"))})}})),o.a.createElement("div",{className:"text-center single-movie-subtitle mb-2"},o.a.createElement(ct,{lock:I,value:L.genre,placeholder:"Genre",items:h,onChange:function(e){return B(function(t){t.genre=e}).then(function(){return pt(b,"".concat(L.title," - Genre updated"))})}})),o.a.createElement("div",null,o.a.createElement(ot,{split:!0,lock:I,value:L.summary,style:{width:"100%"},placeholder:"Summary",rows:"7",onChange:function(e){return B(function(t){t.summary=e}).then(function(){return pt(b,"".concat(L.title," - Summary updated"))})}})))),o.a.createElement("div",null,"Film"===L.type?o.a.createElement(y,{seen:L.seen,onClick:function(){return B(function(e){e.seen=!e.seen}).then(function(){return pt(b,"".concat(L.title," - Seen updated"))})}}):void 0),o.a.createElement("div",{className:"text-center"},"Film"!==L.type?o.a.createElement(r.Fragment,null,o.a.createElement(jt.Provider,{value:{lock:I,movie:L}},o.a.createElement("div",null,L.seasons.map(function(e,t){return o.a.createElement(gt,{key:e._id,season:e,index:t,dragging:void 0!==N,onDragStart:function(){return w(t)},onDragOver:function(){t!==N&&(w(t),L.seasons=Object(ee.a)(L.seasons,function(e){var n=e[t];e[t]=e[N],e[N]=n}))},onDragEnd:function(){B().then(function(){return pt(b,"".concat(ut(t)," - Reordered"))}),w()},onProductionYearUpdate:function(){var e=Object(Ze.a)(Qe.a.mark(function e(n){var a,r,o;return Qe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(a=[],r=function(e){a.push(M(L.seasons[e],e,function(a){a.productionYear=n+(e-t)}))},o=t;o<L.seasons.length;o++)r(o);return e.next=5,Promise.all(a);case 5:pt(b,"Seasons production years updated");case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()})}))),I?void 0:o.a.createElement("div",{className:"form-inline d-block mt-1 mb-1"},o.a.createElement("input",{type:"number",className:"form-control",style:{width:"80px"},onChange:function(e){return d(parseInt(e.target.value,10))},onKeyDown:function(e){"Enter"===e.key&&W()},value:m}),o.a.createElement("button",{className:" ml-1 btn btn-primary",onClick:W},o.a.createElement("i",{className:"fas fa-plus",title:"Add seasons"}),"\xa0Add season"))):void 0))):o.a.createElement("h2",{className:"text-center mt-2"},o.a.createElement("i",{className:"fas fa-spinner fa-spin fa-2x"})))}),Ct=Symbol("LOADING"),Nt=Symbol("LOADED"),wt=function(e){if(e.ok)return e.json();throw new Error("Fetch fail")},St=F(function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={status:Ct,data:void 0},n.debounceFetch=Fe()(n.fetch,n.props.debounce||0,{leading:!1,trailing:!0}),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this.debounceFetch.cancel()}},{key:"fetch",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e,t=this;return fetch("".concat(this.props.endpoint),{headers:(e=this.props.user,{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e.token)})}).then(wt).then(function(e){t.setState({status:Nt,data:e}),t.props.onSuccess&&t.props.onSuccess(e)})})},{key:"componentDidMount",value:function(){this.debounceFetch()}},{key:"render",value:function(){return o.a.createElement(r.Fragment,null,this.props.children({status:this.state.status,data:this.state.data}))}}]),t}(r.Component)),Dt=function(){return o.a.createElement("div",{className:"text-center",style:{backgroundColor:"var(--movie-secondary)",color:"var(--movie-primary)",padding:"4px"}},o.a.createElement("h1",{className:"header"},o.a.createElement(g.a,{to:"/"},"Cinematheque")),o.a.createElement(St,{endpoint:"/api/movies?limit=0"},function(e){var t=e.data;return o.a.createElement("h6",null,t?t.count:0," movies/tvshows")}),o.a.createElement(g.a,{to:"/stats"},o.a.createElement("i",{className:"fas fa-chart-bar fa-3x",style:{top:"22px",right:"22px",position:"absolute",color:"#F1F7EE",cursor:"pointer"},title:"Show statistics"})))},It=(n(193),n(36)),At=n.n(It),_t=j(!1),Tt=function(e,t,n){return{types:e.map(function(e){return{name:e,count:0,genres:t.map(function(e){return{name:e,count:0,seen:0,unseen:0}})}}),tags:n.map(function(e){return{id:e._id,name:e.label,color:e.color,count:0}})}},Ft=Object(et.a)(function(e){var t=e.history,n=Object(r.useContext)(T),a=Object(r.useContext)(H),c=a.genres,i=a.types,s=a.tags,l=Object(r.useContext)(te).dispatch,u=Object(r.useState)(Tt(i,c,s)),m=Object(v.a)(u,2),d=m[0],p=m[1];return Object(r.useEffect)(function(){p(Tt(i,c,s)),function(e,t){e.forEach(function(e){return _t("types=".concat(e,"&limit=0"),n).then(function(t){return p(Object(ee.a)(function(n){n.types.find(function(t){return e===t.name}).count=t.count}))}).then(function(){return t.forEach(function(t){_t("types=".concat(e,"&genres=").concat(t,"&limit=0"),n).then(function(n){return p(Object(ee.a)(function(a){a.types.find(function(t){return e===t.name}).genres.find(function(e){return t===e.name}).count=n.count}))}),_t("types=".concat(e,"&genres=").concat(t,"&seen=true&limit=0"),n).then(function(n){return p(Object(ee.a)(function(a){a.types.find(function(t){return e===t.name}).genres.find(function(e){return t===e.name}).seen=n.count}))}),_t("types=".concat(e,"&genres=").concat(t,"&seen=false&limit=0"),n).then(function(n){return p(Object(ee.a)(function(a){a.types.find(function(t){return e===t.name}).genres.find(function(e){return t===e.name}).unseen=n.count}))})})})})}(i,c),function(e){e.forEach(function(e){return _t("tags=".concat(e._id,"&limit=0"),n).then(function(t){return p(Object(ee.a)(function(n){n.tags.find(function(t){return e._id===t.id}).count+=t.count}))})})}(s)},[i,c,s]),o.a.createElement("div",{className:"d-flex justify-content-around flex-wrap mb-4"},d.types.map(function(e,t){return o.a.createElement("div",{className:"card stat-card",key:t},o.a.createElement("div",{className:"card-body"},o.a.createElement("h5",{className:"card-title text-center"},e.count," ",e.name),o.a.createElement("div",null,At()(e.genres,["count"],["desc"]).map(function(t,n){return o.a.createElement(r.Fragment,{key:n},o.a.createElement("div",null," ",t.count," ",t.name," ( ",t.count?(100*t.seen/t.count).toFixed(2):0,"% seen)"," "),o.a.createElement("div",{className:"movie-progress"},o.a.createElement("div",{className:"progress-bar unseen",role:"progressbar",style:{width:"calc(20px + ".concat(100*t.unseen/At()(e.genres,["count"],["desc"])[0].count,"%)")}},t.unseen),t.count-t.unseen-t.seen?o.a.createElement("div",{className:"progress-bar pending",role:"progressbar",style:{width:"calc(20px + ".concat(100*(t.count-t.unseen-t.seen)/At()(e.genres,["count"],["desc"])[0].count,"%)")}},t.count-t.unseen-t.seen):void 0,o.a.createElement("div",{className:"progress-bar seen",role:"progressbar",style:{width:"calc(20px + ".concat(100*t.seen/At()(e.genres,["count"],["desc"])[0].count,"%)")}},t.seen)))}))))}),o.a.createElement("div",{className:"card stat-card stat-tags-card"},o.a.createElement("div",{className:"card-body align-content-center"},d.tags.map(function(e,n){return o.a.createElement("h5",{className:"text-center stat-tags-card-card mt-1",style:{cursor:"pointer"},key:n},o.a.createElement(G,{label:"".concat(e.count," ").concat(e.name),color:e.color,onClick:function(){l({type:"RESET_FILTERS"}),l({type:"FILTERS_CHANGED",payload:{name:"tags",value:[e.id]}}),t.push("/")}}))}))))}),Pt=(n(84),function(e){return Math.floor(Math.random()*Math.floor(e))}),Rt=function(){return"#".concat(Pt(256).toString(16).padStart(2,"0")).concat(Pt(256).toString(16).padStart(2,"0")).concat(Pt(256).toString(16).padStart(2,"0"))},Yt=function(e){var t=e.tag,n=e.onDelete,a=e.onUpdate,c=ft(!1),i=Object(v.a)(c,2),s=i[0],l=i[1],u=ht(t.color||""),m=Object(v.a)(u,2),d=m[0],p=m[1],f=ht(t.label||""),h=Object(v.a)(f,1)[0],b=Object(r.useContext)(T),g=Object(r.useContext)(H).tags;return o.a.createElement("div",{className:"mt-2 mb-2 d-flex",style:{overflow:"hidden"}},s?o.a.createElement("form",{className:"form-inline w-100"},o.a.createElement("input",Object.assign({type:"color",className:"form-control colorpicker"},d)),o.a.createElement("input",Object.assign({type:"text",className:"form-control ml-2",placeholder:"Label"},h)),o.a.createElement("button",{type:"button",className:"btn btn-info btn-sm ml-2",onClick:function(){p(Rt())}},o.a.createElement("i",{className:"fas fa-sync-alt"})),o.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm ml-2",onClick:function(){(function(e,t){return fetch("/api/tags/".concat(e._id),{method:"PUT",body:JSON.stringify(e),headers:M(t)}).then(B)})({_id:t._id,color:d.value,label:h.value},b).then(a).then(l)},disabled:!h.value||g.find(function(e){return e.label.toLowerCase()===h.value.toLowerCase()})},o.a.createElement("i",{className:"fas fa-check"})),o.a.createElement(G,{style:{marginLeft:"auto"},color:d.value,label:h.value||"Label"})):o.a.createElement(r.Fragment,null,o.a.createElement("div",null,o.a.createElement(G,Object.assign({},t,{big:!0}))),o.a.createElement("button",{type:"button",className:"btn btn-primary ml-2",onClick:l},o.a.createElement("i",{className:"fas fa-pencil-alt"})),o.a.createElement("button",{type:"button",className:"btn btn-danger ml-2",onClick:function(e){window.confirm("Delete tag ?")&&function(e,t){return fetch("/api/tags/".concat(e._id),{method:"DELETE",headers:M(t)}).then(B)}(t,b).then(n)}},o.a.createElement("i",{className:"fas fa-times"}))))},Lt=function(){var e=Object(r.useContext)(T),t=Object(r.useContext)(H),n=t.tags,a=(0,t.set)("tags"),c=ht(Rt()),i=Object(v.a)(c,2),s=i[0],l=i[1],u=ht(""),m=Object(v.a)(u,2),d=m[0],p=m[1];return o.a.createElement("div",{className:"container tags-card"},n.map(function(e,t){return o.a.createElement(Yt,{key:e._id,tag:e,onDelete:function(){return a(function(t){return t.filter(function(t){return t._id!==e._id})})},onUpdate:function(e){a(function(n){return Object(ee.a)(n,function(n){n[t]=e})})}})}),o.a.createElement("form",{className:"form-inline"},o.a.createElement("input",Object.assign({type:"color",className:"form-control colorpicker"},s)),o.a.createElement("input",Object.assign({type:"text",className:"form-control ml-2",placeholder:"Label"},d)),o.a.createElement("button",{type:"button",className:"btn btn-info btn-sm ml-2",onClick:function(){l(Rt())}},o.a.createElement("i",{className:"fas fa-sync-alt"})),o.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm ml-2",onClick:function(){(function(e,t){return fetch("/api/tags",{method:"POST",body:JSON.stringify(e),headers:M(t)}).then(B)})({label:d.value,color:s.value},e).then(function(e){return a(function(t){return Object(X.a)(t).concat([e])})}).then(function(e){l(Rt()),p("")})},disabled:!d.value||n.find(function(e){return e.label.toLowerCase()===d.value.toLowerCase()})},o.a.createElement("i",{className:"fas fa-check"})),o.a.createElement(G,{style:{marginLeft:"auto"},color:s.value,label:d.value||"Label"})))},Ut=(n(199),function(e){e.index;var t=e.notification,n=Object(r.useState)(!1),a=Object(v.a)(n,2),c=a[0],i=a[1],s=Object(r.useState)(!1),l=Object(v.a)(s,2),u=l[0],m=l[1],d=Object(r.useContext)(it).dispatch;return o.a.createElement("div",{className:"notification ".concat(t.type," ").concat(u?"out":"in"),onAnimationEnd:function(e){"bounceIn"===e.animationName?i(!0):"bounceOut"===e.animationName&&d({type:"CLOSE",payload:{id:t.id}})}},o.a.createElement("div",{className:"notification-content"},t.content),o.a.createElement("div",{className:"notification-progress-bar progress-bar-striped ".concat(c?"animate":""),style:u?{width:"0"}:{},onAnimationEnd:function(){return m(!0)}}))}),Mt=(n(200),function(){var e=Object(r.useContext)(it).notifications;return o.a.createElement("div",{className:"notification-list"},e.map(function(e,t){return o.a.createElement(Ut,{key:e.id,index:t,notification:e})}))}),Bt=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(r.Fragment,null,o.a.createElement(p.a,null,o.a.createElement(r.Fragment,null,o.a.createElement(Dt,null),o.a.createElement(Mt,null),o.a.createElement(f.a,{exact:!0,path:"/",component:qe}),o.a.createElement(f.a,{exact:!0,path:"/movie/:id",component:xt}),o.a.createElement(f.a,{exact:!0,path:"/stats",component:Ft}),o.a.createElement(f.a,{exact:!0,path:"/admin",component:Lt}))))}}]),t}(r.Component),Ht=F(function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={password:""},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,this.props.user.status===Y?o.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Login failed"):void 0,o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"password"},"Password"),o.a.createElement("input",{type:"text",className:"form-control",id:"password","aria-describedby":"password",placeholder:"Enter password",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})},onKeyDown:function(t){"Enter"===t.key&&e.props.user.login(e.state.password)}})),o.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return e.props.user.login(e.state.password)}},"Submit"))}}]),t}(r.Component));i.a.render(o.a.createElement(U,null,o.a.createElement(T.Consumer,null,function(e){var t=e.token;return t?o.a.createElement(J,{token:t},o.a.createElement(oe,null,o.a.createElement(lt,null,o.a.createElement(Bt,null)))):o.a.createElement(Ht,null)})),document.getElementById("root"))},84:function(e,t,n){},89:function(e,t,n){e.exports=n(201)},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){}},[[89,1,2]]]);
//# sourceMappingURL=main.5de0f127.chunk.js.map